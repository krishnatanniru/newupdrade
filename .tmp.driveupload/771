var C5=Object.defineProperty;var N5=(e,t,n)=>t in e?C5(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ey=(e,t,n)=>N5(e,typeof t!="symbol"?t+"":t,n);function s3(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var I0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qa(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Sy={exports:{}},Zd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bC;function _5(){if(bC)return Zd;bC=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,a){var l=null;if(a!==void 0&&(l=""+a),i.key!==void 0&&(l=""+i.key),"key"in i){a={};for(var f in i)f!=="key"&&(a[f]=i[f])}else a=i;return i=a.ref,{$$typeof:e,type:r,key:l,ref:i!==void 0?i:null,props:a}}return Zd.Fragment=t,Zd.jsx=n,Zd.jsxs=n,Zd}var wC;function T5(){return wC||(wC=1,Sy.exports=_5()),Sy.exports}var p=T5(),Ay={exports:{}},Nt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EC;function I5(){if(EC)return Nt;EC=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),E=Symbol.iterator;function C(ne){return ne===null||typeof ne!="object"?null:(ne=E&&ne[E]||ne["@@iterator"],typeof ne=="function"?ne:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,O={};function j(ne,re,he){this.props=ne,this.context=re,this.refs=O,this.updater=he||I}j.prototype.isReactComponent={},j.prototype.setState=function(ne,re){if(typeof ne!="object"&&typeof ne!="function"&&ne!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ne,re,"setState")},j.prototype.forceUpdate=function(ne){this.updater.enqueueForceUpdate(this,ne,"forceUpdate")};function U(){}U.prototype=j.prototype;function L(ne,re,he){this.props=ne,this.context=re,this.refs=O,this.updater=he||I}var G=L.prototype=new U;G.constructor=L,M(G,j.prototype),G.isPureReactComponent=!0;var V=Array.isArray;function z(){}var B={H:null,A:null,T:null,S:null},J=Object.prototype.hasOwnProperty;function W(ne,re,he){var se=he.ref;return{$$typeof:e,type:ne,key:re,ref:se!==void 0?se:null,props:he}}function Z(ne,re){return W(ne.type,re,ne.props)}function te(ne){return typeof ne=="object"&&ne!==null&&ne.$$typeof===e}function Y(ne){var re={"=":"=0",":":"=2"};return"$"+ne.replace(/[=:]/g,function(he){return re[he]})}var pe=/\/+/g;function Te(ne,re){return typeof ne=="object"&&ne!==null&&ne.key!=null?Y(""+ne.key):re.toString(36)}function le(ne){switch(ne.status){case"fulfilled":return ne.value;case"rejected":throw ne.reason;default:switch(typeof ne.status=="string"?ne.then(z,z):(ne.status="pending",ne.then(function(re){ne.status==="pending"&&(ne.status="fulfilled",ne.value=re)},function(re){ne.status==="pending"&&(ne.status="rejected",ne.reason=re)})),ne.status){case"fulfilled":return ne.value;case"rejected":throw ne.reason}}throw ne}function de(ne,re,he,se,ke){var ie=typeof ne;(ie==="undefined"||ie==="boolean")&&(ne=null);var ue=!1;if(ne===null)ue=!0;else switch(ie){case"bigint":case"string":case"number":ue=!0;break;case"object":switch(ne.$$typeof){case e:case t:ue=!0;break;case g:return ue=ne._init,de(ue(ne._payload),re,he,se,ke)}}if(ue)return ke=ke(ne),ue=se===""?"."+Te(ne,0):se,V(ke)?(he="",ue!=null&&(he=ue.replace(pe,"$&/")+"/"),de(ke,re,he,"",function(Je){return Je})):ke!=null&&(te(ke)&&(ke=Z(ke,he+(ke.key==null||ne&&ne.key===ke.key?"":(""+ke.key).replace(pe,"$&/")+"/")+ue)),re.push(ke)),1;ue=0;var qe=se===""?".":se+":";if(V(ne))for(var me=0;me<ne.length;me++)se=ne[me],ie=qe+Te(se,me),ue+=de(se,re,he,ie,ke);else if(me=C(ne),typeof me=="function")for(ne=me.call(ne),me=0;!(se=ne.next()).done;)se=se.value,ie=qe+Te(se,me++),ue+=de(se,re,he,ie,ke);else if(ie==="object"){if(typeof ne.then=="function")return de(le(ne),re,he,se,ke);throw re=String(ne),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(ne).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return ue}function ge(ne,re,he){if(ne==null)return ne;var se=[],ke=0;return de(ne,se,"","",function(ie){return re.call(he,ie,ke++)}),se}function De(ne){if(ne._status===-1){var re=ne._result;re=re(),re.then(function(he){(ne._status===0||ne._status===-1)&&(ne._status=1,ne._result=he)},function(he){(ne._status===0||ne._status===-1)&&(ne._status=2,ne._result=he)}),ne._status===-1&&(ne._status=0,ne._result=re)}if(ne._status===1)return ne._result.default;throw ne._result}var we=typeof reportError=="function"?reportError:function(ne){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ne=="object"&&ne!==null&&typeof ne.message=="string"?String(ne.message):String(ne),error:ne});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ne);return}console.error(ne)},$e={map:ge,forEach:function(ne,re,he){ge(ne,function(){re.apply(this,arguments)},he)},count:function(ne){var re=0;return ge(ne,function(){re++}),re},toArray:function(ne){return ge(ne,function(re){return re})||[]},only:function(ne){if(!te(ne))throw Error("React.Children.only expected to receive a single React element child.");return ne}};return Nt.Activity=y,Nt.Children=$e,Nt.Component=j,Nt.Fragment=n,Nt.Profiler=i,Nt.PureComponent=L,Nt.StrictMode=r,Nt.Suspense=h,Nt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,Nt.__COMPILER_RUNTIME={__proto__:null,c:function(ne){return B.H.useMemoCache(ne)}},Nt.cache=function(ne){return function(){return ne.apply(null,arguments)}},Nt.cacheSignal=function(){return null},Nt.cloneElement=function(ne,re,he){if(ne==null)throw Error("The argument must be a React element, but you passed "+ne+".");var se=M({},ne.props),ke=ne.key;if(re!=null)for(ie in re.key!==void 0&&(ke=""+re.key),re)!J.call(re,ie)||ie==="key"||ie==="__self"||ie==="__source"||ie==="ref"&&re.ref===void 0||(se[ie]=re[ie]);var ie=arguments.length-2;if(ie===1)se.children=he;else if(1<ie){for(var ue=Array(ie),qe=0;qe<ie;qe++)ue[qe]=arguments[qe+2];se.children=ue}return W(ne.type,ke,se)},Nt.createContext=function(ne){return ne={$$typeof:l,_currentValue:ne,_currentValue2:ne,_threadCount:0,Provider:null,Consumer:null},ne.Provider=ne,ne.Consumer={$$typeof:a,_context:ne},ne},Nt.createElement=function(ne,re,he){var se,ke={},ie=null;if(re!=null)for(se in re.key!==void 0&&(ie=""+re.key),re)J.call(re,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(ke[se]=re[se]);var ue=arguments.length-2;if(ue===1)ke.children=he;else if(1<ue){for(var qe=Array(ue),me=0;me<ue;me++)qe[me]=arguments[me+2];ke.children=qe}if(ne&&ne.defaultProps)for(se in ue=ne.defaultProps,ue)ke[se]===void 0&&(ke[se]=ue[se]);return W(ne,ie,ke)},Nt.createRef=function(){return{current:null}},Nt.forwardRef=function(ne){return{$$typeof:f,render:ne}},Nt.isValidElement=te,Nt.lazy=function(ne){return{$$typeof:g,_payload:{_status:-1,_result:ne},_init:De}},Nt.memo=function(ne,re){return{$$typeof:u,type:ne,compare:re===void 0?null:re}},Nt.startTransition=function(ne){var re=B.T,he={};B.T=he;try{var se=ne(),ke=B.S;ke!==null&&ke(he,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(z,we)}catch(ie){we(ie)}finally{re!==null&&he.types!==null&&(re.types=he.types),B.T=re}},Nt.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},Nt.use=function(ne){return B.H.use(ne)},Nt.useActionState=function(ne,re,he){return B.H.useActionState(ne,re,he)},Nt.useCallback=function(ne,re){return B.H.useCallback(ne,re)},Nt.useContext=function(ne){return B.H.useContext(ne)},Nt.useDebugValue=function(){},Nt.useDeferredValue=function(ne,re){return B.H.useDeferredValue(ne,re)},Nt.useEffect=function(ne,re){return B.H.useEffect(ne,re)},Nt.useEffectEvent=function(ne){return B.H.useEffectEvent(ne)},Nt.useId=function(){return B.H.useId()},Nt.useImperativeHandle=function(ne,re,he){return B.H.useImperativeHandle(ne,re,he)},Nt.useInsertionEffect=function(ne,re){return B.H.useInsertionEffect(ne,re)},Nt.useLayoutEffect=function(ne,re){return B.H.useLayoutEffect(ne,re)},Nt.useMemo=function(ne,re){return B.H.useMemo(ne,re)},Nt.useOptimistic=function(ne,re){return B.H.useOptimistic(ne,re)},Nt.useReducer=function(ne,re,he){return B.H.useReducer(ne,re,he)},Nt.useRef=function(ne){return B.H.useRef(ne)},Nt.useState=function(ne){return B.H.useState(ne)},Nt.useSyncExternalStore=function(ne,re,he){return B.H.useSyncExternalStore(ne,re,he)},Nt.useTransition=function(){return B.H.useTransition()},Nt.version="19.2.3",Nt}var SC;function $u(){return SC||(SC=1,Ay.exports=I5()),Ay.exports}var k=$u();const yt=Qa(k),R5=s3({__proto__:null,default:yt},[k]);var Cy={exports:{}},Qd={},Ny={exports:{}},_y={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AC;function M5(){return AC||(AC=1,(function(e){function t(de,ge){var De=de.length;de.push(ge);e:for(;0<De;){var we=De-1>>>1,$e=de[we];if(0<i($e,ge))de[we]=ge,de[De]=$e,De=we;else break e}}function n(de){return de.length===0?null:de[0]}function r(de){if(de.length===0)return null;var ge=de[0],De=de.pop();if(De!==ge){de[0]=De;e:for(var we=0,$e=de.length,ne=$e>>>1;we<ne;){var re=2*(we+1)-1,he=de[re],se=re+1,ke=de[se];if(0>i(he,De))se<$e&&0>i(ke,he)?(de[we]=ke,de[se]=De,we=se):(de[we]=he,de[re]=De,we=re);else if(se<$e&&0>i(ke,De))de[we]=ke,de[se]=De,we=se;else break e}}return ge}function i(de,ge){var De=de.sortIndex-ge.sortIndex;return De!==0?De:de.id-ge.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var l=Date,f=l.now();e.unstable_now=function(){return l.now()-f}}var h=[],u=[],g=1,y=null,E=3,C=!1,I=!1,M=!1,O=!1,j=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function G(de){for(var ge=n(u);ge!==null;){if(ge.callback===null)r(u);else if(ge.startTime<=de)r(u),ge.sortIndex=ge.expirationTime,t(h,ge);else break;ge=n(u)}}function V(de){if(M=!1,G(de),!I)if(n(h)!==null)I=!0,z||(z=!0,Y());else{var ge=n(u);ge!==null&&le(V,ge.startTime-de)}}var z=!1,B=-1,J=5,W=-1;function Z(){return O?!0:!(e.unstable_now()-W<J)}function te(){if(O=!1,z){var de=e.unstable_now();W=de;var ge=!0;try{e:{I=!1,M&&(M=!1,U(B),B=-1),C=!0;var De=E;try{t:{for(G(de),y=n(h);y!==null&&!(y.expirationTime>de&&Z());){var we=y.callback;if(typeof we=="function"){y.callback=null,E=y.priorityLevel;var $e=we(y.expirationTime<=de);if(de=e.unstable_now(),typeof $e=="function"){y.callback=$e,G(de),ge=!0;break t}y===n(h)&&r(h),G(de)}else r(h);y=n(h)}if(y!==null)ge=!0;else{var ne=n(u);ne!==null&&le(V,ne.startTime-de),ge=!1}}break e}finally{y=null,E=De,C=!1}ge=void 0}}finally{ge?Y():z=!1}}}var Y;if(typeof L=="function")Y=function(){L(te)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,Te=pe.port2;pe.port1.onmessage=te,Y=function(){Te.postMessage(null)}}else Y=function(){j(te,0)};function le(de,ge){B=j(function(){de(e.unstable_now())},ge)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(de){de.callback=null},e.unstable_forceFrameRate=function(de){0>de||125<de?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<de?Math.floor(1e3/de):5},e.unstable_getCurrentPriorityLevel=function(){return E},e.unstable_next=function(de){switch(E){case 1:case 2:case 3:var ge=3;break;default:ge=E}var De=E;E=ge;try{return de()}finally{E=De}},e.unstable_requestPaint=function(){O=!0},e.unstable_runWithPriority=function(de,ge){switch(de){case 1:case 2:case 3:case 4:case 5:break;default:de=3}var De=E;E=de;try{return ge()}finally{E=De}},e.unstable_scheduleCallback=function(de,ge,De){var we=e.unstable_now();switch(typeof De=="object"&&De!==null?(De=De.delay,De=typeof De=="number"&&0<De?we+De:we):De=we,de){case 1:var $e=-1;break;case 2:$e=250;break;case 5:$e=1073741823;break;case 4:$e=1e4;break;default:$e=5e3}return $e=De+$e,de={id:g++,callback:ge,priorityLevel:de,startTime:De,expirationTime:$e,sortIndex:-1},De>we?(de.sortIndex=De,t(u,de),n(h)===null&&de===n(u)&&(M?(U(B),B=-1):M=!0,le(V,De-we))):(de.sortIndex=$e,t(h,de),I||C||(I=!0,z||(z=!0,Y()))),de},e.unstable_shouldYield=Z,e.unstable_wrapCallback=function(de){var ge=E;return function(){var De=E;E=ge;try{return de.apply(this,arguments)}finally{E=De}}}})(_y)),_y}var CC;function O5(){return CC||(CC=1,Ny.exports=M5()),Ny.exports}var Ty={exports:{}},ai={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NC;function D5(){if(NC)return ai;NC=1;var e=$u();function t(h){var u="https://react.dev/errors/"+h;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)u+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+h+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(h,u,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:y==null?null:""+y,children:h,containerInfo:u,implementation:g}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(h,u){if(h==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return ai.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ai.createPortal=function(h,u){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return a(h,u,null,g)},ai.flushSync=function(h){var u=l.T,g=r.p;try{if(l.T=null,r.p=2,h)return h()}finally{l.T=u,r.p=g,r.d.f()}},ai.preconnect=function(h,u){typeof h=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,r.d.C(h,u))},ai.prefetchDNS=function(h){typeof h=="string"&&r.d.D(h)},ai.preinit=function(h,u){if(typeof h=="string"&&u&&typeof u.as=="string"){var g=u.as,y=f(g,u.crossOrigin),E=typeof u.integrity=="string"?u.integrity:void 0,C=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;g==="style"?r.d.S(h,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:y,integrity:E,fetchPriority:C}):g==="script"&&r.d.X(h,{crossOrigin:y,integrity:E,fetchPriority:C,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},ai.preinitModule=function(h,u){if(typeof h=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var g=f(u.as,u.crossOrigin);r.d.M(h,{crossOrigin:g,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&r.d.M(h)},ai.preload=function(h,u){if(typeof h=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var g=u.as,y=f(g,u.crossOrigin);r.d.L(h,g,{crossOrigin:y,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},ai.preloadModule=function(h,u){if(typeof h=="string")if(u){var g=f(u.as,u.crossOrigin);r.d.m(h,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:g,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else r.d.m(h)},ai.requestFormReset=function(h){r.d.r(h)},ai.unstable_batchedUpdates=function(h,u){return h(u)},ai.useFormState=function(h,u,g){return l.H.useFormState(h,u,g)},ai.useFormStatus=function(){return l.H.useHostTransitionStatus()},ai.version="19.2.3",ai}var _C;function o3(){if(_C)return Ty.exports;_C=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Ty.exports=D5(),Ty.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TC;function k5(){if(TC)return Qd;TC=1;var e=O5(),t=$u(),n=o3();function r(s){var c="https://react.dev/errors/"+s;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)c+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+s+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var c=s,x=s;if(s.alternate)for(;c.return;)c=c.return;else{s=c;do c=s,(c.flags&4098)!==0&&(x=c.return),s=c.return;while(s)}return c.tag===3?x:null}function l(s){if(s.tag===13){var c=s.memoizedState;if(c===null&&(s=s.alternate,s!==null&&(c=s.memoizedState)),c!==null)return c.dehydrated}return null}function f(s){if(s.tag===31){var c=s.memoizedState;if(c===null&&(s=s.alternate,s!==null&&(c=s.memoizedState)),c!==null)return c.dehydrated}return null}function h(s){if(a(s)!==s)throw Error(r(188))}function u(s){var c=s.alternate;if(!c){if(c=a(s),c===null)throw Error(r(188));return c!==s?null:s}for(var x=s,w=c;;){var T=x.return;if(T===null)break;var D=T.alternate;if(D===null){if(w=T.return,w!==null){x=w;continue}break}if(T.child===D.child){for(D=T.child;D;){if(D===x)return h(T),s;if(D===w)return h(T),c;D=D.sibling}throw Error(r(188))}if(x.return!==w.return)x=T,w=D;else{for(var H=!1,X=T.child;X;){if(X===x){H=!0,x=T,w=D;break}if(X===w){H=!0,w=T,x=D;break}X=X.sibling}if(!H){for(X=D.child;X;){if(X===x){H=!0,x=D,w=T;break}if(X===w){H=!0,w=D,x=T;break}X=X.sibling}if(!H)throw Error(r(189))}}if(x.alternate!==w)throw Error(r(190))}if(x.tag!==3)throw Error(r(188));return x.stateNode.current===x?s:c}function g(s){var c=s.tag;if(c===5||c===26||c===27||c===6)return s;for(s=s.child;s!==null;){if(c=g(s),c!==null)return c;s=s.sibling}return null}var y=Object.assign,E=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),U=Symbol.for("react.consumer"),L=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),W=Symbol.for("react.activity"),Z=Symbol.for("react.memo_cache_sentinel"),te=Symbol.iterator;function Y(s){return s===null||typeof s!="object"?null:(s=te&&s[te]||s["@@iterator"],typeof s=="function"?s:null)}var pe=Symbol.for("react.client.reference");function Te(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===pe?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case M:return"Fragment";case j:return"Profiler";case O:return"StrictMode";case V:return"Suspense";case z:return"SuspenseList";case W:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case I:return"Portal";case L:return s.displayName||"Context";case U:return(s._context.displayName||"Context")+".Consumer";case G:var c=s.render;return s=s.displayName,s||(s=c.displayName||c.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case B:return c=s.displayName||null,c!==null?c:Te(s.type)||"Memo";case J:c=s._payload,s=s._init;try{return Te(s(c))}catch{}}return null}var le=Array.isArray,de=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,De={pending:!1,data:null,method:null,action:null},we=[],$e=-1;function ne(s){return{current:s}}function re(s){0>$e||(s.current=we[$e],we[$e]=null,$e--)}function he(s,c){$e++,we[$e]=s.current,s.current=c}var se=ne(null),ke=ne(null),ie=ne(null),ue=ne(null);function qe(s,c){switch(he(ie,c),he(ke,s),he(se,null),c.nodeType){case 9:case 11:s=(s=c.documentElement)&&(s=s.namespaceURI)?G2(s):0;break;default:if(s=c.tagName,c=c.namespaceURI)c=G2(c),s=V2(c,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}re(se),he(se,s)}function me(){re(se),re(ke),re(ie)}function Je(s){s.memoizedState!==null&&he(ue,s);var c=se.current,x=V2(c,s.type);c!==x&&(he(ke,s),he(se,x))}function Qe(s){ke.current===s&&(re(se),re(ke)),ue.current===s&&(re(ue),Wd._currentValue=De)}var Ue,ft;function Et(s){if(Ue===void 0)try{throw Error()}catch(x){var c=x.stack.trim().match(/\n( *(at )?)/);Ue=c&&c[1]||"",ft=-1<x.stack.indexOf(`
    at`)?" (<anonymous>)":-1<x.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ue+s+ft}var jt=!1;function gn(s,c){if(!s||jt)return"";jt=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var w={DetermineComponentFrameRoot:function(){try{if(c){var Le=function(){throw Error()};if(Object.defineProperty(Le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Le,[])}catch(Re){var Ce=Re}Reflect.construct(s,[],Le)}else{try{Le.call()}catch(Re){Ce=Re}s.call(Le.prototype)}}else{try{throw Error()}catch(Re){Ce=Re}(Le=s())&&typeof Le.catch=="function"&&Le.catch(function(){})}}catch(Re){if(Re&&Ce&&typeof Re.stack=="string")return[Re.stack,Ce.stack]}return[null,null]}};w.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var T=Object.getOwnPropertyDescriptor(w.DetermineComponentFrameRoot,"name");T&&T.configurable&&Object.defineProperty(w.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var D=w.DetermineComponentFrameRoot(),H=D[0],X=D[1];if(H&&X){var ae=H.split(`
`),Ae=X.split(`
`);for(T=w=0;w<ae.length&&!ae[w].includes("DetermineComponentFrameRoot");)w++;for(;T<Ae.length&&!Ae[T].includes("DetermineComponentFrameRoot");)T++;if(w===ae.length||T===Ae.length)for(w=ae.length-1,T=Ae.length-1;1<=w&&0<=T&&ae[w]!==Ae[T];)T--;for(;1<=w&&0<=T;w--,T--)if(ae[w]!==Ae[T]){if(w!==1||T!==1)do if(w--,T--,0>T||ae[w]!==Ae[T]){var Me=`
`+ae[w].replace(" at new "," at ");return s.displayName&&Me.includes("<anonymous>")&&(Me=Me.replace("<anonymous>",s.displayName)),Me}while(1<=w&&0<=T);break}}}finally{jt=!1,Error.prepareStackTrace=x}return(x=s?s.displayName||s.name:"")?Et(x):""}function nn(s,c){switch(s.tag){case 26:case 27:case 5:return Et(s.type);case 16:return Et("Lazy");case 13:return s.child!==c&&c!==null?Et("Suspense Fallback"):Et("Suspense");case 19:return Et("SuspenseList");case 0:case 15:return gn(s.type,!1);case 11:return gn(s.type.render,!1);case 1:return gn(s.type,!0);case 31:return Et("Activity");default:return""}}function Ft(s){try{var c="",x=null;do c+=nn(s,x),x=s,s=s.return;while(s);return c}catch(w){return`
Error generating stack: `+w.message+`
`+w.stack}}var Rt=Object.prototype.hasOwnProperty,sa=e.unstable_scheduleCallback,Ze=e.unstable_cancelCallback,rs=e.unstable_shouldYield,Ke=e.unstable_requestPaint,_t=e.unstable_now,Br=e.unstable_getCurrentPriorityLevel,Ur=e.unstable_ImmediatePriority,_l=e.unstable_UserBlockingPriority,di=e.unstable_NormalPriority,Cr=e.unstable_LowPriority,Tl=e.unstable_IdlePriority,is=e.log,cd=e.unstable_setDisableYieldValue,xn=null,ze=null;function ln(s){if(typeof is=="function"&&cd(s),ze&&typeof ze.setStrictMode=="function")try{ze.setStrictMode(xn,s)}catch{}}var Tt=Math.clz32?Math.clz32:Il,Sn=Math.log,As=Math.LN2;function Il(s){return s>>>=0,s===0?32:31-(Sn(s)/As|0)|0}var Cs=256,Lt=262144,Nr=4194304;function oa(s){var c=s&42;if(c!==0)return c;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Ns(s,c,x){var w=s.pendingLanes;if(w===0)return 0;var T=0,D=s.suspendedLanes,H=s.pingedLanes;s=s.warmLanes;var X=w&134217727;return X!==0?(w=X&~D,w!==0?T=oa(w):(H&=X,H!==0?T=oa(H):x||(x=X&~s,x!==0&&(T=oa(x))))):(X=w&~D,X!==0?T=oa(X):H!==0?T=oa(H):x||(x=w&~s,x!==0&&(T=oa(x)))),T===0?0:c!==0&&c!==T&&(c&D)===0&&(D=T&-T,x=c&-c,D>=x||D===32&&(x&4194048)!==0)?c:T}function hr(s,c){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&c)===0}function Rl(s,c){switch(s){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sr(){var s=Nr;return Nr<<=1,(Nr&62914560)===0&&(Nr=4194304),s}function la(s){for(var c=[],x=0;31>x;x++)c.push(s);return c}function ve(s,c){s.pendingLanes|=c,c!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function xe(s,c,x,w,T,D){var H=s.pendingLanes;s.pendingLanes=x,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=x,s.entangledLanes&=x,s.errorRecoveryDisabledLanes&=x,s.shellSuspendCounter=0;var X=s.entanglements,ae=s.expirationTimes,Ae=s.hiddenUpdates;for(x=H&~x;0<x;){var Me=31-Tt(x),Le=1<<Me;X[Me]=0,ae[Me]=-1;var Ce=Ae[Me];if(Ce!==null)for(Ae[Me]=null,Me=0;Me<Ce.length;Me++){var Re=Ce[Me];Re!==null&&(Re.lane&=-536870913)}x&=~Le}w!==0&&je(s,w,0),D!==0&&T===0&&s.tag!==0&&(s.suspendedLanes|=D&~(H&~c))}function je(s,c,x){s.pendingLanes|=c,s.suspendedLanes&=~c;var w=31-Tt(c);s.entangledLanes|=c,s.entanglements[w]=s.entanglements[w]|1073741824|x&261930}function Ye(s,c){var x=s.entangledLanes|=c;for(s=s.entanglements;x;){var w=31-Tt(x),T=1<<w;T&c|s[w]&c&&(s[w]|=c),x&=~T}}function tt(s,c){var x=c&-c;return x=(x&42)!==0?1:bt(x),(x&(s.suspendedLanes|c))!==0?0:x}function bt(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function kt(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function St(){var s=ge.p;return s!==0?s:(s=window.event,s===void 0?32:hC(s.type))}function We(s,c){var x=ge.p;try{return ge.p=s,c()}finally{ge.p=x}}var Bt=Math.random().toString(36).slice(2),Ut="__reactFiber$"+Bt,ct="__reactProps$"+Bt,or="__reactContainer$"+Bt,Fr="__reactEvents$"+Bt,Hr="__reactListeners$"+Bt,Kn="__reactHandles$"+Bt,Co="__reactResources$"+Bt,Oa="__reactMarker$"+Bt;function Ei(s){delete s[Ut],delete s[ct],delete s[Fr],delete s[Hr],delete s[Kn]}function Xn(s){var c=s[Ut];if(c)return c;for(var x=s.parentNode;x;){if(c=x[or]||x[Ut]){if(x=c.alternate,c.child!==null||x!==null&&x.child!==null)for(s=J2(s);s!==null;){if(x=s[Ut])return x;s=J2(s)}return c}s=x,x=s.parentNode}return null}function rn(s){if(s=s[Ut]||s[or]){var c=s.tag;if(c===5||c===6||c===13||c===31||c===26||c===27||c===3)return s}return null}function No(s){var c=s.tag;if(c===5||c===26||c===27||c===6)return s.stateNode;throw Error(r(33))}function fi(s){var c=s[Co];return c||(c=s[Co]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Jn(s){s[Oa]=!0}var Be=new Set,ph={};function cn(s,c){Pi(s,c),Pi(s+"Capture",c)}function Pi(s,c){for(ph[s]=c,s=0;s<c.length;s++)Be.add(c[s])}var Tg=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xt={},Kt={};function Ht(s){return Rt.call(Kt,s)?!0:Rt.call(Xt,s)?!1:Tg.test(s)?Kt[s]=!0:(Xt[s]=!0,!1)}function _o(s,c,x){if(Ht(c))if(x===null)s.removeAttribute(c);else{switch(typeof x){case"undefined":case"function":case"symbol":s.removeAttribute(c);return;case"boolean":var w=c.toLowerCase().slice(0,5);if(w!=="data-"&&w!=="aria-"){s.removeAttribute(c);return}}s.setAttribute(c,""+x)}}function To(s,c,x){if(x===null)s.removeAttribute(c);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(c);return}s.setAttribute(c,""+x)}}function ji(s,c,x,w){if(w===null)s.removeAttribute(x);else{switch(typeof w){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(x);return}s.setAttributeNS(c,x,""+w)}}function Jt(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Da(s){var c=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Ig(s,c,x){var w=Object.getOwnPropertyDescriptor(s.constructor.prototype,c);if(!s.hasOwnProperty(c)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var T=w.get,D=w.set;return Object.defineProperty(s,c,{configurable:!0,get:function(){return T.call(this)},set:function(H){x=""+H,D.call(this,H)}}),Object.defineProperty(s,c,{enumerable:w.enumerable}),{getValue:function(){return x},setValue:function(H){x=""+H},stopTracking:function(){s._valueTracker=null,delete s[c]}}}}function On(s){if(!s._valueTracker){var c=Da(s)?"checked":"value";s._valueTracker=Ig(s,c,""+s[c])}}function ka(s){if(!s)return!1;var c=s._valueTracker;if(!c)return!0;var x=c.getValue(),w="";return s&&(w=Da(s)?s.checked?"true":"false":s.value),s=w,s!==x?(c.setValue(s),!0):!1}function Tc(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Io=/[\n"\\]/g;function Pt(s){return s.replace(Io,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function pr(s,c,x,w,T,D,H,X){s.name="",H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"?s.type=H:s.removeAttribute("type"),c!=null?H==="number"?(c===0&&s.value===""||s.value!=c)&&(s.value=""+Jt(c)):s.value!==""+Jt(c)&&(s.value=""+Jt(c)):H!=="submit"&&H!=="reset"||s.removeAttribute("value"),c!=null?Q(s,H,Jt(c)):x!=null?Q(s,H,Jt(x)):w!=null&&s.removeAttribute("value"),T==null&&D!=null&&(s.defaultChecked=!!D),T!=null&&(s.checked=T&&typeof T!="function"&&typeof T!="symbol"),X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"?s.name=""+Jt(X):s.removeAttribute("name")}function Ee(s,c,x,w,T,D,H,X){if(D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(s.type=D),c!=null||x!=null){if(!(D!=="submit"&&D!=="reset"||c!=null)){On(s);return}x=x!=null?""+Jt(x):"",c=c!=null?""+Jt(c):x,X||c===s.value||(s.value=c),s.defaultValue=c}w=w??T,w=typeof w!="function"&&typeof w!="symbol"&&!!w,s.checked=X?s.checked:!!w,s.defaultChecked=!!w,H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"&&(s.name=H),On(s)}function Q(s,c,x){c==="number"&&Tc(s.ownerDocument)===s||s.defaultValue===""+x||(s.defaultValue=""+x)}function it(s,c,x,w){if(s=s.options,c){c={};for(var T=0;T<x.length;T++)c["$"+x[T]]=!0;for(x=0;x<s.length;x++)T=c.hasOwnProperty("$"+s[x].value),s[x].selected!==T&&(s[x].selected=T),T&&w&&(s[x].defaultSelected=!0)}else{for(x=""+Jt(x),c=null,T=0;T<s.length;T++){if(s[T].value===x){s[T].selected=!0,w&&(s[T].defaultSelected=!0);return}c!==null||s[T].disabled||(c=s[T])}c!==null&&(c.selected=!0)}}function lr(s,c,x){if(c!=null&&(c=""+Jt(c),c!==s.value&&(s.value=c),x==null)){s.defaultValue!==c&&(s.defaultValue=c);return}s.defaultValue=x!=null?""+Jt(x):""}function hi(s,c,x,w){if(c==null){if(w!=null){if(x!=null)throw Error(r(92));if(le(w)){if(1<w.length)throw Error(r(93));w=w[0]}x=w}x==null&&(x=""),c=x}x=Jt(c),s.defaultValue=x,w=s.textContent,w===x&&w!==""&&w!==null&&(s.value=w),On(s)}function Ro(s,c){if(c){var x=s.firstChild;if(x&&x===s.lastChild&&x.nodeType===3){x.nodeValue=c;return}}s.textContent=c}var ud=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function pi(s,c,x){var w=c.indexOf("--")===0;x==null||typeof x=="boolean"||x===""?w?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="":w?s.setProperty(c,x):typeof x!="number"||x===0||ud.has(c)?c==="float"?s.cssFloat=x:s[c]=(""+x).trim():s[c]=x+"px"}function ut(s,c,x){if(c!=null&&typeof c!="object")throw Error(r(62));if(s=s.style,x!=null){for(var w in x)!x.hasOwnProperty(w)||c!=null&&c.hasOwnProperty(w)||(w.indexOf("--")===0?s.setProperty(w,""):w==="float"?s.cssFloat="":s[w]="");for(var T in c)w=c[T],c.hasOwnProperty(T)&&x[T]!==w&&pi(s,T,w)}else for(var D in c)c.hasOwnProperty(D)&&pi(s,D,c[D])}function An(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Rg=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Mo(s){return Rg.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Si(){}var Ml=null;function dd(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Dn=null,ca=null;function Pa(s){var c=rn(s);if(c&&(s=c.stateNode)){var x=s[ct]||null;e:switch(s=c.stateNode,c.type){case"input":if(pr(s,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name),c=x.name,x.type==="radio"&&c!=null){for(x=s;x.parentNode;)x=x.parentNode;for(x=x.querySelectorAll('input[name="'+Pt(""+c)+'"][type="radio"]'),c=0;c<x.length;c++){var w=x[c];if(w!==s&&w.form===s.form){var T=w[ct]||null;if(!T)throw Error(r(90));pr(w,T.value,T.defaultValue,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name)}}for(c=0;c<x.length;c++)w=x[c],w.form===s.form&&ka(w)}break e;case"textarea":lr(s,x.value,x.defaultValue);break e;case"select":c=x.value,c!=null&&it(s,!!x.multiple,c,!1)}}}var ht=!1;function gh(s,c,x){if(ht)return s(c,x);ht=!0;try{var w=s(c);return w}finally{if(ht=!1,(Dn!==null||ca!==null)&&(o0(),Dn&&(c=Dn,s=ca,ca=Dn=null,Pa(c),s)))for(c=0;c<s.length;c++)Pa(s[c])}}function wt(s,c){var x=s.stateNode;if(x===null)return null;var w=x[ct]||null;if(w===null)return null;x=w[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(s=s.type,w=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!w;break e;default:s=!1}if(s)return null;if(x&&typeof x!="function")throw Error(r(231,c,typeof x));return x}var Cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fd=!1;if(Cn)try{var _s={};Object.defineProperty(_s,"passive",{get:function(){fd=!0}}),window.addEventListener("test",_s,_s),window.removeEventListener("test",_s,_s)}catch{fd=!1}var ja=null,La=null,Ic=null;function Oo(){if(Ic)return Ic;var s,c=La,x=c.length,w,T="value"in ja?ja.value:ja.textContent,D=T.length;for(s=0;s<x&&c[s]===T[s];s++);var H=x-s;for(w=1;w<=H&&c[x-w]===T[D-w];w++);return Ic=T.slice(s,1<w?1-w:void 0)}function as(s){var c=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&c===13&&(s=13)):s=c,s===10&&(s=13),32<=s||s===13?s:0}function ss(){return!0}function hd(){return!1}function mr(s){function c(x,w,T,D,H){this._reactName=x,this._targetInst=T,this.type=w,this.nativeEvent=D,this.target=H,this.currentTarget=null;for(var X in s)s.hasOwnProperty(X)&&(x=s[X],this[X]=x?x(D):D[X]);return this.isDefaultPrevented=(D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1)?ss:hd,this.isPropagationStopped=hd,this}return y(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var x=this.nativeEvent;x&&(x.preventDefault?x.preventDefault():typeof x.returnValue!="unknown"&&(x.returnValue=!1),this.isDefaultPrevented=ss)},stopPropagation:function(){var x=this.nativeEvent;x&&(x.stopPropagation?x.stopPropagation():typeof x.cancelBubble!="unknown"&&(x.cancelBubble=!0),this.isPropagationStopped=ss)},persist:function(){},isPersistent:ss}),c}var Li={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_r=mr(Li),Do=y({},Li,{view:0,detail:0}),xh=mr(Do),Rc,pd,Ol,Mc=y({},Do,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dl,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Ol&&(Ol&&s.type==="mousemove"?(Rc=s.screenX-Ol.screenX,pd=s.screenY-Ol.screenY):pd=Rc=0,Ol=s),Rc)},movementY:function(s){return"movementY"in s?s.movementY:pd}}),an=mr(Mc),yh=y({},Mc,{dataTransfer:0}),Oc=mr(yh),os=y({},Do,{relatedTarget:0}),md=mr(os),Ie=y({},Li,{animationName:0,elapsedTime:0,pseudoElement:0}),Mt=mr(Ie),Tr=y({},Li,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Dc=mr(Tr),vh=y({},Li,{data:0}),bh=mr(vh),Mg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Og={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cr(s){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(s):(s=gd[s])?!!c[s]:!1}function Dl(){return cr}var Fn=y({},Do,{key:function(s){if(s.key){var c=Mg[s.key]||s.key;if(c!=="Unidentified")return c}return s.type==="keypress"?(s=as(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Og[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dl,charCode:function(s){return s.type==="keypress"?as(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?as(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),kc=mr(Fn),Ts=y({},Mc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),un=mr(Ts),pt=y({},Do,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dl}),Dg=mr(pt),Nn=y({},Li,{propertyName:0,elapsedTime:0,pseudoElement:0}),Is=mr(Nn),ko=y({},Mc,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),kg=mr(ko),ua=y({},Li,{newState:0,oldState:0}),xd=mr(ua),wh=[9,13,27,32],kl=Cn&&"CompositionEvent"in window,Po=null;Cn&&"documentMode"in document&&(Po=document.documentMode);var Eh=Cn&&"TextEvent"in window&&!Po,Sh=Cn&&(!kl||Po&&8<Po&&11>=Po),Rs=" ",Pc=!1;function Ah(s,c){switch(s){case"keyup":return wh.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jo(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Lo=!1;function ls(s,c){switch(s){case"compositionend":return jo(c);case"keypress":return c.which!==32?null:(Pc=!0,Rs);case"textInput":return s=c.data,s===Rs&&Pc?null:s;default:return null}}function jc(s,c){if(Lo)return s==="compositionend"||!kl&&Ah(s,c)?(s=Oo(),Ic=La=ja=null,Lo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Sh&&c.locale!=="ko"?null:c.data;default:return null}}var Ai={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yd(s){var c=s&&s.nodeName&&s.nodeName.toLowerCase();return c==="input"?!!Ai[s.type]:c==="textarea"}function Bi(s,c,x,w){Dn?ca?ca.push(w):ca=[w]:Dn=w,c=p0(c,"onChange"),0<c.length&&(x=new _r("onChange","change",null,x,w),s.push({event:x,listeners:c}))}var Pl=null,Ms=null;function Pg(s){L2(s,0)}function jl(s){var c=No(s);if(ka(c))return s}function Ui(s,c){if(s==="change")return c}var Ch=!1;if(Cn){var Ll;if(Cn){var Os="oninput"in document;if(!Os){var qt=document.createElement("div");qt.setAttribute("oninput","return;"),Os=typeof qt.oninput=="function"}Ll=Os}else Ll=!1;Ch=Ll&&(!document.documentMode||9<document.documentMode)}function Bl(){Pl&&(Pl.detachEvent("onpropertychange",q),Ms=Pl=null)}function q(s){if(s.propertyName==="value"&&jl(Ms)){var c=[];Bi(c,Ms,s,dd(s)),gh(Pg,c)}}function o(s,c,x){s==="focusin"?(Bl(),Pl=c,Ms=x,Pl.attachEvent("onpropertychange",q)):s==="focusout"&&Bl()}function d(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return jl(Ms)}function m(s,c){if(s==="click")return jl(c)}function v(s,c){if(s==="input"||s==="change")return jl(c)}function b(s,c){return s===c&&(s!==0||1/s===1/c)||s!==s&&c!==c}var S=typeof Object.is=="function"?Object.is:b;function N(s,c){if(S(s,c))return!0;if(typeof s!="object"||s===null||typeof c!="object"||c===null)return!1;var x=Object.keys(s),w=Object.keys(c);if(x.length!==w.length)return!1;for(w=0;w<x.length;w++){var T=x[w];if(!Rt.call(c,T)||!S(s[T],c[T]))return!1}return!0}function R(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function P(s,c){var x=R(s);s=0;for(var w;x;){if(x.nodeType===3){if(w=s+x.textContent.length,s<=c&&w>=c)return{node:x,offset:c-s};s=w}e:{for(;x;){if(x.nextSibling){x=x.nextSibling;break e}x=x.parentNode}x=void 0}x=R(x)}}function F(s,c){return s&&c?s===c?!0:s&&s.nodeType===3?!1:c&&c.nodeType===3?F(s,c.parentNode):"contains"in s?s.contains(c):s.compareDocumentPosition?!!(s.compareDocumentPosition(c)&16):!1:!1}function $(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var c=Tc(s.document);c instanceof s.HTMLIFrameElement;){try{var x=typeof c.contentWindow.location.href=="string"}catch{x=!1}if(x)s=c.contentWindow;else break;c=Tc(s.document)}return c}function K(s){var c=s&&s.nodeName&&s.nodeName.toLowerCase();return c&&(c==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||c==="textarea"||s.contentEditable==="true")}var ee=Cn&&"documentMode"in document&&11>=document.documentMode,oe=null,ce=null,be=null,_e=!1;function Ge(s,c,x){var w=x.window===x?x.document:x.nodeType===9?x:x.ownerDocument;_e||oe==null||oe!==Tc(w)||(w=oe,"selectionStart"in w&&K(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),be&&N(be,w)||(be=w,w=p0(ce,"onSelect"),0<w.length&&(c=new _r("onSelect","select",null,c,x),s.push({event:c,listeners:w}),c.target=oe)))}function He(s,c){var x={};return x[s.toLowerCase()]=c.toLowerCase(),x["Webkit"+s]="webkit"+c,x["Moz"+s]="moz"+c,x}var Fe={animationend:He("Animation","AnimationEnd"),animationiteration:He("Animation","AnimationIteration"),animationstart:He("Animation","AnimationStart"),transitionrun:He("Transition","TransitionRun"),transitionstart:He("Transition","TransitionStart"),transitioncancel:He("Transition","TransitionCancel"),transitionend:He("Transition","TransitionEnd")},Dt={},At={};Cn&&(At=document.createElement("div").style,"AnimationEvent"in window||(delete Fe.animationend.animation,delete Fe.animationiteration.animation,delete Fe.animationstart.animation),"TransitionEvent"in window||delete Fe.transitionend.transition);function Zn(s){if(Dt[s])return Dt[s];if(!Fe[s])return s;var c=Fe[s],x;for(x in c)if(c.hasOwnProperty(x)&&x in At)return Dt[s]=c[x];return s}var Ci=Zn("animationend"),Kr=Zn("animationiteration"),dn=Zn("animationstart"),Ir=Zn("transitionrun"),mi=Zn("transitionstart"),Bo=Zn("transitioncancel"),Ds=Zn("transitionend"),Nh=new Map,vd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");vd.push("scrollEnd");function Ba(s,c){Nh.set(s,c),cn(c,[s])}var _h=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},da=[],Lc=0,jg=0;function Th(){for(var s=Lc,c=jg=Lc=0;c<s;){var x=da[c];da[c++]=null;var w=da[c];da[c++]=null;var T=da[c];da[c++]=null;var D=da[c];if(da[c++]=null,w!==null&&T!==null){var H=w.pending;H===null?T.next=T:(T.next=H.next,H.next=T),w.pending=T}D!==0&&yS(x,T,D)}}function Ih(s,c,x,w){da[Lc++]=s,da[Lc++]=c,da[Lc++]=x,da[Lc++]=w,jg|=w,s.lanes|=w,s=s.alternate,s!==null&&(s.lanes|=w)}function Lg(s,c,x,w){return Ih(s,c,x,w),Rh(s)}function Ul(s,c){return Ih(s,null,null,c),Rh(s)}function yS(s,c,x){s.lanes|=x;var w=s.alternate;w!==null&&(w.lanes|=x);for(var T=!1,D=s.return;D!==null;)D.childLanes|=x,w=D.alternate,w!==null&&(w.childLanes|=x),D.tag===22&&(s=D.stateNode,s===null||s._visibility&1||(T=!0)),s=D,D=D.return;return s.tag===3?(D=s.stateNode,T&&c!==null&&(T=31-Tt(x),s=D.hiddenUpdates,w=s[T],w===null?s[T]=[c]:w.push(c),c.lane=x|536870912),D):null}function Rh(s){if(50<Hd)throw Hd=0,$x=null,Error(r(185));for(var c=s.return;c!==null;)s=c,c=s.return;return s.tag===3?s.stateNode:null}var Bc={};function l6(s,c,x,w){this.tag=s,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fi(s,c,x,w){return new l6(s,c,x,w)}function Bg(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ks(s,c){var x=s.alternate;return x===null?(x=Fi(s.tag,c,s.key,s.mode),x.elementType=s.elementType,x.type=s.type,x.stateNode=s.stateNode,x.alternate=s,s.alternate=x):(x.pendingProps=c,x.type=s.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=s.flags&65011712,x.childLanes=s.childLanes,x.lanes=s.lanes,x.child=s.child,x.memoizedProps=s.memoizedProps,x.memoizedState=s.memoizedState,x.updateQueue=s.updateQueue,c=s.dependencies,x.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},x.sibling=s.sibling,x.index=s.index,x.ref=s.ref,x.refCleanup=s.refCleanup,x}function vS(s,c){s.flags&=65011714;var x=s.alternate;return x===null?(s.childLanes=0,s.lanes=c,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=x.childLanes,s.lanes=x.lanes,s.child=x.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=x.memoizedProps,s.memoizedState=x.memoizedState,s.updateQueue=x.updateQueue,s.type=x.type,c=x.dependencies,s.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),s}function Mh(s,c,x,w,T,D){var H=0;if(w=s,typeof s=="function")Bg(s)&&(H=1);else if(typeof s=="string")H=h5(s,x,se.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case W:return s=Fi(31,x,c,T),s.elementType=W,s.lanes=D,s;case M:return Fl(x.children,T,D,c);case O:H=8,T|=24;break;case j:return s=Fi(12,x,c,T|2),s.elementType=j,s.lanes=D,s;case V:return s=Fi(13,x,c,T),s.elementType=V,s.lanes=D,s;case z:return s=Fi(19,x,c,T),s.elementType=z,s.lanes=D,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case L:H=10;break e;case U:H=9;break e;case G:H=11;break e;case B:H=14;break e;case J:H=16,w=null;break e}H=29,x=Error(r(130,s===null?"null":typeof s,"")),w=null}return c=Fi(H,x,c,T),c.elementType=s,c.type=w,c.lanes=D,c}function Fl(s,c,x,w){return s=Fi(7,s,w,c),s.lanes=x,s}function Ug(s,c,x){return s=Fi(6,s,null,c),s.lanes=x,s}function bS(s){var c=Fi(18,null,null,0);return c.stateNode=s,c}function Fg(s,c,x){return c=Fi(4,s.children!==null?s.children:[],s.key,c),c.lanes=x,c.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},c}var wS=new WeakMap;function fa(s,c){if(typeof s=="object"&&s!==null){var x=wS.get(s);return x!==void 0?x:(c={value:s,source:c,stack:Ft(c)},wS.set(s,c),c)}return{value:s,source:c,stack:Ft(c)}}var Uc=[],Fc=0,Oh=null,bd=0,ha=[],pa=0,Uo=null,cs=1,us="";function Ps(s,c){Uc[Fc++]=bd,Uc[Fc++]=Oh,Oh=s,bd=c}function ES(s,c,x){ha[pa++]=cs,ha[pa++]=us,ha[pa++]=Uo,Uo=s;var w=cs;s=us;var T=32-Tt(w)-1;w&=~(1<<T),x+=1;var D=32-Tt(c)+T;if(30<D){var H=T-T%5;D=(w&(1<<H)-1).toString(32),w>>=H,T-=H,cs=1<<32-Tt(c)+T|x<<T|w,us=D+s}else cs=1<<D|x<<T|w,us=s}function Hg(s){s.return!==null&&(Ps(s,1),ES(s,1,0))}function zg(s){for(;s===Oh;)Oh=Uc[--Fc],Uc[Fc]=null,bd=Uc[--Fc],Uc[Fc]=null;for(;s===Uo;)Uo=ha[--pa],ha[pa]=null,us=ha[--pa],ha[pa]=null,cs=ha[--pa],ha[pa]=null}function SS(s,c){ha[pa++]=cs,ha[pa++]=us,ha[pa++]=Uo,cs=c.id,us=c.overflow,Uo=s}var Xr=null,kn=null,Wt=!1,Fo=null,ma=!1,Gg=Error(r(519));function Ho(s){var c=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw wd(fa(c,s)),Gg}function AS(s){var c=s.stateNode,x=s.type,w=s.memoizedProps;switch(c[Ut]=s,c[ct]=w,x){case"dialog":Gt("cancel",c),Gt("close",c);break;case"iframe":case"object":case"embed":Gt("load",c);break;case"video":case"audio":for(x=0;x<Gd.length;x++)Gt(Gd[x],c);break;case"source":Gt("error",c);break;case"img":case"image":case"link":Gt("error",c),Gt("load",c);break;case"details":Gt("toggle",c);break;case"input":Gt("invalid",c),Ee(c,w.value,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name,!0);break;case"select":Gt("invalid",c);break;case"textarea":Gt("invalid",c),hi(c,w.value,w.defaultValue,w.children)}x=w.children,typeof x!="string"&&typeof x!="number"&&typeof x!="bigint"||c.textContent===""+x||w.suppressHydrationWarning===!0||H2(c.textContent,x)?(w.popover!=null&&(Gt("beforetoggle",c),Gt("toggle",c)),w.onScroll!=null&&Gt("scroll",c),w.onScrollEnd!=null&&Gt("scrollend",c),w.onClick!=null&&(c.onclick=Si),c=!0):c=!1,c||Ho(s,!0)}function CS(s){for(Xr=s.return;Xr;)switch(Xr.tag){case 5:case 31:case 13:ma=!1;return;case 27:case 3:ma=!0;return;default:Xr=Xr.return}}function Hc(s){if(s!==Xr)return!1;if(!Wt)return CS(s),Wt=!0,!1;var c=s.tag,x;if((x=c!==3&&c!==27)&&((x=c===5)&&(x=s.type,x=!(x!=="form"&&x!=="button")||oy(s.type,s.memoizedProps)),x=!x),x&&kn&&Ho(s),CS(s),c===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));kn=X2(s)}else if(c===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));kn=X2(s)}else c===27?(c=kn,tl(s.type)?(s=fy,fy=null,kn=s):kn=c):kn=Xr?xa(s.stateNode.nextSibling):null;return!0}function Hl(){kn=Xr=null,Wt=!1}function Vg(){var s=Fo;return s!==null&&(Ii===null?Ii=s:Ii.push.apply(Ii,s),Fo=null),s}function wd(s){Fo===null?Fo=[s]:Fo.push(s)}var qg=ne(null),zl=null,js=null;function zo(s,c,x){he(qg,c._currentValue),c._currentValue=x}function Ls(s){s._currentValue=qg.current,re(qg)}function $g(s,c,x){for(;s!==null;){var w=s.alternate;if((s.childLanes&c)!==c?(s.childLanes|=c,w!==null&&(w.childLanes|=c)):w!==null&&(w.childLanes&c)!==c&&(w.childLanes|=c),s===x)break;s=s.return}}function Yg(s,c,x,w){var T=s.child;for(T!==null&&(T.return=s);T!==null;){var D=T.dependencies;if(D!==null){var H=T.child;D=D.firstContext;e:for(;D!==null;){var X=D;D=T;for(var ae=0;ae<c.length;ae++)if(X.context===c[ae]){D.lanes|=x,X=D.alternate,X!==null&&(X.lanes|=x),$g(D.return,x,s),w||(H=null);break e}D=X.next}}else if(T.tag===18){if(H=T.return,H===null)throw Error(r(341));H.lanes|=x,D=H.alternate,D!==null&&(D.lanes|=x),$g(H,x,s),H=null}else H=T.child;if(H!==null)H.return=T;else for(H=T;H!==null;){if(H===s){H=null;break}if(T=H.sibling,T!==null){T.return=H.return,H=T;break}H=H.return}T=H}}function zc(s,c,x,w){s=null;for(var T=c,D=!1;T!==null;){if(!D){if((T.flags&524288)!==0)D=!0;else if((T.flags&262144)!==0)break}if(T.tag===10){var H=T.alternate;if(H===null)throw Error(r(387));if(H=H.memoizedProps,H!==null){var X=T.type;S(T.pendingProps.value,H.value)||(s!==null?s.push(X):s=[X])}}else if(T===ue.current){if(H=T.alternate,H===null)throw Error(r(387));H.memoizedState.memoizedState!==T.memoizedState.memoizedState&&(s!==null?s.push(Wd):s=[Wd])}T=T.return}s!==null&&Yg(c,s,x,w),c.flags|=262144}function Dh(s){for(s=s.firstContext;s!==null;){if(!S(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Gl(s){zl=s,js=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Jr(s){return NS(zl,s)}function kh(s,c){return zl===null&&Gl(s),NS(s,c)}function NS(s,c){var x=c._currentValue;if(c={context:c,memoizedValue:x,next:null},js===null){if(s===null)throw Error(r(308));js=c,s.dependencies={lanes:0,firstContext:c},s.flags|=524288}else js=js.next=c;return x}var c6=typeof AbortController<"u"?AbortController:function(){var s=[],c=this.signal={aborted:!1,addEventListener:function(x,w){s.push(w)}};this.abort=function(){c.aborted=!0,s.forEach(function(x){return x()})}},u6=e.unstable_scheduleCallback,d6=e.unstable_NormalPriority,gr={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Wg(){return{controller:new c6,data:new Map,refCount:0}}function Ed(s){s.refCount--,s.refCount===0&&u6(d6,function(){s.controller.abort()})}var Sd=null,Kg=0,Gc=0,Vc=null;function f6(s,c){if(Sd===null){var x=Sd=[];Kg=0,Gc=Zx(),Vc={status:"pending",value:void 0,then:function(w){x.push(w)}}}return Kg++,c.then(_S,_S),c}function _S(){if(--Kg===0&&Sd!==null){Vc!==null&&(Vc.status="fulfilled");var s=Sd;Sd=null,Gc=0,Vc=null;for(var c=0;c<s.length;c++)(0,s[c])()}}function h6(s,c){var x=[],w={status:"pending",value:null,reason:null,then:function(T){x.push(T)}};return s.then(function(){w.status="fulfilled",w.value=c;for(var T=0;T<x.length;T++)(0,x[T])(c)},function(T){for(w.status="rejected",w.reason=T,T=0;T<x.length;T++)(0,x[T])(void 0)}),w}var TS=de.S;de.S=function(s,c){d2=_t(),typeof c=="object"&&c!==null&&typeof c.then=="function"&&f6(s,c),TS!==null&&TS(s,c)};var Vl=ne(null);function Xg(){var s=Vl.current;return s!==null?s:_n.pooledCache}function Ph(s,c){c===null?he(Vl,Vl.current):he(Vl,c.pool)}function IS(){var s=Xg();return s===null?null:{parent:gr._currentValue,pool:s}}var qc=Error(r(460)),Jg=Error(r(474)),jh=Error(r(542)),Lh={then:function(){}};function RS(s){return s=s.status,s==="fulfilled"||s==="rejected"}function MS(s,c,x){switch(x=s[x],x===void 0?s.push(c):x!==c&&(c.then(Si,Si),c=x),c.status){case"fulfilled":return c.value;case"rejected":throw s=c.reason,DS(s),s;default:if(typeof c.status=="string")c.then(Si,Si);else{if(s=_n,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=c,s.status="pending",s.then(function(w){if(c.status==="pending"){var T=c;T.status="fulfilled",T.value=w}},function(w){if(c.status==="pending"){var T=c;T.status="rejected",T.reason=w}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw s=c.reason,DS(s),s}throw $l=c,qc}}function ql(s){try{var c=s._init;return c(s._payload)}catch(x){throw x!==null&&typeof x=="object"&&typeof x.then=="function"?($l=x,qc):x}}var $l=null;function OS(){if($l===null)throw Error(r(459));var s=$l;return $l=null,s}function DS(s){if(s===qc||s===jh)throw Error(r(483))}var $c=null,Ad=0;function Bh(s){var c=Ad;return Ad+=1,$c===null&&($c=[]),MS($c,s,c)}function Cd(s,c){c=c.props.ref,s.ref=c!==void 0?c:null}function Uh(s,c){throw c.$$typeof===E?Error(r(525)):(s=Object.prototype.toString.call(c),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":s)))}function kS(s){function c(ye,fe){if(s){var Se=ye.deletions;Se===null?(ye.deletions=[fe],ye.flags|=16):Se.push(fe)}}function x(ye,fe){if(!s)return null;for(;fe!==null;)c(ye,fe),fe=fe.sibling;return null}function w(ye){for(var fe=new Map;ye!==null;)ye.key!==null?fe.set(ye.key,ye):fe.set(ye.index,ye),ye=ye.sibling;return fe}function T(ye,fe){return ye=ks(ye,fe),ye.index=0,ye.sibling=null,ye}function D(ye,fe,Se){return ye.index=Se,s?(Se=ye.alternate,Se!==null?(Se=Se.index,Se<fe?(ye.flags|=67108866,fe):Se):(ye.flags|=67108866,fe)):(ye.flags|=1048576,fe)}function H(ye){return s&&ye.alternate===null&&(ye.flags|=67108866),ye}function X(ye,fe,Se,Pe){return fe===null||fe.tag!==6?(fe=Ug(Se,ye.mode,Pe),fe.return=ye,fe):(fe=T(fe,Se),fe.return=ye,fe)}function ae(ye,fe,Se,Pe){var dt=Se.type;return dt===M?Me(ye,fe,Se.props.children,Pe,Se.key):fe!==null&&(fe.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===J&&ql(dt)===fe.type)?(fe=T(fe,Se.props),Cd(fe,Se),fe.return=ye,fe):(fe=Mh(Se.type,Se.key,Se.props,null,ye.mode,Pe),Cd(fe,Se),fe.return=ye,fe)}function Ae(ye,fe,Se,Pe){return fe===null||fe.tag!==4||fe.stateNode.containerInfo!==Se.containerInfo||fe.stateNode.implementation!==Se.implementation?(fe=Fg(Se,ye.mode,Pe),fe.return=ye,fe):(fe=T(fe,Se.children||[]),fe.return=ye,fe)}function Me(ye,fe,Se,Pe,dt){return fe===null||fe.tag!==7?(fe=Fl(Se,ye.mode,Pe,dt),fe.return=ye,fe):(fe=T(fe,Se),fe.return=ye,fe)}function Le(ye,fe,Se){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return fe=Ug(""+fe,ye.mode,Se),fe.return=ye,fe;if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case C:return Se=Mh(fe.type,fe.key,fe.props,null,ye.mode,Se),Cd(Se,fe),Se.return=ye,Se;case I:return fe=Fg(fe,ye.mode,Se),fe.return=ye,fe;case J:return fe=ql(fe),Le(ye,fe,Se)}if(le(fe)||Y(fe))return fe=Fl(fe,ye.mode,Se,null),fe.return=ye,fe;if(typeof fe.then=="function")return Le(ye,Bh(fe),Se);if(fe.$$typeof===L)return Le(ye,kh(ye,fe),Se);Uh(ye,fe)}return null}function Ce(ye,fe,Se,Pe){var dt=fe!==null?fe.key:null;if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return dt!==null?null:X(ye,fe,""+Se,Pe);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case C:return Se.key===dt?ae(ye,fe,Se,Pe):null;case I:return Se.key===dt?Ae(ye,fe,Se,Pe):null;case J:return Se=ql(Se),Ce(ye,fe,Se,Pe)}if(le(Se)||Y(Se))return dt!==null?null:Me(ye,fe,Se,Pe,null);if(typeof Se.then=="function")return Ce(ye,fe,Bh(Se),Pe);if(Se.$$typeof===L)return Ce(ye,fe,kh(ye,Se),Pe);Uh(ye,Se)}return null}function Re(ye,fe,Se,Pe,dt){if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint")return ye=ye.get(Se)||null,X(fe,ye,""+Pe,dt);if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case C:return ye=ye.get(Pe.key===null?Se:Pe.key)||null,ae(fe,ye,Pe,dt);case I:return ye=ye.get(Pe.key===null?Se:Pe.key)||null,Ae(fe,ye,Pe,dt);case J:return Pe=ql(Pe),Re(ye,fe,Se,Pe,dt)}if(le(Pe)||Y(Pe))return ye=ye.get(Se)||null,Me(fe,ye,Pe,dt,null);if(typeof Pe.then=="function")return Re(ye,fe,Se,Bh(Pe),dt);if(Pe.$$typeof===L)return Re(ye,fe,Se,kh(fe,Pe),dt);Uh(fe,Pe)}return null}function rt(ye,fe,Se,Pe){for(var dt=null,Zt=null,at=fe,Ot=fe=0,Yt=null;at!==null&&Ot<Se.length;Ot++){at.index>Ot?(Yt=at,at=null):Yt=at.sibling;var Qt=Ce(ye,at,Se[Ot],Pe);if(Qt===null){at===null&&(at=Yt);break}s&&at&&Qt.alternate===null&&c(ye,at),fe=D(Qt,fe,Ot),Zt===null?dt=Qt:Zt.sibling=Qt,Zt=Qt,at=Yt}if(Ot===Se.length)return x(ye,at),Wt&&Ps(ye,Ot),dt;if(at===null){for(;Ot<Se.length;Ot++)at=Le(ye,Se[Ot],Pe),at!==null&&(fe=D(at,fe,Ot),Zt===null?dt=at:Zt.sibling=at,Zt=at);return Wt&&Ps(ye,Ot),dt}for(at=w(at);Ot<Se.length;Ot++)Yt=Re(at,ye,Ot,Se[Ot],Pe),Yt!==null&&(s&&Yt.alternate!==null&&at.delete(Yt.key===null?Ot:Yt.key),fe=D(Yt,fe,Ot),Zt===null?dt=Yt:Zt.sibling=Yt,Zt=Yt);return s&&at.forEach(function(sl){return c(ye,sl)}),Wt&&Ps(ye,Ot),dt}function mt(ye,fe,Se,Pe){if(Se==null)throw Error(r(151));for(var dt=null,Zt=null,at=fe,Ot=fe=0,Yt=null,Qt=Se.next();at!==null&&!Qt.done;Ot++,Qt=Se.next()){at.index>Ot?(Yt=at,at=null):Yt=at.sibling;var sl=Ce(ye,at,Qt.value,Pe);if(sl===null){at===null&&(at=Yt);break}s&&at&&sl.alternate===null&&c(ye,at),fe=D(sl,fe,Ot),Zt===null?dt=sl:Zt.sibling=sl,Zt=sl,at=Yt}if(Qt.done)return x(ye,at),Wt&&Ps(ye,Ot),dt;if(at===null){for(;!Qt.done;Ot++,Qt=Se.next())Qt=Le(ye,Qt.value,Pe),Qt!==null&&(fe=D(Qt,fe,Ot),Zt===null?dt=Qt:Zt.sibling=Qt,Zt=Qt);return Wt&&Ps(ye,Ot),dt}for(at=w(at);!Qt.done;Ot++,Qt=Se.next())Qt=Re(at,ye,Ot,Qt.value,Pe),Qt!==null&&(s&&Qt.alternate!==null&&at.delete(Qt.key===null?Ot:Qt.key),fe=D(Qt,fe,Ot),Zt===null?dt=Qt:Zt.sibling=Qt,Zt=Qt);return s&&at.forEach(function(A5){return c(ye,A5)}),Wt&&Ps(ye,Ot),dt}function bn(ye,fe,Se,Pe){if(typeof Se=="object"&&Se!==null&&Se.type===M&&Se.key===null&&(Se=Se.props.children),typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case C:e:{for(var dt=Se.key;fe!==null;){if(fe.key===dt){if(dt=Se.type,dt===M){if(fe.tag===7){x(ye,fe.sibling),Pe=T(fe,Se.props.children),Pe.return=ye,ye=Pe;break e}}else if(fe.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===J&&ql(dt)===fe.type){x(ye,fe.sibling),Pe=T(fe,Se.props),Cd(Pe,Se),Pe.return=ye,ye=Pe;break e}x(ye,fe);break}else c(ye,fe);fe=fe.sibling}Se.type===M?(Pe=Fl(Se.props.children,ye.mode,Pe,Se.key),Pe.return=ye,ye=Pe):(Pe=Mh(Se.type,Se.key,Se.props,null,ye.mode,Pe),Cd(Pe,Se),Pe.return=ye,ye=Pe)}return H(ye);case I:e:{for(dt=Se.key;fe!==null;){if(fe.key===dt)if(fe.tag===4&&fe.stateNode.containerInfo===Se.containerInfo&&fe.stateNode.implementation===Se.implementation){x(ye,fe.sibling),Pe=T(fe,Se.children||[]),Pe.return=ye,ye=Pe;break e}else{x(ye,fe);break}else c(ye,fe);fe=fe.sibling}Pe=Fg(Se,ye.mode,Pe),Pe.return=ye,ye=Pe}return H(ye);case J:return Se=ql(Se),bn(ye,fe,Se,Pe)}if(le(Se))return rt(ye,fe,Se,Pe);if(Y(Se)){if(dt=Y(Se),typeof dt!="function")throw Error(r(150));return Se=dt.call(Se),mt(ye,fe,Se,Pe)}if(typeof Se.then=="function")return bn(ye,fe,Bh(Se),Pe);if(Se.$$typeof===L)return bn(ye,fe,kh(ye,Se),Pe);Uh(ye,Se)}return typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint"?(Se=""+Se,fe!==null&&fe.tag===6?(x(ye,fe.sibling),Pe=T(fe,Se),Pe.return=ye,ye=Pe):(x(ye,fe),Pe=Ug(Se,ye.mode,Pe),Pe.return=ye,ye=Pe),H(ye)):x(ye,fe)}return function(ye,fe,Se,Pe){try{Ad=0;var dt=bn(ye,fe,Se,Pe);return $c=null,dt}catch(at){if(at===qc||at===jh)throw at;var Zt=Fi(29,at,null,ye.mode);return Zt.lanes=Pe,Zt.return=ye,Zt}finally{}}}var Yl=kS(!0),PS=kS(!1),Go=!1;function Zg(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qg(s,c){s=s.updateQueue,c.updateQueue===s&&(c.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Vo(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function qo(s,c,x){var w=s.updateQueue;if(w===null)return null;if(w=w.shared,(sn&2)!==0){var T=w.pending;return T===null?c.next=c:(c.next=T.next,T.next=c),w.pending=c,c=Rh(s),yS(s,null,x),c}return Ih(s,w,c,x),Rh(s)}function Nd(s,c,x){if(c=c.updateQueue,c!==null&&(c=c.shared,(x&4194048)!==0)){var w=c.lanes;w&=s.pendingLanes,x|=w,c.lanes=x,Ye(s,x)}}function ex(s,c){var x=s.updateQueue,w=s.alternate;if(w!==null&&(w=w.updateQueue,x===w)){var T=null,D=null;if(x=x.firstBaseUpdate,x!==null){do{var H={lane:x.lane,tag:x.tag,payload:x.payload,callback:null,next:null};D===null?T=D=H:D=D.next=H,x=x.next}while(x!==null);D===null?T=D=c:D=D.next=c}else T=D=c;x={baseState:w.baseState,firstBaseUpdate:T,lastBaseUpdate:D,shared:w.shared,callbacks:w.callbacks},s.updateQueue=x;return}s=x.lastBaseUpdate,s===null?x.firstBaseUpdate=c:s.next=c,x.lastBaseUpdate=c}var tx=!1;function _d(){if(tx){var s=Vc;if(s!==null)throw s}}function Td(s,c,x,w){tx=!1;var T=s.updateQueue;Go=!1;var D=T.firstBaseUpdate,H=T.lastBaseUpdate,X=T.shared.pending;if(X!==null){T.shared.pending=null;var ae=X,Ae=ae.next;ae.next=null,H===null?D=Ae:H.next=Ae,H=ae;var Me=s.alternate;Me!==null&&(Me=Me.updateQueue,X=Me.lastBaseUpdate,X!==H&&(X===null?Me.firstBaseUpdate=Ae:X.next=Ae,Me.lastBaseUpdate=ae))}if(D!==null){var Le=T.baseState;H=0,Me=Ae=ae=null,X=D;do{var Ce=X.lane&-536870913,Re=Ce!==X.lane;if(Re?($t&Ce)===Ce:(w&Ce)===Ce){Ce!==0&&Ce===Gc&&(tx=!0),Me!==null&&(Me=Me.next={lane:0,tag:X.tag,payload:X.payload,callback:null,next:null});e:{var rt=s,mt=X;Ce=c;var bn=x;switch(mt.tag){case 1:if(rt=mt.payload,typeof rt=="function"){Le=rt.call(bn,Le,Ce);break e}Le=rt;break e;case 3:rt.flags=rt.flags&-65537|128;case 0:if(rt=mt.payload,Ce=typeof rt=="function"?rt.call(bn,Le,Ce):rt,Ce==null)break e;Le=y({},Le,Ce);break e;case 2:Go=!0}}Ce=X.callback,Ce!==null&&(s.flags|=64,Re&&(s.flags|=8192),Re=T.callbacks,Re===null?T.callbacks=[Ce]:Re.push(Ce))}else Re={lane:Ce,tag:X.tag,payload:X.payload,callback:X.callback,next:null},Me===null?(Ae=Me=Re,ae=Le):Me=Me.next=Re,H|=Ce;if(X=X.next,X===null){if(X=T.shared.pending,X===null)break;Re=X,X=Re.next,Re.next=null,T.lastBaseUpdate=Re,T.shared.pending=null}}while(!0);Me===null&&(ae=Le),T.baseState=ae,T.firstBaseUpdate=Ae,T.lastBaseUpdate=Me,D===null&&(T.shared.lanes=0),Xo|=H,s.lanes=H,s.memoizedState=Le}}function jS(s,c){if(typeof s!="function")throw Error(r(191,s));s.call(c)}function LS(s,c){var x=s.callbacks;if(x!==null)for(s.callbacks=null,s=0;s<x.length;s++)jS(x[s],c)}var Yc=ne(null),Fh=ne(0);function BS(s,c){s=$s,he(Fh,s),he(Yc,c),$s=s|c.baseLanes}function nx(){he(Fh,$s),he(Yc,Yc.current)}function rx(){$s=Fh.current,re(Yc),re(Fh)}var Hi=ne(null),ga=null;function $o(s){var c=s.alternate;he(ur,ur.current&1),he(Hi,s),ga===null&&(c===null||Yc.current!==null||c.memoizedState!==null)&&(ga=s)}function ix(s){he(ur,ur.current),he(Hi,s),ga===null&&(ga=s)}function US(s){s.tag===22?(he(ur,ur.current),he(Hi,s),ga===null&&(ga=s)):Yo()}function Yo(){he(ur,ur.current),he(Hi,Hi.current)}function zi(s){re(Hi),ga===s&&(ga=null),re(ur)}var ur=ne(0);function Hh(s){for(var c=s;c!==null;){if(c.tag===13){var x=c.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||uy(x)||dy(x)))return c}else if(c.tag===19&&(c.memoizedProps.revealOrder==="forwards"||c.memoizedProps.revealOrder==="backwards"||c.memoizedProps.revealOrder==="unstable_legacy-backwards"||c.memoizedProps.revealOrder==="together")){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===s)break;for(;c.sibling===null;){if(c.return===null||c.return===s)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Bs=0,It=null,yn=null,xr=null,zh=!1,Wc=!1,Wl=!1,Gh=0,Id=0,Kc=null,p6=0;function Qn(){throw Error(r(321))}function ax(s,c){if(c===null)return!1;for(var x=0;x<c.length&&x<s.length;x++)if(!S(s[x],c[x]))return!1;return!0}function sx(s,c,x,w,T,D){return Bs=D,It=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,de.H=s===null||s.memoizedState===null?EA:wx,Wl=!1,D=x(w,T),Wl=!1,Wc&&(D=HS(c,x,w,T)),FS(s),D}function FS(s){de.H=Od;var c=yn!==null&&yn.next!==null;if(Bs=0,xr=yn=It=null,zh=!1,Id=0,Kc=null,c)throw Error(r(300));s===null||yr||(s=s.dependencies,s!==null&&Dh(s)&&(yr=!0))}function HS(s,c,x,w){It=s;var T=0;do{if(Wc&&(Kc=null),Id=0,Wc=!1,25<=T)throw Error(r(301));if(T+=1,xr=yn=null,s.updateQueue!=null){var D=s.updateQueue;D.lastEffect=null,D.events=null,D.stores=null,D.memoCache!=null&&(D.memoCache.index=0)}de.H=SA,D=c(x,w)}while(Wc);return D}function m6(){var s=de.H,c=s.useState()[0];return c=typeof c.then=="function"?Rd(c):c,s=s.useState()[0],(yn!==null?yn.memoizedState:null)!==s&&(It.flags|=1024),c}function ox(){var s=Gh!==0;return Gh=0,s}function lx(s,c,x){c.updateQueue=s.updateQueue,c.flags&=-2053,s.lanes&=~x}function cx(s){if(zh){for(s=s.memoizedState;s!==null;){var c=s.queue;c!==null&&(c.pending=null),s=s.next}zh=!1}Bs=0,xr=yn=It=null,Wc=!1,Id=Gh=0,Kc=null}function gi(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xr===null?It.memoizedState=xr=s:xr=xr.next=s,xr}function dr(){if(yn===null){var s=It.alternate;s=s!==null?s.memoizedState:null}else s=yn.next;var c=xr===null?It.memoizedState:xr.next;if(c!==null)xr=c,yn=s;else{if(s===null)throw It.alternate===null?Error(r(467)):Error(r(310));yn=s,s={memoizedState:yn.memoizedState,baseState:yn.baseState,baseQueue:yn.baseQueue,queue:yn.queue,next:null},xr===null?It.memoizedState=xr=s:xr=xr.next=s}return xr}function Vh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Rd(s){var c=Id;return Id+=1,Kc===null&&(Kc=[]),s=MS(Kc,s,c),c=It,(xr===null?c.memoizedState:xr.next)===null&&(c=c.alternate,de.H=c===null||c.memoizedState===null?EA:wx),s}function qh(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Rd(s);if(s.$$typeof===L)return Jr(s)}throw Error(r(438,String(s)))}function ux(s){var c=null,x=It.updateQueue;if(x!==null&&(c=x.memoCache),c==null){var w=It.alternate;w!==null&&(w=w.updateQueue,w!==null&&(w=w.memoCache,w!=null&&(c={data:w.data.map(function(T){return T.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),x===null&&(x=Vh(),It.updateQueue=x),x.memoCache=c,x=c.data[c.index],x===void 0)for(x=c.data[c.index]=Array(s),w=0;w<s;w++)x[w]=Z;return c.index++,x}function Us(s,c){return typeof c=="function"?c(s):c}function $h(s){var c=dr();return dx(c,yn,s)}function dx(s,c,x){var w=s.queue;if(w===null)throw Error(r(311));w.lastRenderedReducer=x;var T=s.baseQueue,D=w.pending;if(D!==null){if(T!==null){var H=T.next;T.next=D.next,D.next=H}c.baseQueue=T=D,w.pending=null}if(D=s.baseState,T===null)s.memoizedState=D;else{c=T.next;var X=H=null,ae=null,Ae=c,Me=!1;do{var Le=Ae.lane&-536870913;if(Le!==Ae.lane?($t&Le)===Le:(Bs&Le)===Le){var Ce=Ae.revertLane;if(Ce===0)ae!==null&&(ae=ae.next={lane:0,revertLane:0,gesture:null,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null}),Le===Gc&&(Me=!0);else if((Bs&Ce)===Ce){Ae=Ae.next,Ce===Gc&&(Me=!0);continue}else Le={lane:0,revertLane:Ae.revertLane,gesture:null,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null},ae===null?(X=ae=Le,H=D):ae=ae.next=Le,It.lanes|=Ce,Xo|=Ce;Le=Ae.action,Wl&&x(D,Le),D=Ae.hasEagerState?Ae.eagerState:x(D,Le)}else Ce={lane:Le,revertLane:Ae.revertLane,gesture:Ae.gesture,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null},ae===null?(X=ae=Ce,H=D):ae=ae.next=Ce,It.lanes|=Le,Xo|=Le;Ae=Ae.next}while(Ae!==null&&Ae!==c);if(ae===null?H=D:ae.next=X,!S(D,s.memoizedState)&&(yr=!0,Me&&(x=Vc,x!==null)))throw x;s.memoizedState=D,s.baseState=H,s.baseQueue=ae,w.lastRenderedState=D}return T===null&&(w.lanes=0),[s.memoizedState,w.dispatch]}function fx(s){var c=dr(),x=c.queue;if(x===null)throw Error(r(311));x.lastRenderedReducer=s;var w=x.dispatch,T=x.pending,D=c.memoizedState;if(T!==null){x.pending=null;var H=T=T.next;do D=s(D,H.action),H=H.next;while(H!==T);S(D,c.memoizedState)||(yr=!0),c.memoizedState=D,c.baseQueue===null&&(c.baseState=D),x.lastRenderedState=D}return[D,w]}function zS(s,c,x){var w=It,T=dr(),D=Wt;if(D){if(x===void 0)throw Error(r(407));x=x()}else x=c();var H=!S((yn||T).memoizedState,x);if(H&&(T.memoizedState=x,yr=!0),T=T.queue,mx(qS.bind(null,w,T,s),[s]),T.getSnapshot!==c||H||xr!==null&&xr.memoizedState.tag&1){if(w.flags|=2048,Xc(9,{destroy:void 0},VS.bind(null,w,T,x,c),null),_n===null)throw Error(r(349));D||(Bs&127)!==0||GS(w,c,x)}return x}function GS(s,c,x){s.flags|=16384,s={getSnapshot:c,value:x},c=It.updateQueue,c===null?(c=Vh(),It.updateQueue=c,c.stores=[s]):(x=c.stores,x===null?c.stores=[s]:x.push(s))}function VS(s,c,x,w){c.value=x,c.getSnapshot=w,$S(c)&&YS(s)}function qS(s,c,x){return x(function(){$S(c)&&YS(s)})}function $S(s){var c=s.getSnapshot;s=s.value;try{var x=c();return!S(s,x)}catch{return!0}}function YS(s){var c=Ul(s,2);c!==null&&Ri(c,s,2)}function hx(s){var c=gi();if(typeof s=="function"){var x=s;if(s=x(),Wl){ln(!0);try{x()}finally{ln(!1)}}}return c.memoizedState=c.baseState=s,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Us,lastRenderedState:s},c}function WS(s,c,x,w){return s.baseState=x,dx(s,yn,typeof w=="function"?w:Us)}function g6(s,c,x,w,T){if(Kh(s))throw Error(r(485));if(s=c.action,s!==null){var D={payload:T,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(H){D.listeners.push(H)}};de.T!==null?x(!0):D.isTransition=!1,w(D),x=c.pending,x===null?(D.next=c.pending=D,KS(c,D)):(D.next=x.next,c.pending=x.next=D)}}function KS(s,c){var x=c.action,w=c.payload,T=s.state;if(c.isTransition){var D=de.T,H={};de.T=H;try{var X=x(T,w),ae=de.S;ae!==null&&ae(H,X),XS(s,c,X)}catch(Ae){px(s,c,Ae)}finally{D!==null&&H.types!==null&&(D.types=H.types),de.T=D}}else try{D=x(T,w),XS(s,c,D)}catch(Ae){px(s,c,Ae)}}function XS(s,c,x){x!==null&&typeof x=="object"&&typeof x.then=="function"?x.then(function(w){JS(s,c,w)},function(w){return px(s,c,w)}):JS(s,c,x)}function JS(s,c,x){c.status="fulfilled",c.value=x,ZS(c),s.state=x,c=s.pending,c!==null&&(x=c.next,x===c?s.pending=null:(x=x.next,c.next=x,KS(s,x)))}function px(s,c,x){var w=s.pending;if(s.pending=null,w!==null){w=w.next;do c.status="rejected",c.reason=x,ZS(c),c=c.next;while(c!==w)}s.action=null}function ZS(s){s=s.listeners;for(var c=0;c<s.length;c++)(0,s[c])()}function QS(s,c){return c}function eA(s,c){if(Wt){var x=_n.formState;if(x!==null){e:{var w=It;if(Wt){if(kn){t:{for(var T=kn,D=ma;T.nodeType!==8;){if(!D){T=null;break t}if(T=xa(T.nextSibling),T===null){T=null;break t}}D=T.data,T=D==="F!"||D==="F"?T:null}if(T){kn=xa(T.nextSibling),w=T.data==="F!";break e}}Ho(w)}w=!1}w&&(c=x[0])}}return x=gi(),x.memoizedState=x.baseState=c,w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:QS,lastRenderedState:c},x.queue=w,x=vA.bind(null,It,w),w.dispatch=x,w=hx(!1),D=bx.bind(null,It,!1,w.queue),w=gi(),T={state:c,dispatch:null,action:s,pending:null},w.queue=T,x=g6.bind(null,It,T,D,x),T.dispatch=x,w.memoizedState=s,[c,x,!1]}function tA(s){var c=dr();return nA(c,yn,s)}function nA(s,c,x){if(c=dx(s,c,QS)[0],s=$h(Us)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var w=Rd(c)}catch(H){throw H===qc?jh:H}else w=c;c=dr();var T=c.queue,D=T.dispatch;return x!==c.memoizedState&&(It.flags|=2048,Xc(9,{destroy:void 0},x6.bind(null,T,x),null)),[w,D,s]}function x6(s,c){s.action=c}function rA(s){var c=dr(),x=yn;if(x!==null)return nA(c,x,s);dr(),c=c.memoizedState,x=dr();var w=x.queue.dispatch;return x.memoizedState=s,[c,w,!1]}function Xc(s,c,x,w){return s={tag:s,create:x,deps:w,inst:c,next:null},c=It.updateQueue,c===null&&(c=Vh(),It.updateQueue=c),x=c.lastEffect,x===null?c.lastEffect=s.next=s:(w=x.next,x.next=s,s.next=w,c.lastEffect=s),s}function iA(){return dr().memoizedState}function Yh(s,c,x,w){var T=gi();It.flags|=s,T.memoizedState=Xc(1|c,{destroy:void 0},x,w===void 0?null:w)}function Wh(s,c,x,w){var T=dr();w=w===void 0?null:w;var D=T.memoizedState.inst;yn!==null&&w!==null&&ax(w,yn.memoizedState.deps)?T.memoizedState=Xc(c,D,x,w):(It.flags|=s,T.memoizedState=Xc(1|c,D,x,w))}function aA(s,c){Yh(8390656,8,s,c)}function mx(s,c){Wh(2048,8,s,c)}function y6(s){It.flags|=4;var c=It.updateQueue;if(c===null)c=Vh(),It.updateQueue=c,c.events=[s];else{var x=c.events;x===null?c.events=[s]:x.push(s)}}function sA(s){var c=dr().memoizedState;return y6({ref:c,nextImpl:s}),function(){if((sn&2)!==0)throw Error(r(440));return c.impl.apply(void 0,arguments)}}function oA(s,c){return Wh(4,2,s,c)}function lA(s,c){return Wh(4,4,s,c)}function cA(s,c){if(typeof c=="function"){s=s();var x=c(s);return function(){typeof x=="function"?x():c(null)}}if(c!=null)return s=s(),c.current=s,function(){c.current=null}}function uA(s,c,x){x=x!=null?x.concat([s]):null,Wh(4,4,cA.bind(null,c,s),x)}function gx(){}function dA(s,c){var x=dr();c=c===void 0?null:c;var w=x.memoizedState;return c!==null&&ax(c,w[1])?w[0]:(x.memoizedState=[s,c],s)}function fA(s,c){var x=dr();c=c===void 0?null:c;var w=x.memoizedState;if(c!==null&&ax(c,w[1]))return w[0];if(w=s(),Wl){ln(!0);try{s()}finally{ln(!1)}}return x.memoizedState=[w,c],w}function xx(s,c,x){return x===void 0||(Bs&1073741824)!==0&&($t&261930)===0?s.memoizedState=c:(s.memoizedState=x,s=h2(),It.lanes|=s,Xo|=s,x)}function hA(s,c,x,w){return S(x,c)?x:Yc.current!==null?(s=xx(s,x,w),S(s,c)||(yr=!0),s):(Bs&42)===0||(Bs&1073741824)!==0&&($t&261930)===0?(yr=!0,s.memoizedState=x):(s=h2(),It.lanes|=s,Xo|=s,c)}function pA(s,c,x,w,T){var D=ge.p;ge.p=D!==0&&8>D?D:8;var H=de.T,X={};de.T=X,bx(s,!1,c,x);try{var ae=T(),Ae=de.S;if(Ae!==null&&Ae(X,ae),ae!==null&&typeof ae=="object"&&typeof ae.then=="function"){var Me=h6(ae,w);Md(s,c,Me,qi(s))}else Md(s,c,w,qi(s))}catch(Le){Md(s,c,{then:function(){},status:"rejected",reason:Le},qi())}finally{ge.p=D,H!==null&&X.types!==null&&(H.types=X.types),de.T=H}}function v6(){}function yx(s,c,x,w){if(s.tag!==5)throw Error(r(476));var T=mA(s).queue;pA(s,T,c,De,x===null?v6:function(){return gA(s),x(w)})}function mA(s){var c=s.memoizedState;if(c!==null)return c;c={memoizedState:De,baseState:De,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Us,lastRenderedState:De},next:null};var x={};return c.next={memoizedState:x,baseState:x,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Us,lastRenderedState:x},next:null},s.memoizedState=c,s=s.alternate,s!==null&&(s.memoizedState=c),c}function gA(s){var c=mA(s);c.next===null&&(c=s.alternate.memoizedState),Md(s,c.next.queue,{},qi())}function vx(){return Jr(Wd)}function xA(){return dr().memoizedState}function yA(){return dr().memoizedState}function b6(s){for(var c=s.return;c!==null;){switch(c.tag){case 24:case 3:var x=qi();s=Vo(x);var w=qo(c,s,x);w!==null&&(Ri(w,c,x),Nd(w,c,x)),c={cache:Wg()},s.payload=c;return}c=c.return}}function w6(s,c,x){var w=qi();x={lane:w,revertLane:0,gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null},Kh(s)?bA(c,x):(x=Lg(s,c,x,w),x!==null&&(Ri(x,s,w),wA(x,c,w)))}function vA(s,c,x){var w=qi();Md(s,c,x,w)}function Md(s,c,x,w){var T={lane:w,revertLane:0,gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null};if(Kh(s))bA(c,T);else{var D=s.alternate;if(s.lanes===0&&(D===null||D.lanes===0)&&(D=c.lastRenderedReducer,D!==null))try{var H=c.lastRenderedState,X=D(H,x);if(T.hasEagerState=!0,T.eagerState=X,S(X,H))return Ih(s,c,T,0),_n===null&&Th(),!1}catch{}finally{}if(x=Lg(s,c,T,w),x!==null)return Ri(x,s,w),wA(x,c,w),!0}return!1}function bx(s,c,x,w){if(w={lane:2,revertLane:Zx(),gesture:null,action:w,hasEagerState:!1,eagerState:null,next:null},Kh(s)){if(c)throw Error(r(479))}else c=Lg(s,x,w,2),c!==null&&Ri(c,s,2)}function Kh(s){var c=s.alternate;return s===It||c!==null&&c===It}function bA(s,c){Wc=zh=!0;var x=s.pending;x===null?c.next=c:(c.next=x.next,x.next=c),s.pending=c}function wA(s,c,x){if((x&4194048)!==0){var w=c.lanes;w&=s.pendingLanes,x|=w,c.lanes=x,Ye(s,x)}}var Od={readContext:Jr,use:qh,useCallback:Qn,useContext:Qn,useEffect:Qn,useImperativeHandle:Qn,useLayoutEffect:Qn,useInsertionEffect:Qn,useMemo:Qn,useReducer:Qn,useRef:Qn,useState:Qn,useDebugValue:Qn,useDeferredValue:Qn,useTransition:Qn,useSyncExternalStore:Qn,useId:Qn,useHostTransitionStatus:Qn,useFormState:Qn,useActionState:Qn,useOptimistic:Qn,useMemoCache:Qn,useCacheRefresh:Qn};Od.useEffectEvent=Qn;var EA={readContext:Jr,use:qh,useCallback:function(s,c){return gi().memoizedState=[s,c===void 0?null:c],s},useContext:Jr,useEffect:aA,useImperativeHandle:function(s,c,x){x=x!=null?x.concat([s]):null,Yh(4194308,4,cA.bind(null,c,s),x)},useLayoutEffect:function(s,c){return Yh(4194308,4,s,c)},useInsertionEffect:function(s,c){Yh(4,2,s,c)},useMemo:function(s,c){var x=gi();c=c===void 0?null:c;var w=s();if(Wl){ln(!0);try{s()}finally{ln(!1)}}return x.memoizedState=[w,c],w},useReducer:function(s,c,x){var w=gi();if(x!==void 0){var T=x(c);if(Wl){ln(!0);try{x(c)}finally{ln(!1)}}}else T=c;return w.memoizedState=w.baseState=T,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:T},w.queue=s,s=s.dispatch=w6.bind(null,It,s),[w.memoizedState,s]},useRef:function(s){var c=gi();return s={current:s},c.memoizedState=s},useState:function(s){s=hx(s);var c=s.queue,x=vA.bind(null,It,c);return c.dispatch=x,[s.memoizedState,x]},useDebugValue:gx,useDeferredValue:function(s,c){var x=gi();return xx(x,s,c)},useTransition:function(){var s=hx(!1);return s=pA.bind(null,It,s.queue,!0,!1),gi().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,c,x){var w=It,T=gi();if(Wt){if(x===void 0)throw Error(r(407));x=x()}else{if(x=c(),_n===null)throw Error(r(349));($t&127)!==0||GS(w,c,x)}T.memoizedState=x;var D={value:x,getSnapshot:c};return T.queue=D,aA(qS.bind(null,w,D,s),[s]),w.flags|=2048,Xc(9,{destroy:void 0},VS.bind(null,w,D,x,c),null),x},useId:function(){var s=gi(),c=_n.identifierPrefix;if(Wt){var x=us,w=cs;x=(w&~(1<<32-Tt(w)-1)).toString(32)+x,c="_"+c+"R_"+x,x=Gh++,0<x&&(c+="H"+x.toString(32)),c+="_"}else x=p6++,c="_"+c+"r_"+x.toString(32)+"_";return s.memoizedState=c},useHostTransitionStatus:vx,useFormState:eA,useActionState:eA,useOptimistic:function(s){var c=gi();c.memoizedState=c.baseState=s;var x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=x,c=bx.bind(null,It,!0,x),x.dispatch=c,[s,c]},useMemoCache:ux,useCacheRefresh:function(){return gi().memoizedState=b6.bind(null,It)},useEffectEvent:function(s){var c=gi(),x={impl:s};return c.memoizedState=x,function(){if((sn&2)!==0)throw Error(r(440));return x.impl.apply(void 0,arguments)}}},wx={readContext:Jr,use:qh,useCallback:dA,useContext:Jr,useEffect:mx,useImperativeHandle:uA,useInsertionEffect:oA,useLayoutEffect:lA,useMemo:fA,useReducer:$h,useRef:iA,useState:function(){return $h(Us)},useDebugValue:gx,useDeferredValue:function(s,c){var x=dr();return hA(x,yn.memoizedState,s,c)},useTransition:function(){var s=$h(Us)[0],c=dr().memoizedState;return[typeof s=="boolean"?s:Rd(s),c]},useSyncExternalStore:zS,useId:xA,useHostTransitionStatus:vx,useFormState:tA,useActionState:tA,useOptimistic:function(s,c){var x=dr();return WS(x,yn,s,c)},useMemoCache:ux,useCacheRefresh:yA};wx.useEffectEvent=sA;var SA={readContext:Jr,use:qh,useCallback:dA,useContext:Jr,useEffect:mx,useImperativeHandle:uA,useInsertionEffect:oA,useLayoutEffect:lA,useMemo:fA,useReducer:fx,useRef:iA,useState:function(){return fx(Us)},useDebugValue:gx,useDeferredValue:function(s,c){var x=dr();return yn===null?xx(x,s,c):hA(x,yn.memoizedState,s,c)},useTransition:function(){var s=fx(Us)[0],c=dr().memoizedState;return[typeof s=="boolean"?s:Rd(s),c]},useSyncExternalStore:zS,useId:xA,useHostTransitionStatus:vx,useFormState:rA,useActionState:rA,useOptimistic:function(s,c){var x=dr();return yn!==null?WS(x,yn,s,c):(x.baseState=s,[s,x.queue.dispatch])},useMemoCache:ux,useCacheRefresh:yA};SA.useEffectEvent=sA;function Ex(s,c,x,w){c=s.memoizedState,x=x(w,c),x=x==null?c:y({},c,x),s.memoizedState=x,s.lanes===0&&(s.updateQueue.baseState=x)}var Sx={enqueueSetState:function(s,c,x){s=s._reactInternals;var w=qi(),T=Vo(w);T.payload=c,x!=null&&(T.callback=x),c=qo(s,T,w),c!==null&&(Ri(c,s,w),Nd(c,s,w))},enqueueReplaceState:function(s,c,x){s=s._reactInternals;var w=qi(),T=Vo(w);T.tag=1,T.payload=c,x!=null&&(T.callback=x),c=qo(s,T,w),c!==null&&(Ri(c,s,w),Nd(c,s,w))},enqueueForceUpdate:function(s,c){s=s._reactInternals;var x=qi(),w=Vo(x);w.tag=2,c!=null&&(w.callback=c),c=qo(s,w,x),c!==null&&(Ri(c,s,x),Nd(c,s,x))}};function AA(s,c,x,w,T,D,H){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(w,D,H):c.prototype&&c.prototype.isPureReactComponent?!N(x,w)||!N(T,D):!0}function CA(s,c,x,w){s=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(x,w),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(x,w),c.state!==s&&Sx.enqueueReplaceState(c,c.state,null)}function Kl(s,c){var x=c;if("ref"in c){x={};for(var w in c)w!=="ref"&&(x[w]=c[w])}if(s=s.defaultProps){x===c&&(x=y({},x));for(var T in s)x[T]===void 0&&(x[T]=s[T])}return x}function NA(s){_h(s)}function _A(s){console.error(s)}function TA(s){_h(s)}function Xh(s,c){try{var x=s.onUncaughtError;x(c.value,{componentStack:c.stack})}catch(w){setTimeout(function(){throw w})}}function IA(s,c,x){try{var w=s.onCaughtError;w(x.value,{componentStack:x.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(T){setTimeout(function(){throw T})}}function Ax(s,c,x){return x=Vo(x),x.tag=3,x.payload={element:null},x.callback=function(){Xh(s,c)},x}function RA(s){return s=Vo(s),s.tag=3,s}function MA(s,c,x,w){var T=x.type.getDerivedStateFromError;if(typeof T=="function"){var D=w.value;s.payload=function(){return T(D)},s.callback=function(){IA(c,x,w)}}var H=x.stateNode;H!==null&&typeof H.componentDidCatch=="function"&&(s.callback=function(){IA(c,x,w),typeof T!="function"&&(Jo===null?Jo=new Set([this]):Jo.add(this));var X=w.stack;this.componentDidCatch(w.value,{componentStack:X!==null?X:""})})}function E6(s,c,x,w,T){if(x.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){if(c=x.alternate,c!==null&&zc(c,x,T,!0),x=Hi.current,x!==null){switch(x.tag){case 31:case 13:return ga===null?l0():x.alternate===null&&er===0&&(er=3),x.flags&=-257,x.flags|=65536,x.lanes=T,w===Lh?x.flags|=16384:(c=x.updateQueue,c===null?x.updateQueue=new Set([w]):c.add(w),Kx(s,w,T)),!1;case 22:return x.flags|=65536,w===Lh?x.flags|=16384:(c=x.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([w])},x.updateQueue=c):(x=c.retryQueue,x===null?c.retryQueue=new Set([w]):x.add(w)),Kx(s,w,T)),!1}throw Error(r(435,x.tag))}return Kx(s,w,T),l0(),!1}if(Wt)return c=Hi.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=T,w!==Gg&&(s=Error(r(422),{cause:w}),wd(fa(s,x)))):(w!==Gg&&(c=Error(r(423),{cause:w}),wd(fa(c,x))),s=s.current.alternate,s.flags|=65536,T&=-T,s.lanes|=T,w=fa(w,x),T=Ax(s.stateNode,w,T),ex(s,T),er!==4&&(er=2)),!1;var D=Error(r(520),{cause:w});if(D=fa(D,x),Fd===null?Fd=[D]:Fd.push(D),er!==4&&(er=2),c===null)return!0;w=fa(w,x),x=c;do{switch(x.tag){case 3:return x.flags|=65536,s=T&-T,x.lanes|=s,s=Ax(x.stateNode,w,s),ex(x,s),!1;case 1:if(c=x.type,D=x.stateNode,(x.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(Jo===null||!Jo.has(D))))return x.flags|=65536,T&=-T,x.lanes|=T,T=RA(T),MA(T,s,x,w),ex(x,T),!1}x=x.return}while(x!==null);return!1}var Cx=Error(r(461)),yr=!1;function Zr(s,c,x,w){c.child=s===null?PS(c,null,x,w):Yl(c,s.child,x,w)}function OA(s,c,x,w,T){x=x.render;var D=c.ref;if("ref"in w){var H={};for(var X in w)X!=="ref"&&(H[X]=w[X])}else H=w;return Gl(c),w=sx(s,c,x,H,D,T),X=ox(),s!==null&&!yr?(lx(s,c,T),Fs(s,c,T)):(Wt&&X&&Hg(c),c.flags|=1,Zr(s,c,w,T),c.child)}function DA(s,c,x,w,T){if(s===null){var D=x.type;return typeof D=="function"&&!Bg(D)&&D.defaultProps===void 0&&x.compare===null?(c.tag=15,c.type=D,kA(s,c,D,w,T)):(s=Mh(x.type,null,w,c,c.mode,T),s.ref=c.ref,s.return=c,c.child=s)}if(D=s.child,!Dx(s,T)){var H=D.memoizedProps;if(x=x.compare,x=x!==null?x:N,x(H,w)&&s.ref===c.ref)return Fs(s,c,T)}return c.flags|=1,s=ks(D,w),s.ref=c.ref,s.return=c,c.child=s}function kA(s,c,x,w,T){if(s!==null){var D=s.memoizedProps;if(N(D,w)&&s.ref===c.ref)if(yr=!1,c.pendingProps=w=D,Dx(s,T))(s.flags&131072)!==0&&(yr=!0);else return c.lanes=s.lanes,Fs(s,c,T)}return Nx(s,c,x,w,T)}function PA(s,c,x,w){var T=w.children,D=s!==null?s.memoizedState:null;if(s===null&&c.stateNode===null&&(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),w.mode==="hidden"){if((c.flags&128)!==0){if(D=D!==null?D.baseLanes|x:x,s!==null){for(w=c.child=s.child,T=0;w!==null;)T=T|w.lanes|w.childLanes,w=w.sibling;w=T&~D}else w=0,c.child=null;return jA(s,c,D,x,w)}if((x&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},s!==null&&Ph(c,D!==null?D.cachePool:null),D!==null?BS(c,D):nx(),US(c);else return w=c.lanes=536870912,jA(s,c,D!==null?D.baseLanes|x:x,x,w)}else D!==null?(Ph(c,D.cachePool),BS(c,D),Yo(),c.memoizedState=null):(s!==null&&Ph(c,null),nx(),Yo());return Zr(s,c,T,x),c.child}function Dd(s,c){return s!==null&&s.tag===22||c.stateNode!==null||(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.sibling}function jA(s,c,x,w,T){var D=Xg();return D=D===null?null:{parent:gr._currentValue,pool:D},c.memoizedState={baseLanes:x,cachePool:D},s!==null&&Ph(c,null),nx(),US(c),s!==null&&zc(s,c,w,!0),c.childLanes=T,null}function Jh(s,c){return c=Qh({mode:c.mode,children:c.children},s.mode),c.ref=s.ref,s.child=c,c.return=s,c}function LA(s,c,x){return Yl(c,s.child,null,x),s=Jh(c,c.pendingProps),s.flags|=2,zi(c),c.memoizedState=null,s}function S6(s,c,x){var w=c.pendingProps,T=(c.flags&128)!==0;if(c.flags&=-129,s===null){if(Wt){if(w.mode==="hidden")return s=Jh(c,w),c.lanes=536870912,Dd(null,s);if(ix(c),(s=kn)?(s=K2(s,ma),s=s!==null&&s.data==="&"?s:null,s!==null&&(c.memoizedState={dehydrated:s,treeContext:Uo!==null?{id:cs,overflow:us}:null,retryLane:536870912,hydrationErrors:null},x=bS(s),x.return=c,c.child=x,Xr=c,kn=null)):s=null,s===null)throw Ho(c);return c.lanes=536870912,null}return Jh(c,w)}var D=s.memoizedState;if(D!==null){var H=D.dehydrated;if(ix(c),T)if(c.flags&256)c.flags&=-257,c=LA(s,c,x);else if(c.memoizedState!==null)c.child=s.child,c.flags|=128,c=null;else throw Error(r(558));else if(yr||zc(s,c,x,!1),T=(x&s.childLanes)!==0,yr||T){if(w=_n,w!==null&&(H=tt(w,x),H!==0&&H!==D.retryLane))throw D.retryLane=H,Ul(s,H),Ri(w,s,H),Cx;l0(),c=LA(s,c,x)}else s=D.treeContext,kn=xa(H.nextSibling),Xr=c,Wt=!0,Fo=null,ma=!1,s!==null&&SS(c,s),c=Jh(c,w),c.flags|=4096;return c}return s=ks(s.child,{mode:w.mode,children:w.children}),s.ref=c.ref,c.child=s,s.return=c,s}function Zh(s,c){var x=c.ref;if(x===null)s!==null&&s.ref!==null&&(c.flags|=4194816);else{if(typeof x!="function"&&typeof x!="object")throw Error(r(284));(s===null||s.ref!==x)&&(c.flags|=4194816)}}function Nx(s,c,x,w,T){return Gl(c),x=sx(s,c,x,w,void 0,T),w=ox(),s!==null&&!yr?(lx(s,c,T),Fs(s,c,T)):(Wt&&w&&Hg(c),c.flags|=1,Zr(s,c,x,T),c.child)}function BA(s,c,x,w,T,D){return Gl(c),c.updateQueue=null,x=HS(c,w,x,T),FS(s),w=ox(),s!==null&&!yr?(lx(s,c,D),Fs(s,c,D)):(Wt&&w&&Hg(c),c.flags|=1,Zr(s,c,x,D),c.child)}function UA(s,c,x,w,T){if(Gl(c),c.stateNode===null){var D=Bc,H=x.contextType;typeof H=="object"&&H!==null&&(D=Jr(H)),D=new x(w,D),c.memoizedState=D.state!==null&&D.state!==void 0?D.state:null,D.updater=Sx,c.stateNode=D,D._reactInternals=c,D=c.stateNode,D.props=w,D.state=c.memoizedState,D.refs={},Zg(c),H=x.contextType,D.context=typeof H=="object"&&H!==null?Jr(H):Bc,D.state=c.memoizedState,H=x.getDerivedStateFromProps,typeof H=="function"&&(Ex(c,x,H,w),D.state=c.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof D.getSnapshotBeforeUpdate=="function"||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(H=D.state,typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount(),H!==D.state&&Sx.enqueueReplaceState(D,D.state,null),Td(c,w,D,T),_d(),D.state=c.memoizedState),typeof D.componentDidMount=="function"&&(c.flags|=4194308),w=!0}else if(s===null){D=c.stateNode;var X=c.memoizedProps,ae=Kl(x,X);D.props=ae;var Ae=D.context,Me=x.contextType;H=Bc,typeof Me=="object"&&Me!==null&&(H=Jr(Me));var Le=x.getDerivedStateFromProps;Me=typeof Le=="function"||typeof D.getSnapshotBeforeUpdate=="function",X=c.pendingProps!==X,Me||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(X||Ae!==H)&&CA(c,D,w,H),Go=!1;var Ce=c.memoizedState;D.state=Ce,Td(c,w,D,T),_d(),Ae=c.memoizedState,X||Ce!==Ae||Go?(typeof Le=="function"&&(Ex(c,x,Le,w),Ae=c.memoizedState),(ae=Go||AA(c,x,ae,w,Ce,Ae,H))?(Me||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(c.flags|=4194308)):(typeof D.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=w,c.memoizedState=Ae),D.props=w,D.state=Ae,D.context=H,w=ae):(typeof D.componentDidMount=="function"&&(c.flags|=4194308),w=!1)}else{D=c.stateNode,Qg(s,c),H=c.memoizedProps,Me=Kl(x,H),D.props=Me,Le=c.pendingProps,Ce=D.context,Ae=x.contextType,ae=Bc,typeof Ae=="object"&&Ae!==null&&(ae=Jr(Ae)),X=x.getDerivedStateFromProps,(Ae=typeof X=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(H!==Le||Ce!==ae)&&CA(c,D,w,ae),Go=!1,Ce=c.memoizedState,D.state=Ce,Td(c,w,D,T),_d();var Re=c.memoizedState;H!==Le||Ce!==Re||Go||s!==null&&s.dependencies!==null&&Dh(s.dependencies)?(typeof X=="function"&&(Ex(c,x,X,w),Re=c.memoizedState),(Me=Go||AA(c,x,Me,w,Ce,Re,ae)||s!==null&&s.dependencies!==null&&Dh(s.dependencies))?(Ae||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(w,Re,ae),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(w,Re,ae)),typeof D.componentDidUpdate=="function"&&(c.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof D.componentDidUpdate!="function"||H===s.memoizedProps&&Ce===s.memoizedState||(c.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||H===s.memoizedProps&&Ce===s.memoizedState||(c.flags|=1024),c.memoizedProps=w,c.memoizedState=Re),D.props=w,D.state=Re,D.context=ae,w=Me):(typeof D.componentDidUpdate!="function"||H===s.memoizedProps&&Ce===s.memoizedState||(c.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||H===s.memoizedProps&&Ce===s.memoizedState||(c.flags|=1024),w=!1)}return D=w,Zh(s,c),w=(c.flags&128)!==0,D||w?(D=c.stateNode,x=w&&typeof x.getDerivedStateFromError!="function"?null:D.render(),c.flags|=1,s!==null&&w?(c.child=Yl(c,s.child,null,T),c.child=Yl(c,null,x,T)):Zr(s,c,x,T),c.memoizedState=D.state,s=c.child):s=Fs(s,c,T),s}function FA(s,c,x,w){return Hl(),c.flags|=256,Zr(s,c,x,w),c.child}var _x={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Tx(s){return{baseLanes:s,cachePool:IS()}}function Ix(s,c,x){return s=s!==null?s.childLanes&~x:0,c&&(s|=Vi),s}function HA(s,c,x){var w=c.pendingProps,T=!1,D=(c.flags&128)!==0,H;if((H=D)||(H=s!==null&&s.memoizedState===null?!1:(ur.current&2)!==0),H&&(T=!0,c.flags&=-129),H=(c.flags&32)!==0,c.flags&=-33,s===null){if(Wt){if(T?$o(c):Yo(),(s=kn)?(s=K2(s,ma),s=s!==null&&s.data!=="&"?s:null,s!==null&&(c.memoizedState={dehydrated:s,treeContext:Uo!==null?{id:cs,overflow:us}:null,retryLane:536870912,hydrationErrors:null},x=bS(s),x.return=c,c.child=x,Xr=c,kn=null)):s=null,s===null)throw Ho(c);return dy(s)?c.lanes=32:c.lanes=536870912,null}var X=w.children;return w=w.fallback,T?(Yo(),T=c.mode,X=Qh({mode:"hidden",children:X},T),w=Fl(w,T,x,null),X.return=c,w.return=c,X.sibling=w,c.child=X,w=c.child,w.memoizedState=Tx(x),w.childLanes=Ix(s,H,x),c.memoizedState=_x,Dd(null,w)):($o(c),Rx(c,X))}var ae=s.memoizedState;if(ae!==null&&(X=ae.dehydrated,X!==null)){if(D)c.flags&256?($o(c),c.flags&=-257,c=Mx(s,c,x)):c.memoizedState!==null?(Yo(),c.child=s.child,c.flags|=128,c=null):(Yo(),X=w.fallback,T=c.mode,w=Qh({mode:"visible",children:w.children},T),X=Fl(X,T,x,null),X.flags|=2,w.return=c,X.return=c,w.sibling=X,c.child=w,Yl(c,s.child,null,x),w=c.child,w.memoizedState=Tx(x),w.childLanes=Ix(s,H,x),c.memoizedState=_x,c=Dd(null,w));else if($o(c),dy(X)){if(H=X.nextSibling&&X.nextSibling.dataset,H)var Ae=H.dgst;H=Ae,w=Error(r(419)),w.stack="",w.digest=H,wd({value:w,source:null,stack:null}),c=Mx(s,c,x)}else if(yr||zc(s,c,x,!1),H=(x&s.childLanes)!==0,yr||H){if(H=_n,H!==null&&(w=tt(H,x),w!==0&&w!==ae.retryLane))throw ae.retryLane=w,Ul(s,w),Ri(H,s,w),Cx;uy(X)||l0(),c=Mx(s,c,x)}else uy(X)?(c.flags|=192,c.child=s.child,c=null):(s=ae.treeContext,kn=xa(X.nextSibling),Xr=c,Wt=!0,Fo=null,ma=!1,s!==null&&SS(c,s),c=Rx(c,w.children),c.flags|=4096);return c}return T?(Yo(),X=w.fallback,T=c.mode,ae=s.child,Ae=ae.sibling,w=ks(ae,{mode:"hidden",children:w.children}),w.subtreeFlags=ae.subtreeFlags&65011712,Ae!==null?X=ks(Ae,X):(X=Fl(X,T,x,null),X.flags|=2),X.return=c,w.return=c,w.sibling=X,c.child=w,Dd(null,w),w=c.child,X=s.child.memoizedState,X===null?X=Tx(x):(T=X.cachePool,T!==null?(ae=gr._currentValue,T=T.parent!==ae?{parent:ae,pool:ae}:T):T=IS(),X={baseLanes:X.baseLanes|x,cachePool:T}),w.memoizedState=X,w.childLanes=Ix(s,H,x),c.memoizedState=_x,Dd(s.child,w)):($o(c),x=s.child,s=x.sibling,x=ks(x,{mode:"visible",children:w.children}),x.return=c,x.sibling=null,s!==null&&(H=c.deletions,H===null?(c.deletions=[s],c.flags|=16):H.push(s)),c.child=x,c.memoizedState=null,x)}function Rx(s,c){return c=Qh({mode:"visible",children:c},s.mode),c.return=s,s.child=c}function Qh(s,c){return s=Fi(22,s,null,c),s.lanes=0,s}function Mx(s,c,x){return Yl(c,s.child,null,x),s=Rx(c,c.pendingProps.children),s.flags|=2,c.memoizedState=null,s}function zA(s,c,x){s.lanes|=c;var w=s.alternate;w!==null&&(w.lanes|=c),$g(s.return,c,x)}function Ox(s,c,x,w,T,D){var H=s.memoizedState;H===null?s.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:w,tail:x,tailMode:T,treeForkCount:D}:(H.isBackwards=c,H.rendering=null,H.renderingStartTime=0,H.last=w,H.tail=x,H.tailMode=T,H.treeForkCount=D)}function GA(s,c,x){var w=c.pendingProps,T=w.revealOrder,D=w.tail;w=w.children;var H=ur.current,X=(H&2)!==0;if(X?(H=H&1|2,c.flags|=128):H&=1,he(ur,H),Zr(s,c,w,x),w=Wt?bd:0,!X&&s!==null&&(s.flags&128)!==0)e:for(s=c.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&zA(s,x,c);else if(s.tag===19)zA(s,x,c);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===c)break e;for(;s.sibling===null;){if(s.return===null||s.return===c)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(T){case"forwards":for(x=c.child,T=null;x!==null;)s=x.alternate,s!==null&&Hh(s)===null&&(T=x),x=x.sibling;x=T,x===null?(T=c.child,c.child=null):(T=x.sibling,x.sibling=null),Ox(c,!1,T,x,D,w);break;case"backwards":case"unstable_legacy-backwards":for(x=null,T=c.child,c.child=null;T!==null;){if(s=T.alternate,s!==null&&Hh(s)===null){c.child=T;break}s=T.sibling,T.sibling=x,x=T,T=s}Ox(c,!0,x,null,D,w);break;case"together":Ox(c,!1,null,null,void 0,w);break;default:c.memoizedState=null}return c.child}function Fs(s,c,x){if(s!==null&&(c.dependencies=s.dependencies),Xo|=c.lanes,(x&c.childLanes)===0)if(s!==null){if(zc(s,c,x,!1),(x&c.childLanes)===0)return null}else return null;if(s!==null&&c.child!==s.child)throw Error(r(153));if(c.child!==null){for(s=c.child,x=ks(s,s.pendingProps),c.child=x,x.return=c;s.sibling!==null;)s=s.sibling,x=x.sibling=ks(s,s.pendingProps),x.return=c;x.sibling=null}return c.child}function Dx(s,c){return(s.lanes&c)!==0?!0:(s=s.dependencies,!!(s!==null&&Dh(s)))}function A6(s,c,x){switch(c.tag){case 3:qe(c,c.stateNode.containerInfo),zo(c,gr,s.memoizedState.cache),Hl();break;case 27:case 5:Je(c);break;case 4:qe(c,c.stateNode.containerInfo);break;case 10:zo(c,c.type,c.memoizedProps.value);break;case 31:if(c.memoizedState!==null)return c.flags|=128,ix(c),null;break;case 13:var w=c.memoizedState;if(w!==null)return w.dehydrated!==null?($o(c),c.flags|=128,null):(x&c.child.childLanes)!==0?HA(s,c,x):($o(c),s=Fs(s,c,x),s!==null?s.sibling:null);$o(c);break;case 19:var T=(s.flags&128)!==0;if(w=(x&c.childLanes)!==0,w||(zc(s,c,x,!1),w=(x&c.childLanes)!==0),T){if(w)return GA(s,c,x);c.flags|=128}if(T=c.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),he(ur,ur.current),w)break;return null;case 22:return c.lanes=0,PA(s,c,x,c.pendingProps);case 24:zo(c,gr,s.memoizedState.cache)}return Fs(s,c,x)}function VA(s,c,x){if(s!==null)if(s.memoizedProps!==c.pendingProps)yr=!0;else{if(!Dx(s,x)&&(c.flags&128)===0)return yr=!1,A6(s,c,x);yr=(s.flags&131072)!==0}else yr=!1,Wt&&(c.flags&1048576)!==0&&ES(c,bd,c.index);switch(c.lanes=0,c.tag){case 16:e:{var w=c.pendingProps;if(s=ql(c.elementType),c.type=s,typeof s=="function")Bg(s)?(w=Kl(s,w),c.tag=1,c=UA(null,c,s,w,x)):(c.tag=0,c=Nx(null,c,s,w,x));else{if(s!=null){var T=s.$$typeof;if(T===G){c.tag=11,c=OA(null,c,s,w,x);break e}else if(T===B){c.tag=14,c=DA(null,c,s,w,x);break e}}throw c=Te(s)||s,Error(r(306,c,""))}}return c;case 0:return Nx(s,c,c.type,c.pendingProps,x);case 1:return w=c.type,T=Kl(w,c.pendingProps),UA(s,c,w,T,x);case 3:e:{if(qe(c,c.stateNode.containerInfo),s===null)throw Error(r(387));w=c.pendingProps;var D=c.memoizedState;T=D.element,Qg(s,c),Td(c,w,null,x);var H=c.memoizedState;if(w=H.cache,zo(c,gr,w),w!==D.cache&&Yg(c,[gr],x,!0),_d(),w=H.element,D.isDehydrated)if(D={element:w,isDehydrated:!1,cache:H.cache},c.updateQueue.baseState=D,c.memoizedState=D,c.flags&256){c=FA(s,c,w,x);break e}else if(w!==T){T=fa(Error(r(424)),c),wd(T),c=FA(s,c,w,x);break e}else{switch(s=c.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(kn=xa(s.firstChild),Xr=c,Wt=!0,Fo=null,ma=!0,x=PS(c,null,w,x),c.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling}else{if(Hl(),w===T){c=Fs(s,c,x);break e}Zr(s,c,w,x)}c=c.child}return c;case 26:return Zh(s,c),s===null?(x=tC(c.type,null,c.pendingProps,null))?c.memoizedState=x:Wt||(x=c.type,s=c.pendingProps,w=m0(ie.current).createElement(x),w[Ut]=c,w[ct]=s,Qr(w,x,s),Jn(w),c.stateNode=w):c.memoizedState=tC(c.type,s.memoizedProps,c.pendingProps,s.memoizedState),null;case 27:return Je(c),s===null&&Wt&&(w=c.stateNode=Z2(c.type,c.pendingProps,ie.current),Xr=c,ma=!0,T=kn,tl(c.type)?(fy=T,kn=xa(w.firstChild)):kn=T),Zr(s,c,c.pendingProps.children,x),Zh(s,c),s===null&&(c.flags|=4194304),c.child;case 5:return s===null&&Wt&&((T=w=kn)&&(w=e5(w,c.type,c.pendingProps,ma),w!==null?(c.stateNode=w,Xr=c,kn=xa(w.firstChild),ma=!1,T=!0):T=!1),T||Ho(c)),Je(c),T=c.type,D=c.pendingProps,H=s!==null?s.memoizedProps:null,w=D.children,oy(T,D)?w=null:H!==null&&oy(T,H)&&(c.flags|=32),c.memoizedState!==null&&(T=sx(s,c,m6,null,null,x),Wd._currentValue=T),Zh(s,c),Zr(s,c,w,x),c.child;case 6:return s===null&&Wt&&((s=x=kn)&&(x=t5(x,c.pendingProps,ma),x!==null?(c.stateNode=x,Xr=c,kn=null,s=!0):s=!1),s||Ho(c)),null;case 13:return HA(s,c,x);case 4:return qe(c,c.stateNode.containerInfo),w=c.pendingProps,s===null?c.child=Yl(c,null,w,x):Zr(s,c,w,x),c.child;case 11:return OA(s,c,c.type,c.pendingProps,x);case 7:return Zr(s,c,c.pendingProps,x),c.child;case 8:return Zr(s,c,c.pendingProps.children,x),c.child;case 12:return Zr(s,c,c.pendingProps.children,x),c.child;case 10:return w=c.pendingProps,zo(c,c.type,w.value),Zr(s,c,w.children,x),c.child;case 9:return T=c.type._context,w=c.pendingProps.children,Gl(c),T=Jr(T),w=w(T),c.flags|=1,Zr(s,c,w,x),c.child;case 14:return DA(s,c,c.type,c.pendingProps,x);case 15:return kA(s,c,c.type,c.pendingProps,x);case 19:return GA(s,c,x);case 31:return S6(s,c,x);case 22:return PA(s,c,x,c.pendingProps);case 24:return Gl(c),w=Jr(gr),s===null?(T=Xg(),T===null&&(T=_n,D=Wg(),T.pooledCache=D,D.refCount++,D!==null&&(T.pooledCacheLanes|=x),T=D),c.memoizedState={parent:w,cache:T},Zg(c),zo(c,gr,T)):((s.lanes&x)!==0&&(Qg(s,c),Td(c,null,null,x),_d()),T=s.memoizedState,D=c.memoizedState,T.parent!==w?(T={parent:w,cache:w},c.memoizedState=T,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=T),zo(c,gr,w)):(w=D.cache,zo(c,gr,w),w!==T.cache&&Yg(c,[gr],x,!0))),Zr(s,c,c.pendingProps.children,x),c.child;case 29:throw c.pendingProps}throw Error(r(156,c.tag))}function Hs(s){s.flags|=4}function kx(s,c,x,w,T){if((c=(s.mode&32)!==0)&&(c=!1),c){if(s.flags|=16777216,(T&335544128)===T)if(s.stateNode.complete)s.flags|=8192;else if(x2())s.flags|=8192;else throw $l=Lh,Jg}else s.flags&=-16777217}function qA(s,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!sC(c))if(x2())s.flags|=8192;else throw $l=Lh,Jg}function e0(s,c){c!==null&&(s.flags|=4),s.flags&16384&&(c=s.tag!==22?sr():536870912,s.lanes|=c,eu|=c)}function kd(s,c){if(!Wt)switch(s.tailMode){case"hidden":c=s.tail;for(var x=null;c!==null;)c.alternate!==null&&(x=c),c=c.sibling;x===null?s.tail=null:x.sibling=null;break;case"collapsed":x=s.tail;for(var w=null;x!==null;)x.alternate!==null&&(w=x),x=x.sibling;w===null?c||s.tail===null?s.tail=null:s.tail.sibling=null:w.sibling=null}}function Pn(s){var c=s.alternate!==null&&s.alternate.child===s.child,x=0,w=0;if(c)for(var T=s.child;T!==null;)x|=T.lanes|T.childLanes,w|=T.subtreeFlags&65011712,w|=T.flags&65011712,T.return=s,T=T.sibling;else for(T=s.child;T!==null;)x|=T.lanes|T.childLanes,w|=T.subtreeFlags,w|=T.flags,T.return=s,T=T.sibling;return s.subtreeFlags|=w,s.childLanes=x,c}function C6(s,c,x){var w=c.pendingProps;switch(zg(c),c.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pn(c),null;case 1:return Pn(c),null;case 3:return x=c.stateNode,w=null,s!==null&&(w=s.memoizedState.cache),c.memoizedState.cache!==w&&(c.flags|=2048),Ls(gr),me(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(s===null||s.child===null)&&(Hc(c)?Hs(c):s===null||s.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Vg())),Pn(c),null;case 26:var T=c.type,D=c.memoizedState;return s===null?(Hs(c),D!==null?(Pn(c),qA(c,D)):(Pn(c),kx(c,T,null,w,x))):D?D!==s.memoizedState?(Hs(c),Pn(c),qA(c,D)):(Pn(c),c.flags&=-16777217):(s=s.memoizedProps,s!==w&&Hs(c),Pn(c),kx(c,T,s,w,x)),null;case 27:if(Qe(c),x=ie.current,T=c.type,s!==null&&c.stateNode!=null)s.memoizedProps!==w&&Hs(c);else{if(!w){if(c.stateNode===null)throw Error(r(166));return Pn(c),null}s=se.current,Hc(c)?AS(c):(s=Z2(T,w,x),c.stateNode=s,Hs(c))}return Pn(c),null;case 5:if(Qe(c),T=c.type,s!==null&&c.stateNode!=null)s.memoizedProps!==w&&Hs(c);else{if(!w){if(c.stateNode===null)throw Error(r(166));return Pn(c),null}if(D=se.current,Hc(c))AS(c);else{var H=m0(ie.current);switch(D){case 1:D=H.createElementNS("http://www.w3.org/2000/svg",T);break;case 2:D=H.createElementNS("http://www.w3.org/1998/Math/MathML",T);break;default:switch(T){case"svg":D=H.createElementNS("http://www.w3.org/2000/svg",T);break;case"math":D=H.createElementNS("http://www.w3.org/1998/Math/MathML",T);break;case"script":D=H.createElement("div"),D.innerHTML="<script><\/script>",D=D.removeChild(D.firstChild);break;case"select":D=typeof w.is=="string"?H.createElement("select",{is:w.is}):H.createElement("select"),w.multiple?D.multiple=!0:w.size&&(D.size=w.size);break;default:D=typeof w.is=="string"?H.createElement(T,{is:w.is}):H.createElement(T)}}D[Ut]=c,D[ct]=w;e:for(H=c.child;H!==null;){if(H.tag===5||H.tag===6)D.appendChild(H.stateNode);else if(H.tag!==4&&H.tag!==27&&H.child!==null){H.child.return=H,H=H.child;continue}if(H===c)break e;for(;H.sibling===null;){if(H.return===null||H.return===c)break e;H=H.return}H.sibling.return=H.return,H=H.sibling}c.stateNode=D;e:switch(Qr(D,T,w),T){case"button":case"input":case"select":case"textarea":w=!!w.autoFocus;break e;case"img":w=!0;break e;default:w=!1}w&&Hs(c)}}return Pn(c),kx(c,c.type,s===null?null:s.memoizedProps,c.pendingProps,x),null;case 6:if(s&&c.stateNode!=null)s.memoizedProps!==w&&Hs(c);else{if(typeof w!="string"&&c.stateNode===null)throw Error(r(166));if(s=ie.current,Hc(c)){if(s=c.stateNode,x=c.memoizedProps,w=null,T=Xr,T!==null)switch(T.tag){case 27:case 5:w=T.memoizedProps}s[Ut]=c,s=!!(s.nodeValue===x||w!==null&&w.suppressHydrationWarning===!0||H2(s.nodeValue,x)),s||Ho(c,!0)}else s=m0(s).createTextNode(w),s[Ut]=c,c.stateNode=s}return Pn(c),null;case 31:if(x=c.memoizedState,s===null||s.memoizedState!==null){if(w=Hc(c),x!==null){if(s===null){if(!w)throw Error(r(318));if(s=c.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[Ut]=c}else Hl(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Pn(c),s=!1}else x=Vg(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=x),s=!0;if(!s)return c.flags&256?(zi(c),c):(zi(c),null);if((c.flags&128)!==0)throw Error(r(558))}return Pn(c),null;case 13:if(w=c.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(T=Hc(c),w!==null&&w.dehydrated!==null){if(s===null){if(!T)throw Error(r(318));if(T=c.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(r(317));T[Ut]=c}else Hl(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Pn(c),T=!1}else T=Vg(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=T),T=!0;if(!T)return c.flags&256?(zi(c),c):(zi(c),null)}return zi(c),(c.flags&128)!==0?(c.lanes=x,c):(x=w!==null,s=s!==null&&s.memoizedState!==null,x&&(w=c.child,T=null,w.alternate!==null&&w.alternate.memoizedState!==null&&w.alternate.memoizedState.cachePool!==null&&(T=w.alternate.memoizedState.cachePool.pool),D=null,w.memoizedState!==null&&w.memoizedState.cachePool!==null&&(D=w.memoizedState.cachePool.pool),D!==T&&(w.flags|=2048)),x!==s&&x&&(c.child.flags|=8192),e0(c,c.updateQueue),Pn(c),null);case 4:return me(),s===null&&ny(c.stateNode.containerInfo),Pn(c),null;case 10:return Ls(c.type),Pn(c),null;case 19:if(re(ur),w=c.memoizedState,w===null)return Pn(c),null;if(T=(c.flags&128)!==0,D=w.rendering,D===null)if(T)kd(w,!1);else{if(er!==0||s!==null&&(s.flags&128)!==0)for(s=c.child;s!==null;){if(D=Hh(s),D!==null){for(c.flags|=128,kd(w,!1),s=D.updateQueue,c.updateQueue=s,e0(c,s),c.subtreeFlags=0,s=x,x=c.child;x!==null;)vS(x,s),x=x.sibling;return he(ur,ur.current&1|2),Wt&&Ps(c,w.treeForkCount),c.child}s=s.sibling}w.tail!==null&&_t()>a0&&(c.flags|=128,T=!0,kd(w,!1),c.lanes=4194304)}else{if(!T)if(s=Hh(D),s!==null){if(c.flags|=128,T=!0,s=s.updateQueue,c.updateQueue=s,e0(c,s),kd(w,!0),w.tail===null&&w.tailMode==="hidden"&&!D.alternate&&!Wt)return Pn(c),null}else 2*_t()-w.renderingStartTime>a0&&x!==536870912&&(c.flags|=128,T=!0,kd(w,!1),c.lanes=4194304);w.isBackwards?(D.sibling=c.child,c.child=D):(s=w.last,s!==null?s.sibling=D:c.child=D,w.last=D)}return w.tail!==null?(s=w.tail,w.rendering=s,w.tail=s.sibling,w.renderingStartTime=_t(),s.sibling=null,x=ur.current,he(ur,T?x&1|2:x&1),Wt&&Ps(c,w.treeForkCount),s):(Pn(c),null);case 22:case 23:return zi(c),rx(),w=c.memoizedState!==null,s!==null?s.memoizedState!==null!==w&&(c.flags|=8192):w&&(c.flags|=8192),w?(x&536870912)!==0&&(c.flags&128)===0&&(Pn(c),c.subtreeFlags&6&&(c.flags|=8192)):Pn(c),x=c.updateQueue,x!==null&&e0(c,x.retryQueue),x=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(x=s.memoizedState.cachePool.pool),w=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(w=c.memoizedState.cachePool.pool),w!==x&&(c.flags|=2048),s!==null&&re(Vl),null;case 24:return x=null,s!==null&&(x=s.memoizedState.cache),c.memoizedState.cache!==x&&(c.flags|=2048),Ls(gr),Pn(c),null;case 25:return null;case 30:return null}throw Error(r(156,c.tag))}function N6(s,c){switch(zg(c),c.tag){case 1:return s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 3:return Ls(gr),me(),s=c.flags,(s&65536)!==0&&(s&128)===0?(c.flags=s&-65537|128,c):null;case 26:case 27:case 5:return Qe(c),null;case 31:if(c.memoizedState!==null){if(zi(c),c.alternate===null)throw Error(r(340));Hl()}return s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 13:if(zi(c),s=c.memoizedState,s!==null&&s.dehydrated!==null){if(c.alternate===null)throw Error(r(340));Hl()}return s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 19:return re(ur),null;case 4:return me(),null;case 10:return Ls(c.type),null;case 22:case 23:return zi(c),rx(),s!==null&&re(Vl),s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 24:return Ls(gr),null;case 25:return null;default:return null}}function $A(s,c){switch(zg(c),c.tag){case 3:Ls(gr),me();break;case 26:case 27:case 5:Qe(c);break;case 4:me();break;case 31:c.memoizedState!==null&&zi(c);break;case 13:zi(c);break;case 19:re(ur);break;case 10:Ls(c.type);break;case 22:case 23:zi(c),rx(),s!==null&&re(Vl);break;case 24:Ls(gr)}}function Pd(s,c){try{var x=c.updateQueue,w=x!==null?x.lastEffect:null;if(w!==null){var T=w.next;x=T;do{if((x.tag&s)===s){w=void 0;var D=x.create,H=x.inst;w=D(),H.destroy=w}x=x.next}while(x!==T)}}catch(X){hn(c,c.return,X)}}function Wo(s,c,x){try{var w=c.updateQueue,T=w!==null?w.lastEffect:null;if(T!==null){var D=T.next;w=D;do{if((w.tag&s)===s){var H=w.inst,X=H.destroy;if(X!==void 0){H.destroy=void 0,T=c;var ae=x,Ae=X;try{Ae()}catch(Me){hn(T,ae,Me)}}}w=w.next}while(w!==D)}}catch(Me){hn(c,c.return,Me)}}function YA(s){var c=s.updateQueue;if(c!==null){var x=s.stateNode;try{LS(c,x)}catch(w){hn(s,s.return,w)}}}function WA(s,c,x){x.props=Kl(s.type,s.memoizedProps),x.state=s.memoizedState;try{x.componentWillUnmount()}catch(w){hn(s,c,w)}}function jd(s,c){try{var x=s.ref;if(x!==null){switch(s.tag){case 26:case 27:case 5:var w=s.stateNode;break;case 30:w=s.stateNode;break;default:w=s.stateNode}typeof x=="function"?s.refCleanup=x(w):x.current=w}}catch(T){hn(s,c,T)}}function ds(s,c){var x=s.ref,w=s.refCleanup;if(x!==null)if(typeof w=="function")try{w()}catch(T){hn(s,c,T)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof x=="function")try{x(null)}catch(T){hn(s,c,T)}else x.current=null}function KA(s){var c=s.type,x=s.memoizedProps,w=s.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":x.autoFocus&&w.focus();break e;case"img":x.src?w.src=x.src:x.srcSet&&(w.srcset=x.srcSet)}}catch(T){hn(s,s.return,T)}}function Px(s,c,x){try{var w=s.stateNode;W6(w,s.type,x,c),w[ct]=c}catch(T){hn(s,s.return,T)}}function XA(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&tl(s.type)||s.tag===4}function jx(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||XA(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&tl(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Lx(s,c,x){var w=s.tag;if(w===5||w===6)s=s.stateNode,c?(x.nodeType===9?x.body:x.nodeName==="HTML"?x.ownerDocument.body:x).insertBefore(s,c):(c=x.nodeType===9?x.body:x.nodeName==="HTML"?x.ownerDocument.body:x,c.appendChild(s),x=x._reactRootContainer,x!=null||c.onclick!==null||(c.onclick=Si));else if(w!==4&&(w===27&&tl(s.type)&&(x=s.stateNode,c=null),s=s.child,s!==null))for(Lx(s,c,x),s=s.sibling;s!==null;)Lx(s,c,x),s=s.sibling}function t0(s,c,x){var w=s.tag;if(w===5||w===6)s=s.stateNode,c?x.insertBefore(s,c):x.appendChild(s);else if(w!==4&&(w===27&&tl(s.type)&&(x=s.stateNode),s=s.child,s!==null))for(t0(s,c,x),s=s.sibling;s!==null;)t0(s,c,x),s=s.sibling}function JA(s){var c=s.stateNode,x=s.memoizedProps;try{for(var w=s.type,T=c.attributes;T.length;)c.removeAttributeNode(T[0]);Qr(c,w,x),c[Ut]=s,c[ct]=x}catch(D){hn(s,s.return,D)}}var zs=!1,vr=!1,Bx=!1,ZA=typeof WeakSet=="function"?WeakSet:Set,zr=null;function _6(s,c){if(s=s.containerInfo,ay=E0,s=$(s),K(s)){if("selectionStart"in s)var x={start:s.selectionStart,end:s.selectionEnd};else e:{x=(x=s.ownerDocument)&&x.defaultView||window;var w=x.getSelection&&x.getSelection();if(w&&w.rangeCount!==0){x=w.anchorNode;var T=w.anchorOffset,D=w.focusNode;w=w.focusOffset;try{x.nodeType,D.nodeType}catch{x=null;break e}var H=0,X=-1,ae=-1,Ae=0,Me=0,Le=s,Ce=null;t:for(;;){for(var Re;Le!==x||T!==0&&Le.nodeType!==3||(X=H+T),Le!==D||w!==0&&Le.nodeType!==3||(ae=H+w),Le.nodeType===3&&(H+=Le.nodeValue.length),(Re=Le.firstChild)!==null;)Ce=Le,Le=Re;for(;;){if(Le===s)break t;if(Ce===x&&++Ae===T&&(X=H),Ce===D&&++Me===w&&(ae=H),(Re=Le.nextSibling)!==null)break;Le=Ce,Ce=Le.parentNode}Le=Re}x=X===-1||ae===-1?null:{start:X,end:ae}}else x=null}x=x||{start:0,end:0}}else x=null;for(sy={focusedElem:s,selectionRange:x},E0=!1,zr=c;zr!==null;)if(c=zr,s=c.child,(c.subtreeFlags&1028)!==0&&s!==null)s.return=c,zr=s;else for(;zr!==null;){switch(c=zr,D=c.alternate,s=c.flags,c.tag){case 0:if((s&4)!==0&&(s=c.updateQueue,s=s!==null?s.events:null,s!==null))for(x=0;x<s.length;x++)T=s[x],T.ref.impl=T.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&D!==null){s=void 0,x=c,T=D.memoizedProps,D=D.memoizedState,w=x.stateNode;try{var rt=Kl(x.type,T);s=w.getSnapshotBeforeUpdate(rt,D),w.__reactInternalSnapshotBeforeUpdate=s}catch(mt){hn(x,x.return,mt)}}break;case 3:if((s&1024)!==0){if(s=c.stateNode.containerInfo,x=s.nodeType,x===9)cy(s);else if(x===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":cy(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=c.sibling,s!==null){s.return=c.return,zr=s;break}zr=c.return}}function QA(s,c,x){var w=x.flags;switch(x.tag){case 0:case 11:case 15:Vs(s,x),w&4&&Pd(5,x);break;case 1:if(Vs(s,x),w&4)if(s=x.stateNode,c===null)try{s.componentDidMount()}catch(H){hn(x,x.return,H)}else{var T=Kl(x.type,c.memoizedProps);c=c.memoizedState;try{s.componentDidUpdate(T,c,s.__reactInternalSnapshotBeforeUpdate)}catch(H){hn(x,x.return,H)}}w&64&&YA(x),w&512&&jd(x,x.return);break;case 3:if(Vs(s,x),w&64&&(s=x.updateQueue,s!==null)){if(c=null,x.child!==null)switch(x.child.tag){case 27:case 5:c=x.child.stateNode;break;case 1:c=x.child.stateNode}try{LS(s,c)}catch(H){hn(x,x.return,H)}}break;case 27:c===null&&w&4&&JA(x);case 26:case 5:Vs(s,x),c===null&&w&4&&KA(x),w&512&&jd(x,x.return);break;case 12:Vs(s,x);break;case 31:Vs(s,x),w&4&&n2(s,x);break;case 13:Vs(s,x),w&4&&r2(s,x),w&64&&(s=x.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(x=j6.bind(null,x),n5(s,x))));break;case 22:if(w=x.memoizedState!==null||zs,!w){c=c!==null&&c.memoizedState!==null||vr,T=zs;var D=vr;zs=w,(vr=c)&&!D?qs(s,x,(x.subtreeFlags&8772)!==0):Vs(s,x),zs=T,vr=D}break;case 30:break;default:Vs(s,x)}}function e2(s){var c=s.alternate;c!==null&&(s.alternate=null,e2(c)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(c=s.stateNode,c!==null&&Ei(c)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Hn=null,Ni=!1;function Gs(s,c,x){for(x=x.child;x!==null;)t2(s,c,x),x=x.sibling}function t2(s,c,x){if(ze&&typeof ze.onCommitFiberUnmount=="function")try{ze.onCommitFiberUnmount(xn,x)}catch{}switch(x.tag){case 26:vr||ds(x,c),Gs(s,c,x),x.memoizedState?x.memoizedState.count--:x.stateNode&&(x=x.stateNode,x.parentNode.removeChild(x));break;case 27:vr||ds(x,c);var w=Hn,T=Ni;tl(x.type)&&(Hn=x.stateNode,Ni=!1),Gs(s,c,x),qd(x.stateNode),Hn=w,Ni=T;break;case 5:vr||ds(x,c);case 6:if(w=Hn,T=Ni,Hn=null,Gs(s,c,x),Hn=w,Ni=T,Hn!==null)if(Ni)try{(Hn.nodeType===9?Hn.body:Hn.nodeName==="HTML"?Hn.ownerDocument.body:Hn).removeChild(x.stateNode)}catch(D){hn(x,c,D)}else try{Hn.removeChild(x.stateNode)}catch(D){hn(x,c,D)}break;case 18:Hn!==null&&(Ni?(s=Hn,Y2(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,x.stateNode),lu(s)):Y2(Hn,x.stateNode));break;case 4:w=Hn,T=Ni,Hn=x.stateNode.containerInfo,Ni=!0,Gs(s,c,x),Hn=w,Ni=T;break;case 0:case 11:case 14:case 15:Wo(2,x,c),vr||Wo(4,x,c),Gs(s,c,x);break;case 1:vr||(ds(x,c),w=x.stateNode,typeof w.componentWillUnmount=="function"&&WA(x,c,w)),Gs(s,c,x);break;case 21:Gs(s,c,x);break;case 22:vr=(w=vr)||x.memoizedState!==null,Gs(s,c,x),vr=w;break;default:Gs(s,c,x)}}function n2(s,c){if(c.memoizedState===null&&(s=c.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{lu(s)}catch(x){hn(c,c.return,x)}}}function r2(s,c){if(c.memoizedState===null&&(s=c.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{lu(s)}catch(x){hn(c,c.return,x)}}function T6(s){switch(s.tag){case 31:case 13:case 19:var c=s.stateNode;return c===null&&(c=s.stateNode=new ZA),c;case 22:return s=s.stateNode,c=s._retryCache,c===null&&(c=s._retryCache=new ZA),c;default:throw Error(r(435,s.tag))}}function n0(s,c){var x=T6(s);c.forEach(function(w){if(!x.has(w)){x.add(w);var T=L6.bind(null,s,w);w.then(T,T)}})}function _i(s,c){var x=c.deletions;if(x!==null)for(var w=0;w<x.length;w++){var T=x[w],D=s,H=c,X=H;e:for(;X!==null;){switch(X.tag){case 27:if(tl(X.type)){Hn=X.stateNode,Ni=!1;break e}break;case 5:Hn=X.stateNode,Ni=!1;break e;case 3:case 4:Hn=X.stateNode.containerInfo,Ni=!0;break e}X=X.return}if(Hn===null)throw Error(r(160));t2(D,H,T),Hn=null,Ni=!1,D=T.alternate,D!==null&&(D.return=null),T.return=null}if(c.subtreeFlags&13886)for(c=c.child;c!==null;)i2(c,s),c=c.sibling}var Ua=null;function i2(s,c){var x=s.alternate,w=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:_i(c,s),Ti(s),w&4&&(Wo(3,s,s.return),Pd(3,s),Wo(5,s,s.return));break;case 1:_i(c,s),Ti(s),w&512&&(vr||x===null||ds(x,x.return)),w&64&&zs&&(s=s.updateQueue,s!==null&&(w=s.callbacks,w!==null&&(x=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=x===null?w:x.concat(w))));break;case 26:var T=Ua;if(_i(c,s),Ti(s),w&512&&(vr||x===null||ds(x,x.return)),w&4){var D=x!==null?x.memoizedState:null;if(w=s.memoizedState,x===null)if(w===null)if(s.stateNode===null){e:{w=s.type,x=s.memoizedProps,T=T.ownerDocument||T;t:switch(w){case"title":D=T.getElementsByTagName("title")[0],(!D||D[Oa]||D[Ut]||D.namespaceURI==="http://www.w3.org/2000/svg"||D.hasAttribute("itemprop"))&&(D=T.createElement(w),T.head.insertBefore(D,T.querySelector("head > title"))),Qr(D,w,x),D[Ut]=s,Jn(D),w=D;break e;case"link":var H=iC("link","href",T).get(w+(x.href||""));if(H){for(var X=0;X<H.length;X++)if(D=H[X],D.getAttribute("href")===(x.href==null||x.href===""?null:x.href)&&D.getAttribute("rel")===(x.rel==null?null:x.rel)&&D.getAttribute("title")===(x.title==null?null:x.title)&&D.getAttribute("crossorigin")===(x.crossOrigin==null?null:x.crossOrigin)){H.splice(X,1);break t}}D=T.createElement(w),Qr(D,w,x),T.head.appendChild(D);break;case"meta":if(H=iC("meta","content",T).get(w+(x.content||""))){for(X=0;X<H.length;X++)if(D=H[X],D.getAttribute("content")===(x.content==null?null:""+x.content)&&D.getAttribute("name")===(x.name==null?null:x.name)&&D.getAttribute("property")===(x.property==null?null:x.property)&&D.getAttribute("http-equiv")===(x.httpEquiv==null?null:x.httpEquiv)&&D.getAttribute("charset")===(x.charSet==null?null:x.charSet)){H.splice(X,1);break t}}D=T.createElement(w),Qr(D,w,x),T.head.appendChild(D);break;default:throw Error(r(468,w))}D[Ut]=s,Jn(D),w=D}s.stateNode=w}else aC(T,s.type,s.stateNode);else s.stateNode=rC(T,w,s.memoizedProps);else D!==w?(D===null?x.stateNode!==null&&(x=x.stateNode,x.parentNode.removeChild(x)):D.count--,w===null?aC(T,s.type,s.stateNode):rC(T,w,s.memoizedProps)):w===null&&s.stateNode!==null&&Px(s,s.memoizedProps,x.memoizedProps)}break;case 27:_i(c,s),Ti(s),w&512&&(vr||x===null||ds(x,x.return)),x!==null&&w&4&&Px(s,s.memoizedProps,x.memoizedProps);break;case 5:if(_i(c,s),Ti(s),w&512&&(vr||x===null||ds(x,x.return)),s.flags&32){T=s.stateNode;try{Ro(T,"")}catch(rt){hn(s,s.return,rt)}}w&4&&s.stateNode!=null&&(T=s.memoizedProps,Px(s,T,x!==null?x.memoizedProps:T)),w&1024&&(Bx=!0);break;case 6:if(_i(c,s),Ti(s),w&4){if(s.stateNode===null)throw Error(r(162));w=s.memoizedProps,x=s.stateNode;try{x.nodeValue=w}catch(rt){hn(s,s.return,rt)}}break;case 3:if(y0=null,T=Ua,Ua=g0(c.containerInfo),_i(c,s),Ua=T,Ti(s),w&4&&x!==null&&x.memoizedState.isDehydrated)try{lu(c.containerInfo)}catch(rt){hn(s,s.return,rt)}Bx&&(Bx=!1,a2(s));break;case 4:w=Ua,Ua=g0(s.stateNode.containerInfo),_i(c,s),Ti(s),Ua=w;break;case 12:_i(c,s),Ti(s);break;case 31:_i(c,s),Ti(s),w&4&&(w=s.updateQueue,w!==null&&(s.updateQueue=null,n0(s,w)));break;case 13:_i(c,s),Ti(s),s.child.flags&8192&&s.memoizedState!==null!=(x!==null&&x.memoizedState!==null)&&(i0=_t()),w&4&&(w=s.updateQueue,w!==null&&(s.updateQueue=null,n0(s,w)));break;case 22:T=s.memoizedState!==null;var ae=x!==null&&x.memoizedState!==null,Ae=zs,Me=vr;if(zs=Ae||T,vr=Me||ae,_i(c,s),vr=Me,zs=Ae,Ti(s),w&8192)e:for(c=s.stateNode,c._visibility=T?c._visibility&-2:c._visibility|1,T&&(x===null||ae||zs||vr||Xl(s)),x=null,c=s;;){if(c.tag===5||c.tag===26){if(x===null){ae=x=c;try{if(D=ae.stateNode,T)H=D.style,typeof H.setProperty=="function"?H.setProperty("display","none","important"):H.display="none";else{X=ae.stateNode;var Le=ae.memoizedProps.style,Ce=Le!=null&&Le.hasOwnProperty("display")?Le.display:null;X.style.display=Ce==null||typeof Ce=="boolean"?"":(""+Ce).trim()}}catch(rt){hn(ae,ae.return,rt)}}}else if(c.tag===6){if(x===null){ae=c;try{ae.stateNode.nodeValue=T?"":ae.memoizedProps}catch(rt){hn(ae,ae.return,rt)}}}else if(c.tag===18){if(x===null){ae=c;try{var Re=ae.stateNode;T?W2(Re,!0):W2(ae.stateNode,!1)}catch(rt){hn(ae,ae.return,rt)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===s)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===s)break e;for(;c.sibling===null;){if(c.return===null||c.return===s)break e;x===c&&(x=null),c=c.return}x===c&&(x=null),c.sibling.return=c.return,c=c.sibling}w&4&&(w=s.updateQueue,w!==null&&(x=w.retryQueue,x!==null&&(w.retryQueue=null,n0(s,x))));break;case 19:_i(c,s),Ti(s),w&4&&(w=s.updateQueue,w!==null&&(s.updateQueue=null,n0(s,w)));break;case 30:break;case 21:break;default:_i(c,s),Ti(s)}}function Ti(s){var c=s.flags;if(c&2){try{for(var x,w=s.return;w!==null;){if(XA(w)){x=w;break}w=w.return}if(x==null)throw Error(r(160));switch(x.tag){case 27:var T=x.stateNode,D=jx(s);t0(s,D,T);break;case 5:var H=x.stateNode;x.flags&32&&(Ro(H,""),x.flags&=-33);var X=jx(s);t0(s,X,H);break;case 3:case 4:var ae=x.stateNode.containerInfo,Ae=jx(s);Lx(s,Ae,ae);break;default:throw Error(r(161))}}catch(Me){hn(s,s.return,Me)}s.flags&=-3}c&4096&&(s.flags&=-4097)}function a2(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var c=s;a2(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),s=s.sibling}}function Vs(s,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)QA(s,c.alternate,c),c=c.sibling}function Xl(s){for(s=s.child;s!==null;){var c=s;switch(c.tag){case 0:case 11:case 14:case 15:Wo(4,c,c.return),Xl(c);break;case 1:ds(c,c.return);var x=c.stateNode;typeof x.componentWillUnmount=="function"&&WA(c,c.return,x),Xl(c);break;case 27:qd(c.stateNode);case 26:case 5:ds(c,c.return),Xl(c);break;case 22:c.memoizedState===null&&Xl(c);break;case 30:Xl(c);break;default:Xl(c)}s=s.sibling}}function qs(s,c,x){for(x=x&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var w=c.alternate,T=s,D=c,H=D.flags;switch(D.tag){case 0:case 11:case 15:qs(T,D,x),Pd(4,D);break;case 1:if(qs(T,D,x),w=D,T=w.stateNode,typeof T.componentDidMount=="function")try{T.componentDidMount()}catch(Ae){hn(w,w.return,Ae)}if(w=D,T=w.updateQueue,T!==null){var X=w.stateNode;try{var ae=T.shared.hiddenCallbacks;if(ae!==null)for(T.shared.hiddenCallbacks=null,T=0;T<ae.length;T++)jS(ae[T],X)}catch(Ae){hn(w,w.return,Ae)}}x&&H&64&&YA(D),jd(D,D.return);break;case 27:JA(D);case 26:case 5:qs(T,D,x),x&&w===null&&H&4&&KA(D),jd(D,D.return);break;case 12:qs(T,D,x);break;case 31:qs(T,D,x),x&&H&4&&n2(T,D);break;case 13:qs(T,D,x),x&&H&4&&r2(T,D);break;case 22:D.memoizedState===null&&qs(T,D,x),jd(D,D.return);break;case 30:break;default:qs(T,D,x)}c=c.sibling}}function Ux(s,c){var x=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(x=s.memoizedState.cachePool.pool),s=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(s=c.memoizedState.cachePool.pool),s!==x&&(s!=null&&s.refCount++,x!=null&&Ed(x))}function Fx(s,c){s=null,c.alternate!==null&&(s=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==s&&(c.refCount++,s!=null&&Ed(s))}function Fa(s,c,x,w){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)s2(s,c,x,w),c=c.sibling}function s2(s,c,x,w){var T=c.flags;switch(c.tag){case 0:case 11:case 15:Fa(s,c,x,w),T&2048&&Pd(9,c);break;case 1:Fa(s,c,x,w);break;case 3:Fa(s,c,x,w),T&2048&&(s=null,c.alternate!==null&&(s=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==s&&(c.refCount++,s!=null&&Ed(s)));break;case 12:if(T&2048){Fa(s,c,x,w),s=c.stateNode;try{var D=c.memoizedProps,H=D.id,X=D.onPostCommit;typeof X=="function"&&X(H,c.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(ae){hn(c,c.return,ae)}}else Fa(s,c,x,w);break;case 31:Fa(s,c,x,w);break;case 13:Fa(s,c,x,w);break;case 23:break;case 22:D=c.stateNode,H=c.alternate,c.memoizedState!==null?D._visibility&2?Fa(s,c,x,w):Ld(s,c):D._visibility&2?Fa(s,c,x,w):(D._visibility|=2,Jc(s,c,x,w,(c.subtreeFlags&10256)!==0||!1)),T&2048&&Ux(H,c);break;case 24:Fa(s,c,x,w),T&2048&&Fx(c.alternate,c);break;default:Fa(s,c,x,w)}}function Jc(s,c,x,w,T){for(T=T&&((c.subtreeFlags&10256)!==0||!1),c=c.child;c!==null;){var D=s,H=c,X=x,ae=w,Ae=H.flags;switch(H.tag){case 0:case 11:case 15:Jc(D,H,X,ae,T),Pd(8,H);break;case 23:break;case 22:var Me=H.stateNode;H.memoizedState!==null?Me._visibility&2?Jc(D,H,X,ae,T):Ld(D,H):(Me._visibility|=2,Jc(D,H,X,ae,T)),T&&Ae&2048&&Ux(H.alternate,H);break;case 24:Jc(D,H,X,ae,T),T&&Ae&2048&&Fx(H.alternate,H);break;default:Jc(D,H,X,ae,T)}c=c.sibling}}function Ld(s,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var x=s,w=c,T=w.flags;switch(w.tag){case 22:Ld(x,w),T&2048&&Ux(w.alternate,w);break;case 24:Ld(x,w),T&2048&&Fx(w.alternate,w);break;default:Ld(x,w)}c=c.sibling}}var Bd=8192;function Zc(s,c,x){if(s.subtreeFlags&Bd)for(s=s.child;s!==null;)o2(s,c,x),s=s.sibling}function o2(s,c,x){switch(s.tag){case 26:Zc(s,c,x),s.flags&Bd&&s.memoizedState!==null&&p5(x,Ua,s.memoizedState,s.memoizedProps);break;case 5:Zc(s,c,x);break;case 3:case 4:var w=Ua;Ua=g0(s.stateNode.containerInfo),Zc(s,c,x),Ua=w;break;case 22:s.memoizedState===null&&(w=s.alternate,w!==null&&w.memoizedState!==null?(w=Bd,Bd=16777216,Zc(s,c,x),Bd=w):Zc(s,c,x));break;default:Zc(s,c,x)}}function l2(s){var c=s.alternate;if(c!==null&&(s=c.child,s!==null)){c.child=null;do c=s.sibling,s.sibling=null,s=c;while(s!==null)}}function Ud(s){var c=s.deletions;if((s.flags&16)!==0){if(c!==null)for(var x=0;x<c.length;x++){var w=c[x];zr=w,u2(w,s)}l2(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)c2(s),s=s.sibling}function c2(s){switch(s.tag){case 0:case 11:case 15:Ud(s),s.flags&2048&&Wo(9,s,s.return);break;case 3:Ud(s);break;case 12:Ud(s);break;case 22:var c=s.stateNode;s.memoizedState!==null&&c._visibility&2&&(s.return===null||s.return.tag!==13)?(c._visibility&=-3,r0(s)):Ud(s);break;default:Ud(s)}}function r0(s){var c=s.deletions;if((s.flags&16)!==0){if(c!==null)for(var x=0;x<c.length;x++){var w=c[x];zr=w,u2(w,s)}l2(s)}for(s=s.child;s!==null;){switch(c=s,c.tag){case 0:case 11:case 15:Wo(8,c,c.return),r0(c);break;case 22:x=c.stateNode,x._visibility&2&&(x._visibility&=-3,r0(c));break;default:r0(c)}s=s.sibling}}function u2(s,c){for(;zr!==null;){var x=zr;switch(x.tag){case 0:case 11:case 15:Wo(8,x,c);break;case 23:case 22:if(x.memoizedState!==null&&x.memoizedState.cachePool!==null){var w=x.memoizedState.cachePool.pool;w!=null&&w.refCount++}break;case 24:Ed(x.memoizedState.cache)}if(w=x.child,w!==null)w.return=x,zr=w;else e:for(x=s;zr!==null;){w=zr;var T=w.sibling,D=w.return;if(e2(w),w===x){zr=null;break e}if(T!==null){T.return=D,zr=T;break e}zr=D}}}var I6={getCacheForType:function(s){var c=Jr(gr),x=c.data.get(s);return x===void 0&&(x=s(),c.data.set(s,x)),x},cacheSignal:function(){return Jr(gr).controller.signal}},R6=typeof WeakMap=="function"?WeakMap:Map,sn=0,_n=null,zt=null,$t=0,fn=0,Gi=null,Ko=!1,Qc=!1,Hx=!1,$s=0,er=0,Xo=0,Jl=0,zx=0,Vi=0,eu=0,Fd=null,Ii=null,Gx=!1,i0=0,d2=0,a0=1/0,s0=null,Jo=null,Rr=0,Zo=null,tu=null,Ys=0,Vx=0,qx=null,f2=null,Hd=0,$x=null;function qi(){return(sn&2)!==0&&$t!==0?$t&-$t:de.T!==null?Zx():St()}function h2(){if(Vi===0)if(($t&536870912)===0||Wt){var s=Lt;Lt<<=1,(Lt&3932160)===0&&(Lt=262144),Vi=s}else Vi=536870912;return s=Hi.current,s!==null&&(s.flags|=32),Vi}function Ri(s,c,x){(s===_n&&(fn===2||fn===9)||s.cancelPendingCommit!==null)&&(nu(s,0),Qo(s,$t,Vi,!1)),ve(s,x),((sn&2)===0||s!==_n)&&(s===_n&&((sn&2)===0&&(Jl|=x),er===4&&Qo(s,$t,Vi,!1)),fs(s))}function p2(s,c,x){if((sn&6)!==0)throw Error(r(327));var w=!x&&(c&127)===0&&(c&s.expiredLanes)===0||hr(s,c),T=w?D6(s,c):Wx(s,c,!0),D=w;do{if(T===0){Qc&&!w&&Qo(s,c,0,!1);break}else{if(x=s.current.alternate,D&&!M6(x)){T=Wx(s,c,!1),D=!1;continue}if(T===2){if(D=c,s.errorRecoveryDisabledLanes&D)var H=0;else H=s.pendingLanes&-536870913,H=H!==0?H:H&536870912?536870912:0;if(H!==0){c=H;e:{var X=s;T=Fd;var ae=X.current.memoizedState.isDehydrated;if(ae&&(nu(X,H).flags|=256),H=Wx(X,H,!1),H!==2){if(Hx&&!ae){X.errorRecoveryDisabledLanes|=D,Jl|=D,T=4;break e}D=Ii,Ii=T,D!==null&&(Ii===null?Ii=D:Ii.push.apply(Ii,D))}T=H}if(D=!1,T!==2)continue}}if(T===1){nu(s,0),Qo(s,c,0,!0);break}e:{switch(w=s,D=T,D){case 0:case 1:throw Error(r(345));case 4:if((c&4194048)!==c)break;case 6:Qo(w,c,Vi,!Ko);break e;case 2:Ii=null;break;case 3:case 5:break;default:throw Error(r(329))}if((c&62914560)===c&&(T=i0+300-_t(),10<T)){if(Qo(w,c,Vi,!Ko),Ns(w,0,!0)!==0)break e;Ys=c,w.timeoutHandle=q2(m2.bind(null,w,x,Ii,s0,Gx,c,Vi,Jl,eu,Ko,D,"Throttled",-0,0),T);break e}m2(w,x,Ii,s0,Gx,c,Vi,Jl,eu,Ko,D,null,-0,0)}}break}while(!0);fs(s)}function m2(s,c,x,w,T,D,H,X,ae,Ae,Me,Le,Ce,Re){if(s.timeoutHandle=-1,Le=c.subtreeFlags,Le&8192||(Le&16785408)===16785408){Le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Si},o2(c,D,Le);var rt=(D&62914560)===D?i0-_t():(D&4194048)===D?d2-_t():0;if(rt=m5(Le,rt),rt!==null){Ys=D,s.cancelPendingCommit=rt(S2.bind(null,s,c,D,x,w,T,H,X,ae,Me,Le,null,Ce,Re)),Qo(s,D,H,!Ae);return}}S2(s,c,D,x,w,T,H,X,ae)}function M6(s){for(var c=s;;){var x=c.tag;if((x===0||x===11||x===15)&&c.flags&16384&&(x=c.updateQueue,x!==null&&(x=x.stores,x!==null)))for(var w=0;w<x.length;w++){var T=x[w],D=T.getSnapshot;T=T.value;try{if(!S(D(),T))return!1}catch{return!1}}if(x=c.child,c.subtreeFlags&16384&&x!==null)x.return=c,c=x;else{if(c===s)break;for(;c.sibling===null;){if(c.return===null||c.return===s)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Qo(s,c,x,w){c&=~zx,c&=~Jl,s.suspendedLanes|=c,s.pingedLanes&=~c,w&&(s.warmLanes|=c),w=s.expirationTimes;for(var T=c;0<T;){var D=31-Tt(T),H=1<<D;w[D]=-1,T&=~H}x!==0&&je(s,x,c)}function o0(){return(sn&6)===0?(zd(0),!1):!0}function Yx(){if(zt!==null){if(fn===0)var s=zt.return;else s=zt,js=zl=null,cx(s),$c=null,Ad=0,s=zt;for(;s!==null;)$A(s.alternate,s),s=s.return;zt=null}}function nu(s,c){var x=s.timeoutHandle;x!==-1&&(s.timeoutHandle=-1,J6(x)),x=s.cancelPendingCommit,x!==null&&(s.cancelPendingCommit=null,x()),Ys=0,Yx(),_n=s,zt=x=ks(s.current,null),$t=c,fn=0,Gi=null,Ko=!1,Qc=hr(s,c),Hx=!1,eu=Vi=zx=Jl=Xo=er=0,Ii=Fd=null,Gx=!1,(c&8)!==0&&(c|=c&32);var w=s.entangledLanes;if(w!==0)for(s=s.entanglements,w&=c;0<w;){var T=31-Tt(w),D=1<<T;c|=s[T],w&=~D}return $s=c,Th(),x}function g2(s,c){It=null,de.H=Od,c===qc||c===jh?(c=OS(),fn=3):c===Jg?(c=OS(),fn=4):fn=c===Cx?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Gi=c,zt===null&&(er=1,Xh(s,fa(c,s.current)))}function x2(){var s=Hi.current;return s===null?!0:($t&4194048)===$t?ga===null:($t&62914560)===$t||($t&536870912)!==0?s===ga:!1}function y2(){var s=de.H;return de.H=Od,s===null?Od:s}function v2(){var s=de.A;return de.A=I6,s}function l0(){er=4,Ko||($t&4194048)!==$t&&Hi.current!==null||(Qc=!0),(Xo&134217727)===0&&(Jl&134217727)===0||_n===null||Qo(_n,$t,Vi,!1)}function Wx(s,c,x){var w=sn;sn|=2;var T=y2(),D=v2();(_n!==s||$t!==c)&&(s0=null,nu(s,c)),c=!1;var H=er;e:do try{if(fn!==0&&zt!==null){var X=zt,ae=Gi;switch(fn){case 8:Yx(),H=6;break e;case 3:case 2:case 9:case 6:Hi.current===null&&(c=!0);var Ae=fn;if(fn=0,Gi=null,ru(s,X,ae,Ae),x&&Qc){H=0;break e}break;default:Ae=fn,fn=0,Gi=null,ru(s,X,ae,Ae)}}O6(),H=er;break}catch(Me){g2(s,Me)}while(!0);return c&&s.shellSuspendCounter++,js=zl=null,sn=w,de.H=T,de.A=D,zt===null&&(_n=null,$t=0,Th()),H}function O6(){for(;zt!==null;)b2(zt)}function D6(s,c){var x=sn;sn|=2;var w=y2(),T=v2();_n!==s||$t!==c?(s0=null,a0=_t()+500,nu(s,c)):Qc=hr(s,c);e:do try{if(fn!==0&&zt!==null){c=zt;var D=Gi;t:switch(fn){case 1:fn=0,Gi=null,ru(s,c,D,1);break;case 2:case 9:if(RS(D)){fn=0,Gi=null,w2(c);break}c=function(){fn!==2&&fn!==9||_n!==s||(fn=7),fs(s)},D.then(c,c);break e;case 3:fn=7;break e;case 4:fn=5;break e;case 7:RS(D)?(fn=0,Gi=null,w2(c)):(fn=0,Gi=null,ru(s,c,D,7));break;case 5:var H=null;switch(zt.tag){case 26:H=zt.memoizedState;case 5:case 27:var X=zt;if(H?sC(H):X.stateNode.complete){fn=0,Gi=null;var ae=X.sibling;if(ae!==null)zt=ae;else{var Ae=X.return;Ae!==null?(zt=Ae,c0(Ae)):zt=null}break t}}fn=0,Gi=null,ru(s,c,D,5);break;case 6:fn=0,Gi=null,ru(s,c,D,6);break;case 8:Yx(),er=6;break e;default:throw Error(r(462))}}k6();break}catch(Me){g2(s,Me)}while(!0);return js=zl=null,de.H=w,de.A=T,sn=x,zt!==null?0:(_n=null,$t=0,Th(),er)}function k6(){for(;zt!==null&&!rs();)b2(zt)}function b2(s){var c=VA(s.alternate,s,$s);s.memoizedProps=s.pendingProps,c===null?c0(s):zt=c}function w2(s){var c=s,x=c.alternate;switch(c.tag){case 15:case 0:c=BA(x,c,c.pendingProps,c.type,void 0,$t);break;case 11:c=BA(x,c,c.pendingProps,c.type.render,c.ref,$t);break;case 5:cx(c);default:$A(x,c),c=zt=vS(c,$s),c=VA(x,c,$s)}s.memoizedProps=s.pendingProps,c===null?c0(s):zt=c}function ru(s,c,x,w){js=zl=null,cx(c),$c=null,Ad=0;var T=c.return;try{if(E6(s,T,c,x,$t)){er=1,Xh(s,fa(x,s.current)),zt=null;return}}catch(D){if(T!==null)throw zt=T,D;er=1,Xh(s,fa(x,s.current)),zt=null;return}c.flags&32768?(Wt||w===1?s=!0:Qc||($t&536870912)!==0?s=!1:(Ko=s=!0,(w===2||w===9||w===3||w===6)&&(w=Hi.current,w!==null&&w.tag===13&&(w.flags|=16384))),E2(c,s)):c0(c)}function c0(s){var c=s;do{if((c.flags&32768)!==0){E2(c,Ko);return}s=c.return;var x=C6(c.alternate,c,$s);if(x!==null){zt=x;return}if(c=c.sibling,c!==null){zt=c;return}zt=c=s}while(c!==null);er===0&&(er=5)}function E2(s,c){do{var x=N6(s.alternate,s);if(x!==null){x.flags&=32767,zt=x;return}if(x=s.return,x!==null&&(x.flags|=32768,x.subtreeFlags=0,x.deletions=null),!c&&(s=s.sibling,s!==null)){zt=s;return}zt=s=x}while(s!==null);er=6,zt=null}function S2(s,c,x,w,T,D,H,X,ae){s.cancelPendingCommit=null;do u0();while(Rr!==0);if((sn&6)!==0)throw Error(r(327));if(c!==null){if(c===s.current)throw Error(r(177));if(D=c.lanes|c.childLanes,D|=jg,xe(s,x,D,H,X,ae),s===_n&&(zt=_n=null,$t=0),tu=c,Zo=s,Ys=x,Vx=D,qx=T,f2=w,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,B6(di,function(){return T2(),null})):(s.callbackNode=null,s.callbackPriority=0),w=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||w){w=de.T,de.T=null,T=ge.p,ge.p=2,H=sn,sn|=4;try{_6(s,c,x)}finally{sn=H,ge.p=T,de.T=w}}Rr=1,A2(),C2(),N2()}}function A2(){if(Rr===1){Rr=0;var s=Zo,c=tu,x=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||x){x=de.T,de.T=null;var w=ge.p;ge.p=2;var T=sn;sn|=4;try{i2(c,s);var D=sy,H=$(s.containerInfo),X=D.focusedElem,ae=D.selectionRange;if(H!==X&&X&&X.ownerDocument&&F(X.ownerDocument.documentElement,X)){if(ae!==null&&K(X)){var Ae=ae.start,Me=ae.end;if(Me===void 0&&(Me=Ae),"selectionStart"in X)X.selectionStart=Ae,X.selectionEnd=Math.min(Me,X.value.length);else{var Le=X.ownerDocument||document,Ce=Le&&Le.defaultView||window;if(Ce.getSelection){var Re=Ce.getSelection(),rt=X.textContent.length,mt=Math.min(ae.start,rt),bn=ae.end===void 0?mt:Math.min(ae.end,rt);!Re.extend&&mt>bn&&(H=bn,bn=mt,mt=H);var ye=P(X,mt),fe=P(X,bn);if(ye&&fe&&(Re.rangeCount!==1||Re.anchorNode!==ye.node||Re.anchorOffset!==ye.offset||Re.focusNode!==fe.node||Re.focusOffset!==fe.offset)){var Se=Le.createRange();Se.setStart(ye.node,ye.offset),Re.removeAllRanges(),mt>bn?(Re.addRange(Se),Re.extend(fe.node,fe.offset)):(Se.setEnd(fe.node,fe.offset),Re.addRange(Se))}}}}for(Le=[],Re=X;Re=Re.parentNode;)Re.nodeType===1&&Le.push({element:Re,left:Re.scrollLeft,top:Re.scrollTop});for(typeof X.focus=="function"&&X.focus(),X=0;X<Le.length;X++){var Pe=Le[X];Pe.element.scrollLeft=Pe.left,Pe.element.scrollTop=Pe.top}}E0=!!ay,sy=ay=null}finally{sn=T,ge.p=w,de.T=x}}s.current=c,Rr=2}}function C2(){if(Rr===2){Rr=0;var s=Zo,c=tu,x=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||x){x=de.T,de.T=null;var w=ge.p;ge.p=2;var T=sn;sn|=4;try{QA(s,c.alternate,c)}finally{sn=T,ge.p=w,de.T=x}}Rr=3}}function N2(){if(Rr===4||Rr===3){Rr=0,Ke();var s=Zo,c=tu,x=Ys,w=f2;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?Rr=5:(Rr=0,tu=Zo=null,_2(s,s.pendingLanes));var T=s.pendingLanes;if(T===0&&(Jo=null),kt(x),c=c.stateNode,ze&&typeof ze.onCommitFiberRoot=="function")try{ze.onCommitFiberRoot(xn,c,void 0,(c.current.flags&128)===128)}catch{}if(w!==null){c=de.T,T=ge.p,ge.p=2,de.T=null;try{for(var D=s.onRecoverableError,H=0;H<w.length;H++){var X=w[H];D(X.value,{componentStack:X.stack})}}finally{de.T=c,ge.p=T}}(Ys&3)!==0&&u0(),fs(s),T=s.pendingLanes,(x&261930)!==0&&(T&42)!==0?s===$x?Hd++:(Hd=0,$x=s):Hd=0,zd(0)}}function _2(s,c){(s.pooledCacheLanes&=c)===0&&(c=s.pooledCache,c!=null&&(s.pooledCache=null,Ed(c)))}function u0(){return A2(),C2(),N2(),T2()}function T2(){if(Rr!==5)return!1;var s=Zo,c=Vx;Vx=0;var x=kt(Ys),w=de.T,T=ge.p;try{ge.p=32>x?32:x,de.T=null,x=qx,qx=null;var D=Zo,H=Ys;if(Rr=0,tu=Zo=null,Ys=0,(sn&6)!==0)throw Error(r(331));var X=sn;if(sn|=4,c2(D.current),s2(D,D.current,H,x),sn=X,zd(0,!1),ze&&typeof ze.onPostCommitFiberRoot=="function")try{ze.onPostCommitFiberRoot(xn,D)}catch{}return!0}finally{ge.p=T,de.T=w,_2(s,c)}}function I2(s,c,x){c=fa(x,c),c=Ax(s.stateNode,c,2),s=qo(s,c,2),s!==null&&(ve(s,2),fs(s))}function hn(s,c,x){if(s.tag===3)I2(s,s,x);else for(;c!==null;){if(c.tag===3){I2(c,s,x);break}else if(c.tag===1){var w=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(Jo===null||!Jo.has(w))){s=fa(x,s),x=RA(2),w=qo(c,x,2),w!==null&&(MA(x,w,c,s),ve(w,2),fs(w));break}}c=c.return}}function Kx(s,c,x){var w=s.pingCache;if(w===null){w=s.pingCache=new R6;var T=new Set;w.set(c,T)}else T=w.get(c),T===void 0&&(T=new Set,w.set(c,T));T.has(x)||(Hx=!0,T.add(x),s=P6.bind(null,s,c,x),c.then(s,s))}function P6(s,c,x){var w=s.pingCache;w!==null&&w.delete(c),s.pingedLanes|=s.suspendedLanes&x,s.warmLanes&=~x,_n===s&&($t&x)===x&&(er===4||er===3&&($t&62914560)===$t&&300>_t()-i0?(sn&2)===0&&nu(s,0):zx|=x,eu===$t&&(eu=0)),fs(s)}function R2(s,c){c===0&&(c=sr()),s=Ul(s,c),s!==null&&(ve(s,c),fs(s))}function j6(s){var c=s.memoizedState,x=0;c!==null&&(x=c.retryLane),R2(s,x)}function L6(s,c){var x=0;switch(s.tag){case 31:case 13:var w=s.stateNode,T=s.memoizedState;T!==null&&(x=T.retryLane);break;case 19:w=s.stateNode;break;case 22:w=s.stateNode._retryCache;break;default:throw Error(r(314))}w!==null&&w.delete(c),R2(s,x)}function B6(s,c){return sa(s,c)}var d0=null,iu=null,Xx=!1,f0=!1,Jx=!1,el=0;function fs(s){s!==iu&&s.next===null&&(iu===null?d0=iu=s:iu=iu.next=s),f0=!0,Xx||(Xx=!0,F6())}function zd(s,c){if(!Jx&&f0){Jx=!0;do for(var x=!1,w=d0;w!==null;){if(s!==0){var T=w.pendingLanes;if(T===0)var D=0;else{var H=w.suspendedLanes,X=w.pingedLanes;D=(1<<31-Tt(42|s)+1)-1,D&=T&~(H&~X),D=D&201326741?D&201326741|1:D?D|2:0}D!==0&&(x=!0,k2(w,D))}else D=$t,D=Ns(w,w===_n?D:0,w.cancelPendingCommit!==null||w.timeoutHandle!==-1),(D&3)===0||hr(w,D)||(x=!0,k2(w,D));w=w.next}while(x);Jx=!1}}function U6(){M2()}function M2(){f0=Xx=!1;var s=0;el!==0&&X6()&&(s=el);for(var c=_t(),x=null,w=d0;w!==null;){var T=w.next,D=O2(w,c);D===0?(w.next=null,x===null?d0=T:x.next=T,T===null&&(iu=x)):(x=w,(s!==0||(D&3)!==0)&&(f0=!0)),w=T}Rr!==0&&Rr!==5||zd(s),el!==0&&(el=0)}function O2(s,c){for(var x=s.suspendedLanes,w=s.pingedLanes,T=s.expirationTimes,D=s.pendingLanes&-62914561;0<D;){var H=31-Tt(D),X=1<<H,ae=T[H];ae===-1?((X&x)===0||(X&w)!==0)&&(T[H]=Rl(X,c)):ae<=c&&(s.expiredLanes|=X),D&=~X}if(c=_n,x=$t,x=Ns(s,s===c?x:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),w=s.callbackNode,x===0||s===c&&(fn===2||fn===9)||s.cancelPendingCommit!==null)return w!==null&&w!==null&&Ze(w),s.callbackNode=null,s.callbackPriority=0;if((x&3)===0||hr(s,x)){if(c=x&-x,c===s.callbackPriority)return c;switch(w!==null&&Ze(w),kt(x)){case 2:case 8:x=_l;break;case 32:x=di;break;case 268435456:x=Tl;break;default:x=di}return w=D2.bind(null,s),x=sa(x,w),s.callbackPriority=c,s.callbackNode=x,c}return w!==null&&w!==null&&Ze(w),s.callbackPriority=2,s.callbackNode=null,2}function D2(s,c){if(Rr!==0&&Rr!==5)return s.callbackNode=null,s.callbackPriority=0,null;var x=s.callbackNode;if(u0()&&s.callbackNode!==x)return null;var w=$t;return w=Ns(s,s===_n?w:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),w===0?null:(p2(s,w,c),O2(s,_t()),s.callbackNode!=null&&s.callbackNode===x?D2.bind(null,s):null)}function k2(s,c){if(u0())return null;p2(s,c,!0)}function F6(){Z6(function(){(sn&6)!==0?sa(Ur,U6):M2()})}function Zx(){if(el===0){var s=Gc;s===0&&(s=Cs,Cs<<=1,(Cs&261888)===0&&(Cs=256)),el=s}return el}function P2(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Mo(""+s)}function j2(s,c){var x=c.ownerDocument.createElement("input");return x.name=c.name,x.value=c.value,s.id&&x.setAttribute("form",s.id),c.parentNode.insertBefore(x,c),s=new FormData(s),x.parentNode.removeChild(x),s}function H6(s,c,x,w,T){if(c==="submit"&&x&&x.stateNode===T){var D=P2((T[ct]||null).action),H=w.submitter;H&&(c=(c=H[ct]||null)?P2(c.formAction):H.getAttribute("formAction"),c!==null&&(D=c,H=null));var X=new _r("action","action",null,w,T);s.push({event:X,listeners:[{instance:null,listener:function(){if(w.defaultPrevented){if(el!==0){var ae=H?j2(T,H):new FormData(T);yx(x,{pending:!0,data:ae,method:T.method,action:D},null,ae)}}else typeof D=="function"&&(X.preventDefault(),ae=H?j2(T,H):new FormData(T),yx(x,{pending:!0,data:ae,method:T.method,action:D},D,ae))},currentTarget:T}]})}}for(var Qx=0;Qx<vd.length;Qx++){var ey=vd[Qx],z6=ey.toLowerCase(),G6=ey[0].toUpperCase()+ey.slice(1);Ba(z6,"on"+G6)}Ba(Ci,"onAnimationEnd"),Ba(Kr,"onAnimationIteration"),Ba(dn,"onAnimationStart"),Ba("dblclick","onDoubleClick"),Ba("focusin","onFocus"),Ba("focusout","onBlur"),Ba(Ir,"onTransitionRun"),Ba(mi,"onTransitionStart"),Ba(Bo,"onTransitionCancel"),Ba(Ds,"onTransitionEnd"),Pi("onMouseEnter",["mouseout","mouseover"]),Pi("onMouseLeave",["mouseout","mouseover"]),Pi("onPointerEnter",["pointerout","pointerover"]),Pi("onPointerLeave",["pointerout","pointerover"]),cn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),cn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),cn("onBeforeInput",["compositionend","keypress","textInput","paste"]),cn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),cn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),cn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),V6=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Gd));function L2(s,c){c=(c&4)!==0;for(var x=0;x<s.length;x++){var w=s[x],T=w.event;w=w.listeners;e:{var D=void 0;if(c)for(var H=w.length-1;0<=H;H--){var X=w[H],ae=X.instance,Ae=X.currentTarget;if(X=X.listener,ae!==D&&T.isPropagationStopped())break e;D=X,T.currentTarget=Ae;try{D(T)}catch(Me){_h(Me)}T.currentTarget=null,D=ae}else for(H=0;H<w.length;H++){if(X=w[H],ae=X.instance,Ae=X.currentTarget,X=X.listener,ae!==D&&T.isPropagationStopped())break e;D=X,T.currentTarget=Ae;try{D(T)}catch(Me){_h(Me)}T.currentTarget=null,D=ae}}}}function Gt(s,c){var x=c[Fr];x===void 0&&(x=c[Fr]=new Set);var w=s+"__bubble";x.has(w)||(B2(c,s,2,!1),x.add(w))}function ty(s,c,x){var w=0;c&&(w|=4),B2(x,s,w,c)}var h0="_reactListening"+Math.random().toString(36).slice(2);function ny(s){if(!s[h0]){s[h0]=!0,Be.forEach(function(x){x!=="selectionchange"&&(V6.has(x)||ty(x,!1,s),ty(x,!0,s))});var c=s.nodeType===9?s:s.ownerDocument;c===null||c[h0]||(c[h0]=!0,ty("selectionchange",!1,c))}}function B2(s,c,x,w){switch(hC(c)){case 2:var T=y5;break;case 8:T=v5;break;default:T=xy}x=T.bind(null,c,x,s),T=void 0,!fd||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(T=!0),w?T!==void 0?s.addEventListener(c,x,{capture:!0,passive:T}):s.addEventListener(c,x,!0):T!==void 0?s.addEventListener(c,x,{passive:T}):s.addEventListener(c,x,!1)}function ry(s,c,x,w,T){var D=w;if((c&1)===0&&(c&2)===0&&w!==null)e:for(;;){if(w===null)return;var H=w.tag;if(H===3||H===4){var X=w.stateNode.containerInfo;if(X===T)break;if(H===4)for(H=w.return;H!==null;){var ae=H.tag;if((ae===3||ae===4)&&H.stateNode.containerInfo===T)return;H=H.return}for(;X!==null;){if(H=Xn(X),H===null)return;if(ae=H.tag,ae===5||ae===6||ae===26||ae===27){w=D=H;continue e}X=X.parentNode}}w=w.return}gh(function(){var Ae=D,Me=dd(x),Le=[];e:{var Ce=Nh.get(s);if(Ce!==void 0){var Re=_r,rt=s;switch(s){case"keypress":if(as(x)===0)break e;case"keydown":case"keyup":Re=kc;break;case"focusin":rt="focus",Re=md;break;case"focusout":rt="blur",Re=md;break;case"beforeblur":case"afterblur":Re=md;break;case"click":if(x.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Re=an;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Re=Oc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Re=Dg;break;case Ci:case Kr:case dn:Re=Mt;break;case Ds:Re=Is;break;case"scroll":case"scrollend":Re=xh;break;case"wheel":Re=kg;break;case"copy":case"cut":case"paste":Re=Dc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Re=un;break;case"toggle":case"beforetoggle":Re=xd}var mt=(c&4)!==0,bn=!mt&&(s==="scroll"||s==="scrollend"),ye=mt?Ce!==null?Ce+"Capture":null:Ce;mt=[];for(var fe=Ae,Se;fe!==null;){var Pe=fe;if(Se=Pe.stateNode,Pe=Pe.tag,Pe!==5&&Pe!==26&&Pe!==27||Se===null||ye===null||(Pe=wt(fe,ye),Pe!=null&&mt.push(Vd(fe,Pe,Se))),bn)break;fe=fe.return}0<mt.length&&(Ce=new Re(Ce,rt,null,x,Me),Le.push({event:Ce,listeners:mt}))}}if((c&7)===0){e:{if(Ce=s==="mouseover"||s==="pointerover",Re=s==="mouseout"||s==="pointerout",Ce&&x!==Ml&&(rt=x.relatedTarget||x.fromElement)&&(Xn(rt)||rt[or]))break e;if((Re||Ce)&&(Ce=Me.window===Me?Me:(Ce=Me.ownerDocument)?Ce.defaultView||Ce.parentWindow:window,Re?(rt=x.relatedTarget||x.toElement,Re=Ae,rt=rt?Xn(rt):null,rt!==null&&(bn=a(rt),mt=rt.tag,rt!==bn||mt!==5&&mt!==27&&mt!==6)&&(rt=null)):(Re=null,rt=Ae),Re!==rt)){if(mt=an,Pe="onMouseLeave",ye="onMouseEnter",fe="mouse",(s==="pointerout"||s==="pointerover")&&(mt=un,Pe="onPointerLeave",ye="onPointerEnter",fe="pointer"),bn=Re==null?Ce:No(Re),Se=rt==null?Ce:No(rt),Ce=new mt(Pe,fe+"leave",Re,x,Me),Ce.target=bn,Ce.relatedTarget=Se,Pe=null,Xn(Me)===Ae&&(mt=new mt(ye,fe+"enter",rt,x,Me),mt.target=Se,mt.relatedTarget=bn,Pe=mt),bn=Pe,Re&&rt)t:{for(mt=q6,ye=Re,fe=rt,Se=0,Pe=ye;Pe;Pe=mt(Pe))Se++;Pe=0;for(var dt=fe;dt;dt=mt(dt))Pe++;for(;0<Se-Pe;)ye=mt(ye),Se--;for(;0<Pe-Se;)fe=mt(fe),Pe--;for(;Se--;){if(ye===fe||fe!==null&&ye===fe.alternate){mt=ye;break t}ye=mt(ye),fe=mt(fe)}mt=null}else mt=null;Re!==null&&U2(Le,Ce,Re,mt,!1),rt!==null&&bn!==null&&U2(Le,bn,rt,mt,!0)}}e:{if(Ce=Ae?No(Ae):window,Re=Ce.nodeName&&Ce.nodeName.toLowerCase(),Re==="select"||Re==="input"&&Ce.type==="file")var Zt=Ui;else if(yd(Ce))if(Ch)Zt=v;else{Zt=d;var at=o}else Re=Ce.nodeName,!Re||Re.toLowerCase()!=="input"||Ce.type!=="checkbox"&&Ce.type!=="radio"?Ae&&An(Ae.elementType)&&(Zt=Ui):Zt=m;if(Zt&&(Zt=Zt(s,Ae))){Bi(Le,Zt,x,Me);break e}at&&at(s,Ce,Ae),s==="focusout"&&Ae&&Ce.type==="number"&&Ae.memoizedProps.value!=null&&Q(Ce,"number",Ce.value)}switch(at=Ae?No(Ae):window,s){case"focusin":(yd(at)||at.contentEditable==="true")&&(oe=at,ce=Ae,be=null);break;case"focusout":be=ce=oe=null;break;case"mousedown":_e=!0;break;case"contextmenu":case"mouseup":case"dragend":_e=!1,Ge(Le,x,Me);break;case"selectionchange":if(ee)break;case"keydown":case"keyup":Ge(Le,x,Me)}var Ot;if(kl)e:{switch(s){case"compositionstart":var Yt="onCompositionStart";break e;case"compositionend":Yt="onCompositionEnd";break e;case"compositionupdate":Yt="onCompositionUpdate";break e}Yt=void 0}else Lo?Ah(s,x)&&(Yt="onCompositionEnd"):s==="keydown"&&x.keyCode===229&&(Yt="onCompositionStart");Yt&&(Sh&&x.locale!=="ko"&&(Lo||Yt!=="onCompositionStart"?Yt==="onCompositionEnd"&&Lo&&(Ot=Oo()):(ja=Me,La="value"in ja?ja.value:ja.textContent,Lo=!0)),at=p0(Ae,Yt),0<at.length&&(Yt=new bh(Yt,s,null,x,Me),Le.push({event:Yt,listeners:at}),Ot?Yt.data=Ot:(Ot=jo(x),Ot!==null&&(Yt.data=Ot)))),(Ot=Eh?ls(s,x):jc(s,x))&&(Yt=p0(Ae,"onBeforeInput"),0<Yt.length&&(at=new bh("onBeforeInput","beforeinput",null,x,Me),Le.push({event:at,listeners:Yt}),at.data=Ot)),H6(Le,s,Ae,x,Me)}L2(Le,c)})}function Vd(s,c,x){return{instance:s,listener:c,currentTarget:x}}function p0(s,c){for(var x=c+"Capture",w=[];s!==null;){var T=s,D=T.stateNode;if(T=T.tag,T!==5&&T!==26&&T!==27||D===null||(T=wt(s,x),T!=null&&w.unshift(Vd(s,T,D)),T=wt(s,c),T!=null&&w.push(Vd(s,T,D))),s.tag===3)return w;s=s.return}return[]}function q6(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function U2(s,c,x,w,T){for(var D=c._reactName,H=[];x!==null&&x!==w;){var X=x,ae=X.alternate,Ae=X.stateNode;if(X=X.tag,ae!==null&&ae===w)break;X!==5&&X!==26&&X!==27||Ae===null||(ae=Ae,T?(Ae=wt(x,D),Ae!=null&&H.unshift(Vd(x,Ae,ae))):T||(Ae=wt(x,D),Ae!=null&&H.push(Vd(x,Ae,ae)))),x=x.return}H.length!==0&&s.push({event:c,listeners:H})}var $6=/\r\n?/g,Y6=/\u0000|\uFFFD/g;function F2(s){return(typeof s=="string"?s:""+s).replace($6,`
`).replace(Y6,"")}function H2(s,c){return c=F2(c),F2(s)===c}function vn(s,c,x,w,T,D){switch(x){case"children":typeof w=="string"?c==="body"||c==="textarea"&&w===""||Ro(s,w):(typeof w=="number"||typeof w=="bigint")&&c!=="body"&&Ro(s,""+w);break;case"className":To(s,"class",w);break;case"tabIndex":To(s,"tabindex",w);break;case"dir":case"role":case"viewBox":case"width":case"height":To(s,x,w);break;case"style":ut(s,w,D);break;case"data":if(c!=="object"){To(s,"data",w);break}case"src":case"href":if(w===""&&(c!=="a"||x!=="href")){s.removeAttribute(x);break}if(w==null||typeof w=="function"||typeof w=="symbol"||typeof w=="boolean"){s.removeAttribute(x);break}w=Mo(""+w),s.setAttribute(x,w);break;case"action":case"formAction":if(typeof w=="function"){s.setAttribute(x,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof D=="function"&&(x==="formAction"?(c!=="input"&&vn(s,c,"name",T.name,T,null),vn(s,c,"formEncType",T.formEncType,T,null),vn(s,c,"formMethod",T.formMethod,T,null),vn(s,c,"formTarget",T.formTarget,T,null)):(vn(s,c,"encType",T.encType,T,null),vn(s,c,"method",T.method,T,null),vn(s,c,"target",T.target,T,null)));if(w==null||typeof w=="symbol"||typeof w=="boolean"){s.removeAttribute(x);break}w=Mo(""+w),s.setAttribute(x,w);break;case"onClick":w!=null&&(s.onclick=Si);break;case"onScroll":w!=null&&Gt("scroll",s);break;case"onScrollEnd":w!=null&&Gt("scrollend",s);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(r(61));if(x=w.__html,x!=null){if(T.children!=null)throw Error(r(60));s.innerHTML=x}}break;case"multiple":s.multiple=w&&typeof w!="function"&&typeof w!="symbol";break;case"muted":s.muted=w&&typeof w!="function"&&typeof w!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(w==null||typeof w=="function"||typeof w=="boolean"||typeof w=="symbol"){s.removeAttribute("xlink:href");break}x=Mo(""+w),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",x);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":w!=null&&typeof w!="function"&&typeof w!="symbol"?s.setAttribute(x,""+w):s.removeAttribute(x);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":w&&typeof w!="function"&&typeof w!="symbol"?s.setAttribute(x,""):s.removeAttribute(x);break;case"capture":case"download":w===!0?s.setAttribute(x,""):w!==!1&&w!=null&&typeof w!="function"&&typeof w!="symbol"?s.setAttribute(x,w):s.removeAttribute(x);break;case"cols":case"rows":case"size":case"span":w!=null&&typeof w!="function"&&typeof w!="symbol"&&!isNaN(w)&&1<=w?s.setAttribute(x,w):s.removeAttribute(x);break;case"rowSpan":case"start":w==null||typeof w=="function"||typeof w=="symbol"||isNaN(w)?s.removeAttribute(x):s.setAttribute(x,w);break;case"popover":Gt("beforetoggle",s),Gt("toggle",s),_o(s,"popover",w);break;case"xlinkActuate":ji(s,"http://www.w3.org/1999/xlink","xlink:actuate",w);break;case"xlinkArcrole":ji(s,"http://www.w3.org/1999/xlink","xlink:arcrole",w);break;case"xlinkRole":ji(s,"http://www.w3.org/1999/xlink","xlink:role",w);break;case"xlinkShow":ji(s,"http://www.w3.org/1999/xlink","xlink:show",w);break;case"xlinkTitle":ji(s,"http://www.w3.org/1999/xlink","xlink:title",w);break;case"xlinkType":ji(s,"http://www.w3.org/1999/xlink","xlink:type",w);break;case"xmlBase":ji(s,"http://www.w3.org/XML/1998/namespace","xml:base",w);break;case"xmlLang":ji(s,"http://www.w3.org/XML/1998/namespace","xml:lang",w);break;case"xmlSpace":ji(s,"http://www.w3.org/XML/1998/namespace","xml:space",w);break;case"is":_o(s,"is",w);break;case"innerText":case"textContent":break;default:(!(2<x.length)||x[0]!=="o"&&x[0]!=="O"||x[1]!=="n"&&x[1]!=="N")&&(x=mh.get(x)||x,_o(s,x,w))}}function iy(s,c,x,w,T,D){switch(x){case"style":ut(s,w,D);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(r(61));if(x=w.__html,x!=null){if(T.children!=null)throw Error(r(60));s.innerHTML=x}}break;case"children":typeof w=="string"?Ro(s,w):(typeof w=="number"||typeof w=="bigint")&&Ro(s,""+w);break;case"onScroll":w!=null&&Gt("scroll",s);break;case"onScrollEnd":w!=null&&Gt("scrollend",s);break;case"onClick":w!=null&&(s.onclick=Si);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ph.hasOwnProperty(x))e:{if(x[0]==="o"&&x[1]==="n"&&(T=x.endsWith("Capture"),c=x.slice(2,T?x.length-7:void 0),D=s[ct]||null,D=D!=null?D[x]:null,typeof D=="function"&&s.removeEventListener(c,D,T),typeof w=="function")){typeof D!="function"&&D!==null&&(x in s?s[x]=null:s.hasAttribute(x)&&s.removeAttribute(x)),s.addEventListener(c,w,T);break e}x in s?s[x]=w:w===!0?s.setAttribute(x,""):_o(s,x,w)}}}function Qr(s,c,x){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Gt("error",s),Gt("load",s);var w=!1,T=!1,D;for(D in x)if(x.hasOwnProperty(D)){var H=x[D];if(H!=null)switch(D){case"src":w=!0;break;case"srcSet":T=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:vn(s,c,D,H,x,null)}}T&&vn(s,c,"srcSet",x.srcSet,x,null),w&&vn(s,c,"src",x.src,x,null);return;case"input":Gt("invalid",s);var X=D=H=T=null,ae=null,Ae=null;for(w in x)if(x.hasOwnProperty(w)){var Me=x[w];if(Me!=null)switch(w){case"name":T=Me;break;case"type":H=Me;break;case"checked":ae=Me;break;case"defaultChecked":Ae=Me;break;case"value":D=Me;break;case"defaultValue":X=Me;break;case"children":case"dangerouslySetInnerHTML":if(Me!=null)throw Error(r(137,c));break;default:vn(s,c,w,Me,x,null)}}Ee(s,D,X,ae,Ae,H,T,!1);return;case"select":Gt("invalid",s),w=H=D=null;for(T in x)if(x.hasOwnProperty(T)&&(X=x[T],X!=null))switch(T){case"value":D=X;break;case"defaultValue":H=X;break;case"multiple":w=X;default:vn(s,c,T,X,x,null)}c=D,x=H,s.multiple=!!w,c!=null?it(s,!!w,c,!1):x!=null&&it(s,!!w,x,!0);return;case"textarea":Gt("invalid",s),D=T=w=null;for(H in x)if(x.hasOwnProperty(H)&&(X=x[H],X!=null))switch(H){case"value":w=X;break;case"defaultValue":T=X;break;case"children":D=X;break;case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(91));break;default:vn(s,c,H,X,x,null)}hi(s,w,T,D);return;case"option":for(ae in x)if(x.hasOwnProperty(ae)&&(w=x[ae],w!=null))switch(ae){case"selected":s.selected=w&&typeof w!="function"&&typeof w!="symbol";break;default:vn(s,c,ae,w,x,null)}return;case"dialog":Gt("beforetoggle",s),Gt("toggle",s),Gt("cancel",s),Gt("close",s);break;case"iframe":case"object":Gt("load",s);break;case"video":case"audio":for(w=0;w<Gd.length;w++)Gt(Gd[w],s);break;case"image":Gt("error",s),Gt("load",s);break;case"details":Gt("toggle",s);break;case"embed":case"source":case"link":Gt("error",s),Gt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ae in x)if(x.hasOwnProperty(Ae)&&(w=x[Ae],w!=null))switch(Ae){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:vn(s,c,Ae,w,x,null)}return;default:if(An(c)){for(Me in x)x.hasOwnProperty(Me)&&(w=x[Me],w!==void 0&&iy(s,c,Me,w,x,void 0));return}}for(X in x)x.hasOwnProperty(X)&&(w=x[X],w!=null&&vn(s,c,X,w,x,null))}function W6(s,c,x,w){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var T=null,D=null,H=null,X=null,ae=null,Ae=null,Me=null;for(Re in x){var Le=x[Re];if(x.hasOwnProperty(Re)&&Le!=null)switch(Re){case"checked":break;case"value":break;case"defaultValue":ae=Le;default:w.hasOwnProperty(Re)||vn(s,c,Re,null,w,Le)}}for(var Ce in w){var Re=w[Ce];if(Le=x[Ce],w.hasOwnProperty(Ce)&&(Re!=null||Le!=null))switch(Ce){case"type":D=Re;break;case"name":T=Re;break;case"checked":Ae=Re;break;case"defaultChecked":Me=Re;break;case"value":H=Re;break;case"defaultValue":X=Re;break;case"children":case"dangerouslySetInnerHTML":if(Re!=null)throw Error(r(137,c));break;default:Re!==Le&&vn(s,c,Ce,Re,w,Le)}}pr(s,H,X,ae,Ae,Me,D,T);return;case"select":Re=H=X=Ce=null;for(D in x)if(ae=x[D],x.hasOwnProperty(D)&&ae!=null)switch(D){case"value":break;case"multiple":Re=ae;default:w.hasOwnProperty(D)||vn(s,c,D,null,w,ae)}for(T in w)if(D=w[T],ae=x[T],w.hasOwnProperty(T)&&(D!=null||ae!=null))switch(T){case"value":Ce=D;break;case"defaultValue":X=D;break;case"multiple":H=D;default:D!==ae&&vn(s,c,T,D,w,ae)}c=X,x=H,w=Re,Ce!=null?it(s,!!x,Ce,!1):!!w!=!!x&&(c!=null?it(s,!!x,c,!0):it(s,!!x,x?[]:"",!1));return;case"textarea":Re=Ce=null;for(X in x)if(T=x[X],x.hasOwnProperty(X)&&T!=null&&!w.hasOwnProperty(X))switch(X){case"value":break;case"children":break;default:vn(s,c,X,null,w,T)}for(H in w)if(T=w[H],D=x[H],w.hasOwnProperty(H)&&(T!=null||D!=null))switch(H){case"value":Ce=T;break;case"defaultValue":Re=T;break;case"children":break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:T!==D&&vn(s,c,H,T,w,D)}lr(s,Ce,Re);return;case"option":for(var rt in x)if(Ce=x[rt],x.hasOwnProperty(rt)&&Ce!=null&&!w.hasOwnProperty(rt))switch(rt){case"selected":s.selected=!1;break;default:vn(s,c,rt,null,w,Ce)}for(ae in w)if(Ce=w[ae],Re=x[ae],w.hasOwnProperty(ae)&&Ce!==Re&&(Ce!=null||Re!=null))switch(ae){case"selected":s.selected=Ce&&typeof Ce!="function"&&typeof Ce!="symbol";break;default:vn(s,c,ae,Ce,w,Re)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var mt in x)Ce=x[mt],x.hasOwnProperty(mt)&&Ce!=null&&!w.hasOwnProperty(mt)&&vn(s,c,mt,null,w,Ce);for(Ae in w)if(Ce=w[Ae],Re=x[Ae],w.hasOwnProperty(Ae)&&Ce!==Re&&(Ce!=null||Re!=null))switch(Ae){case"children":case"dangerouslySetInnerHTML":if(Ce!=null)throw Error(r(137,c));break;default:vn(s,c,Ae,Ce,w,Re)}return;default:if(An(c)){for(var bn in x)Ce=x[bn],x.hasOwnProperty(bn)&&Ce!==void 0&&!w.hasOwnProperty(bn)&&iy(s,c,bn,void 0,w,Ce);for(Me in w)Ce=w[Me],Re=x[Me],!w.hasOwnProperty(Me)||Ce===Re||Ce===void 0&&Re===void 0||iy(s,c,Me,Ce,w,Re);return}}for(var ye in x)Ce=x[ye],x.hasOwnProperty(ye)&&Ce!=null&&!w.hasOwnProperty(ye)&&vn(s,c,ye,null,w,Ce);for(Le in w)Ce=w[Le],Re=x[Le],!w.hasOwnProperty(Le)||Ce===Re||Ce==null&&Re==null||vn(s,c,Le,Ce,w,Re)}function z2(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function K6(){if(typeof performance.getEntriesByType=="function"){for(var s=0,c=0,x=performance.getEntriesByType("resource"),w=0;w<x.length;w++){var T=x[w],D=T.transferSize,H=T.initiatorType,X=T.duration;if(D&&X&&z2(H)){for(H=0,X=T.responseEnd,w+=1;w<x.length;w++){var ae=x[w],Ae=ae.startTime;if(Ae>X)break;var Me=ae.transferSize,Le=ae.initiatorType;Me&&z2(Le)&&(ae=ae.responseEnd,H+=Me*(ae<X?1:(X-Ae)/(ae-Ae)))}if(--w,c+=8*(D+H)/(T.duration/1e3),s++,10<s)break}}if(0<s)return c/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var ay=null,sy=null;function m0(s){return s.nodeType===9?s:s.ownerDocument}function G2(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function V2(s,c){if(s===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&c==="foreignObject"?0:s}function oy(s,c){return s==="textarea"||s==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var ly=null;function X6(){var s=window.event;return s&&s.type==="popstate"?s===ly?!1:(ly=s,!0):(ly=null,!1)}var q2=typeof setTimeout=="function"?setTimeout:void 0,J6=typeof clearTimeout=="function"?clearTimeout:void 0,$2=typeof Promise=="function"?Promise:void 0,Z6=typeof queueMicrotask=="function"?queueMicrotask:typeof $2<"u"?function(s){return $2.resolve(null).then(s).catch(Q6)}:q2;function Q6(s){setTimeout(function(){throw s})}function tl(s){return s==="head"}function Y2(s,c){var x=c,w=0;do{var T=x.nextSibling;if(s.removeChild(x),T&&T.nodeType===8)if(x=T.data,x==="/$"||x==="/&"){if(w===0){s.removeChild(T),lu(c);return}w--}else if(x==="$"||x==="$?"||x==="$~"||x==="$!"||x==="&")w++;else if(x==="html")qd(s.ownerDocument.documentElement);else if(x==="head"){x=s.ownerDocument.head,qd(x);for(var D=x.firstChild;D;){var H=D.nextSibling,X=D.nodeName;D[Oa]||X==="SCRIPT"||X==="STYLE"||X==="LINK"&&D.rel.toLowerCase()==="stylesheet"||x.removeChild(D),D=H}}else x==="body"&&qd(s.ownerDocument.body);x=T}while(x);lu(c)}function W2(s,c){var x=s;s=0;do{var w=x.nextSibling;if(x.nodeType===1?c?(x._stashedDisplay=x.style.display,x.style.display="none"):(x.style.display=x._stashedDisplay||"",x.getAttribute("style")===""&&x.removeAttribute("style")):x.nodeType===3&&(c?(x._stashedText=x.nodeValue,x.nodeValue=""):x.nodeValue=x._stashedText||""),w&&w.nodeType===8)if(x=w.data,x==="/$"){if(s===0)break;s--}else x!=="$"&&x!=="$?"&&x!=="$~"&&x!=="$!"||s++;x=w}while(x)}function cy(s){var c=s.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var x=c;switch(c=c.nextSibling,x.nodeName){case"HTML":case"HEAD":case"BODY":cy(x),Ei(x);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(x.rel.toLowerCase()==="stylesheet")continue}s.removeChild(x)}}function e5(s,c,x,w){for(;s.nodeType===1;){var T=x;if(s.nodeName.toLowerCase()!==c.toLowerCase()){if(!w&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(w){if(!s[Oa])switch(c){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(D=s.getAttribute("rel"),D==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(D!==T.rel||s.getAttribute("href")!==(T.href==null||T.href===""?null:T.href)||s.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin)||s.getAttribute("title")!==(T.title==null?null:T.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(D=s.getAttribute("src"),(D!==(T.src==null?null:T.src)||s.getAttribute("type")!==(T.type==null?null:T.type)||s.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin))&&D&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(c==="input"&&s.type==="hidden"){var D=T.name==null?null:""+T.name;if(T.type==="hidden"&&s.getAttribute("name")===D)return s}else return s;if(s=xa(s.nextSibling),s===null)break}return null}function t5(s,c,x){if(c==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!x||(s=xa(s.nextSibling),s===null))return null;return s}function K2(s,c){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!c||(s=xa(s.nextSibling),s===null))return null;return s}function uy(s){return s.data==="$?"||s.data==="$~"}function dy(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function n5(s,c){var x=s.ownerDocument;if(s.data==="$~")s._reactRetry=c;else if(s.data!=="$?"||x.readyState!=="loading")c();else{var w=function(){c(),x.removeEventListener("DOMContentLoaded",w)};x.addEventListener("DOMContentLoaded",w),s._reactRetry=w}}function xa(s){for(;s!=null;s=s.nextSibling){var c=s.nodeType;if(c===1||c===3)break;if(c===8){if(c=s.data,c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"||c==="F!"||c==="F")break;if(c==="/$"||c==="/&")return null}}return s}var fy=null;function X2(s){s=s.nextSibling;for(var c=0;s;){if(s.nodeType===8){var x=s.data;if(x==="/$"||x==="/&"){if(c===0)return xa(s.nextSibling);c--}else x!=="$"&&x!=="$!"&&x!=="$?"&&x!=="$~"&&x!=="&"||c++}s=s.nextSibling}return null}function J2(s){s=s.previousSibling;for(var c=0;s;){if(s.nodeType===8){var x=s.data;if(x==="$"||x==="$!"||x==="$?"||x==="$~"||x==="&"){if(c===0)return s;c--}else x!=="/$"&&x!=="/&"||c++}s=s.previousSibling}return null}function Z2(s,c,x){switch(c=m0(x),s){case"html":if(s=c.documentElement,!s)throw Error(r(452));return s;case"head":if(s=c.head,!s)throw Error(r(453));return s;case"body":if(s=c.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function qd(s){for(var c=s.attributes;c.length;)s.removeAttributeNode(c[0]);Ei(s)}var ya=new Map,Q2=new Set;function g0(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Ws=ge.d;ge.d={f:r5,r:i5,D:a5,C:s5,L:o5,m:l5,X:u5,S:c5,M:d5};function r5(){var s=Ws.f(),c=o0();return s||c}function i5(s){var c=rn(s);c!==null&&c.tag===5&&c.type==="form"?gA(c):Ws.r(s)}var au=typeof document>"u"?null:document;function eC(s,c,x){var w=au;if(w&&typeof c=="string"&&c){var T=Pt(c);T='link[rel="'+s+'"][href="'+T+'"]',typeof x=="string"&&(T+='[crossorigin="'+x+'"]'),Q2.has(T)||(Q2.add(T),s={rel:s,crossOrigin:x,href:c},w.querySelector(T)===null&&(c=w.createElement("link"),Qr(c,"link",s),Jn(c),w.head.appendChild(c)))}}function a5(s){Ws.D(s),eC("dns-prefetch",s,null)}function s5(s,c){Ws.C(s,c),eC("preconnect",s,c)}function o5(s,c,x){Ws.L(s,c,x);var w=au;if(w&&s&&c){var T='link[rel="preload"][as="'+Pt(c)+'"]';c==="image"&&x&&x.imageSrcSet?(T+='[imagesrcset="'+Pt(x.imageSrcSet)+'"]',typeof x.imageSizes=="string"&&(T+='[imagesizes="'+Pt(x.imageSizes)+'"]')):T+='[href="'+Pt(s)+'"]';var D=T;switch(c){case"style":D=su(s);break;case"script":D=ou(s)}ya.has(D)||(s=y({rel:"preload",href:c==="image"&&x&&x.imageSrcSet?void 0:s,as:c},x),ya.set(D,s),w.querySelector(T)!==null||c==="style"&&w.querySelector($d(D))||c==="script"&&w.querySelector(Yd(D))||(c=w.createElement("link"),Qr(c,"link",s),Jn(c),w.head.appendChild(c)))}}function l5(s,c){Ws.m(s,c);var x=au;if(x&&s){var w=c&&typeof c.as=="string"?c.as:"script",T='link[rel="modulepreload"][as="'+Pt(w)+'"][href="'+Pt(s)+'"]',D=T;switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":D=ou(s)}if(!ya.has(D)&&(s=y({rel:"modulepreload",href:s},c),ya.set(D,s),x.querySelector(T)===null)){switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(x.querySelector(Yd(D)))return}w=x.createElement("link"),Qr(w,"link",s),Jn(w),x.head.appendChild(w)}}}function c5(s,c,x){Ws.S(s,c,x);var w=au;if(w&&s){var T=fi(w).hoistableStyles,D=su(s);c=c||"default";var H=T.get(D);if(!H){var X={loading:0,preload:null};if(H=w.querySelector($d(D)))X.loading=5;else{s=y({rel:"stylesheet",href:s,"data-precedence":c},x),(x=ya.get(D))&&hy(s,x);var ae=H=w.createElement("link");Jn(ae),Qr(ae,"link",s),ae._p=new Promise(function(Ae,Me){ae.onload=Ae,ae.onerror=Me}),ae.addEventListener("load",function(){X.loading|=1}),ae.addEventListener("error",function(){X.loading|=2}),X.loading|=4,x0(H,c,w)}H={type:"stylesheet",instance:H,count:1,state:X},T.set(D,H)}}}function u5(s,c){Ws.X(s,c);var x=au;if(x&&s){var w=fi(x).hoistableScripts,T=ou(s),D=w.get(T);D||(D=x.querySelector(Yd(T)),D||(s=y({src:s,async:!0},c),(c=ya.get(T))&&py(s,c),D=x.createElement("script"),Jn(D),Qr(D,"link",s),x.head.appendChild(D)),D={type:"script",instance:D,count:1,state:null},w.set(T,D))}}function d5(s,c){Ws.M(s,c);var x=au;if(x&&s){var w=fi(x).hoistableScripts,T=ou(s),D=w.get(T);D||(D=x.querySelector(Yd(T)),D||(s=y({src:s,async:!0,type:"module"},c),(c=ya.get(T))&&py(s,c),D=x.createElement("script"),Jn(D),Qr(D,"link",s),x.head.appendChild(D)),D={type:"script",instance:D,count:1,state:null},w.set(T,D))}}function tC(s,c,x,w){var T=(T=ie.current)?g0(T):null;if(!T)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof x.precedence=="string"&&typeof x.href=="string"?(c=su(x.href),x=fi(T).hoistableStyles,w=x.get(c),w||(w={type:"style",instance:null,count:0,state:null},x.set(c,w)),w):{type:"void",instance:null,count:0,state:null};case"link":if(x.rel==="stylesheet"&&typeof x.href=="string"&&typeof x.precedence=="string"){s=su(x.href);var D=fi(T).hoistableStyles,H=D.get(s);if(H||(T=T.ownerDocument||T,H={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},D.set(s,H),(D=T.querySelector($d(s)))&&!D._p&&(H.instance=D,H.state.loading=5),ya.has(s)||(x={rel:"preload",as:"style",href:x.href,crossOrigin:x.crossOrigin,integrity:x.integrity,media:x.media,hrefLang:x.hrefLang,referrerPolicy:x.referrerPolicy},ya.set(s,x),D||f5(T,s,x,H.state))),c&&w===null)throw Error(r(528,""));return H}if(c&&w!==null)throw Error(r(529,""));return null;case"script":return c=x.async,x=x.src,typeof x=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=ou(x),x=fi(T).hoistableScripts,w=x.get(c),w||(w={type:"script",instance:null,count:0,state:null},x.set(c,w)),w):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function su(s){return'href="'+Pt(s)+'"'}function $d(s){return'link[rel="stylesheet"]['+s+"]"}function nC(s){return y({},s,{"data-precedence":s.precedence,precedence:null})}function f5(s,c,x,w){s.querySelector('link[rel="preload"][as="style"]['+c+"]")?w.loading=1:(c=s.createElement("link"),w.preload=c,c.addEventListener("load",function(){return w.loading|=1}),c.addEventListener("error",function(){return w.loading|=2}),Qr(c,"link",x),Jn(c),s.head.appendChild(c))}function ou(s){return'[src="'+Pt(s)+'"]'}function Yd(s){return"script[async]"+s}function rC(s,c,x){if(c.count++,c.instance===null)switch(c.type){case"style":var w=s.querySelector('style[data-href~="'+Pt(x.href)+'"]');if(w)return c.instance=w,Jn(w),w;var T=y({},x,{"data-href":x.href,"data-precedence":x.precedence,href:null,precedence:null});return w=(s.ownerDocument||s).createElement("style"),Jn(w),Qr(w,"style",T),x0(w,x.precedence,s),c.instance=w;case"stylesheet":T=su(x.href);var D=s.querySelector($d(T));if(D)return c.state.loading|=4,c.instance=D,Jn(D),D;w=nC(x),(T=ya.get(T))&&hy(w,T),D=(s.ownerDocument||s).createElement("link"),Jn(D);var H=D;return H._p=new Promise(function(X,ae){H.onload=X,H.onerror=ae}),Qr(D,"link",w),c.state.loading|=4,x0(D,x.precedence,s),c.instance=D;case"script":return D=ou(x.src),(T=s.querySelector(Yd(D)))?(c.instance=T,Jn(T),T):(w=x,(T=ya.get(D))&&(w=y({},x),py(w,T)),s=s.ownerDocument||s,T=s.createElement("script"),Jn(T),Qr(T,"link",w),s.head.appendChild(T),c.instance=T);case"void":return null;default:throw Error(r(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(w=c.instance,c.state.loading|=4,x0(w,x.precedence,s));return c.instance}function x0(s,c,x){for(var w=x.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),T=w.length?w[w.length-1]:null,D=T,H=0;H<w.length;H++){var X=w[H];if(X.dataset.precedence===c)D=X;else if(D!==T)break}D?D.parentNode.insertBefore(s,D.nextSibling):(c=x.nodeType===9?x.head:x,c.insertBefore(s,c.firstChild))}function hy(s,c){s.crossOrigin==null&&(s.crossOrigin=c.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=c.referrerPolicy),s.title==null&&(s.title=c.title)}function py(s,c){s.crossOrigin==null&&(s.crossOrigin=c.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=c.referrerPolicy),s.integrity==null&&(s.integrity=c.integrity)}var y0=null;function iC(s,c,x){if(y0===null){var w=new Map,T=y0=new Map;T.set(x,w)}else T=y0,w=T.get(x),w||(w=new Map,T.set(x,w));if(w.has(s))return w;for(w.set(s,null),x=x.getElementsByTagName(s),T=0;T<x.length;T++){var D=x[T];if(!(D[Oa]||D[Ut]||s==="link"&&D.getAttribute("rel")==="stylesheet")&&D.namespaceURI!=="http://www.w3.org/2000/svg"){var H=D.getAttribute(c)||"";H=s+H;var X=w.get(H);X?X.push(D):w.set(H,[D])}}return w}function aC(s,c,x){s=s.ownerDocument||s,s.head.insertBefore(x,c==="title"?s.querySelector("head > title"):null)}function h5(s,c,x){if(x===1||c.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return s=c.disabled,typeof c.precedence=="string"&&s==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function sC(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function p5(s,c,x,w){if(x.type==="stylesheet"&&(typeof w.media!="string"||matchMedia(w.media).matches!==!1)&&(x.state.loading&4)===0){if(x.instance===null){var T=su(w.href),D=c.querySelector($d(T));if(D){c=D._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(s.count++,s=v0.bind(s),c.then(s,s)),x.state.loading|=4,x.instance=D,Jn(D);return}D=c.ownerDocument||c,w=nC(w),(T=ya.get(T))&&hy(w,T),D=D.createElement("link"),Jn(D);var H=D;H._p=new Promise(function(X,ae){H.onload=X,H.onerror=ae}),Qr(D,"link",w),x.instance=D}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(x,c),(c=x.state.preload)&&(x.state.loading&3)===0&&(s.count++,x=v0.bind(s),c.addEventListener("load",x),c.addEventListener("error",x))}}var my=0;function m5(s,c){return s.stylesheets&&s.count===0&&w0(s,s.stylesheets),0<s.count||0<s.imgCount?function(x){var w=setTimeout(function(){if(s.stylesheets&&w0(s,s.stylesheets),s.unsuspend){var D=s.unsuspend;s.unsuspend=null,D()}},6e4+c);0<s.imgBytes&&my===0&&(my=62500*K6());var T=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&w0(s,s.stylesheets),s.unsuspend)){var D=s.unsuspend;s.unsuspend=null,D()}},(s.imgBytes>my?50:800)+c);return s.unsuspend=x,function(){s.unsuspend=null,clearTimeout(w),clearTimeout(T)}}:null}function v0(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)w0(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var b0=null;function w0(s,c){s.stylesheets=null,s.unsuspend!==null&&(s.count++,b0=new Map,c.forEach(g5,s),b0=null,v0.call(s))}function g5(s,c){if(!(c.state.loading&4)){var x=b0.get(s);if(x)var w=x.get(null);else{x=new Map,b0.set(s,x);for(var T=s.querySelectorAll("link[data-precedence],style[data-precedence]"),D=0;D<T.length;D++){var H=T[D];(H.nodeName==="LINK"||H.getAttribute("media")!=="not all")&&(x.set(H.dataset.precedence,H),w=H)}w&&x.set(null,w)}T=c.instance,H=T.getAttribute("data-precedence"),D=x.get(H)||w,D===w&&x.set(null,T),x.set(H,T),this.count++,w=v0.bind(this),T.addEventListener("load",w),T.addEventListener("error",w),D?D.parentNode.insertBefore(T,D.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(T,s.firstChild)),c.state.loading|=4}}var Wd={$$typeof:L,Provider:null,Consumer:null,_currentValue:De,_currentValue2:De,_threadCount:0};function x5(s,c,x,w,T,D,H,X,ae){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=la(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=la(0),this.hiddenUpdates=la(null),this.identifierPrefix=w,this.onUncaughtError=T,this.onCaughtError=D,this.onRecoverableError=H,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ae,this.incompleteTransitions=new Map}function oC(s,c,x,w,T,D,H,X,ae,Ae,Me,Le){return s=new x5(s,c,x,H,ae,Ae,Me,Le,X),c=1,D===!0&&(c|=24),D=Fi(3,null,null,c),s.current=D,D.stateNode=s,c=Wg(),c.refCount++,s.pooledCache=c,c.refCount++,D.memoizedState={element:w,isDehydrated:x,cache:c},Zg(D),s}function lC(s){return s?(s=Bc,s):Bc}function cC(s,c,x,w,T,D){T=lC(T),w.context===null?w.context=T:w.pendingContext=T,w=Vo(c),w.payload={element:x},D=D===void 0?null:D,D!==null&&(w.callback=D),x=qo(s,w,c),x!==null&&(Ri(x,s,c),Nd(x,s,c))}function uC(s,c){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var x=s.retryLane;s.retryLane=x!==0&&x<c?x:c}}function gy(s,c){uC(s,c),(s=s.alternate)&&uC(s,c)}function dC(s){if(s.tag===13||s.tag===31){var c=Ul(s,67108864);c!==null&&Ri(c,s,67108864),gy(s,67108864)}}function fC(s){if(s.tag===13||s.tag===31){var c=qi();c=bt(c);var x=Ul(s,c);x!==null&&Ri(x,s,c),gy(s,c)}}var E0=!0;function y5(s,c,x,w){var T=de.T;de.T=null;var D=ge.p;try{ge.p=2,xy(s,c,x,w)}finally{ge.p=D,de.T=T}}function v5(s,c,x,w){var T=de.T;de.T=null;var D=ge.p;try{ge.p=8,xy(s,c,x,w)}finally{ge.p=D,de.T=T}}function xy(s,c,x,w){if(E0){var T=yy(w);if(T===null)ry(s,c,w,S0,x),pC(s,w);else if(w5(T,s,c,x,w))w.stopPropagation();else if(pC(s,w),c&4&&-1<b5.indexOf(s)){for(;T!==null;){var D=rn(T);if(D!==null)switch(D.tag){case 3:if(D=D.stateNode,D.current.memoizedState.isDehydrated){var H=oa(D.pendingLanes);if(H!==0){var X=D;for(X.pendingLanes|=2,X.entangledLanes|=2;H;){var ae=1<<31-Tt(H);X.entanglements[1]|=ae,H&=~ae}fs(D),(sn&6)===0&&(a0=_t()+500,zd(0))}}break;case 31:case 13:X=Ul(D,2),X!==null&&Ri(X,D,2),o0(),gy(D,2)}if(D=yy(w),D===null&&ry(s,c,w,S0,x),D===T)break;T=D}T!==null&&w.stopPropagation()}else ry(s,c,w,null,x)}}function yy(s){return s=dd(s),vy(s)}var S0=null;function vy(s){if(S0=null,s=Xn(s),s!==null){var c=a(s);if(c===null)s=null;else{var x=c.tag;if(x===13){if(s=l(c),s!==null)return s;s=null}else if(x===31){if(s=f(c),s!==null)return s;s=null}else if(x===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;s=null}else c!==s&&(s=null)}}return S0=s,null}function hC(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Br()){case Ur:return 2;case _l:return 8;case di:case Cr:return 32;case Tl:return 268435456;default:return 32}default:return 32}}var by=!1,nl=null,rl=null,il=null,Kd=new Map,Xd=new Map,al=[],b5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function pC(s,c){switch(s){case"focusin":case"focusout":nl=null;break;case"dragenter":case"dragleave":rl=null;break;case"mouseover":case"mouseout":il=null;break;case"pointerover":case"pointerout":Kd.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xd.delete(c.pointerId)}}function Jd(s,c,x,w,T,D){return s===null||s.nativeEvent!==D?(s={blockedOn:c,domEventName:x,eventSystemFlags:w,nativeEvent:D,targetContainers:[T]},c!==null&&(c=rn(c),c!==null&&dC(c)),s):(s.eventSystemFlags|=w,c=s.targetContainers,T!==null&&c.indexOf(T)===-1&&c.push(T),s)}function w5(s,c,x,w,T){switch(c){case"focusin":return nl=Jd(nl,s,c,x,w,T),!0;case"dragenter":return rl=Jd(rl,s,c,x,w,T),!0;case"mouseover":return il=Jd(il,s,c,x,w,T),!0;case"pointerover":var D=T.pointerId;return Kd.set(D,Jd(Kd.get(D)||null,s,c,x,w,T)),!0;case"gotpointercapture":return D=T.pointerId,Xd.set(D,Jd(Xd.get(D)||null,s,c,x,w,T)),!0}return!1}function mC(s){var c=Xn(s.target);if(c!==null){var x=a(c);if(x!==null){if(c=x.tag,c===13){if(c=l(x),c!==null){s.blockedOn=c,We(s.priority,function(){fC(x)});return}}else if(c===31){if(c=f(x),c!==null){s.blockedOn=c,We(s.priority,function(){fC(x)});return}}else if(c===3&&x.stateNode.current.memoizedState.isDehydrated){s.blockedOn=x.tag===3?x.stateNode.containerInfo:null;return}}}s.blockedOn=null}function A0(s){if(s.blockedOn!==null)return!1;for(var c=s.targetContainers;0<c.length;){var x=yy(s.nativeEvent);if(x===null){x=s.nativeEvent;var w=new x.constructor(x.type,x);Ml=w,x.target.dispatchEvent(w),Ml=null}else return c=rn(x),c!==null&&dC(c),s.blockedOn=x,!1;c.shift()}return!0}function gC(s,c,x){A0(s)&&x.delete(c)}function E5(){by=!1,nl!==null&&A0(nl)&&(nl=null),rl!==null&&A0(rl)&&(rl=null),il!==null&&A0(il)&&(il=null),Kd.forEach(gC),Xd.forEach(gC)}function C0(s,c){s.blockedOn===c&&(s.blockedOn=null,by||(by=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,E5)))}var N0=null;function xC(s){N0!==s&&(N0=s,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){N0===s&&(N0=null);for(var c=0;c<s.length;c+=3){var x=s[c],w=s[c+1],T=s[c+2];if(typeof w!="function"){if(vy(w||x)===null)continue;break}var D=rn(x);D!==null&&(s.splice(c,3),c-=3,yx(D,{pending:!0,data:T,method:x.method,action:w},w,T))}}))}function lu(s){function c(ae){return C0(ae,s)}nl!==null&&C0(nl,s),rl!==null&&C0(rl,s),il!==null&&C0(il,s),Kd.forEach(c),Xd.forEach(c);for(var x=0;x<al.length;x++){var w=al[x];w.blockedOn===s&&(w.blockedOn=null)}for(;0<al.length&&(x=al[0],x.blockedOn===null);)mC(x),x.blockedOn===null&&al.shift();if(x=(s.ownerDocument||s).$$reactFormReplay,x!=null)for(w=0;w<x.length;w+=3){var T=x[w],D=x[w+1],H=T[ct]||null;if(typeof D=="function")H||xC(x);else if(H){var X=null;if(D&&D.hasAttribute("formAction")){if(T=D,H=D[ct]||null)X=H.formAction;else if(vy(T)!==null)continue}else X=H.action;typeof X=="function"?x[w+1]=X:(x.splice(w,3),w-=3),xC(x)}}}function yC(){function s(D){D.canIntercept&&D.info==="react-transition"&&D.intercept({handler:function(){return new Promise(function(H){return T=H})},focusReset:"manual",scroll:"manual"})}function c(){T!==null&&(T(),T=null),w||setTimeout(x,20)}function x(){if(!w&&!navigation.transition){var D=navigation.currentEntry;D&&D.url!=null&&navigation.navigate(D.url,{state:D.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var w=!1,T=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",c),navigation.addEventListener("navigateerror",c),setTimeout(x,100),function(){w=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",c),navigation.removeEventListener("navigateerror",c),T!==null&&(T(),T=null)}}}function wy(s){this._internalRoot=s}_0.prototype.render=wy.prototype.render=function(s){var c=this._internalRoot;if(c===null)throw Error(r(409));var x=c.current,w=qi();cC(x,w,s,c,null,null)},_0.prototype.unmount=wy.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var c=s.containerInfo;cC(s.current,2,null,s,null,null),o0(),c[or]=null}};function _0(s){this._internalRoot=s}_0.prototype.unstable_scheduleHydration=function(s){if(s){var c=St();s={blockedOn:null,target:s,priority:c};for(var x=0;x<al.length&&c!==0&&c<al[x].priority;x++);al.splice(x,0,s),x===0&&mC(s)}};var vC=t.version;if(vC!=="19.2.3")throw Error(r(527,vC,"19.2.3"));ge.findDOMNode=function(s){var c=s._reactInternals;if(c===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=u(c),s=s!==null?g(s):null,s=s===null?null:s.stateNode,s};var S5={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:de,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var T0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!T0.isDisabled&&T0.supportsFiber)try{xn=T0.inject(S5),ze=T0}catch{}}return Qd.createRoot=function(s,c){if(!i(s))throw Error(r(299));var x=!1,w="",T=NA,D=_A,H=TA;return c!=null&&(c.unstable_strictMode===!0&&(x=!0),c.identifierPrefix!==void 0&&(w=c.identifierPrefix),c.onUncaughtError!==void 0&&(T=c.onUncaughtError),c.onCaughtError!==void 0&&(D=c.onCaughtError),c.onRecoverableError!==void 0&&(H=c.onRecoverableError)),c=oC(s,1,!1,null,null,x,w,null,T,D,H,yC),s[or]=c.current,ny(s),new wy(c)},Qd.hydrateRoot=function(s,c,x){if(!i(s))throw Error(r(299));var w=!1,T="",D=NA,H=_A,X=TA,ae=null;return x!=null&&(x.unstable_strictMode===!0&&(w=!0),x.identifierPrefix!==void 0&&(T=x.identifierPrefix),x.onUncaughtError!==void 0&&(D=x.onUncaughtError),x.onCaughtError!==void 0&&(H=x.onCaughtError),x.onRecoverableError!==void 0&&(X=x.onRecoverableError),x.formState!==void 0&&(ae=x.formState)),c=oC(s,1,!0,c,x??null,w,T,ae,D,H,X,yC),c.context=lC(null),x=c.current,w=qi(),w=bt(w),T=Vo(w),T.callback=null,qo(x,T,w),x=w,c.current.lanes=x,ve(c,x),fs(c),s[or]=c.current,ny(s),new _0(c)},Qd.version="19.2.3",Qd}var IC;function P5(){if(IC)return Cy.exports;IC=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Cy.exports=k5(),Cy.exports}var j5=P5();const L5=Qa(j5);/**
 * react-router v7.12.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var RC="popstate";function B5(e={}){function t(i,a){let{pathname:l="/",search:f="",hash:h=""}=Ac(i.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),Nv("",{pathname:l,search:f,hash:h},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){let l=i.document.querySelector("base"),f="";if(l&&l.getAttribute("href")){let h=i.location.href,u=h.indexOf("#");f=u===-1?h:h.slice(0,u)}return f+"#"+(typeof a=="string"?a:wf(a))}function r(i,a){ra(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return F5(t,n,r,e)}function qn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ra(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function U5(){return Math.random().toString(36).substring(2,10)}function MC(e,t){return{usr:e.state,key:e.key,idx:t}}function Nv(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Ac(t):t,state:n,key:t&&t.key||r||U5()}}function wf({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Ac(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function F5(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,l=i.history,f="POP",h=null,u=g();u==null&&(u=0,l.replaceState({...l.state,idx:u},""));function g(){return(l.state||{idx:null}).idx}function y(){f="POP";let O=g(),j=O==null?null:O-u;u=O,h&&h({action:f,location:M.location,delta:j})}function E(O,j){f="PUSH";let U=Nv(M.location,O,j);n&&n(U,O),u=g()+1;let L=MC(U,u),G=M.createHref(U);try{l.pushState(L,"",G)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;i.location.assign(G)}a&&h&&h({action:f,location:M.location,delta:1})}function C(O,j){f="REPLACE";let U=Nv(M.location,O,j);n&&n(U,O),u=g();let L=MC(U,u),G=M.createHref(U);l.replaceState(L,"",G),a&&h&&h({action:f,location:M.location,delta:0})}function I(O){return H5(O)}let M={get action(){return f},get location(){return e(i,l)},listen(O){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(RC,y),h=O,()=>{i.removeEventListener(RC,y),h=null}},createHref(O){return t(i,O)},createURL:I,encodeLocation(O){let j=I(O);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:E,replace:C,go(O){return l.go(O)}};return M}function H5(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),qn(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:wf(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function l3(e,t,n="/"){return z5(e,t,n,!1)}function z5(e,t,n,r){let i=typeof t=="string"?Ac(t):t,a=so(i.pathname||"/",n);if(a==null)return null;let l=c3(e);G5(l);let f=null;for(let h=0;f==null&&h<l.length;++h){let u=eL(a);f=Z5(l[h],u,r)}return f}function c3(e,t=[],n=[],r="",i=!1){let a=(l,f,h=i,u)=>{let g={relativePath:u===void 0?l.path||"":u,caseSensitive:l.caseSensitive===!0,childrenIndex:f,route:l};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(r)&&h)return;qn(g.relativePath.startsWith(r),`Absolute route path "${g.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(r.length)}let y=ro([r,g.relativePath]),E=n.concat(g);l.children&&l.children.length>0&&(qn(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),c3(l.children,t,E,y,h)),!(l.path==null&&!l.index)&&t.push({path:y,score:X5(y,l.index),routesMeta:E})};return e.forEach((l,f)=>{var h;if(l.path===""||!((h=l.path)!=null&&h.includes("?")))a(l,f);else for(let u of u3(l.path))a(l,f,!0,u)}),t}function u3(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let l=u3(r.join("/")),f=[];return f.push(...l.map(h=>h===""?a:[a,h].join("/"))),i&&f.push(...l),f.map(h=>e.startsWith("/")&&h===""?"/":h)}function G5(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:J5(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var V5=/^:[\w-]+$/,q5=3,$5=2,Y5=1,W5=10,K5=-2,OC=e=>e==="*";function X5(e,t){let n=e.split("/"),r=n.length;return n.some(OC)&&(r+=K5),t&&(r+=$5),n.filter(i=>!OC(i)).reduce((i,a)=>i+(V5.test(a)?q5:a===""?Y5:W5),r)}function J5(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function Z5(e,t,n=!1){let{routesMeta:r}=e,i={},a="/",l=[];for(let f=0;f<r.length;++f){let h=r[f],u=f===r.length-1,g=a==="/"?t:t.slice(a.length)||"/",y=gp({path:h.relativePath,caseSensitive:h.caseSensitive,end:u},g),E=h.route;if(!y&&u&&n&&!r[r.length-1].route.index&&(y=gp({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},g)),!y)return null;Object.assign(i,y.params),l.push({params:i,pathname:ro([a,y.pathname]),pathnameBase:iL(ro([a,y.pathnameBase])),route:E}),y.pathnameBase!=="/"&&(a=ro([a,y.pathnameBase]))}return l}function gp(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Q5(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let a=i[0],l=a.replace(/(.)\/+$/,"$1"),f=i.slice(1);return{params:r.reduce((u,{paramName:g,isOptional:y},E)=>{if(g==="*"){let I=f[E]||"";l=a.slice(0,a.length-I.length).replace(/(.)\/+$/,"$1")}const C=f[E];return y&&!C?u[g]=void 0:u[g]=(C||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:l,pattern:e}}function Q5(e,t=!1,n=!0){ra(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,f,h)=>(r.push({paramName:f,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function eL(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ra(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function so(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}var d3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,tL=e=>d3.test(e);function nL(e,t="/"){let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Ac(e):e,a;if(n)if(tL(n))a=n;else{if(n.includes("//")){let l=n;n=n.replace(/\/\/+/g,"/"),ra(!1,`Pathnames cannot have embedded double slashes - normalizing ${l} -> ${n}`)}n.startsWith("/")?a=DC(n.substring(1),"/"):a=DC(n,t)}else a=t;return{pathname:a,search:aL(r),hash:sL(i)}}function DC(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Iy(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function rL(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function tw(e){let t=rL(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function nw(e,t,n,r=!1){let i;typeof e=="string"?i=Ac(e):(i={...e},qn(!i.pathname||!i.pathname.includes("?"),Iy("?","pathname","search",i)),qn(!i.pathname||!i.pathname.includes("#"),Iy("#","pathname","hash",i)),qn(!i.search||!i.search.includes("#"),Iy("#","search","hash",i)));let a=e===""||i.pathname==="",l=a?"/":i.pathname,f;if(l==null)f=n;else{let y=t.length-1;if(!r&&l.startsWith("..")){let E=l.split("/");for(;E[0]==="..";)E.shift(),y-=1;i.pathname=E.join("/")}f=y>=0?t[y]:"/"}let h=nL(i,f),u=l&&l!=="/"&&l.endsWith("/"),g=(a||l===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(u||g)&&(h.pathname+="/"),h}var ro=e=>e.join("/").replace(/\/\/+/g,"/"),iL=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),aL=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,sL=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,oL=class{constructor(e,t,n,r=!1){this.status=e,this.statusText=t||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function lL(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function cL(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var f3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function h3(e,t){let n=e;if(typeof n!="string"||!d3.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,i=!1;if(f3)try{let a=new URL(window.location.href),l=n.startsWith("//")?new URL(a.protocol+n):new URL(n),f=so(l.pathname,t);l.origin===a.origin&&f!=null?n=f+l.search+l.hash:i=!0}catch{ra(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var p3=["POST","PUT","PATCH","DELETE"];new Set(p3);var uL=["GET",...p3];new Set(uL);var Yu=k.createContext(null);Yu.displayName="DataRouter";var Sm=k.createContext(null);Sm.displayName="DataRouterState";var dL=k.createContext(!1),m3=k.createContext({isTransitioning:!1});m3.displayName="ViewTransition";var fL=k.createContext(new Map);fL.displayName="Fetchers";var hL=k.createContext(null);hL.displayName="Await";var aa=k.createContext(null);aa.displayName="Navigation";var qf=k.createContext(null);qf.displayName="Location";var Ss=k.createContext({outlet:null,matches:[],isDataRoute:!1});Ss.displayName="Route";var rw=k.createContext(null);rw.displayName="RouteError";var g3="REACT_ROUTER_ERROR",pL="REDIRECT",mL="ROUTE_ERROR_RESPONSE";function gL(e){if(e.startsWith(`${g3}:${pL}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function xL(e){if(e.startsWith(`${g3}:${mL}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new oL(t.status,t.statusText,t.data)}catch{}}function yL(e,{relative:t}={}){qn(Wu(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=k.useContext(aa),{hash:i,pathname:a,search:l}=$f(e,{relative:t}),f=a;return n!=="/"&&(f=a==="/"?n:ro([n,a])),r.createHref({pathname:f,search:l,hash:i})}function Wu(){return k.useContext(qf)!=null}function mo(){return qn(Wu(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(qf).location}var x3="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function y3(e){k.useContext(aa).static||k.useLayoutEffect(e)}function Ku(){let{isDataRoute:e}=k.useContext(Ss);return e?ML():vL()}function vL(){qn(Wu(),"useNavigate() may be used only in the context of a <Router> component.");let e=k.useContext(Yu),{basename:t,navigator:n}=k.useContext(aa),{matches:r}=k.useContext(Ss),{pathname:i}=mo(),a=JSON.stringify(tw(r)),l=k.useRef(!1);return y3(()=>{l.current=!0}),k.useCallback((h,u={})=>{if(ra(l.current,x3),!l.current)return;if(typeof h=="number"){n.go(h);return}let g=nw(h,JSON.parse(a),i,u.relative==="path");e==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:ro([t,g.pathname])),(u.replace?n.replace:n.push)(g,u.state,u)},[t,n,a,i,e])}k.createContext(null);function $f(e,{relative:t}={}){let{matches:n}=k.useContext(Ss),{pathname:r}=mo(),i=JSON.stringify(tw(n));return k.useMemo(()=>nw(e,JSON.parse(i),r,t==="path"),[e,i,r,t])}function bL(e,t){return v3(e,t)}function v3(e,t,n,r,i){var U;qn(Wu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=k.useContext(aa),{matches:l}=k.useContext(Ss),f=l[l.length-1],h=f?f.params:{},u=f?f.pathname:"/",g=f?f.pathnameBase:"/",y=f&&f.route;{let L=y&&y.path||"";w3(u,!y||L.endsWith("*")||L.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${L}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${L}"> to <Route path="${L==="/"?"*":`${L}/*`}">.`)}let E=mo(),C;if(t){let L=typeof t=="string"?Ac(t):t;qn(g==="/"||((U=L.pathname)==null?void 0:U.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${L.pathname}" was given in the \`location\` prop.`),C=L}else C=E;let I=C.pathname||"/",M=I;if(g!=="/"){let L=g.replace(/^\//,"").split("/");M="/"+I.replace(/^\//,"").split("/").slice(L.length).join("/")}let O=l3(e,{pathname:M});ra(y||O!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),ra(O==null||O[O.length-1].route.element!==void 0||O[O.length-1].route.Component!==void 0||O[O.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=CL(O&&O.map(L=>Object.assign({},L,{params:Object.assign({},h,L.params),pathname:ro([g,a.encodeLocation?a.encodeLocation(L.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?g:ro([g,a.encodeLocation?a.encodeLocation(L.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:L.pathnameBase])})),l,n,r,i);return t&&j?k.createElement(qf.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...C},navigationType:"POP"}},j):j}function wL(){let e=RL(),t=lL(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=k.createElement(k.Fragment,null,k.createElement("p",null," Hey developer "),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:a},"ErrorBoundary")," or"," ",k.createElement("code",{style:a},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},t),n?k.createElement("pre",{style:i},n):null,l)}var EL=k.createElement(wL,null),b3=class extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const n=xL(e.digest);n&&(e=n)}let t=e!==void 0?k.createElement(Ss.Provider,{value:this.props.routeContext},k.createElement(rw.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?k.createElement(SL,{error:e},t):t}};b3.contextType=dL;var Ry=new WeakMap;function SL({children:e,error:t}){let{basename:n}=k.useContext(aa);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let r=gL(t.digest);if(r){let i=Ry.get(t);if(i)throw i;let a=h3(r.location,n);if(f3&&!Ry.get(t))if(a.isExternal||r.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:r.replace}));throw Ry.set(t,l),l}return k.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return e}function AL({routeContext:e,match:t,children:n}){let r=k.useContext(Yu);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),k.createElement(Ss.Provider,{value:e},n)}function CL(e,t=[],n=null,r=null,i=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,l=n==null?void 0:n.errors;if(l!=null){let g=a.findIndex(y=>y.route.id&&(l==null?void 0:l[y.route.id])!==void 0);qn(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,g+1))}let f=!1,h=-1;if(n)for(let g=0;g<a.length;g++){let y=a[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(h=g),y.route.id){let{loaderData:E,errors:C}=n,I=y.route.loader&&!E.hasOwnProperty(y.route.id)&&(!C||C[y.route.id]===void 0);if(y.route.lazy||I){f=!0,h>=0?a=a.slice(0,h+1):a=[a[0]];break}}}let u=n&&r?(g,y)=>{var E,C;r(g,{location:n.location,params:((C=(E=n.matches)==null?void 0:E[0])==null?void 0:C.params)??{},unstable_pattern:cL(n.matches),errorInfo:y})}:void 0;return a.reduceRight((g,y,E)=>{let C,I=!1,M=null,O=null;n&&(C=l&&y.route.id?l[y.route.id]:void 0,M=y.route.errorElement||EL,f&&(h<0&&E===0?(w3("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),I=!0,O=null):h===E&&(I=!0,O=y.route.hydrateFallbackElement||null)));let j=t.concat(a.slice(0,E+1)),U=()=>{let L;return C?L=M:I?L=O:y.route.Component?L=k.createElement(y.route.Component,null):y.route.element?L=y.route.element:L=g,k.createElement(AL,{match:y,routeContext:{outlet:g,matches:j,isDataRoute:n!=null},children:L})};return n&&(y.route.ErrorBoundary||y.route.errorElement||E===0)?k.createElement(b3,{location:n.location,revalidation:n.revalidation,component:M,error:C,children:U(),routeContext:{outlet:null,matches:j,isDataRoute:!0},onError:u}):U()},null)}function iw(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function NL(e){let t=k.useContext(Yu);return qn(t,iw(e)),t}function _L(e){let t=k.useContext(Sm);return qn(t,iw(e)),t}function TL(e){let t=k.useContext(Ss);return qn(t,iw(e)),t}function aw(e){let t=TL(e),n=t.matches[t.matches.length-1];return qn(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function IL(){return aw("useRouteId")}function RL(){var r;let e=k.useContext(rw),t=_L("useRouteError"),n=aw("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function ML(){let{router:e}=NL("useNavigate"),t=aw("useNavigate"),n=k.useRef(!1);return y3(()=>{n.current=!0}),k.useCallback(async(i,a={})=>{ra(n.current,x3),n.current&&(typeof i=="number"?await e.navigate(i):await e.navigate(i,{fromRouteId:t,...a}))},[e,t])}var kC={};function w3(e,t,n){!t&&!kC[e]&&(kC[e]=!0,ra(!1,n))}k.memo(OL);function OL({routes:e,future:t,state:n,onError:r}){return v3(e,void 0,n,r,t)}function PC({to:e,replace:t,state:n,relative:r}){qn(Wu(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=k.useContext(aa);ra(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=k.useContext(Ss),{pathname:l}=mo(),f=Ku(),h=nw(e,tw(a),l,r==="path"),u=JSON.stringify(h);return k.useEffect(()=>{f(JSON.parse(u),{replace:t,state:n,relative:r})},[f,u,r,t,n]),null}function Yn(e){qn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function DL({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:a=!1,unstable_useTransitions:l}){qn(!Wu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=e.replace(/^\/*/,"/"),h=k.useMemo(()=>({basename:f,navigator:i,static:a,unstable_useTransitions:l,future:{}}),[f,i,a,l]);typeof n=="string"&&(n=Ac(n));let{pathname:u="/",search:g="",hash:y="",state:E=null,key:C="default"}=n,I=k.useMemo(()=>{let M=so(u,f);return M==null?null:{location:{pathname:M,search:g,hash:y,state:E,key:C},navigationType:r}},[f,u,g,y,E,C,r]);return ra(I!=null,`<Router basename="${f}"> is not able to match the URL "${u}${g}${y}" because it does not start with the basename, so the <Router> won't render anything.`),I==null?null:k.createElement(aa.Provider,{value:h},k.createElement(qf.Provider,{children:t,value:I}))}function jC({children:e,location:t}){return bL(_v(e),t)}function _v(e,t=[]){let n=[];return k.Children.forEach(e,(r,i)=>{if(!k.isValidElement(r))return;let a=[...t,i];if(r.type===k.Fragment){n.push.apply(n,_v(r.props.children,a));return}qn(r.type===Yn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),qn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=_v(r.props.children,a)),n.push(l)}),n}var op="get",lp="application/x-www-form-urlencoded";function Am(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function kL(e){return Am(e)&&e.tagName.toLowerCase()==="button"}function PL(e){return Am(e)&&e.tagName.toLowerCase()==="form"}function jL(e){return Am(e)&&e.tagName.toLowerCase()==="input"}function LL(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function BL(e,t){return e.button===0&&(!t||t==="_self")&&!LL(e)}var R0=null;function UL(){if(R0===null)try{new FormData(document.createElement("form"),0),R0=!1}catch{R0=!0}return R0}var FL=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function My(e){return e!=null&&!FL.has(e)?(ra(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${lp}"`),null):e}function HL(e,t){let n,r,i,a,l;if(PL(e)){let f=e.getAttribute("action");r=f?so(f,t):null,n=e.getAttribute("method")||op,i=My(e.getAttribute("enctype"))||lp,a=new FormData(e)}else if(kL(e)||jL(e)&&(e.type==="submit"||e.type==="image")){let f=e.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=e.getAttribute("formaction")||f.getAttribute("action");if(r=h?so(h,t):null,n=e.getAttribute("formmethod")||f.getAttribute("method")||op,i=My(e.getAttribute("formenctype"))||My(f.getAttribute("enctype"))||lp,a=new FormData(f,e),!UL()){let{name:u,type:g,value:y}=e;if(g==="image"){let E=u?`${u}.`:"";a.append(`${E}x`,"0"),a.append(`${E}y`,"0")}else u&&a.append(u,y)}}else{if(Am(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=op,r=null,i=lp,l=e}return a&&i==="text/plain"&&(l=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function sw(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function zL(e,t,n,r){let i=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${r}`:i.pathname=`${i.pathname}.${r}`:i.pathname==="/"?i.pathname=`_root.${r}`:t&&so(i.pathname,t)==="/"?i.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function GL(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function VL(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function qL(e,t,n){let r=await Promise.all(e.map(async i=>{let a=t.routes[i.route.id];if(a){let l=await GL(a,n);return l.links?l.links():[]}return[]}));return KL(r.flat(1).filter(VL).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function LC(e,t,n,r,i,a){let l=(h,u)=>n[u]?h.route.id!==n[u].route.id:!0,f=(h,u)=>{var g;return n[u].pathname!==h.pathname||((g=n[u].route.path)==null?void 0:g.endsWith("*"))&&n[u].params["*"]!==h.params["*"]};return a==="assets"?t.filter((h,u)=>l(h,u)||f(h,u)):a==="data"?t.filter((h,u)=>{var y;let g=r.routes[h.route.id];if(!g||!g.hasLoader)return!1;if(l(h,u)||f(h,u))return!0;if(h.route.shouldRevalidate){let E=h.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((y=n[0])==null?void 0:y.params)||{},nextUrl:new URL(e,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function $L(e,t,{includeHydrateFallback:n}={}){return YL(e.map(r=>{let i=t.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function YL(e){return[...new Set(e)]}function WL(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function KL(e,t){let n=new Set;return new Set(t),e.reduce((r,i)=>{let a=JSON.stringify(WL(i));return n.has(a)||(n.add(a),r.push({key:a,link:i})),r},[])}function E3(){let e=k.useContext(Yu);return sw(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function XL(){let e=k.useContext(Sm);return sw(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var ow=k.createContext(void 0);ow.displayName="FrameworkContext";function S3(){let e=k.useContext(ow);return sw(e,"You must render this element inside a <HydratedRouter> element"),e}function JL(e,t){let n=k.useContext(ow),[r,i]=k.useState(!1),[a,l]=k.useState(!1),{onFocus:f,onBlur:h,onMouseEnter:u,onMouseLeave:g,onTouchStart:y}=t,E=k.useRef(null);k.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let M=j=>{j.forEach(U=>{l(U.isIntersecting)})},O=new IntersectionObserver(M,{threshold:.5});return E.current&&O.observe(E.current),()=>{O.disconnect()}}},[e]),k.useEffect(()=>{if(r){let M=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(M)}}},[r]);let C=()=>{i(!0)},I=()=>{i(!1),l(!1)};return n?e!=="intent"?[a,E,{}]:[a,E,{onFocus:ef(f,C),onBlur:ef(h,I),onMouseEnter:ef(u,C),onMouseLeave:ef(g,I),onTouchStart:ef(y,C)}]:[!1,E,{}]}function ef(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function ZL({page:e,...t}){let{router:n}=E3(),r=k.useMemo(()=>l3(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?k.createElement(eB,{page:e,matches:r,...t}):null}function QL(e){let{manifest:t,routeModules:n}=S3(),[r,i]=k.useState([]);return k.useEffect(()=>{let a=!1;return qL(e,t,n).then(l=>{a||i(l)}),()=>{a=!0}},[e,t,n]),r}function eB({page:e,matches:t,...n}){let r=mo(),{future:i,manifest:a,routeModules:l}=S3(),{basename:f}=E3(),{loaderData:h,matches:u}=XL(),g=k.useMemo(()=>LC(e,t,u,a,r,"data"),[e,t,u,a,r]),y=k.useMemo(()=>LC(e,t,u,a,r,"assets"),[e,t,u,a,r]),E=k.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let M=new Set,O=!1;if(t.forEach(U=>{var G;let L=a.routes[U.route.id];!L||!L.hasLoader||(!g.some(V=>V.route.id===U.route.id)&&U.route.id in h&&((G=l[U.route.id])!=null&&G.shouldRevalidate)||L.hasClientLoader?O=!0:M.add(U.route.id))}),M.size===0)return[];let j=zL(e,f,i.unstable_trailingSlashAwareDataRequests,"data");return O&&M.size>0&&j.searchParams.set("_routes",t.filter(U=>M.has(U.route.id)).map(U=>U.route.id).join(",")),[j.pathname+j.search]},[f,i.unstable_trailingSlashAwareDataRequests,h,r,a,g,t,e,l]),C=k.useMemo(()=>$L(y,a),[y,a]),I=QL(y);return k.createElement(k.Fragment,null,E.map(M=>k.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...n})),C.map(M=>k.createElement("link",{key:M,rel:"modulepreload",href:M,...n})),I.map(({key:M,link:O})=>k.createElement("link",{key:M,nonce:n.nonce,...O})))}function tB(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var nB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{nB&&(window.__reactRouterVersion="7.12.0")}catch{}function rB({basename:e,children:t,unstable_useTransitions:n,window:r}){let i=k.useRef();i.current==null&&(i.current=B5({window:r,v5Compat:!0}));let a=i.current,[l,f]=k.useState({action:a.action,location:a.location}),h=k.useCallback(u=>{n===!1?f(u):k.startTransition(()=>f(u))},[n]);return k.useLayoutEffect(()=>a.listen(h),[a,h]),k.createElement(DL,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:a,unstable_useTransitions:n})}var A3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Lu=k.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:i,reloadDocument:a,replace:l,state:f,target:h,to:u,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:E,...C},I){let{basename:M,unstable_useTransitions:O}=k.useContext(aa),j=typeof u=="string"&&A3.test(u),U=h3(u,M);u=U.to;let L=yL(u,{relative:i}),[G,V,z]=JL(r,C),B=oB(u,{replace:l,state:f,target:h,preventScrollReset:g,relative:i,viewTransition:y,unstable_defaultShouldRevalidate:E,unstable_useTransitions:O});function J(Z){t&&t(Z),Z.defaultPrevented||B(Z)}let W=k.createElement("a",{...C,...z,href:U.absoluteURL||L,onClick:U.isExternal||a?t:J,ref:tB(I,V),target:h,"data-discover":!j&&n==="render"?"true":void 0});return G&&!j?k.createElement(k.Fragment,null,W,k.createElement(ZL,{page:L})):W});Lu.displayName="Link";var iB=k.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:i=!1,style:a,to:l,viewTransition:f,children:h,...u},g){let y=$f(l,{relative:u.relative}),E=mo(),C=k.useContext(Sm),{navigator:I,basename:M}=k.useContext(aa),O=C!=null&&fB(y)&&f===!0,j=I.encodeLocation?I.encodeLocation(y).pathname:y.pathname,U=E.pathname,L=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;n||(U=U.toLowerCase(),L=L?L.toLowerCase():null,j=j.toLowerCase()),L&&M&&(L=so(L,M)||L);const G=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let V=U===j||!i&&U.startsWith(j)&&U.charAt(G)==="/",z=L!=null&&(L===j||!i&&L.startsWith(j)&&L.charAt(j.length)==="/"),B={isActive:V,isPending:z,isTransitioning:O},J=V?t:void 0,W;typeof r=="function"?W=r(B):W=[r,V?"active":null,z?"pending":null,O?"transitioning":null].filter(Boolean).join(" ");let Z=typeof a=="function"?a(B):a;return k.createElement(Lu,{...u,"aria-current":J,className:W,ref:g,style:Z,to:l,viewTransition:f},typeof h=="function"?h(B):h)});iB.displayName="NavLink";var aB=k.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:a,method:l=op,action:f,onSubmit:h,relative:u,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:E,...C},I)=>{let{unstable_useTransitions:M}=k.useContext(aa),O=uB(),j=dB(f,{relative:u}),U=l.toLowerCase()==="get"?"get":"post",L=typeof f=="string"&&A3.test(f),G=V=>{if(h&&h(V),V.defaultPrevented)return;V.preventDefault();let z=V.nativeEvent.submitter,B=(z==null?void 0:z.getAttribute("formmethod"))||l,J=()=>O(z||V.currentTarget,{fetcherKey:t,method:B,navigate:n,replace:i,state:a,relative:u,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:E});M&&n!==!1?k.startTransition(()=>J()):J()};return k.createElement("form",{ref:I,method:U,action:j,onSubmit:r?h:G,...C,"data-discover":!L&&e==="render"?"true":void 0})});aB.displayName="Form";function sB(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function C3(e){let t=k.useContext(Yu);return qn(t,sB(e)),t}function oB(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:l,unstable_defaultShouldRevalidate:f,unstable_useTransitions:h}={}){let u=Ku(),g=mo(),y=$f(e,{relative:a});return k.useCallback(E=>{if(BL(E,t)){E.preventDefault();let C=n!==void 0?n:wf(g)===wf(y),I=()=>u(e,{replace:C,state:r,preventScrollReset:i,relative:a,viewTransition:l,unstable_defaultShouldRevalidate:f});h?k.startTransition(()=>I()):I()}},[g,u,y,n,r,t,e,i,a,l,f,h])}var lB=0,cB=()=>`__${String(++lB)}__`;function uB(){let{router:e}=C3("useSubmit"),{basename:t}=k.useContext(aa),n=IL(),r=e.fetch,i=e.navigate;return k.useCallback(async(a,l={})=>{let{action:f,method:h,encType:u,formData:g,body:y}=HL(a,t);if(l.navigate===!1){let E=l.fetcherKey||cB();await r(E,n,l.action||f,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:g,body:y,formMethod:l.method||h,formEncType:l.encType||u,flushSync:l.flushSync})}else await i(l.action||f,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:g,body:y,formMethod:l.method||h,formEncType:l.encType||u,replace:l.replace,state:l.state,fromRouteId:n,flushSync:l.flushSync,viewTransition:l.viewTransition})},[r,i,t,n])}function dB(e,{relative:t}={}){let{basename:n}=k.useContext(aa),r=k.useContext(Ss);qn(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...$f(e||".",{relative:t})},l=mo();if(e==null){a.search=l.search;let f=new URLSearchParams(a.search),h=f.getAll("index");if(h.some(g=>g==="")){f.delete("index"),h.filter(y=>y).forEach(y=>f.append("index",y));let g=f.toString();a.search=g?`?${g}`:""}}return(!e||e===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:ro([n,a.pathname])),wf(a)}function fB(e,{relative:t}={}){let n=k.useContext(m3);qn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=C3("useViewTransitionState"),i=$f(e,{relative:t});if(!n.isTransitioning)return!1;let a=so(n.currentLocation.pathname,r)||n.currentLocation.pathname,l=so(n.nextLocation.pathname,r)||n.nextLocation.pathname;return gp(i.pathname,l)!=null||gp(i.pathname,a)!=null}var lw=o3(),Oe=(e=>(e.SUPER_ADMIN="SUPER_ADMIN",e.BRANCH_ADMIN="BRANCH_ADMIN",e.MANAGER="MANAGER",e.RECEPTIONIST="RECEPTIONIST",e.TRAINER="TRAINER",e.STAFF="STAFF",e.MEMBER="MEMBER",e))(Oe||{}),gt=(e=>(e.GYM="GYM",e.PT="PT",e.GROUP="GROUP",e))(gt||{}),Na=(e=>(e.ACTIVE="ACTIVE",e.EXPIRED="EXPIRED",e.PENDING="PENDING",e))(Na||{}),Sa=(e=>(e.EMAIL="EMAIL",e.SMS="SMS",e))(Sa||{});const BC=[{id:"b1",name:"IronFlow Mumbai Central",address:"Plot 45, BKC, Mumbai, Maharashtra 400051",phone:"+91 98765 43210",email:"mumbai@ironflow.in",gstin:"27AABCU1234F1Z1",gstPercentage:18,equipment:"Cardio: 5 Treadmills, 2 Spin Bikes. Strength: Full Smith Machine, Dumbbells up to 40kg, Bench Press, Squat Rack, Cable Crossover. Plate Loaded: Leg Press, Lat Pulldown."},{id:"b2",name:"IronFlow Bangalore East",address:"Indiranagar 100ft Rd, Bengaluru, Karnataka 560038",phone:"+91 98765 01234",email:"bangalore@ironflow.in",gstin:"29AABCU5678F1Z2",gstPercentage:18,equipment:"Functional Training Zone: Kettlebells, Battle Ropes, TRX, Medicine Balls. Machines: Leg Extension, Chest Press, Seated Row. Cardio: 3 Treadmills, 1 Rower."}],UC=[{id:"u1",name:"Arjun Sharma",email:"owner@gym.in",password:"240be518fabd2724ddb6f04eeb1da5967448d7e831c08c8fa822809f74c720a9",role:Oe.SUPER_ADMIN,branchId:null,avatar:"https://i.pravatar.cc/150?u=arjun"},{id:"u2",name:"Priya Patel",email:"priya@gym.in",role:Oe.BRANCH_ADMIN,branchId:"b1",avatar:"https://i.pravatar.cc/150?u=priya"},{id:"u3",name:"Vikram Singh",email:"vikram@gym.in",role:Oe.TRAINER,branchId:"b1",avatar:"https://i.pravatar.cc/150?u=vikram",hourlyRate:800,commissionPercentage:20,shifts:[{start:"06:00",end:"11:00"},{start:"17:00",end:"21:00"}]},{id:"u4",name:"Rahul Verma",email:"rahul@gmail.com",role:Oe.MEMBER,branchId:"b1",memberId:"IF-IND-1001",avatar:"https://i.pravatar.cc/150?u=rahul"},{id:"u5",name:"Sanjay Dutt",email:"manager@gym.in",role:Oe.MANAGER,branchId:"b1",avatar:"https://i.pravatar.cc/150?u=sanjay",hourlyRate:1200,commissionPercentage:5},{id:"u6",name:"Neha Kapoor",email:"reception@gym.in",role:Oe.RECEPTIONIST,branchId:"b1",avatar:"https://i.pravatar.cc/150?u=neha",hourlyRate:400},{id:"u7",name:"Karan Mehra",email:"staff@gym.in",role:Oe.STAFF,branchId:"b1",avatar:"https://i.pravatar.cc/150?u=karan",hourlyRate:300}],FC=[{id:"p1",name:"Standard Monthly Gym",type:gt.GYM,price:2500,durationDays:30,branchId:"b1",isActive:!0,isMultiBranch:!1},{id:"p2",name:"Personal Training (12 Sessions)",type:gt.PT,price:12e3,durationDays:30,branchId:"b1",isActive:!0,isMultiBranch:!1,maxSessions:12,sessionDurationMinutes:60},{id:"p3",name:"Yoga Group Class",type:gt.GROUP,price:3500,durationDays:30,branchId:"b1",isActive:!0,isMultiBranch:!1,sessionDurationMinutes:60,groupCapacity:20},{id:"p4",name:"Annual Beast Mode (All India)",type:gt.GYM,price:18e3,durationDays:365,branchId:"b1",isActive:!0,isMultiBranch:!0}];Na.ACTIVE,Na.ACTIVE;const HC=new Date().toISOString().split("T")[0];gt.PT,gt.PT;const zC=[{id:"o1",title:"SUMMER SHRED 2025",description:"Transform your physique with our elite Personal Training packages. Get 20% flat discount on all 12-session PT modules this month!",imageUrl:"https://images.unsplash.com/photo-1534438327276-14e5300c3a48?q=80&w=1200&auto=format&fit=crop",expiryDate:"2025-06-30",branchId:"GLOBAL",isActive:!0,ctaText:"RESERVE SPOT"},{id:"o2",title:"MUMBAI MONSOON SPECIAL",description:"Don't let the rain stop your gains! Renew your Annual Gym Membership and get 3 MONTHS of additional access completely free.",imageUrl:"https://images.unsplash.com/photo-1540497077202-7c8a3999166f?q=80&w=1200&auto=format&fit=crop",expiryDate:"2025-08-15",branchId:"b1",isActive:!0,ctaText:"UPGRADE NOW"}],hB=[{label:"Dashboard",path:"/",icon:p.jsx("i",{className:"fas fa-chart-line"}),roles:[Oe.SUPER_ADMIN,Oe.BRANCH_ADMIN,Oe.MANAGER]},{label:"Branches",path:"/branches",icon:p.jsx("i",{className:"fas fa-building"}),roles:[Oe.SUPER_ADMIN]},{label:"Walk-Ins",path:"/walk-ins",icon:p.jsx("i",{className:"fas fa-walking"}),roles:[Oe.SUPER_ADMIN,Oe.BRANCH_ADMIN,Oe.MANAGER,Oe.RECEPTIONIST]},{label:"Campaigns",path:"/campaigns",icon:p.jsx("i",{className:"fas fa-bullhorn"}),roles:[Oe.SUPER_ADMIN,Oe.BRANCH_ADMIN]},{label:"Members",path:"/members",icon:p.jsx("i",{className:"fas fa-users"}),roles:[Oe.SUPER_ADMIN,Oe.BRANCH_ADMIN,Oe.MANAGER,Oe.RECEPTIONIST]},{label:"Staff",path:"/staff",icon:p.jsx("i",{className:"fas fa-user-tie"}),roles:[Oe.SUPER_ADMIN,Oe.BRANCH_ADMIN,Oe.MANAGER]},{label:"Inventory",path:"/inventory",icon:p.jsx("i",{className:"fas fa-box-open"}),roles:[Oe.SUPER_ADMIN,Oe.BRANCH_ADMIN,Oe.MANAGER,Oe.RECEPTIONIST]},{label:"Plans",path:"/plans",icon:p.jsx("i",{className:"fas fa-tags"}),roles:[Oe.SUPER_ADMIN,Oe.BRANCH_ADMIN]},{label:"Store",path:"/store",icon:p.jsx("i",{className:"fas fa-shopping-cart"}),roles:[Oe.MEMBER]},{label:"Check-In",path:"/check-in",icon:p.jsx("i",{className:"fas fa-qrcode"}),roles:[Oe.BRANCH_ADMIN,Oe.MANAGER,Oe.RECEPTIONIST,Oe.MEMBER,Oe.STAFF,Oe.TRAINER]},{label:"Bookings",path:"/bookings",icon:p.jsx("i",{className:"fas fa-calendar-check"}),roles:[Oe.BRANCH_ADMIN,Oe.MANAGER,Oe.TRAINER,Oe.MEMBER]},{label:"Communications",path:"/comms",icon:p.jsx("i",{className:"fas fa-paper-plane"}),roles:[Oe.SUPER_ADMIN,Oe.BRANCH_ADMIN,Oe.MANAGER]},{label:"Portal",path:"/portal",icon:p.jsx("i",{className:"fas fa-user-circle"}),roles:[Oe.MEMBER]},{label:"My Earnings",path:"/my-earnings",icon:p.jsx("i",{className:"fas fa-wallet"}),roles:[Oe.BRANCH_ADMIN,Oe.MANAGER,Oe.TRAINER,Oe.RECEPTIONIST,Oe.STAFF]},{label:"Feedback",path:"/feedback",icon:p.jsx("i",{className:"fas fa-comment-dots"}),roles:[Oe.SUPER_ADMIN,Oe.BRANCH_ADMIN,Oe.MANAGER]},{label:"Sales",path:"/sales",icon:p.jsx("i",{className:"fas fa-indian-rupee-sign"}),roles:[Oe.SUPER_ADMIN,Oe.BRANCH_ADMIN,Oe.MANAGER]},{label:"Tax Center",path:"/tax",icon:p.jsx("i",{className:"fas fa-file-contract"}),roles:[Oe.SUPER_ADMIN,Oe.BRANCH_ADMIN]},{label:"Holidays",path:"/holidays",icon:p.jsx("i",{className:"fas fa-calendar-star"}),roles:[Oe.SUPER_ADMIN,Oe.BRANCH_ADMIN,Oe.MANAGER]}];var pB={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let mB,gB;function xB(){return{geminiUrl:mB,vertexUrl:gB}}function yB(e,t,n,r){var i,a;if(!(e!=null&&e.baseUrl)){const l=xB();return t?(i=l.vertexUrl)!==null&&i!==void 0?i:n:(a=l.geminiUrl)!==null&&a!==void 0?a:r}return e.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class go{}function Xe(e,t){const n=/\{([^}]+)\}/g;return e.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(t,i)){const a=t[i];return a!=null?String(a):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function _(e,t,n){for(let a=0;a<t.length-1;a++){const l=t[a];if(l.endsWith("[]")){const f=l.slice(0,-2);if(!(f in e))if(Array.isArray(n))e[f]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(e[f])){const h=e[f];if(Array.isArray(n))for(let u=0;u<h.length;u++){const g=h[u];_(g,t.slice(a+1),n[u])}else for(const u of h)_(u,t.slice(a+1),n)}return}else if(l.endsWith("[0]")){const f=l.slice(0,-3);f in e||(e[f]=[{}]);const h=e[f];_(h[0],t.slice(a+1),n);return}(!e[l]||typeof e[l]!="object")&&(e[l]={}),e=e[l]}const r=t[t.length-1],i=e[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(e,n):e[r]=n}function A(e,t,n=void 0){try{if(t.length===1&&t[0]==="_self")return e;for(let r=0;r<t.length;r++){if(typeof e!="object"||e===null)return n;const i=t[r];if(i.endsWith("[]")){const a=i.slice(0,-2);if(a in e){const l=e[a];return Array.isArray(l)?l.map(f=>A(f,t.slice(r+1),n)):n}else return n}else e=e[i]}return e}catch(r){if(r instanceof TypeError)return n;throw r}}function vB(e,t){for(const[n,r]of Object.entries(t)){const i=n.split("."),a=r.split("."),l=new Set;let f=-1;for(let h=0;h<i.length;h++)if(i[h]==="*"){f=h;break}if(f!==-1&&a.length>f)for(let h=f;h<a.length;h++){const u=a[h];u!=="*"&&!u.endsWith("[]")&&!u.endsWith("[0]")&&l.add(u)}Tv(e,i,a,0,l)}}function Tv(e,t,n,r,i){if(r>=t.length||typeof e!="object"||e===null)return;const a=t[r];if(a.endsWith("[]")){const l=a.slice(0,-2),f=e;if(l in f&&Array.isArray(f[l]))for(const h of f[l])Tv(h,t,n,r+1,i)}else if(a==="*"){if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const l=e,f=Object.keys(l).filter(u=>!u.startsWith("_")&&!i.has(u)),h={};for(const u of f)h[u]=l[u];for(const[u,g]of Object.entries(h)){const y=[];for(const E of n.slice(r))E==="*"?y.push(u):y.push(E);_(l,y,g)}for(const u of f)delete l[u]}}else{const l=e;a in l&&Tv(l[a],t,n,r+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cw(e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bB(e){const t={},n=A(e,["operationName"]);n!=null&&_(t,["operationName"],n);const r=A(e,["resourceName"]);return r!=null&&_(t,["_url","resourceName"],r),t}function wB(e){const t={},n=A(e,["name"]);n!=null&&_(t,["name"],n);const r=A(e,["metadata"]);r!=null&&_(t,["metadata"],r);const i=A(e,["done"]);i!=null&&_(t,["done"],i);const a=A(e,["error"]);a!=null&&_(t,["error"],a);const l=A(e,["response","generateVideoResponse"]);return l!=null&&_(t,["response"],SB(l)),t}function EB(e){const t={},n=A(e,["name"]);n!=null&&_(t,["name"],n);const r=A(e,["metadata"]);r!=null&&_(t,["metadata"],r);const i=A(e,["done"]);i!=null&&_(t,["done"],i);const a=A(e,["error"]);a!=null&&_(t,["error"],a);const l=A(e,["response"]);return l!=null&&_(t,["response"],AB(l)),t}function SB(e){const t={},n=A(e,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>CB(l))),_(t,["generatedVideos"],a)}const r=A(e,["raiMediaFilteredCount"]);r!=null&&_(t,["raiMediaFilteredCount"],r);const i=A(e,["raiMediaFilteredReasons"]);return i!=null&&_(t,["raiMediaFilteredReasons"],i),t}function AB(e){const t={},n=A(e,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>NB(l))),_(t,["generatedVideos"],a)}const r=A(e,["raiMediaFilteredCount"]);r!=null&&_(t,["raiMediaFilteredCount"],r);const i=A(e,["raiMediaFilteredReasons"]);return i!=null&&_(t,["raiMediaFilteredReasons"],i),t}function CB(e){const t={},n=A(e,["video"]);return n!=null&&_(t,["video"],OB(n)),t}function NB(e){const t={},n=A(e,["_self"]);return n!=null&&_(t,["video"],DB(n)),t}function _B(e){const t={},n=A(e,["operationName"]);return n!=null&&_(t,["_url","operationName"],n),t}function TB(e){const t={},n=A(e,["operationName"]);return n!=null&&_(t,["_url","operationName"],n),t}function IB(e){const t={},n=A(e,["name"]);n!=null&&_(t,["name"],n);const r=A(e,["metadata"]);r!=null&&_(t,["metadata"],r);const i=A(e,["done"]);i!=null&&_(t,["done"],i);const a=A(e,["error"]);a!=null&&_(t,["error"],a);const l=A(e,["response"]);return l!=null&&_(t,["response"],RB(l)),t}function RB(e){const t={},n=A(e,["sdkHttpResponse"]);n!=null&&_(t,["sdkHttpResponse"],n);const r=A(e,["parent"]);r!=null&&_(t,["parent"],r);const i=A(e,["documentName"]);return i!=null&&_(t,["documentName"],i),t}function N3(e){const t={},n=A(e,["name"]);n!=null&&_(t,["name"],n);const r=A(e,["metadata"]);r!=null&&_(t,["metadata"],r);const i=A(e,["done"]);i!=null&&_(t,["done"],i);const a=A(e,["error"]);a!=null&&_(t,["error"],a);const l=A(e,["response"]);return l!=null&&_(t,["response"],MB(l)),t}function MB(e){const t={},n=A(e,["sdkHttpResponse"]);n!=null&&_(t,["sdkHttpResponse"],n);const r=A(e,["parent"]);r!=null&&_(t,["parent"],r);const i=A(e,["documentName"]);return i!=null&&_(t,["documentName"],i),t}function OB(e){const t={},n=A(e,["uri"]);n!=null&&_(t,["uri"],n);const r=A(e,["encodedVideo"]);r!=null&&_(t,["videoBytes"],cw(r));const i=A(e,["encoding"]);return i!=null&&_(t,["mimeType"],i),t}function DB(e){const t={},n=A(e,["gcsUri"]);n!=null&&_(t,["uri"],n);const r=A(e,["bytesBase64Encoded"]);r!=null&&_(t,["videoBytes"],cw(r));const i=A(e,["mimeType"]);return i!=null&&_(t,["mimeType"],i),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var GC;(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(GC||(GC={}));var VC;(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(VC||(VC={}));var qC;(function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"})(qC||(qC={}));var gl;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"})(gl||(gl={}));var $C;(function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"})($C||($C={}));var YC;(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})(YC||(YC={}));var WC;(function(e){e.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",e.HTTP_IN_QUERY="HTTP_IN_QUERY",e.HTTP_IN_HEADER="HTTP_IN_HEADER",e.HTTP_IN_PATH="HTTP_IN_PATH",e.HTTP_IN_BODY="HTTP_IN_BODY",e.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(WC||(WC={}));var KC;(function(e){e.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",e.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",e.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",e.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(KC||(KC={}));var XC;(function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"})(XC||(XC={}));var JC;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(JC||(JC={}));var ZC;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"})(ZC||(ZC={}));var QC;(function(e){e.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH",e.MINIMAL="MINIMAL"})(QC||(QC={}));var eN;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(eN||(eN={}));var tN;(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})(tN||(tN={}));var nN;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(nN||(nN={}));var rN;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",e.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",e.NO_IMAGE="NO_IMAGE",e.IMAGE_RECITATION="IMAGE_RECITATION",e.IMAGE_OTHER="IMAGE_OTHER"})(rN||(rN={}));var iN;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(iN||(iN={}));var aN;(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(aN||(aN={}));var sN;(function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(sN||(sN={}));var oN;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY",e.MODEL_ARMOR="MODEL_ARMOR",e.JAILBREAK="JAILBREAK"})(oN||(oN={}));var lN;(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(lN||(lN={}));var xp;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})(xp||(xp={}));var cN;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(cN||(cN={}));var uN;(function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(uN||(uN={}));var dN;(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(dN||(dN={}));var Iv;(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Iv||(Iv={}));var fN;(function(e){e.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",e.TUNING_TASK_I2V="TUNING_TASK_I2V",e.TUNING_TASK_T2V="TUNING_TASK_T2V",e.TUNING_TASK_R2V="TUNING_TASK_R2V"})(fN||(fN={}));var hN;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",e.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(hN||(hN={}));var pN;(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})(pN||(pN={}));var mN;(function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(mN||(mN={}));var gN;(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(gN||(gN={}));var xN;(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})(xN||(xN={}));var yN;(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"})(yN||(yN={}));var vN;(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(vN||(vN={}));var bN;(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(bN||(bN={}));var wN;(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(wN||(wN={}));var EN;(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(EN||(EN={}));var SN;(function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"})(SN||(SN={}));var AN;(function(e){e.ASSET="ASSET",e.STYLE="STYLE"})(AN||(AN={}));var CN;(function(e){e.INSERT="INSERT",e.REMOVE="REMOVE",e.REMOVE_STATIC="REMOVE_STATIC",e.OUTPAINT="OUTPAINT"})(CN||(CN={}));var NN;(function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"})(NN||(NN={}));var _N;(function(e){e.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",e.PREFERENCE_TUNING="PREFERENCE_TUNING"})(_N||(_N={}));var TN;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.STATE_PENDING="STATE_PENDING",e.STATE_ACTIVE="STATE_ACTIVE",e.STATE_FAILED="STATE_FAILED"})(TN||(TN={}));var IN;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})(IN||(IN={}));var RN;(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED",e.REGISTERED="REGISTERED"})(RN||(RN={}));var MN;(function(e){e.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.RESPONSE_REJECTED="RESPONSE_REJECTED",e.NEED_MORE_INPUT="NEED_MORE_INPUT"})(MN||(MN={}));var ON;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})(ON||(ON={}));var DN;(function(e){e.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",e.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",e.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(DN||(DN={}));var kN;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.ACTIVITY_START="ACTIVITY_START",e.ACTIVITY_END="ACTIVITY_END"})(kN||(kN={}));var PN;(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(PN||(PN={}));var jN;(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(jN||(jN={}));var LN;(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})(LN||(LN={}));var BN;(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(BN||(BN={}));var UN;(function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(UN||(UN={}));var FN;(function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"})(FN||(FN={}));var Cu;(function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"})(Cu||(Cu={}));class Rv{constructor(t){const n={};for(const r of t.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=t}json(){return this.responseInternal.json()}}class tf{get text(){var t,n,r,i,a,l,f,h;if(((i=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",g=!1;const y=[];for(const E of(h=(f=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||f===void 0?void 0:f.parts)!==null&&h!==void 0?h:[]){for(const[C,I]of Object.entries(E))C!=="text"&&C!=="thought"&&C!=="thoughtSignature"&&(I!==null||I!==void 0)&&y.push(C);if(typeof E.text=="string"){if(typeof E.thought=="boolean"&&E.thought)continue;g=!0,u+=E.text}}return y.length>0&&console.warn(`there are non-text parts ${y} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),g?u:void 0}get data(){var t,n,r,i,a,l,f,h;if(((i=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const g=[];for(const y of(h=(f=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||f===void 0?void 0:f.parts)!==null&&h!==void 0?h:[]){for(const[E,C]of Object.entries(y))E!=="inlineData"&&(C!==null||C!==void 0)&&g.push(E);y.inlineData&&typeof y.inlineData.data=="string"&&(u+=atob(y.inlineData.data))}return g.length>0&&console.warn(`there are non-data parts ${g} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var t,n,r,i,a,l,f,h;if(((i=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(h=(f=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||f===void 0?void 0:f.parts)===null||h===void 0?void 0:h.filter(g=>g.functionCall).map(g=>g.functionCall).filter(g=>g!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var t,n,r,i,a,l,f,h,u;if(((i=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const g=(h=(f=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||f===void 0?void 0:f.parts)===null||h===void 0?void 0:h.filter(y=>y.executableCode).map(y=>y.executableCode).filter(y=>y!==void 0);if((g==null?void 0:g.length)!==0)return(u=g==null?void 0:g[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var t,n,r,i,a,l,f,h,u;if(((i=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const g=(h=(f=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||f===void 0?void 0:f.parts)===null||h===void 0?void 0:h.filter(y=>y.codeExecutionResult).map(y=>y.codeExecutionResult).filter(y=>y!==void 0);if((g==null?void 0:g.length)!==0)return(u=g==null?void 0:g[0])===null||u===void 0?void 0:u.output}}class HN{}class zN{}class kB{}class PB{}class jB{}class LB{}class GN{}class VN{}class qN{}class BB{}class yp{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const r=new yp;let i;const a=t;return n?i=EB(a):i=wB(a),Object.assign(r,i),r}}class $N{}class YN{}class WN{}class KN{}class UB{}class FB{}class HB{}class uw{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const r=new uw,a=IB(t);return Object.assign(r,a),r}}class zB{}class GB{}class VB{}class XN{}class qB{get text(){var t,n,r;let i="",a=!1;const l=[];for(const f of(r=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[h,u]of Object.entries(f))h!=="text"&&h!=="thought"&&u!==null&&l.push(h);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;a=!0,i+=f.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?i:void 0}get data(){var t,n,r;let i="";const a=[];for(const l of(r=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[f,h]of Object.entries(l))f!=="inlineData"&&h!==null&&a.push(f);l.inlineData&&typeof l.inlineData.data=="string"&&(i+=atob(l.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class $B{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class dw{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const r=new dw,a=N3(t);return Object.assign(r,a),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function en(e,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const n=t.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function _3(e,t){const n=en(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function T3(e){return Array.isArray(e)?e.map(t=>vp(t)):[vp(e)]}function vp(e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function I3(e){const t=vp(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function R3(e){const t=vp(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function JN(e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function M3(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>JN(t)):[JN(e)]}function Mv(e){return e!=null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)}function ZN(e){return e!=null&&typeof e=="object"&&"functionCall"in e}function QN(e){return e!=null&&typeof e=="object"&&"functionResponse"in e}function ci(e){if(e==null)throw new Error("ContentUnion is required");return Mv(e)?e:{role:"user",parts:M3(e)}}function fw(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(n=>{const r=ci(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(e.isVertexAI()){const n=ci(t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(t)?t.map(n=>ci(n)):[ci(t)]}function Ca(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(ZN(e)||QN(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ci(e)]}const t=[],n=[],r=Mv(e[0]);for(const i of e){const a=Mv(i);if(a!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)t.push(i);else{if(ZN(i)||QN(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||t.push({role:"user",parts:M3(n)}),t}function YB(e,t){e.includes("null")&&(t.nullable=!0);const n=e.filter(r=>r!=="null");if(n.length===1)t.type=Object.values(gl).includes(n[0].toUpperCase())?n[0].toUpperCase():gl.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const r of n)t.anyOf.push({type:Object.values(gl).includes(r.toUpperCase())?r.toUpperCase():gl.TYPE_UNSPECIFIED})}}function Ou(e){const t={},n=["items"],r=["anyOf"],i=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=e.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(t.nullable=!0,e=a[1]):a[1].type==="null"&&(t.nullable=!0,e=a[0])),e.type instanceof Array&&YB(e.type,t);for(const[l,f]of Object.entries(e))if(f!=null)if(l=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;t.type=Object.values(gl).includes(f.toUpperCase())?f.toUpperCase():gl.TYPE_UNSPECIFIED}else if(n.includes(l))t[l]=Ou(f);else if(r.includes(l)){const h=[];for(const u of f){if(u.type=="null"){t.nullable=!0;continue}h.push(Ou(u))}t[l]=h}else if(i.includes(l)){const h={};for(const[u,g]of Object.entries(f))h[u]=Ou(g);t[l]=h}else{if(l==="additionalProperties")continue;t[l]=f}return t}function hw(e){return Ou(e)}function pw(e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function mw(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function Xu(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=Ou(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=Ou(t.response));return e}function Ju(e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function WB(e,t,n,r=1){const i=!t.startsWith(`${n}/`)&&t.split("/").length===r;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:i?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:i?`${n}/${t}`:t}function xo(e,t){if(typeof t!="string")throw new Error("name must be a string");return WB(e,t,"cachedContents")}function O3(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function El(e){return cw(e)}function KB(e){return e!=null&&typeof e=="object"&&"name"in e}function XB(e){return e!=null&&typeof e=="object"&&"video"in e}function JB(e){return e!=null&&typeof e=="object"&&"uri"in e}function D3(e){var t;let n;if(KB(e)&&(n=e.name),!(JB(e)&&(n=e.uri,n===void 0))&&!(XB(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function k3(e,t){let n;return e.isVertexAI()?n=t?"publishers/google/models":"models":n=t?"models":"tunedModels",n}function P3(e){for(const t of["models","tunedModels","publisherModels"])if(ZB(e,t))return e[t];return[]}function ZB(e,t){return e!==null&&typeof e=="object"&&t in e}function QB(e,t={}){const n=e,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),t.behavior&&(r.behavior=t.behavior),{functionDeclarations:[r]}}function eU(e,t={}){const n=[],r=new Set;for(const i of e){const a=i.name;if(r.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);r.add(a);const l=QB(i,t);l.functionDeclarations&&n.push(...l.functionDeclarations)}return{functionDeclarations:n}}function j3(e,t){let n;if(typeof t=="string")if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))n={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))n={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function tU(e){if(typeof e!="string")return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function L3(e){if(typeof e!="object"||e===null)return{};const t=e,n=t.inlinedResponses;if(typeof n!="object"||n===null)return e;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return e;let a=!1;for(const l of i){if(typeof l!="object"||l===null)continue;const h=l.response;if(typeof h!="object"||h===null)continue;if(h.embedding!==void 0){a=!0;break}}return a&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function Zu(e,t){const n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function B3(e){const t=e;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nU(e){const t={},n=A(e,["responsesFile"]);n!=null&&_(t,["fileName"],n);const r=A(e,["inlinedResponses","inlinedResponses"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>jU(l))),_(t,["inlinedResponses"],a)}const i=A(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),_(t,["inlinedEmbedContentResponses"],a)}return t}function rU(e){const t={},n=A(e,["predictionsFormat"]);n!=null&&_(t,["format"],n);const r=A(e,["gcsDestination","outputUriPrefix"]);r!=null&&_(t,["gcsUri"],r);const i=A(e,["bigqueryDestination","outputUri"]);return i!=null&&_(t,["bigqueryUri"],i),t}function iU(e){const t={},n=A(e,["format"]);n!=null&&_(t,["predictionsFormat"],n);const r=A(e,["gcsUri"]);r!=null&&_(t,["gcsDestination","outputUriPrefix"],r);const i=A(e,["bigqueryUri"]);if(i!=null&&_(t,["bigqueryDestination","outputUri"],i),A(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(A(e,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(A(e,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function cp(e){const t={},n=A(e,["name"]);n!=null&&_(t,["name"],n);const r=A(e,["metadata","displayName"]);r!=null&&_(t,["displayName"],r);const i=A(e,["metadata","state"]);i!=null&&_(t,["state"],B3(i));const a=A(e,["metadata","createTime"]);a!=null&&_(t,["createTime"],a);const l=A(e,["metadata","endTime"]);l!=null&&_(t,["endTime"],l);const f=A(e,["metadata","updateTime"]);f!=null&&_(t,["updateTime"],f);const h=A(e,["metadata","model"]);h!=null&&_(t,["model"],h);const u=A(e,["metadata","output"]);return u!=null&&_(t,["dest"],nU(L3(u))),t}function Ov(e){const t={},n=A(e,["name"]);n!=null&&_(t,["name"],n);const r=A(e,["displayName"]);r!=null&&_(t,["displayName"],r);const i=A(e,["state"]);i!=null&&_(t,["state"],B3(i));const a=A(e,["error"]);a!=null&&_(t,["error"],a);const l=A(e,["createTime"]);l!=null&&_(t,["createTime"],l);const f=A(e,["startTime"]);f!=null&&_(t,["startTime"],f);const h=A(e,["endTime"]);h!=null&&_(t,["endTime"],h);const u=A(e,["updateTime"]);u!=null&&_(t,["updateTime"],u);const g=A(e,["model"]);g!=null&&_(t,["model"],g);const y=A(e,["inputConfig"]);y!=null&&_(t,["src"],aU(y));const E=A(e,["outputConfig"]);E!=null&&_(t,["dest"],rU(L3(E)));const C=A(e,["completionStats"]);return C!=null&&_(t,["completionStats"],C),t}function aU(e){const t={},n=A(e,["instancesFormat"]);n!=null&&_(t,["format"],n);const r=A(e,["gcsSource","uris"]);r!=null&&_(t,["gcsUri"],r);const i=A(e,["bigquerySource","inputUri"]);return i!=null&&_(t,["bigqueryUri"],i),t}function sU(e,t){const n={};if(A(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(A(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(A(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=A(t,["fileName"]);r!=null&&_(n,["fileName"],r);const i=A(t,["inlinedRequests"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>PU(e,l))),_(n,["requests","requests"],a)}return n}function oU(e){const t={},n=A(e,["format"]);n!=null&&_(t,["instancesFormat"],n);const r=A(e,["gcsUri"]);r!=null&&_(t,["gcsSource","uris"],r);const i=A(e,["bigqueryUri"]);if(i!=null&&_(t,["bigquerySource","inputUri"],i),A(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(A(e,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function lU(e){const t={},n=A(e,["data"]);if(n!=null&&_(t,["data"],n),A(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=A(e,["mimeType"]);return r!=null&&_(t,["mimeType"],r),t}function cU(e,t){const n={},r=A(t,["name"]);return r!=null&&_(n,["_url","name"],Zu(e,r)),n}function uU(e,t){const n={},r=A(t,["name"]);return r!=null&&_(n,["_url","name"],Zu(e,r)),n}function dU(e){const t={},n=A(e,["content"]);n!=null&&_(t,["content"],n);const r=A(e,["citationMetadata"]);r!=null&&_(t,["citationMetadata"],fU(r));const i=A(e,["tokenCount"]);i!=null&&_(t,["tokenCount"],i);const a=A(e,["finishReason"]);a!=null&&_(t,["finishReason"],a);const l=A(e,["avgLogprobs"]);l!=null&&_(t,["avgLogprobs"],l);const f=A(e,["groundingMetadata"]);f!=null&&_(t,["groundingMetadata"],f);const h=A(e,["index"]);h!=null&&_(t,["index"],h);const u=A(e,["logprobsResult"]);u!=null&&_(t,["logprobsResult"],u);const g=A(e,["safetyRatings"]);if(g!=null){let E=g;Array.isArray(E)&&(E=E.map(C=>C)),_(t,["safetyRatings"],E)}const y=A(e,["urlContextMetadata"]);return y!=null&&_(t,["urlContextMetadata"],y),t}function fU(e){const t={},n=A(e,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),_(t,["citations"],r)}return t}function U3(e){const t={},n=A(e,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>GU(a))),_(t,["parts"],i)}const r=A(e,["role"]);return r!=null&&_(t,["role"],r),t}function hU(e,t){const n={},r=A(e,["displayName"]);if(t!==void 0&&r!=null&&_(t,["batch","displayName"],r),A(e,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function pU(e,t){const n={},r=A(e,["displayName"]);t!==void 0&&r!=null&&_(t,["displayName"],r);const i=A(e,["dest"]);return t!==void 0&&i!=null&&_(t,["outputConfig"],iU(tU(i))),n}function e_(e,t){const n={},r=A(t,["model"]);r!=null&&_(n,["_url","model"],en(e,r));const i=A(t,["src"]);i!=null&&_(n,["batch","inputConfig"],sU(e,j3(e,i)));const a=A(t,["config"]);return a!=null&&hU(a,n),n}function mU(e,t){const n={},r=A(t,["model"]);r!=null&&_(n,["model"],en(e,r));const i=A(t,["src"]);i!=null&&_(n,["inputConfig"],oU(j3(e,i)));const a=A(t,["config"]);return a!=null&&pU(a,n),n}function gU(e,t){const n={},r=A(e,["displayName"]);return t!==void 0&&r!=null&&_(t,["batch","displayName"],r),n}function xU(e,t){const n={},r=A(t,["model"]);r!=null&&_(n,["_url","model"],en(e,r));const i=A(t,["src"]);i!=null&&_(n,["batch","inputConfig"],AU(e,i));const a=A(t,["config"]);return a!=null&&gU(a,n),n}function yU(e,t){const n={},r=A(t,["name"]);return r!=null&&_(n,["_url","name"],Zu(e,r)),n}function vU(e,t){const n={},r=A(t,["name"]);return r!=null&&_(n,["_url","name"],Zu(e,r)),n}function bU(e){const t={},n=A(e,["sdkHttpResponse"]);n!=null&&_(t,["sdkHttpResponse"],n);const r=A(e,["name"]);r!=null&&_(t,["name"],r);const i=A(e,["done"]);i!=null&&_(t,["done"],i);const a=A(e,["error"]);return a!=null&&_(t,["error"],a),t}function wU(e){const t={},n=A(e,["sdkHttpResponse"]);n!=null&&_(t,["sdkHttpResponse"],n);const r=A(e,["name"]);r!=null&&_(t,["name"],r);const i=A(e,["done"]);i!=null&&_(t,["done"],i);const a=A(e,["error"]);return a!=null&&_(t,["error"],a),t}function EU(e,t){const n={},r=A(t,["contents"]);if(r!=null){let a=fw(e,r);Array.isArray(a)&&(a=a.map(l=>l)),_(n,["requests[]","request","content"],a)}const i=A(t,["config"]);return i!=null&&(_(n,["_self"],SU(i,n)),vB(n,{"requests[].*":"requests[].request.*"})),n}function SU(e,t){const n={},r=A(e,["taskType"]);t!==void 0&&r!=null&&_(t,["requests[]","taskType"],r);const i=A(e,["title"]);t!==void 0&&i!=null&&_(t,["requests[]","title"],i);const a=A(e,["outputDimensionality"]);if(t!==void 0&&a!=null&&_(t,["requests[]","outputDimensionality"],a),A(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(A(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function AU(e,t){const n={},r=A(t,["fileName"]);r!=null&&_(n,["file_name"],r);const i=A(t,["inlinedRequests"]);return i!=null&&_(n,["requests"],EU(e,i)),n}function CU(e){const t={};if(A(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=A(e,["fileUri"]);n!=null&&_(t,["fileUri"],n);const r=A(e,["mimeType"]);return r!=null&&_(t,["mimeType"],r),t}function NU(e){const t={},n=A(e,["id"]);n!=null&&_(t,["id"],n);const r=A(e,["args"]);r!=null&&_(t,["args"],r);const i=A(e,["name"]);if(i!=null&&_(t,["name"],i),A(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(A(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function _U(e){const t={},n=A(e,["allowedFunctionNames"]);n!=null&&_(t,["allowedFunctionNames"],n);const r=A(e,["mode"]);if(r!=null&&_(t,["mode"],r),A(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function TU(e,t,n){const r={},i=A(t,["systemInstruction"]);n!==void 0&&i!=null&&_(n,["systemInstruction"],U3(ci(i)));const a=A(t,["temperature"]);a!=null&&_(r,["temperature"],a);const l=A(t,["topP"]);l!=null&&_(r,["topP"],l);const f=A(t,["topK"]);f!=null&&_(r,["topK"],f);const h=A(t,["candidateCount"]);h!=null&&_(r,["candidateCount"],h);const u=A(t,["maxOutputTokens"]);u!=null&&_(r,["maxOutputTokens"],u);const g=A(t,["stopSequences"]);g!=null&&_(r,["stopSequences"],g);const y=A(t,["responseLogprobs"]);y!=null&&_(r,["responseLogprobs"],y);const E=A(t,["logprobs"]);E!=null&&_(r,["logprobs"],E);const C=A(t,["presencePenalty"]);C!=null&&_(r,["presencePenalty"],C);const I=A(t,["frequencyPenalty"]);I!=null&&_(r,["frequencyPenalty"],I);const M=A(t,["seed"]);M!=null&&_(r,["seed"],M);const O=A(t,["responseMimeType"]);O!=null&&_(r,["responseMimeType"],O);const j=A(t,["responseSchema"]);j!=null&&_(r,["responseSchema"],hw(j));const U=A(t,["responseJsonSchema"]);if(U!=null&&_(r,["responseJsonSchema"],U),A(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(A(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const L=A(t,["safetySettings"]);if(n!==void 0&&L!=null){let pe=L;Array.isArray(pe)&&(pe=pe.map(Te=>VU(Te))),_(n,["safetySettings"],pe)}const G=A(t,["tools"]);if(n!==void 0&&G!=null){let pe=Ju(G);Array.isArray(pe)&&(pe=pe.map(Te=>$U(Xu(Te)))),_(n,["tools"],pe)}const V=A(t,["toolConfig"]);if(n!==void 0&&V!=null&&_(n,["toolConfig"],qU(V)),A(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const z=A(t,["cachedContent"]);n!==void 0&&z!=null&&_(n,["cachedContent"],xo(e,z));const B=A(t,["responseModalities"]);B!=null&&_(r,["responseModalities"],B);const J=A(t,["mediaResolution"]);J!=null&&_(r,["mediaResolution"],J);const W=A(t,["speechConfig"]);if(W!=null&&_(r,["speechConfig"],pw(W)),A(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Z=A(t,["thinkingConfig"]);Z!=null&&_(r,["thinkingConfig"],Z);const te=A(t,["imageConfig"]);te!=null&&_(r,["imageConfig"],kU(te));const Y=A(t,["enableEnhancedCivicAnswers"]);return Y!=null&&_(r,["enableEnhancedCivicAnswers"],Y),r}function IU(e){const t={},n=A(e,["sdkHttpResponse"]);n!=null&&_(t,["sdkHttpResponse"],n);const r=A(e,["candidates"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(u=>dU(u))),_(t,["candidates"],h)}const i=A(e,["modelVersion"]);i!=null&&_(t,["modelVersion"],i);const a=A(e,["promptFeedback"]);a!=null&&_(t,["promptFeedback"],a);const l=A(e,["responseId"]);l!=null&&_(t,["responseId"],l);const f=A(e,["usageMetadata"]);return f!=null&&_(t,["usageMetadata"],f),t}function RU(e,t){const n={},r=A(t,["name"]);return r!=null&&_(n,["_url","name"],Zu(e,r)),n}function MU(e,t){const n={},r=A(t,["name"]);return r!=null&&_(n,["_url","name"],Zu(e,r)),n}function OU(e){const t={};if(A(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=A(e,["enableWidget"]);return n!=null&&_(t,["enableWidget"],n),t}function DU(e){const t={};if(A(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(A(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=A(e,["timeRangeFilter"]);return n!=null&&_(t,["timeRangeFilter"],n),t}function kU(e){const t={},n=A(e,["aspectRatio"]);n!=null&&_(t,["aspectRatio"],n);const r=A(e,["imageSize"]);if(r!=null&&_(t,["imageSize"],r),A(e,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(A(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(A(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function PU(e,t){const n={},r=A(t,["model"]);r!=null&&_(n,["request","model"],en(e,r));const i=A(t,["contents"]);if(i!=null){let f=Ca(i);Array.isArray(f)&&(f=f.map(h=>U3(h))),_(n,["request","contents"],f)}const a=A(t,["metadata"]);a!=null&&_(n,["metadata"],a);const l=A(t,["config"]);return l!=null&&_(n,["request","generationConfig"],TU(e,l,A(n,["request"],{}))),n}function jU(e){const t={},n=A(e,["response"]);n!=null&&_(t,["response"],IU(n));const r=A(e,["error"]);return r!=null&&_(t,["error"],r),t}function LU(e,t){const n={},r=A(e,["pageSize"]);t!==void 0&&r!=null&&_(t,["_query","pageSize"],r);const i=A(e,["pageToken"]);if(t!==void 0&&i!=null&&_(t,["_query","pageToken"],i),A(e,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function BU(e,t){const n={},r=A(e,["pageSize"]);t!==void 0&&r!=null&&_(t,["_query","pageSize"],r);const i=A(e,["pageToken"]);t!==void 0&&i!=null&&_(t,["_query","pageToken"],i);const a=A(e,["filter"]);return t!==void 0&&a!=null&&_(t,["_query","filter"],a),n}function UU(e){const t={},n=A(e,["config"]);return n!=null&&LU(n,t),t}function FU(e){const t={},n=A(e,["config"]);return n!=null&&BU(n,t),t}function HU(e){const t={},n=A(e,["sdkHttpResponse"]);n!=null&&_(t,["sdkHttpResponse"],n);const r=A(e,["nextPageToken"]);r!=null&&_(t,["nextPageToken"],r);const i=A(e,["operations"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>cp(l))),_(t,["batchJobs"],a)}return t}function zU(e){const t={},n=A(e,["sdkHttpResponse"]);n!=null&&_(t,["sdkHttpResponse"],n);const r=A(e,["nextPageToken"]);r!=null&&_(t,["nextPageToken"],r);const i=A(e,["batchPredictionJobs"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>Ov(l))),_(t,["batchJobs"],a)}return t}function GU(e){const t={},n=A(e,["mediaResolution"]);n!=null&&_(t,["mediaResolution"],n);const r=A(e,["codeExecutionResult"]);r!=null&&_(t,["codeExecutionResult"],r);const i=A(e,["executableCode"]);i!=null&&_(t,["executableCode"],i);const a=A(e,["fileData"]);a!=null&&_(t,["fileData"],CU(a));const l=A(e,["functionCall"]);l!=null&&_(t,["functionCall"],NU(l));const f=A(e,["functionResponse"]);f!=null&&_(t,["functionResponse"],f);const h=A(e,["inlineData"]);h!=null&&_(t,["inlineData"],lU(h));const u=A(e,["text"]);u!=null&&_(t,["text"],u);const g=A(e,["thought"]);g!=null&&_(t,["thought"],g);const y=A(e,["thoughtSignature"]);y!=null&&_(t,["thoughtSignature"],y);const E=A(e,["videoMetadata"]);return E!=null&&_(t,["videoMetadata"],E),t}function VU(e){const t={},n=A(e,["category"]);if(n!=null&&_(t,["category"],n),A(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=A(e,["threshold"]);return r!=null&&_(t,["threshold"],r),t}function qU(e){const t={},n=A(e,["retrievalConfig"]);n!=null&&_(t,["retrievalConfig"],n);const r=A(e,["functionCallingConfig"]);return r!=null&&_(t,["functionCallingConfig"],_U(r)),t}function $U(e){const t={};if(A(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=A(e,["computerUse"]);n!=null&&_(t,["computerUse"],n);const r=A(e,["fileSearch"]);r!=null&&_(t,["fileSearch"],r);const i=A(e,["codeExecution"]);if(i!=null&&_(t,["codeExecution"],i),A(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=A(e,["functionDeclarations"]);if(a!=null){let g=a;Array.isArray(g)&&(g=g.map(y=>y)),_(t,["functionDeclarations"],g)}const l=A(e,["googleMaps"]);l!=null&&_(t,["googleMaps"],OU(l));const f=A(e,["googleSearch"]);f!=null&&_(t,["googleSearch"],DU(f));const h=A(e,["googleSearchRetrieval"]);h!=null&&_(t,["googleSearchRetrieval"],h);const u=A(e,["urlContext"]);return u!=null&&_(t,["urlContext"],u),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var oo;(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents",e.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",e.PAGED_ITEM_DOCUMENTS="documents"})(oo||(oo={}));class Cc{constructor(t,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(t,r,i)}init(t,n,r){var i,a;this.nameInternal=t,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!r||Object.keys(r).length===0?l={config:{}}:typeof r=="object"?l=Object.assign({},r):l=r,l.config&&(l.config.pageToken=n.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(a=(i=l.config)===null||i===void 0?void 0:i.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class YU extends go{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Cc(oo.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(t){const n=e_(this.apiClient,t),r=n._url,i=Xe("{model}:batchGenerateContent",r),f=n.batch.inputConfig.requests,h=f.requests,u=[];for(const g of h){const y=Object.assign({},g);if(y.systemInstruction){const E=y.systemInstruction;delete y.systemInstruction;const C=y.request;C.systemInstruction=E,y.request=C}u.push(y)}return f.requests=u,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,n){const r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const a=this.getGcsUri(t),l=this.getBigqueryUri(t);if(a)a.endsWith(".jsonl")?r.dest=`${a.slice(0,-6)}/dest`:r.dest=`${a}_dest_${i}`;else if(l)r.dest=`${l}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(t){var n,r,i,a;let l,f="",h={};if(this.apiClient.isVertexAI()){const u=mU(this.apiClient,t);return f=Xe("batchPredictionJobs",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),l.then(g=>Ov(g))}else{const u=e_(this.apiClient,t);return f=Xe("{model}:batchGenerateContent",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),l.then(g=>cp(g))}}async createEmbeddingsInternal(t){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=xU(this.apiClient,t);return a=Xe("{model}:asyncBatchEmbedContent",f._url),l=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),i.then(h=>cp(h))}}async get(t){var n,r,i,a;let l,f="",h={};if(this.apiClient.isVertexAI()){const u=MU(this.apiClient,t);return f=Xe("batchPredictionJobs/{name}",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),l.then(g=>Ov(g))}else{const u=RU(this.apiClient,t);return f=Xe("batches/{name}",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),l.then(g=>cp(g))}}async cancel(t){var n,r,i,a;let l="",f={};if(this.apiClient.isVertexAI()){const h=uU(this.apiClient,t);l=Xe("batchPredictionJobs/{name}:cancel",h._url),f=h._query,delete h._url,delete h._query,await this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}else{const h=cU(this.apiClient,t);l=Xe("batches/{name}:cancel",h._url),f=h._query,delete h._url,delete h._query,await this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(t){var n,r,i,a;let l,f="",h={};if(this.apiClient.isVertexAI()){const u=FU(t);return f=Xe("batchPredictionJobs",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),l.then(g=>{const y=zU(g),E=new XN;return Object.assign(E,y),E})}else{const u=UU(t);return f=Xe("batches",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),l.then(g=>{const y=HU(g),E=new XN;return Object.assign(E,y),E})}}async delete(t){var n,r,i,a;let l,f="",h={};if(this.apiClient.isVertexAI()){const u=vU(this.apiClient,t);return f=Xe("batchPredictionJobs/{name}",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),l.then(g=>wU(g))}else{const u=yU(this.apiClient,t);return f=Xe("batches/{name}",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),l.then(g=>bU(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function WU(e){const t={},n=A(e,["data"]);if(n!=null&&_(t,["data"],n),A(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=A(e,["mimeType"]);return r!=null&&_(t,["mimeType"],r),t}function t_(e){const t={},n=A(e,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>x9(a))),_(t,["parts"],i)}const r=A(e,["role"]);return r!=null&&_(t,["role"],r),t}function KU(e,t){const n={},r=A(e,["ttl"]);t!==void 0&&r!=null&&_(t,["ttl"],r);const i=A(e,["expireTime"]);t!==void 0&&i!=null&&_(t,["expireTime"],i);const a=A(e,["displayName"]);t!==void 0&&a!=null&&_(t,["displayName"],a);const l=A(e,["contents"]);if(t!==void 0&&l!=null){let g=Ca(l);Array.isArray(g)&&(g=g.map(y=>t_(y))),_(t,["contents"],g)}const f=A(e,["systemInstruction"]);t!==void 0&&f!=null&&_(t,["systemInstruction"],t_(ci(f)));const h=A(e,["tools"]);if(t!==void 0&&h!=null){let g=h;Array.isArray(g)&&(g=g.map(y=>v9(y))),_(t,["tools"],g)}const u=A(e,["toolConfig"]);if(t!==void 0&&u!=null&&_(t,["toolConfig"],y9(u)),A(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function XU(e,t){const n={},r=A(e,["ttl"]);t!==void 0&&r!=null&&_(t,["ttl"],r);const i=A(e,["expireTime"]);t!==void 0&&i!=null&&_(t,["expireTime"],i);const a=A(e,["displayName"]);t!==void 0&&a!=null&&_(t,["displayName"],a);const l=A(e,["contents"]);if(t!==void 0&&l!=null){let y=Ca(l);Array.isArray(y)&&(y=y.map(E=>E)),_(t,["contents"],y)}const f=A(e,["systemInstruction"]);t!==void 0&&f!=null&&_(t,["systemInstruction"],ci(f));const h=A(e,["tools"]);if(t!==void 0&&h!=null){let y=h;Array.isArray(y)&&(y=y.map(E=>b9(E))),_(t,["tools"],y)}const u=A(e,["toolConfig"]);t!==void 0&&u!=null&&_(t,["toolConfig"],u);const g=A(e,["kmsKeyName"]);return t!==void 0&&g!=null&&_(t,["encryption_spec","kmsKeyName"],g),n}function JU(e,t){const n={},r=A(t,["model"]);r!=null&&_(n,["model"],_3(e,r));const i=A(t,["config"]);return i!=null&&KU(i,n),n}function ZU(e,t){const n={},r=A(t,["model"]);r!=null&&_(n,["model"],_3(e,r));const i=A(t,["config"]);return i!=null&&XU(i,n),n}function QU(e,t){const n={},r=A(t,["name"]);return r!=null&&_(n,["_url","name"],xo(e,r)),n}function e9(e,t){const n={},r=A(t,["name"]);return r!=null&&_(n,["_url","name"],xo(e,r)),n}function t9(e){const t={},n=A(e,["sdkHttpResponse"]);return n!=null&&_(t,["sdkHttpResponse"],n),t}function n9(e){const t={},n=A(e,["sdkHttpResponse"]);return n!=null&&_(t,["sdkHttpResponse"],n),t}function r9(e){const t={};if(A(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=A(e,["fileUri"]);n!=null&&_(t,["fileUri"],n);const r=A(e,["mimeType"]);return r!=null&&_(t,["mimeType"],r),t}function i9(e){const t={},n=A(e,["id"]);n!=null&&_(t,["id"],n);const r=A(e,["args"]);r!=null&&_(t,["args"],r);const i=A(e,["name"]);if(i!=null&&_(t,["name"],i),A(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(A(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function a9(e){const t={},n=A(e,["allowedFunctionNames"]);n!=null&&_(t,["allowedFunctionNames"],n);const r=A(e,["mode"]);if(r!=null&&_(t,["mode"],r),A(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function s9(e){const t={},n=A(e,["description"]);n!=null&&_(t,["description"],n);const r=A(e,["name"]);r!=null&&_(t,["name"],r);const i=A(e,["parameters"]);i!=null&&_(t,["parameters"],i);const a=A(e,["parametersJsonSchema"]);a!=null&&_(t,["parametersJsonSchema"],a);const l=A(e,["response"]);l!=null&&_(t,["response"],l);const f=A(e,["responseJsonSchema"]);if(f!=null&&_(t,["responseJsonSchema"],f),A(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function o9(e,t){const n={},r=A(t,["name"]);return r!=null&&_(n,["_url","name"],xo(e,r)),n}function l9(e,t){const n={},r=A(t,["name"]);return r!=null&&_(n,["_url","name"],xo(e,r)),n}function c9(e){const t={};if(A(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=A(e,["enableWidget"]);return n!=null&&_(t,["enableWidget"],n),t}function u9(e){const t={};if(A(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(A(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=A(e,["timeRangeFilter"]);return n!=null&&_(t,["timeRangeFilter"],n),t}function d9(e,t){const n={},r=A(e,["pageSize"]);t!==void 0&&r!=null&&_(t,["_query","pageSize"],r);const i=A(e,["pageToken"]);return t!==void 0&&i!=null&&_(t,["_query","pageToken"],i),n}function f9(e,t){const n={},r=A(e,["pageSize"]);t!==void 0&&r!=null&&_(t,["_query","pageSize"],r);const i=A(e,["pageToken"]);return t!==void 0&&i!=null&&_(t,["_query","pageToken"],i),n}function h9(e){const t={},n=A(e,["config"]);return n!=null&&d9(n,t),t}function p9(e){const t={},n=A(e,["config"]);return n!=null&&f9(n,t),t}function m9(e){const t={},n=A(e,["sdkHttpResponse"]);n!=null&&_(t,["sdkHttpResponse"],n);const r=A(e,["nextPageToken"]);r!=null&&_(t,["nextPageToken"],r);const i=A(e,["cachedContents"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),_(t,["cachedContents"],a)}return t}function g9(e){const t={},n=A(e,["sdkHttpResponse"]);n!=null&&_(t,["sdkHttpResponse"],n);const r=A(e,["nextPageToken"]);r!=null&&_(t,["nextPageToken"],r);const i=A(e,["cachedContents"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),_(t,["cachedContents"],a)}return t}function x9(e){const t={},n=A(e,["mediaResolution"]);n!=null&&_(t,["mediaResolution"],n);const r=A(e,["codeExecutionResult"]);r!=null&&_(t,["codeExecutionResult"],r);const i=A(e,["executableCode"]);i!=null&&_(t,["executableCode"],i);const a=A(e,["fileData"]);a!=null&&_(t,["fileData"],r9(a));const l=A(e,["functionCall"]);l!=null&&_(t,["functionCall"],i9(l));const f=A(e,["functionResponse"]);f!=null&&_(t,["functionResponse"],f);const h=A(e,["inlineData"]);h!=null&&_(t,["inlineData"],WU(h));const u=A(e,["text"]);u!=null&&_(t,["text"],u);const g=A(e,["thought"]);g!=null&&_(t,["thought"],g);const y=A(e,["thoughtSignature"]);y!=null&&_(t,["thoughtSignature"],y);const E=A(e,["videoMetadata"]);return E!=null&&_(t,["videoMetadata"],E),t}function y9(e){const t={},n=A(e,["retrievalConfig"]);n!=null&&_(t,["retrievalConfig"],n);const r=A(e,["functionCallingConfig"]);return r!=null&&_(t,["functionCallingConfig"],a9(r)),t}function v9(e){const t={};if(A(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=A(e,["computerUse"]);n!=null&&_(t,["computerUse"],n);const r=A(e,["fileSearch"]);r!=null&&_(t,["fileSearch"],r);const i=A(e,["codeExecution"]);if(i!=null&&_(t,["codeExecution"],i),A(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=A(e,["functionDeclarations"]);if(a!=null){let g=a;Array.isArray(g)&&(g=g.map(y=>y)),_(t,["functionDeclarations"],g)}const l=A(e,["googleMaps"]);l!=null&&_(t,["googleMaps"],c9(l));const f=A(e,["googleSearch"]);f!=null&&_(t,["googleSearch"],u9(f));const h=A(e,["googleSearchRetrieval"]);h!=null&&_(t,["googleSearchRetrieval"],h);const u=A(e,["urlContext"]);return u!=null&&_(t,["urlContext"],u),t}function b9(e){const t={},n=A(e,["retrieval"]);n!=null&&_(t,["retrieval"],n);const r=A(e,["computerUse"]);if(r!=null&&_(t,["computerUse"],r),A(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=A(e,["codeExecution"]);i!=null&&_(t,["codeExecution"],i);const a=A(e,["enterpriseWebSearch"]);a!=null&&_(t,["enterpriseWebSearch"],a);const l=A(e,["functionDeclarations"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(E=>s9(E))),_(t,["functionDeclarations"],y)}const f=A(e,["googleMaps"]);f!=null&&_(t,["googleMaps"],f);const h=A(e,["googleSearch"]);h!=null&&_(t,["googleSearch"],h);const u=A(e,["googleSearchRetrieval"]);u!=null&&_(t,["googleSearchRetrieval"],u);const g=A(e,["urlContext"]);return g!=null&&_(t,["urlContext"],g),t}function w9(e,t){const n={},r=A(e,["ttl"]);t!==void 0&&r!=null&&_(t,["ttl"],r);const i=A(e,["expireTime"]);return t!==void 0&&i!=null&&_(t,["expireTime"],i),n}function E9(e,t){const n={},r=A(e,["ttl"]);t!==void 0&&r!=null&&_(t,["ttl"],r);const i=A(e,["expireTime"]);return t!==void 0&&i!=null&&_(t,["expireTime"],i),n}function S9(e,t){const n={},r=A(t,["name"]);r!=null&&_(n,["_url","name"],xo(e,r));const i=A(t,["config"]);return i!=null&&w9(i,n),n}function A9(e,t){const n={},r=A(t,["name"]);r!=null&&_(n,["_url","name"],xo(e,r));const i=A(t,["config"]);return i!=null&&E9(i,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class C9 extends go{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Cc(oo.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(t){var n,r,i,a;let l,f="",h={};if(this.apiClient.isVertexAI()){const u=ZU(this.apiClient,t);return f=Xe("cachedContents",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),l.then(g=>g)}else{const u=JU(this.apiClient,t);return f=Xe("cachedContents",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),l.then(g=>g)}}async get(t){var n,r,i,a;let l,f="",h={};if(this.apiClient.isVertexAI()){const u=l9(this.apiClient,t);return f=Xe("{name}",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),l.then(g=>g)}else{const u=o9(this.apiClient,t);return f=Xe("{name}",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),l.then(g=>g)}}async delete(t){var n,r,i,a;let l,f="",h={};if(this.apiClient.isVertexAI()){const u=e9(this.apiClient,t);return f=Xe("{name}",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),l.then(g=>{const y=n9(g),E=new WN;return Object.assign(E,y),E})}else{const u=QU(this.apiClient,t);return f=Xe("{name}",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),l.then(g=>{const y=t9(g),E=new WN;return Object.assign(E,y),E})}}async update(t){var n,r,i,a;let l,f="",h={};if(this.apiClient.isVertexAI()){const u=A9(this.apiClient,t);return f=Xe("{name}",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),l.then(g=>g)}else{const u=S9(this.apiClient,t);return f=Xe("{name}",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),l.then(g=>g)}}async listInternal(t){var n,r,i,a;let l,f="",h={};if(this.apiClient.isVertexAI()){const u=p9(t);return f=Xe("cachedContents",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),l.then(g=>{const y=g9(g),E=new KN;return Object.assign(E,y),E})}else{const u=h9(t);return f=Xe("cachedContents",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),l.then(g=>{const y=m9(g),E=new KN;return Object.assign(E,y),E})}}}function bp(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function n_(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ct(e){return this instanceof Ct?(this.v=e,this):new Ct(e)}function Ka(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",l),i[Symbol.asyncIterator]=function(){return this},i;function l(C){return function(I){return Promise.resolve(I).then(C,y)}}function f(C,I){r[C]&&(i[C]=function(M){return new Promise(function(O,j){a.push([C,M,O,j])>1||h(C,M)})},I&&(i[C]=I(i[C])))}function h(C,I){try{u(r[C](I))}catch(M){E(a[0][3],M)}}function u(C){C.value instanceof Ct?Promise.resolve(C.value.v).then(g,y):E(a[0][2],C)}function g(C){h("next",C)}function y(C){h("throw",C)}function E(C,I){C(I),a.shift(),a.length&&h(a[0][0],a[0][1])}}function Xa(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof n_=="function"?n_(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=e[a]&&function(l){return new Promise(function(f,h){l=e[a](l),i(f,h,l.done,l.value)})}}function i(a,l,f,h){Promise.resolve(h).then(function(u){a({value:u,done:f})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function N9(e){var t;if(e.candidates==null||e.candidates.length===0)return!1;const n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;return n===void 0?!1:F3(n)}function F3(e){if(e.parts===void 0||e.parts.length===0)return!1;for(const t of e.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function _9(e){if(e.length!==0){for(const t of e)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function r_(e){if(e===void 0||e.length===0)return[];const t=[],n=e.length;let r=0;for(;r<n;)if(e[r].role==="user")t.push(e[r]),r++;else{const i=[];let a=!0;for(;r<n&&e[r].role==="model";)i.push(e[r]),a&&!F3(e[r])&&(a=!1),r++;a?t.push(...i):t.pop()}return t}class T9{constructor(t,n){this.modelsModule=t,this.apiClient=n}create(t){return new I9(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class I9{constructor(t,n,r,i={},a=[]){this.apiClient=t,this.modelsModule=n,this.model=r,this.config=i,this.history=a,this.sendPromise=Promise.resolve(),_9(a)}async sendMessage(t){var n;await this.sendPromise;const r=ci(t.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=t.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,l,f;const h=await i,u=(l=(a=h.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content,g=h.automaticFunctionCallingHistory,y=this.getHistory(!0).length;let E=[];g!=null&&(E=(f=g.slice(y))!==null&&f!==void 0?f:[]);const C=u?[u]:[];this.recordHistory(r,C,E)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(t){var n;await this.sendPromise;const r=ci(t.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=t.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const a=await i;return this.processStreamResponse(a,r)}getHistory(t=!1){const n=t?r_(this.history):this.history;return structuredClone(n)}processStreamResponse(t,n){return Ka(this,arguments,function*(){var i,a,l,f,h,u;const g=[];try{for(var y=!0,E=Xa(t),C;C=yield Ct(E.next()),i=C.done,!i;y=!0){f=C.value,y=!1;const I=f;if(N9(I)){const M=(u=(h=I.candidates)===null||h===void 0?void 0:h[0])===null||u===void 0?void 0:u.content;M!==void 0&&g.push(M)}yield yield Ct(I)}}catch(I){a={error:I}}finally{try{!y&&!i&&(l=E.return)&&(yield Ct(l.call(E)))}finally{if(a)throw a.error}}this.recordHistory(n,g)})}recordHistory(t,n,r){let i=[];n.length>0&&n.every(a=>a.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...r_(r)):this.history.push(t),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cm extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,Cm.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function R9(e){const t={},n=A(e,["file"]);return n!=null&&_(t,["file"],n),t}function M9(e){const t={},n=A(e,["sdkHttpResponse"]);return n!=null&&_(t,["sdkHttpResponse"],n),t}function O9(e){const t={},n=A(e,["name"]);return n!=null&&_(t,["_url","file"],D3(n)),t}function D9(e){const t={},n=A(e,["sdkHttpResponse"]);return n!=null&&_(t,["sdkHttpResponse"],n),t}function k9(e){const t={},n=A(e,["name"]);return n!=null&&_(t,["_url","file"],D3(n)),t}function P9(e,t){const n={},r=A(e,["pageSize"]);t!==void 0&&r!=null&&_(t,["_query","pageSize"],r);const i=A(e,["pageToken"]);return t!==void 0&&i!=null&&_(t,["_query","pageToken"],i),n}function j9(e){const t={},n=A(e,["config"]);return n!=null&&P9(n,t),t}function L9(e){const t={},n=A(e,["sdkHttpResponse"]);n!=null&&_(t,["sdkHttpResponse"],n);const r=A(e,["nextPageToken"]);r!=null&&_(t,["nextPageToken"],r);const i=A(e,["files"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),_(t,["files"],a)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class B9 extends go{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Cc(oo.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(n=>n)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=j9(t);return a=Xe("files",f._url),l=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(u=>{const g=u;return g.sdkHttpResponse={headers:h.headers},g})),i.then(h=>{const u=L9(h),g=new zB;return Object.assign(g,u),g})}}async createInternal(t){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=R9(t);return a=Xe("upload/v1beta/files",f._url),l=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),i.then(h=>{const u=M9(h),g=new GB;return Object.assign(g,u),g})}}async get(t){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=k9(t);return a=Xe("files/{file}",f._url),l=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),i.then(h=>h)}}async delete(t){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=O9(t);return a=Xe("files/{file}",f._url),l=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(u=>{const g=u;return g.sdkHttpResponse={headers:h.headers},g})),i.then(h=>{const u=D9(h),g=new VB;return Object.assign(g,u),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function up(e){const t={},n=A(e,["data"]);if(n!=null&&_(t,["data"],n),A(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=A(e,["mimeType"]);return r!=null&&_(t,["mimeType"],r),t}function U9(e){const t={},n=A(e,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>t7(a))),_(t,["parts"],i)}const r=A(e,["role"]);return r!=null&&_(t,["role"],r),t}function F9(e){const t={};if(A(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=A(e,["fileUri"]);n!=null&&_(t,["fileUri"],n);const r=A(e,["mimeType"]);return r!=null&&_(t,["mimeType"],r),t}function H9(e){const t={},n=A(e,["id"]);n!=null&&_(t,["id"],n);const r=A(e,["args"]);r!=null&&_(t,["args"],r);const i=A(e,["name"]);if(i!=null&&_(t,["name"],i),A(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(A(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function z9(e){const t={},n=A(e,["description"]);n!=null&&_(t,["description"],n);const r=A(e,["name"]);r!=null&&_(t,["name"],r);const i=A(e,["parameters"]);i!=null&&_(t,["parameters"],i);const a=A(e,["parametersJsonSchema"]);a!=null&&_(t,["parametersJsonSchema"],a);const l=A(e,["response"]);l!=null&&_(t,["response"],l);const f=A(e,["responseJsonSchema"]);if(f!=null&&_(t,["responseJsonSchema"],f),A(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function G9(e){const t={},n=A(e,["modelSelectionConfig"]);n!=null&&_(t,["modelConfig"],n);const r=A(e,["responseJsonSchema"]);r!=null&&_(t,["responseJsonSchema"],r);const i=A(e,["audioTimestamp"]);i!=null&&_(t,["audioTimestamp"],i);const a=A(e,["candidateCount"]);a!=null&&_(t,["candidateCount"],a);const l=A(e,["enableAffectiveDialog"]);l!=null&&_(t,["enableAffectiveDialog"],l);const f=A(e,["frequencyPenalty"]);f!=null&&_(t,["frequencyPenalty"],f);const h=A(e,["logprobs"]);h!=null&&_(t,["logprobs"],h);const u=A(e,["maxOutputTokens"]);u!=null&&_(t,["maxOutputTokens"],u);const g=A(e,["mediaResolution"]);g!=null&&_(t,["mediaResolution"],g);const y=A(e,["presencePenalty"]);y!=null&&_(t,["presencePenalty"],y);const E=A(e,["responseLogprobs"]);E!=null&&_(t,["responseLogprobs"],E);const C=A(e,["responseMimeType"]);C!=null&&_(t,["responseMimeType"],C);const I=A(e,["responseModalities"]);I!=null&&_(t,["responseModalities"],I);const M=A(e,["responseSchema"]);M!=null&&_(t,["responseSchema"],M);const O=A(e,["routingConfig"]);O!=null&&_(t,["routingConfig"],O);const j=A(e,["seed"]);j!=null&&_(t,["seed"],j);const U=A(e,["speechConfig"]);U!=null&&_(t,["speechConfig"],U);const L=A(e,["stopSequences"]);L!=null&&_(t,["stopSequences"],L);const G=A(e,["temperature"]);G!=null&&_(t,["temperature"],G);const V=A(e,["thinkingConfig"]);V!=null&&_(t,["thinkingConfig"],V);const z=A(e,["topK"]);z!=null&&_(t,["topK"],z);const B=A(e,["topP"]);if(B!=null&&_(t,["topP"],B),A(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function V9(e){const t={};if(A(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=A(e,["enableWidget"]);return n!=null&&_(t,["enableWidget"],n),t}function q9(e){const t={};if(A(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(A(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=A(e,["timeRangeFilter"]);return n!=null&&_(t,["timeRangeFilter"],n),t}function $9(e,t){const n={},r=A(e,["generationConfig"]);t!==void 0&&r!=null&&_(t,["setup","generationConfig"],r);const i=A(e,["responseModalities"]);t!==void 0&&i!=null&&_(t,["setup","generationConfig","responseModalities"],i);const a=A(e,["temperature"]);t!==void 0&&a!=null&&_(t,["setup","generationConfig","temperature"],a);const l=A(e,["topP"]);t!==void 0&&l!=null&&_(t,["setup","generationConfig","topP"],l);const f=A(e,["topK"]);t!==void 0&&f!=null&&_(t,["setup","generationConfig","topK"],f);const h=A(e,["maxOutputTokens"]);t!==void 0&&h!=null&&_(t,["setup","generationConfig","maxOutputTokens"],h);const u=A(e,["mediaResolution"]);t!==void 0&&u!=null&&_(t,["setup","generationConfig","mediaResolution"],u);const g=A(e,["seed"]);t!==void 0&&g!=null&&_(t,["setup","generationConfig","seed"],g);const y=A(e,["speechConfig"]);t!==void 0&&y!=null&&_(t,["setup","generationConfig","speechConfig"],mw(y));const E=A(e,["thinkingConfig"]);t!==void 0&&E!=null&&_(t,["setup","generationConfig","thinkingConfig"],E);const C=A(e,["enableAffectiveDialog"]);t!==void 0&&C!=null&&_(t,["setup","generationConfig","enableAffectiveDialog"],C);const I=A(e,["systemInstruction"]);t!==void 0&&I!=null&&_(t,["setup","systemInstruction"],U9(ci(I)));const M=A(e,["tools"]);if(t!==void 0&&M!=null){let z=Ju(M);Array.isArray(z)&&(z=z.map(B=>r7(Xu(B)))),_(t,["setup","tools"],z)}const O=A(e,["sessionResumption"]);t!==void 0&&O!=null&&_(t,["setup","sessionResumption"],n7(O));const j=A(e,["inputAudioTranscription"]);t!==void 0&&j!=null&&_(t,["setup","inputAudioTranscription"],j);const U=A(e,["outputAudioTranscription"]);t!==void 0&&U!=null&&_(t,["setup","outputAudioTranscription"],U);const L=A(e,["realtimeInputConfig"]);t!==void 0&&L!=null&&_(t,["setup","realtimeInputConfig"],L);const G=A(e,["contextWindowCompression"]);t!==void 0&&G!=null&&_(t,["setup","contextWindowCompression"],G);const V=A(e,["proactivity"]);if(t!==void 0&&V!=null&&_(t,["setup","proactivity"],V),A(e,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function Y9(e,t){const n={},r=A(e,["generationConfig"]);t!==void 0&&r!=null&&_(t,["setup","generationConfig"],G9(r));const i=A(e,["responseModalities"]);t!==void 0&&i!=null&&_(t,["setup","generationConfig","responseModalities"],i);const a=A(e,["temperature"]);t!==void 0&&a!=null&&_(t,["setup","generationConfig","temperature"],a);const l=A(e,["topP"]);t!==void 0&&l!=null&&_(t,["setup","generationConfig","topP"],l);const f=A(e,["topK"]);t!==void 0&&f!=null&&_(t,["setup","generationConfig","topK"],f);const h=A(e,["maxOutputTokens"]);t!==void 0&&h!=null&&_(t,["setup","generationConfig","maxOutputTokens"],h);const u=A(e,["mediaResolution"]);t!==void 0&&u!=null&&_(t,["setup","generationConfig","mediaResolution"],u);const g=A(e,["seed"]);t!==void 0&&g!=null&&_(t,["setup","generationConfig","seed"],g);const y=A(e,["speechConfig"]);t!==void 0&&y!=null&&_(t,["setup","generationConfig","speechConfig"],mw(y));const E=A(e,["thinkingConfig"]);t!==void 0&&E!=null&&_(t,["setup","generationConfig","thinkingConfig"],E);const C=A(e,["enableAffectiveDialog"]);t!==void 0&&C!=null&&_(t,["setup","generationConfig","enableAffectiveDialog"],C);const I=A(e,["systemInstruction"]);t!==void 0&&I!=null&&_(t,["setup","systemInstruction"],ci(I));const M=A(e,["tools"]);if(t!==void 0&&M!=null){let B=Ju(M);Array.isArray(B)&&(B=B.map(J=>i7(Xu(J)))),_(t,["setup","tools"],B)}const O=A(e,["sessionResumption"]);t!==void 0&&O!=null&&_(t,["setup","sessionResumption"],O);const j=A(e,["inputAudioTranscription"]);t!==void 0&&j!=null&&_(t,["setup","inputAudioTranscription"],j);const U=A(e,["outputAudioTranscription"]);t!==void 0&&U!=null&&_(t,["setup","outputAudioTranscription"],U);const L=A(e,["realtimeInputConfig"]);t!==void 0&&L!=null&&_(t,["setup","realtimeInputConfig"],L);const G=A(e,["contextWindowCompression"]);t!==void 0&&G!=null&&_(t,["setup","contextWindowCompression"],G);const V=A(e,["proactivity"]);t!==void 0&&V!=null&&_(t,["setup","proactivity"],V);const z=A(e,["explicitVadSignal"]);return t!==void 0&&z!=null&&_(t,["setup","explicitVadSignal"],z),n}function W9(e,t){const n={},r=A(t,["model"]);r!=null&&_(n,["setup","model"],en(e,r));const i=A(t,["config"]);return i!=null&&_(n,["config"],$9(i,n)),n}function K9(e,t){const n={},r=A(t,["model"]);r!=null&&_(n,["setup","model"],en(e,r));const i=A(t,["config"]);return i!=null&&_(n,["config"],Y9(i,n)),n}function X9(e){const t={},n=A(e,["musicGenerationConfig"]);return n!=null&&_(t,["musicGenerationConfig"],n),t}function J9(e){const t={},n=A(e,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),_(t,["weightedPrompts"],r)}return t}function Z9(e){const t={},n=A(e,["media"]);if(n!=null){let u=T3(n);Array.isArray(u)&&(u=u.map(g=>up(g))),_(t,["mediaChunks"],u)}const r=A(e,["audio"]);r!=null&&_(t,["audio"],up(R3(r)));const i=A(e,["audioStreamEnd"]);i!=null&&_(t,["audioStreamEnd"],i);const a=A(e,["video"]);a!=null&&_(t,["video"],up(I3(a)));const l=A(e,["text"]);l!=null&&_(t,["text"],l);const f=A(e,["activityStart"]);f!=null&&_(t,["activityStart"],f);const h=A(e,["activityEnd"]);return h!=null&&_(t,["activityEnd"],h),t}function Q9(e){const t={},n=A(e,["media"]);if(n!=null){let u=T3(n);Array.isArray(u)&&(u=u.map(g=>g)),_(t,["mediaChunks"],u)}const r=A(e,["audio"]);r!=null&&_(t,["audio"],R3(r));const i=A(e,["audioStreamEnd"]);i!=null&&_(t,["audioStreamEnd"],i);const a=A(e,["video"]);a!=null&&_(t,["video"],I3(a));const l=A(e,["text"]);l!=null&&_(t,["text"],l);const f=A(e,["activityStart"]);f!=null&&_(t,["activityStart"],f);const h=A(e,["activityEnd"]);return h!=null&&_(t,["activityEnd"],h),t}function e7(e){const t={},n=A(e,["setupComplete"]);n!=null&&_(t,["setupComplete"],n);const r=A(e,["serverContent"]);r!=null&&_(t,["serverContent"],r);const i=A(e,["toolCall"]);i!=null&&_(t,["toolCall"],i);const a=A(e,["toolCallCancellation"]);a!=null&&_(t,["toolCallCancellation"],a);const l=A(e,["usageMetadata"]);l!=null&&_(t,["usageMetadata"],a7(l));const f=A(e,["goAway"]);f!=null&&_(t,["goAway"],f);const h=A(e,["sessionResumptionUpdate"]);h!=null&&_(t,["sessionResumptionUpdate"],h);const u=A(e,["voiceActivityDetectionSignal"]);u!=null&&_(t,["voiceActivityDetectionSignal"],u);const g=A(e,["voiceActivity"]);return g!=null&&_(t,["voiceActivity"],s7(g)),t}function t7(e){const t={},n=A(e,["mediaResolution"]);n!=null&&_(t,["mediaResolution"],n);const r=A(e,["codeExecutionResult"]);r!=null&&_(t,["codeExecutionResult"],r);const i=A(e,["executableCode"]);i!=null&&_(t,["executableCode"],i);const a=A(e,["fileData"]);a!=null&&_(t,["fileData"],F9(a));const l=A(e,["functionCall"]);l!=null&&_(t,["functionCall"],H9(l));const f=A(e,["functionResponse"]);f!=null&&_(t,["functionResponse"],f);const h=A(e,["inlineData"]);h!=null&&_(t,["inlineData"],up(h));const u=A(e,["text"]);u!=null&&_(t,["text"],u);const g=A(e,["thought"]);g!=null&&_(t,["thought"],g);const y=A(e,["thoughtSignature"]);y!=null&&_(t,["thoughtSignature"],y);const E=A(e,["videoMetadata"]);return E!=null&&_(t,["videoMetadata"],E),t}function n7(e){const t={},n=A(e,["handle"]);if(n!=null&&_(t,["handle"],n),A(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function r7(e){const t={};if(A(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=A(e,["computerUse"]);n!=null&&_(t,["computerUse"],n);const r=A(e,["fileSearch"]);r!=null&&_(t,["fileSearch"],r);const i=A(e,["codeExecution"]);if(i!=null&&_(t,["codeExecution"],i),A(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=A(e,["functionDeclarations"]);if(a!=null){let g=a;Array.isArray(g)&&(g=g.map(y=>y)),_(t,["functionDeclarations"],g)}const l=A(e,["googleMaps"]);l!=null&&_(t,["googleMaps"],V9(l));const f=A(e,["googleSearch"]);f!=null&&_(t,["googleSearch"],q9(f));const h=A(e,["googleSearchRetrieval"]);h!=null&&_(t,["googleSearchRetrieval"],h);const u=A(e,["urlContext"]);return u!=null&&_(t,["urlContext"],u),t}function i7(e){const t={},n=A(e,["retrieval"]);n!=null&&_(t,["retrieval"],n);const r=A(e,["computerUse"]);if(r!=null&&_(t,["computerUse"],r),A(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=A(e,["codeExecution"]);i!=null&&_(t,["codeExecution"],i);const a=A(e,["enterpriseWebSearch"]);a!=null&&_(t,["enterpriseWebSearch"],a);const l=A(e,["functionDeclarations"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(E=>z9(E))),_(t,["functionDeclarations"],y)}const f=A(e,["googleMaps"]);f!=null&&_(t,["googleMaps"],f);const h=A(e,["googleSearch"]);h!=null&&_(t,["googleSearch"],h);const u=A(e,["googleSearchRetrieval"]);u!=null&&_(t,["googleSearchRetrieval"],u);const g=A(e,["urlContext"]);return g!=null&&_(t,["urlContext"],g),t}function a7(e){const t={},n=A(e,["promptTokenCount"]);n!=null&&_(t,["promptTokenCount"],n);const r=A(e,["cachedContentTokenCount"]);r!=null&&_(t,["cachedContentTokenCount"],r);const i=A(e,["candidatesTokenCount"]);i!=null&&_(t,["responseTokenCount"],i);const a=A(e,["toolUsePromptTokenCount"]);a!=null&&_(t,["toolUsePromptTokenCount"],a);const l=A(e,["thoughtsTokenCount"]);l!=null&&_(t,["thoughtsTokenCount"],l);const f=A(e,["totalTokenCount"]);f!=null&&_(t,["totalTokenCount"],f);const h=A(e,["promptTokensDetails"]);if(h!=null){let C=h;Array.isArray(C)&&(C=C.map(I=>I)),_(t,["promptTokensDetails"],C)}const u=A(e,["cacheTokensDetails"]);if(u!=null){let C=u;Array.isArray(C)&&(C=C.map(I=>I)),_(t,["cacheTokensDetails"],C)}const g=A(e,["candidatesTokensDetails"]);if(g!=null){let C=g;Array.isArray(C)&&(C=C.map(I=>I)),_(t,["responseTokensDetails"],C)}const y=A(e,["toolUsePromptTokensDetails"]);if(y!=null){let C=y;Array.isArray(C)&&(C=C.map(I=>I)),_(t,["toolUsePromptTokensDetails"],C)}const E=A(e,["trafficType"]);return E!=null&&_(t,["trafficType"],E),t}function s7(e){const t={},n=A(e,["type"]);return n!=null&&_(t,["voiceActivityType"],n),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function o7(e){const t={},n=A(e,["data"]);if(n!=null&&_(t,["data"],n),A(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=A(e,["mimeType"]);return r!=null&&_(t,["mimeType"],r),t}function l7(e){const t={},n=A(e,["content"]);n!=null&&_(t,["content"],n);const r=A(e,["citationMetadata"]);r!=null&&_(t,["citationMetadata"],c7(r));const i=A(e,["tokenCount"]);i!=null&&_(t,["tokenCount"],i);const a=A(e,["finishReason"]);a!=null&&_(t,["finishReason"],a);const l=A(e,["avgLogprobs"]);l!=null&&_(t,["avgLogprobs"],l);const f=A(e,["groundingMetadata"]);f!=null&&_(t,["groundingMetadata"],f);const h=A(e,["index"]);h!=null&&_(t,["index"],h);const u=A(e,["logprobsResult"]);u!=null&&_(t,["logprobsResult"],u);const g=A(e,["safetyRatings"]);if(g!=null){let E=g;Array.isArray(E)&&(E=E.map(C=>C)),_(t,["safetyRatings"],E)}const y=A(e,["urlContextMetadata"]);return y!=null&&_(t,["urlContextMetadata"],y),t}function c7(e){const t={},n=A(e,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),_(t,["citations"],r)}return t}function u7(e,t){const n={},r=A(t,["model"]);r!=null&&_(n,["_url","model"],en(e,r));const i=A(t,["contents"]);if(i!=null){let a=Ca(i);Array.isArray(a)&&(a=a.map(l=>l)),_(n,["contents"],a)}return n}function d7(e){const t={},n=A(e,["sdkHttpResponse"]);n!=null&&_(t,["sdkHttpResponse"],n);const r=A(e,["tokensInfo"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>a)),_(t,["tokensInfo"],i)}return t}function f7(e){const t={},n=A(e,["values"]);n!=null&&_(t,["values"],n);const r=A(e,["statistics"]);return r!=null&&_(t,["statistics"],h7(r)),t}function h7(e){const t={},n=A(e,["truncated"]);n!=null&&_(t,["truncated"],n);const r=A(e,["token_count"]);return r!=null&&_(t,["tokenCount"],r),t}function Nm(e){const t={},n=A(e,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>EF(a))),_(t,["parts"],i)}const r=A(e,["role"]);return r!=null&&_(t,["role"],r),t}function p7(e){const t={},n=A(e,["controlType"]);n!=null&&_(t,["controlType"],n);const r=A(e,["enableControlImageComputation"]);return r!=null&&_(t,["computeControl"],r),t}function m7(e){const t={};if(A(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(A(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(A(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function g7(e,t){const n={},r=A(e,["systemInstruction"]);t!==void 0&&r!=null&&_(t,["systemInstruction"],ci(r));const i=A(e,["tools"]);if(t!==void 0&&i!=null){let l=i;Array.isArray(l)&&(l=l.map(f=>V3(f))),_(t,["tools"],l)}const a=A(e,["generationConfig"]);return t!==void 0&&a!=null&&_(t,["generationConfig"],oF(a)),n}function x7(e,t){const n={},r=A(t,["model"]);r!=null&&_(n,["_url","model"],en(e,r));const i=A(t,["contents"]);if(i!=null){let l=Ca(i);Array.isArray(l)&&(l=l.map(f=>Nm(f))),_(n,["contents"],l)}const a=A(t,["config"]);return a!=null&&m7(a),n}function y7(e,t){const n={},r=A(t,["model"]);r!=null&&_(n,["_url","model"],en(e,r));const i=A(t,["contents"]);if(i!=null){let l=Ca(i);Array.isArray(l)&&(l=l.map(f=>f)),_(n,["contents"],l)}const a=A(t,["config"]);return a!=null&&g7(a,n),n}function v7(e){const t={},n=A(e,["sdkHttpResponse"]);n!=null&&_(t,["sdkHttpResponse"],n);const r=A(e,["totalTokens"]);r!=null&&_(t,["totalTokens"],r);const i=A(e,["cachedContentTokenCount"]);return i!=null&&_(t,["cachedContentTokenCount"],i),t}function b7(e){const t={},n=A(e,["sdkHttpResponse"]);n!=null&&_(t,["sdkHttpResponse"],n);const r=A(e,["totalTokens"]);return r!=null&&_(t,["totalTokens"],r),t}function w7(e,t){const n={},r=A(t,["model"]);return r!=null&&_(n,["_url","name"],en(e,r)),n}function E7(e,t){const n={},r=A(t,["model"]);return r!=null&&_(n,["_url","name"],en(e,r)),n}function S7(e){const t={},n=A(e,["sdkHttpResponse"]);return n!=null&&_(t,["sdkHttpResponse"],n),t}function A7(e){const t={},n=A(e,["sdkHttpResponse"]);return n!=null&&_(t,["sdkHttpResponse"],n),t}function C7(e,t){const n={},r=A(e,["outputGcsUri"]);t!==void 0&&r!=null&&_(t,["parameters","storageUri"],r);const i=A(e,["negativePrompt"]);t!==void 0&&i!=null&&_(t,["parameters","negativePrompt"],i);const a=A(e,["numberOfImages"]);t!==void 0&&a!=null&&_(t,["parameters","sampleCount"],a);const l=A(e,["aspectRatio"]);t!==void 0&&l!=null&&_(t,["parameters","aspectRatio"],l);const f=A(e,["guidanceScale"]);t!==void 0&&f!=null&&_(t,["parameters","guidanceScale"],f);const h=A(e,["seed"]);t!==void 0&&h!=null&&_(t,["parameters","seed"],h);const u=A(e,["safetyFilterLevel"]);t!==void 0&&u!=null&&_(t,["parameters","safetySetting"],u);const g=A(e,["personGeneration"]);t!==void 0&&g!=null&&_(t,["parameters","personGeneration"],g);const y=A(e,["includeSafetyAttributes"]);t!==void 0&&y!=null&&_(t,["parameters","includeSafetyAttributes"],y);const E=A(e,["includeRaiReason"]);t!==void 0&&E!=null&&_(t,["parameters","includeRaiReason"],E);const C=A(e,["language"]);t!==void 0&&C!=null&&_(t,["parameters","language"],C);const I=A(e,["outputMimeType"]);t!==void 0&&I!=null&&_(t,["parameters","outputOptions","mimeType"],I);const M=A(e,["outputCompressionQuality"]);t!==void 0&&M!=null&&_(t,["parameters","outputOptions","compressionQuality"],M);const O=A(e,["addWatermark"]);t!==void 0&&O!=null&&_(t,["parameters","addWatermark"],O);const j=A(e,["labels"]);t!==void 0&&j!=null&&_(t,["labels"],j);const U=A(e,["editMode"]);t!==void 0&&U!=null&&_(t,["parameters","editMode"],U);const L=A(e,["baseSteps"]);return t!==void 0&&L!=null&&_(t,["parameters","editConfig","baseSteps"],L),n}function N7(e,t){const n={},r=A(t,["model"]);r!=null&&_(n,["_url","model"],en(e,r));const i=A(t,["prompt"]);i!=null&&_(n,["instances[0]","prompt"],i);const a=A(t,["referenceImages"]);if(a!=null){let f=a;Array.isArray(f)&&(f=f.map(h=>TF(h))),_(n,["instances[0]","referenceImages"],f)}const l=A(t,["config"]);return l!=null&&C7(l,n),n}function _7(e){const t={},n=A(e,["sdkHttpResponse"]);n!=null&&_(t,["sdkHttpResponse"],n);const r=A(e,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>_m(a))),_(t,["generatedImages"],i)}return t}function T7(e,t){const n={},r=A(e,["taskType"]);t!==void 0&&r!=null&&_(t,["requests[]","taskType"],r);const i=A(e,["title"]);t!==void 0&&i!=null&&_(t,["requests[]","title"],i);const a=A(e,["outputDimensionality"]);if(t!==void 0&&a!=null&&_(t,["requests[]","outputDimensionality"],a),A(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(A(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function I7(e,t){const n={},r=A(e,["taskType"]);t!==void 0&&r!=null&&_(t,["instances[]","task_type"],r);const i=A(e,["title"]);t!==void 0&&i!=null&&_(t,["instances[]","title"],i);const a=A(e,["outputDimensionality"]);t!==void 0&&a!=null&&_(t,["parameters","outputDimensionality"],a);const l=A(e,["mimeType"]);t!==void 0&&l!=null&&_(t,["instances[]","mimeType"],l);const f=A(e,["autoTruncate"]);return t!==void 0&&f!=null&&_(t,["parameters","autoTruncate"],f),n}function R7(e,t){const n={},r=A(t,["model"]);r!=null&&_(n,["_url","model"],en(e,r));const i=A(t,["contents"]);if(i!=null){let f=fw(e,i);Array.isArray(f)&&(f=f.map(h=>h)),_(n,["requests[]","content"],f)}const a=A(t,["config"]);a!=null&&T7(a,n);const l=A(t,["model"]);return l!==void 0&&_(n,["requests[]","model"],en(e,l)),n}function M7(e,t){const n={},r=A(t,["model"]);r!=null&&_(n,["_url","model"],en(e,r));const i=A(t,["contents"]);if(i!=null){let l=fw(e,i);Array.isArray(l)&&(l=l.map(f=>f)),_(n,["instances[]","content"],l)}const a=A(t,["config"]);return a!=null&&I7(a,n),n}function O7(e){const t={},n=A(e,["sdkHttpResponse"]);n!=null&&_(t,["sdkHttpResponse"],n);const r=A(e,["embeddings"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>l)),_(t,["embeddings"],a)}const i=A(e,["metadata"]);return i!=null&&_(t,["metadata"],i),t}function D7(e){const t={},n=A(e,["sdkHttpResponse"]);n!=null&&_(t,["sdkHttpResponse"],n);const r=A(e,["predictions[]","embeddings"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>f7(l))),_(t,["embeddings"],a)}const i=A(e,["metadata"]);return i!=null&&_(t,["metadata"],i),t}function k7(e){const t={},n=A(e,["endpoint"]);n!=null&&_(t,["name"],n);const r=A(e,["deployedModelId"]);return r!=null&&_(t,["deployedModelId"],r),t}function P7(e){const t={};if(A(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=A(e,["fileUri"]);n!=null&&_(t,["fileUri"],n);const r=A(e,["mimeType"]);return r!=null&&_(t,["mimeType"],r),t}function j7(e){const t={},n=A(e,["id"]);n!=null&&_(t,["id"],n);const r=A(e,["args"]);r!=null&&_(t,["args"],r);const i=A(e,["name"]);if(i!=null&&_(t,["name"],i),A(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(A(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function L7(e){const t={},n=A(e,["allowedFunctionNames"]);n!=null&&_(t,["allowedFunctionNames"],n);const r=A(e,["mode"]);if(r!=null&&_(t,["mode"],r),A(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function B7(e){const t={},n=A(e,["description"]);n!=null&&_(t,["description"],n);const r=A(e,["name"]);r!=null&&_(t,["name"],r);const i=A(e,["parameters"]);i!=null&&_(t,["parameters"],i);const a=A(e,["parametersJsonSchema"]);a!=null&&_(t,["parametersJsonSchema"],a);const l=A(e,["response"]);l!=null&&_(t,["response"],l);const f=A(e,["responseJsonSchema"]);if(f!=null&&_(t,["responseJsonSchema"],f),A(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function U7(e,t,n){const r={},i=A(t,["systemInstruction"]);n!==void 0&&i!=null&&_(n,["systemInstruction"],Nm(ci(i)));const a=A(t,["temperature"]);a!=null&&_(r,["temperature"],a);const l=A(t,["topP"]);l!=null&&_(r,["topP"],l);const f=A(t,["topK"]);f!=null&&_(r,["topK"],f);const h=A(t,["candidateCount"]);h!=null&&_(r,["candidateCount"],h);const u=A(t,["maxOutputTokens"]);u!=null&&_(r,["maxOutputTokens"],u);const g=A(t,["stopSequences"]);g!=null&&_(r,["stopSequences"],g);const y=A(t,["responseLogprobs"]);y!=null&&_(r,["responseLogprobs"],y);const E=A(t,["logprobs"]);E!=null&&_(r,["logprobs"],E);const C=A(t,["presencePenalty"]);C!=null&&_(r,["presencePenalty"],C);const I=A(t,["frequencyPenalty"]);I!=null&&_(r,["frequencyPenalty"],I);const M=A(t,["seed"]);M!=null&&_(r,["seed"],M);const O=A(t,["responseMimeType"]);O!=null&&_(r,["responseMimeType"],O);const j=A(t,["responseSchema"]);j!=null&&_(r,["responseSchema"],hw(j));const U=A(t,["responseJsonSchema"]);if(U!=null&&_(r,["responseJsonSchema"],U),A(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(A(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const L=A(t,["safetySettings"]);if(n!==void 0&&L!=null){let pe=L;Array.isArray(pe)&&(pe=pe.map(Te=>IF(Te))),_(n,["safetySettings"],pe)}const G=A(t,["tools"]);if(n!==void 0&&G!=null){let pe=Ju(G);Array.isArray(pe)&&(pe=pe.map(Te=>jF(Xu(Te)))),_(n,["tools"],pe)}const V=A(t,["toolConfig"]);if(n!==void 0&&V!=null&&_(n,["toolConfig"],PF(V)),A(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const z=A(t,["cachedContent"]);n!==void 0&&z!=null&&_(n,["cachedContent"],xo(e,z));const B=A(t,["responseModalities"]);B!=null&&_(r,["responseModalities"],B);const J=A(t,["mediaResolution"]);J!=null&&_(r,["mediaResolution"],J);const W=A(t,["speechConfig"]);if(W!=null&&_(r,["speechConfig"],pw(W)),A(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Z=A(t,["thinkingConfig"]);Z!=null&&_(r,["thinkingConfig"],Z);const te=A(t,["imageConfig"]);te!=null&&_(r,["imageConfig"],fF(te));const Y=A(t,["enableEnhancedCivicAnswers"]);return Y!=null&&_(r,["enableEnhancedCivicAnswers"],Y),r}function F7(e,t,n){const r={},i=A(t,["systemInstruction"]);n!==void 0&&i!=null&&_(n,["systemInstruction"],ci(i));const a=A(t,["temperature"]);a!=null&&_(r,["temperature"],a);const l=A(t,["topP"]);l!=null&&_(r,["topP"],l);const f=A(t,["topK"]);f!=null&&_(r,["topK"],f);const h=A(t,["candidateCount"]);h!=null&&_(r,["candidateCount"],h);const u=A(t,["maxOutputTokens"]);u!=null&&_(r,["maxOutputTokens"],u);const g=A(t,["stopSequences"]);g!=null&&_(r,["stopSequences"],g);const y=A(t,["responseLogprobs"]);y!=null&&_(r,["responseLogprobs"],y);const E=A(t,["logprobs"]);E!=null&&_(r,["logprobs"],E);const C=A(t,["presencePenalty"]);C!=null&&_(r,["presencePenalty"],C);const I=A(t,["frequencyPenalty"]);I!=null&&_(r,["frequencyPenalty"],I);const M=A(t,["seed"]);M!=null&&_(r,["seed"],M);const O=A(t,["responseMimeType"]);O!=null&&_(r,["responseMimeType"],O);const j=A(t,["responseSchema"]);j!=null&&_(r,["responseSchema"],hw(j));const U=A(t,["responseJsonSchema"]);U!=null&&_(r,["responseJsonSchema"],U);const L=A(t,["routingConfig"]);L!=null&&_(r,["routingConfig"],L);const G=A(t,["modelSelectionConfig"]);G!=null&&_(r,["modelConfig"],G);const V=A(t,["safetySettings"]);if(n!==void 0&&V!=null){let de=V;Array.isArray(de)&&(de=de.map(ge=>ge)),_(n,["safetySettings"],de)}const z=A(t,["tools"]);if(n!==void 0&&z!=null){let de=Ju(z);Array.isArray(de)&&(de=de.map(ge=>V3(Xu(ge)))),_(n,["tools"],de)}const B=A(t,["toolConfig"]);n!==void 0&&B!=null&&_(n,["toolConfig"],B);const J=A(t,["labels"]);n!==void 0&&J!=null&&_(n,["labels"],J);const W=A(t,["cachedContent"]);n!==void 0&&W!=null&&_(n,["cachedContent"],xo(e,W));const Z=A(t,["responseModalities"]);Z!=null&&_(r,["responseModalities"],Z);const te=A(t,["mediaResolution"]);te!=null&&_(r,["mediaResolution"],te);const Y=A(t,["speechConfig"]);Y!=null&&_(r,["speechConfig"],pw(Y));const pe=A(t,["audioTimestamp"]);pe!=null&&_(r,["audioTimestamp"],pe);const Te=A(t,["thinkingConfig"]);Te!=null&&_(r,["thinkingConfig"],Te);const le=A(t,["imageConfig"]);if(le!=null&&_(r,["imageConfig"],hF(le)),A(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function i_(e,t){const n={},r=A(t,["model"]);r!=null&&_(n,["_url","model"],en(e,r));const i=A(t,["contents"]);if(i!=null){let l=Ca(i);Array.isArray(l)&&(l=l.map(f=>Nm(f))),_(n,["contents"],l)}const a=A(t,["config"]);return a!=null&&_(n,["generationConfig"],U7(e,a,n)),n}function a_(e,t){const n={},r=A(t,["model"]);r!=null&&_(n,["_url","model"],en(e,r));const i=A(t,["contents"]);if(i!=null){let l=Ca(i);Array.isArray(l)&&(l=l.map(f=>f)),_(n,["contents"],l)}const a=A(t,["config"]);return a!=null&&_(n,["generationConfig"],F7(e,a,n)),n}function s_(e){const t={},n=A(e,["sdkHttpResponse"]);n!=null&&_(t,["sdkHttpResponse"],n);const r=A(e,["candidates"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(u=>l7(u))),_(t,["candidates"],h)}const i=A(e,["modelVersion"]);i!=null&&_(t,["modelVersion"],i);const a=A(e,["promptFeedback"]);a!=null&&_(t,["promptFeedback"],a);const l=A(e,["responseId"]);l!=null&&_(t,["responseId"],l);const f=A(e,["usageMetadata"]);return f!=null&&_(t,["usageMetadata"],f),t}function o_(e){const t={},n=A(e,["sdkHttpResponse"]);n!=null&&_(t,["sdkHttpResponse"],n);const r=A(e,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(g=>g)),_(t,["candidates"],u)}const i=A(e,["createTime"]);i!=null&&_(t,["createTime"],i);const a=A(e,["modelVersion"]);a!=null&&_(t,["modelVersion"],a);const l=A(e,["promptFeedback"]);l!=null&&_(t,["promptFeedback"],l);const f=A(e,["responseId"]);f!=null&&_(t,["responseId"],f);const h=A(e,["usageMetadata"]);return h!=null&&_(t,["usageMetadata"],h),t}function H7(e,t){const n={};if(A(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(A(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=A(e,["numberOfImages"]);t!==void 0&&r!=null&&_(t,["parameters","sampleCount"],r);const i=A(e,["aspectRatio"]);t!==void 0&&i!=null&&_(t,["parameters","aspectRatio"],i);const a=A(e,["guidanceScale"]);if(t!==void 0&&a!=null&&_(t,["parameters","guidanceScale"],a),A(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=A(e,["safetyFilterLevel"]);t!==void 0&&l!=null&&_(t,["parameters","safetySetting"],l);const f=A(e,["personGeneration"]);t!==void 0&&f!=null&&_(t,["parameters","personGeneration"],f);const h=A(e,["includeSafetyAttributes"]);t!==void 0&&h!=null&&_(t,["parameters","includeSafetyAttributes"],h);const u=A(e,["includeRaiReason"]);t!==void 0&&u!=null&&_(t,["parameters","includeRaiReason"],u);const g=A(e,["language"]);t!==void 0&&g!=null&&_(t,["parameters","language"],g);const y=A(e,["outputMimeType"]);t!==void 0&&y!=null&&_(t,["parameters","outputOptions","mimeType"],y);const E=A(e,["outputCompressionQuality"]);if(t!==void 0&&E!=null&&_(t,["parameters","outputOptions","compressionQuality"],E),A(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(A(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const C=A(e,["imageSize"]);if(t!==void 0&&C!=null&&_(t,["parameters","sampleImageSize"],C),A(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function z7(e,t){const n={},r=A(e,["outputGcsUri"]);t!==void 0&&r!=null&&_(t,["parameters","storageUri"],r);const i=A(e,["negativePrompt"]);t!==void 0&&i!=null&&_(t,["parameters","negativePrompt"],i);const a=A(e,["numberOfImages"]);t!==void 0&&a!=null&&_(t,["parameters","sampleCount"],a);const l=A(e,["aspectRatio"]);t!==void 0&&l!=null&&_(t,["parameters","aspectRatio"],l);const f=A(e,["guidanceScale"]);t!==void 0&&f!=null&&_(t,["parameters","guidanceScale"],f);const h=A(e,["seed"]);t!==void 0&&h!=null&&_(t,["parameters","seed"],h);const u=A(e,["safetyFilterLevel"]);t!==void 0&&u!=null&&_(t,["parameters","safetySetting"],u);const g=A(e,["personGeneration"]);t!==void 0&&g!=null&&_(t,["parameters","personGeneration"],g);const y=A(e,["includeSafetyAttributes"]);t!==void 0&&y!=null&&_(t,["parameters","includeSafetyAttributes"],y);const E=A(e,["includeRaiReason"]);t!==void 0&&E!=null&&_(t,["parameters","includeRaiReason"],E);const C=A(e,["language"]);t!==void 0&&C!=null&&_(t,["parameters","language"],C);const I=A(e,["outputMimeType"]);t!==void 0&&I!=null&&_(t,["parameters","outputOptions","mimeType"],I);const M=A(e,["outputCompressionQuality"]);t!==void 0&&M!=null&&_(t,["parameters","outputOptions","compressionQuality"],M);const O=A(e,["addWatermark"]);t!==void 0&&O!=null&&_(t,["parameters","addWatermark"],O);const j=A(e,["labels"]);t!==void 0&&j!=null&&_(t,["labels"],j);const U=A(e,["imageSize"]);t!==void 0&&U!=null&&_(t,["parameters","sampleImageSize"],U);const L=A(e,["enhancePrompt"]);return t!==void 0&&L!=null&&_(t,["parameters","enhancePrompt"],L),n}function G7(e,t){const n={},r=A(t,["model"]);r!=null&&_(n,["_url","model"],en(e,r));const i=A(t,["prompt"]);i!=null&&_(n,["instances[0]","prompt"],i);const a=A(t,["config"]);return a!=null&&H7(a,n),n}function V7(e,t){const n={},r=A(t,["model"]);r!=null&&_(n,["_url","model"],en(e,r));const i=A(t,["prompt"]);i!=null&&_(n,["instances[0]","prompt"],i);const a=A(t,["config"]);return a!=null&&z7(a,n),n}function q7(e){const t={},n=A(e,["sdkHttpResponse"]);n!=null&&_(t,["sdkHttpResponse"],n);const r=A(e,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>rF(l))),_(t,["generatedImages"],a)}const i=A(e,["positivePromptSafetyAttributes"]);return i!=null&&_(t,["positivePromptSafetyAttributes"],z3(i)),t}function $7(e){const t={},n=A(e,["sdkHttpResponse"]);n!=null&&_(t,["sdkHttpResponse"],n);const r=A(e,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>_m(l))),_(t,["generatedImages"],a)}const i=A(e,["positivePromptSafetyAttributes"]);return i!=null&&_(t,["positivePromptSafetyAttributes"],G3(i)),t}function Y7(e,t){const n={},r=A(e,["numberOfVideos"]);if(t!==void 0&&r!=null&&_(t,["parameters","sampleCount"],r),A(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(A(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=A(e,["durationSeconds"]);if(t!==void 0&&i!=null&&_(t,["parameters","durationSeconds"],i),A(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=A(e,["aspectRatio"]);t!==void 0&&a!=null&&_(t,["parameters","aspectRatio"],a);const l=A(e,["resolution"]);t!==void 0&&l!=null&&_(t,["parameters","resolution"],l);const f=A(e,["personGeneration"]);if(t!==void 0&&f!=null&&_(t,["parameters","personGeneration"],f),A(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const h=A(e,["negativePrompt"]);t!==void 0&&h!=null&&_(t,["parameters","negativePrompt"],h);const u=A(e,["enhancePrompt"]);if(t!==void 0&&u!=null&&_(t,["parameters","enhancePrompt"],u),A(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const g=A(e,["lastFrame"]);t!==void 0&&g!=null&&_(t,["instances[0]","lastFrame"],Tm(g));const y=A(e,["referenceImages"]);if(t!==void 0&&y!=null){let E=y;Array.isArray(E)&&(E=E.map(C=>KF(C))),_(t,["instances[0]","referenceImages"],E)}if(A(e,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(A(e,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function W7(e,t){const n={},r=A(e,["numberOfVideos"]);t!==void 0&&r!=null&&_(t,["parameters","sampleCount"],r);const i=A(e,["outputGcsUri"]);t!==void 0&&i!=null&&_(t,["parameters","storageUri"],i);const a=A(e,["fps"]);t!==void 0&&a!=null&&_(t,["parameters","fps"],a);const l=A(e,["durationSeconds"]);t!==void 0&&l!=null&&_(t,["parameters","durationSeconds"],l);const f=A(e,["seed"]);t!==void 0&&f!=null&&_(t,["parameters","seed"],f);const h=A(e,["aspectRatio"]);t!==void 0&&h!=null&&_(t,["parameters","aspectRatio"],h);const u=A(e,["resolution"]);t!==void 0&&u!=null&&_(t,["parameters","resolution"],u);const g=A(e,["personGeneration"]);t!==void 0&&g!=null&&_(t,["parameters","personGeneration"],g);const y=A(e,["pubsubTopic"]);t!==void 0&&y!=null&&_(t,["parameters","pubsubTopic"],y);const E=A(e,["negativePrompt"]);t!==void 0&&E!=null&&_(t,["parameters","negativePrompt"],E);const C=A(e,["enhancePrompt"]);t!==void 0&&C!=null&&_(t,["parameters","enhancePrompt"],C);const I=A(e,["generateAudio"]);t!==void 0&&I!=null&&_(t,["parameters","generateAudio"],I);const M=A(e,["lastFrame"]);t!==void 0&&M!=null&&_(t,["instances[0]","lastFrame"],es(M));const O=A(e,["referenceImages"]);if(t!==void 0&&O!=null){let L=O;Array.isArray(L)&&(L=L.map(G=>XF(G))),_(t,["instances[0]","referenceImages"],L)}const j=A(e,["mask"]);t!==void 0&&j!=null&&_(t,["instances[0]","mask"],WF(j));const U=A(e,["compressionQuality"]);return t!==void 0&&U!=null&&_(t,["parameters","compressionQuality"],U),n}function K7(e){const t={},n=A(e,["name"]);n!=null&&_(t,["name"],n);const r=A(e,["metadata"]);r!=null&&_(t,["metadata"],r);const i=A(e,["done"]);i!=null&&_(t,["done"],i);const a=A(e,["error"]);a!=null&&_(t,["error"],a);const l=A(e,["response","generateVideoResponse"]);return l!=null&&_(t,["response"],Q7(l)),t}function X7(e){const t={},n=A(e,["name"]);n!=null&&_(t,["name"],n);const r=A(e,["metadata"]);r!=null&&_(t,["metadata"],r);const i=A(e,["done"]);i!=null&&_(t,["done"],i);const a=A(e,["error"]);a!=null&&_(t,["error"],a);const l=A(e,["response"]);return l!=null&&_(t,["response"],eF(l)),t}function J7(e,t){const n={},r=A(t,["model"]);r!=null&&_(n,["_url","model"],en(e,r));const i=A(t,["prompt"]);i!=null&&_(n,["instances[0]","prompt"],i);const a=A(t,["image"]);a!=null&&_(n,["instances[0]","image"],Tm(a));const l=A(t,["video"]);l!=null&&_(n,["instances[0]","video"],q3(l));const f=A(t,["source"]);f!=null&&tF(f,n);const h=A(t,["config"]);return h!=null&&Y7(h,n),n}function Z7(e,t){const n={},r=A(t,["model"]);r!=null&&_(n,["_url","model"],en(e,r));const i=A(t,["prompt"]);i!=null&&_(n,["instances[0]","prompt"],i);const a=A(t,["image"]);a!=null&&_(n,["instances[0]","image"],es(a));const l=A(t,["video"]);l!=null&&_(n,["instances[0]","video"],$3(l));const f=A(t,["source"]);f!=null&&nF(f,n);const h=A(t,["config"]);return h!=null&&W7(h,n),n}function Q7(e){const t={},n=A(e,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>aF(l))),_(t,["generatedVideos"],a)}const r=A(e,["raiMediaFilteredCount"]);r!=null&&_(t,["raiMediaFilteredCount"],r);const i=A(e,["raiMediaFilteredReasons"]);return i!=null&&_(t,["raiMediaFilteredReasons"],i),t}function eF(e){const t={},n=A(e,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>sF(l))),_(t,["generatedVideos"],a)}const r=A(e,["raiMediaFilteredCount"]);r!=null&&_(t,["raiMediaFilteredCount"],r);const i=A(e,["raiMediaFilteredReasons"]);return i!=null&&_(t,["raiMediaFilteredReasons"],i),t}function tF(e,t){const n={},r=A(e,["prompt"]);t!==void 0&&r!=null&&_(t,["instances[0]","prompt"],r);const i=A(e,["image"]);t!==void 0&&i!=null&&_(t,["instances[0]","image"],Tm(i));const a=A(e,["video"]);return t!==void 0&&a!=null&&_(t,["instances[0]","video"],q3(a)),n}function nF(e,t){const n={},r=A(e,["prompt"]);t!==void 0&&r!=null&&_(t,["instances[0]","prompt"],r);const i=A(e,["image"]);t!==void 0&&i!=null&&_(t,["instances[0]","image"],es(i));const a=A(e,["video"]);return t!==void 0&&a!=null&&_(t,["instances[0]","video"],$3(a)),n}function rF(e){const t={},n=A(e,["_self"]);n!=null&&_(t,["image"],pF(n));const r=A(e,["raiFilteredReason"]);r!=null&&_(t,["raiFilteredReason"],r);const i=A(e,["_self"]);return i!=null&&_(t,["safetyAttributes"],z3(i)),t}function _m(e){const t={},n=A(e,["_self"]);n!=null&&_(t,["image"],H3(n));const r=A(e,["raiFilteredReason"]);r!=null&&_(t,["raiFilteredReason"],r);const i=A(e,["_self"]);i!=null&&_(t,["safetyAttributes"],G3(i));const a=A(e,["prompt"]);return a!=null&&_(t,["enhancedPrompt"],a),t}function iF(e){const t={},n=A(e,["_self"]);n!=null&&_(t,["mask"],H3(n));const r=A(e,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>a)),_(t,["labels"],i)}return t}function aF(e){const t={},n=A(e,["video"]);return n!=null&&_(t,["video"],$F(n)),t}function sF(e){const t={},n=A(e,["_self"]);return n!=null&&_(t,["video"],YF(n)),t}function oF(e){const t={},n=A(e,["modelSelectionConfig"]);n!=null&&_(t,["modelConfig"],n);const r=A(e,["responseJsonSchema"]);r!=null&&_(t,["responseJsonSchema"],r);const i=A(e,["audioTimestamp"]);i!=null&&_(t,["audioTimestamp"],i);const a=A(e,["candidateCount"]);a!=null&&_(t,["candidateCount"],a);const l=A(e,["enableAffectiveDialog"]);l!=null&&_(t,["enableAffectiveDialog"],l);const f=A(e,["frequencyPenalty"]);f!=null&&_(t,["frequencyPenalty"],f);const h=A(e,["logprobs"]);h!=null&&_(t,["logprobs"],h);const u=A(e,["maxOutputTokens"]);u!=null&&_(t,["maxOutputTokens"],u);const g=A(e,["mediaResolution"]);g!=null&&_(t,["mediaResolution"],g);const y=A(e,["presencePenalty"]);y!=null&&_(t,["presencePenalty"],y);const E=A(e,["responseLogprobs"]);E!=null&&_(t,["responseLogprobs"],E);const C=A(e,["responseMimeType"]);C!=null&&_(t,["responseMimeType"],C);const I=A(e,["responseModalities"]);I!=null&&_(t,["responseModalities"],I);const M=A(e,["responseSchema"]);M!=null&&_(t,["responseSchema"],M);const O=A(e,["routingConfig"]);O!=null&&_(t,["routingConfig"],O);const j=A(e,["seed"]);j!=null&&_(t,["seed"],j);const U=A(e,["speechConfig"]);U!=null&&_(t,["speechConfig"],U);const L=A(e,["stopSequences"]);L!=null&&_(t,["stopSequences"],L);const G=A(e,["temperature"]);G!=null&&_(t,["temperature"],G);const V=A(e,["thinkingConfig"]);V!=null&&_(t,["thinkingConfig"],V);const z=A(e,["topK"]);z!=null&&_(t,["topK"],z);const B=A(e,["topP"]);if(B!=null&&_(t,["topP"],B),A(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function lF(e,t){const n={},r=A(t,["model"]);return r!=null&&_(n,["_url","name"],en(e,r)),n}function cF(e,t){const n={},r=A(t,["model"]);return r!=null&&_(n,["_url","name"],en(e,r)),n}function uF(e){const t={};if(A(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=A(e,["enableWidget"]);return n!=null&&_(t,["enableWidget"],n),t}function dF(e){const t={};if(A(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(A(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=A(e,["timeRangeFilter"]);return n!=null&&_(t,["timeRangeFilter"],n),t}function fF(e){const t={},n=A(e,["aspectRatio"]);n!=null&&_(t,["aspectRatio"],n);const r=A(e,["imageSize"]);if(r!=null&&_(t,["imageSize"],r),A(e,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(A(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(A(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function hF(e){const t={},n=A(e,["aspectRatio"]);n!=null&&_(t,["aspectRatio"],n);const r=A(e,["imageSize"]);r!=null&&_(t,["imageSize"],r);const i=A(e,["personGeneration"]);i!=null&&_(t,["personGeneration"],i);const a=A(e,["outputMimeType"]);a!=null&&_(t,["imageOutputOptions","mimeType"],a);const l=A(e,["outputCompressionQuality"]);return l!=null&&_(t,["imageOutputOptions","compressionQuality"],l),t}function pF(e){const t={},n=A(e,["bytesBase64Encoded"]);n!=null&&_(t,["imageBytes"],El(n));const r=A(e,["mimeType"]);return r!=null&&_(t,["mimeType"],r),t}function H3(e){const t={},n=A(e,["gcsUri"]);n!=null&&_(t,["gcsUri"],n);const r=A(e,["bytesBase64Encoded"]);r!=null&&_(t,["imageBytes"],El(r));const i=A(e,["mimeType"]);return i!=null&&_(t,["mimeType"],i),t}function Tm(e){const t={};if(A(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=A(e,["imageBytes"]);n!=null&&_(t,["bytesBase64Encoded"],El(n));const r=A(e,["mimeType"]);return r!=null&&_(t,["mimeType"],r),t}function es(e){const t={},n=A(e,["gcsUri"]);n!=null&&_(t,["gcsUri"],n);const r=A(e,["imageBytes"]);r!=null&&_(t,["bytesBase64Encoded"],El(r));const i=A(e,["mimeType"]);return i!=null&&_(t,["mimeType"],i),t}function mF(e,t,n){const r={},i=A(t,["pageSize"]);n!==void 0&&i!=null&&_(n,["_query","pageSize"],i);const a=A(t,["pageToken"]);n!==void 0&&a!=null&&_(n,["_query","pageToken"],a);const l=A(t,["filter"]);n!==void 0&&l!=null&&_(n,["_query","filter"],l);const f=A(t,["queryBase"]);return n!==void 0&&f!=null&&_(n,["_url","models_url"],k3(e,f)),r}function gF(e,t,n){const r={},i=A(t,["pageSize"]);n!==void 0&&i!=null&&_(n,["_query","pageSize"],i);const a=A(t,["pageToken"]);n!==void 0&&a!=null&&_(n,["_query","pageToken"],a);const l=A(t,["filter"]);n!==void 0&&l!=null&&_(n,["_query","filter"],l);const f=A(t,["queryBase"]);return n!==void 0&&f!=null&&_(n,["_url","models_url"],k3(e,f)),r}function xF(e,t){const n={},r=A(t,["config"]);return r!=null&&mF(e,r,n),n}function yF(e,t){const n={},r=A(t,["config"]);return r!=null&&gF(e,r,n),n}function vF(e){const t={},n=A(e,["sdkHttpResponse"]);n!=null&&_(t,["sdkHttpResponse"],n);const r=A(e,["nextPageToken"]);r!=null&&_(t,["nextPageToken"],r);const i=A(e,["_self"]);if(i!=null){let a=P3(i);Array.isArray(a)&&(a=a.map(l=>Dv(l))),_(t,["models"],a)}return t}function bF(e){const t={},n=A(e,["sdkHttpResponse"]);n!=null&&_(t,["sdkHttpResponse"],n);const r=A(e,["nextPageToken"]);r!=null&&_(t,["nextPageToken"],r);const i=A(e,["_self"]);if(i!=null){let a=P3(i);Array.isArray(a)&&(a=a.map(l=>kv(l))),_(t,["models"],a)}return t}function wF(e){const t={},n=A(e,["maskMode"]);n!=null&&_(t,["maskMode"],n);const r=A(e,["segmentationClasses"]);r!=null&&_(t,["maskClasses"],r);const i=A(e,["maskDilation"]);return i!=null&&_(t,["dilation"],i),t}function Dv(e){const t={},n=A(e,["name"]);n!=null&&_(t,["name"],n);const r=A(e,["displayName"]);r!=null&&_(t,["displayName"],r);const i=A(e,["description"]);i!=null&&_(t,["description"],i);const a=A(e,["version"]);a!=null&&_(t,["version"],a);const l=A(e,["_self"]);l!=null&&_(t,["tunedModelInfo"],LF(l));const f=A(e,["inputTokenLimit"]);f!=null&&_(t,["inputTokenLimit"],f);const h=A(e,["outputTokenLimit"]);h!=null&&_(t,["outputTokenLimit"],h);const u=A(e,["supportedGenerationMethods"]);u!=null&&_(t,["supportedActions"],u);const g=A(e,["temperature"]);g!=null&&_(t,["temperature"],g);const y=A(e,["maxTemperature"]);y!=null&&_(t,["maxTemperature"],y);const E=A(e,["topP"]);E!=null&&_(t,["topP"],E);const C=A(e,["topK"]);C!=null&&_(t,["topK"],C);const I=A(e,["thinking"]);return I!=null&&_(t,["thinking"],I),t}function kv(e){const t={},n=A(e,["name"]);n!=null&&_(t,["name"],n);const r=A(e,["displayName"]);r!=null&&_(t,["displayName"],r);const i=A(e,["description"]);i!=null&&_(t,["description"],i);const a=A(e,["versionId"]);a!=null&&_(t,["version"],a);const l=A(e,["deployedModels"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(E=>k7(E))),_(t,["endpoints"],y)}const f=A(e,["labels"]);f!=null&&_(t,["labels"],f);const h=A(e,["_self"]);h!=null&&_(t,["tunedModelInfo"],BF(h));const u=A(e,["defaultCheckpointId"]);u!=null&&_(t,["defaultCheckpointId"],u);const g=A(e,["checkpoints"]);if(g!=null){let y=g;Array.isArray(y)&&(y=y.map(E=>E)),_(t,["checkpoints"],y)}return t}function EF(e){const t={},n=A(e,["mediaResolution"]);n!=null&&_(t,["mediaResolution"],n);const r=A(e,["codeExecutionResult"]);r!=null&&_(t,["codeExecutionResult"],r);const i=A(e,["executableCode"]);i!=null&&_(t,["executableCode"],i);const a=A(e,["fileData"]);a!=null&&_(t,["fileData"],P7(a));const l=A(e,["functionCall"]);l!=null&&_(t,["functionCall"],j7(l));const f=A(e,["functionResponse"]);f!=null&&_(t,["functionResponse"],f);const h=A(e,["inlineData"]);h!=null&&_(t,["inlineData"],o7(h));const u=A(e,["text"]);u!=null&&_(t,["text"],u);const g=A(e,["thought"]);g!=null&&_(t,["thought"],g);const y=A(e,["thoughtSignature"]);y!=null&&_(t,["thoughtSignature"],y);const E=A(e,["videoMetadata"]);return E!=null&&_(t,["videoMetadata"],E),t}function SF(e){const t={},n=A(e,["productImage"]);return n!=null&&_(t,["image"],es(n)),t}function AF(e,t){const n={},r=A(e,["numberOfImages"]);t!==void 0&&r!=null&&_(t,["parameters","sampleCount"],r);const i=A(e,["baseSteps"]);t!==void 0&&i!=null&&_(t,["parameters","baseSteps"],i);const a=A(e,["outputGcsUri"]);t!==void 0&&a!=null&&_(t,["parameters","storageUri"],a);const l=A(e,["seed"]);t!==void 0&&l!=null&&_(t,["parameters","seed"],l);const f=A(e,["safetyFilterLevel"]);t!==void 0&&f!=null&&_(t,["parameters","safetySetting"],f);const h=A(e,["personGeneration"]);t!==void 0&&h!=null&&_(t,["parameters","personGeneration"],h);const u=A(e,["addWatermark"]);t!==void 0&&u!=null&&_(t,["parameters","addWatermark"],u);const g=A(e,["outputMimeType"]);t!==void 0&&g!=null&&_(t,["parameters","outputOptions","mimeType"],g);const y=A(e,["outputCompressionQuality"]);t!==void 0&&y!=null&&_(t,["parameters","outputOptions","compressionQuality"],y);const E=A(e,["enhancePrompt"]);t!==void 0&&E!=null&&_(t,["parameters","enhancePrompt"],E);const C=A(e,["labels"]);return t!==void 0&&C!=null&&_(t,["labels"],C),n}function CF(e,t){const n={},r=A(t,["model"]);r!=null&&_(n,["_url","model"],en(e,r));const i=A(t,["source"]);i!=null&&_F(i,n);const a=A(t,["config"]);return a!=null&&AF(a,n),n}function NF(e){const t={},n=A(e,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>_m(i))),_(t,["generatedImages"],r)}return t}function _F(e,t){const n={},r=A(e,["prompt"]);t!==void 0&&r!=null&&_(t,["instances[0]","prompt"],r);const i=A(e,["personImage"]);t!==void 0&&i!=null&&_(t,["instances[0]","personImage","image"],es(i));const a=A(e,["productImages"]);if(t!==void 0&&a!=null){let l=a;Array.isArray(l)&&(l=l.map(f=>SF(f))),_(t,["instances[0]","productImages"],l)}return n}function TF(e){const t={},n=A(e,["referenceImage"]);n!=null&&_(t,["referenceImage"],es(n));const r=A(e,["referenceId"]);r!=null&&_(t,["referenceId"],r);const i=A(e,["referenceType"]);i!=null&&_(t,["referenceType"],i);const a=A(e,["maskImageConfig"]);a!=null&&_(t,["maskImageConfig"],wF(a));const l=A(e,["controlImageConfig"]);l!=null&&_(t,["controlImageConfig"],p7(l));const f=A(e,["styleImageConfig"]);f!=null&&_(t,["styleImageConfig"],f);const h=A(e,["subjectImageConfig"]);return h!=null&&_(t,["subjectImageConfig"],h),t}function z3(e){const t={},n=A(e,["safetyAttributes","categories"]);n!=null&&_(t,["categories"],n);const r=A(e,["safetyAttributes","scores"]);r!=null&&_(t,["scores"],r);const i=A(e,["contentType"]);return i!=null&&_(t,["contentType"],i),t}function G3(e){const t={},n=A(e,["safetyAttributes","categories"]);n!=null&&_(t,["categories"],n);const r=A(e,["safetyAttributes","scores"]);r!=null&&_(t,["scores"],r);const i=A(e,["contentType"]);return i!=null&&_(t,["contentType"],i),t}function IF(e){const t={},n=A(e,["category"]);if(n!=null&&_(t,["category"],n),A(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=A(e,["threshold"]);return r!=null&&_(t,["threshold"],r),t}function RF(e){const t={},n=A(e,["image"]);return n!=null&&_(t,["image"],es(n)),t}function MF(e,t){const n={},r=A(e,["mode"]);t!==void 0&&r!=null&&_(t,["parameters","mode"],r);const i=A(e,["maxPredictions"]);t!==void 0&&i!=null&&_(t,["parameters","maxPredictions"],i);const a=A(e,["confidenceThreshold"]);t!==void 0&&a!=null&&_(t,["parameters","confidenceThreshold"],a);const l=A(e,["maskDilation"]);t!==void 0&&l!=null&&_(t,["parameters","maskDilation"],l);const f=A(e,["binaryColorThreshold"]);t!==void 0&&f!=null&&_(t,["parameters","binaryColorThreshold"],f);const h=A(e,["labels"]);return t!==void 0&&h!=null&&_(t,["labels"],h),n}function OF(e,t){const n={},r=A(t,["model"]);r!=null&&_(n,["_url","model"],en(e,r));const i=A(t,["source"]);i!=null&&kF(i,n);const a=A(t,["config"]);return a!=null&&MF(a,n),n}function DF(e){const t={},n=A(e,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>iF(i))),_(t,["generatedMasks"],r)}return t}function kF(e,t){const n={},r=A(e,["prompt"]);t!==void 0&&r!=null&&_(t,["instances[0]","prompt"],r);const i=A(e,["image"]);t!==void 0&&i!=null&&_(t,["instances[0]","image"],es(i));const a=A(e,["scribbleImage"]);return t!==void 0&&a!=null&&_(t,["instances[0]","scribble"],RF(a)),n}function PF(e){const t={},n=A(e,["retrievalConfig"]);n!=null&&_(t,["retrievalConfig"],n);const r=A(e,["functionCallingConfig"]);return r!=null&&_(t,["functionCallingConfig"],L7(r)),t}function jF(e){const t={};if(A(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=A(e,["computerUse"]);n!=null&&_(t,["computerUse"],n);const r=A(e,["fileSearch"]);r!=null&&_(t,["fileSearch"],r);const i=A(e,["codeExecution"]);if(i!=null&&_(t,["codeExecution"],i),A(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=A(e,["functionDeclarations"]);if(a!=null){let g=a;Array.isArray(g)&&(g=g.map(y=>y)),_(t,["functionDeclarations"],g)}const l=A(e,["googleMaps"]);l!=null&&_(t,["googleMaps"],uF(l));const f=A(e,["googleSearch"]);f!=null&&_(t,["googleSearch"],dF(f));const h=A(e,["googleSearchRetrieval"]);h!=null&&_(t,["googleSearchRetrieval"],h);const u=A(e,["urlContext"]);return u!=null&&_(t,["urlContext"],u),t}function V3(e){const t={},n=A(e,["retrieval"]);n!=null&&_(t,["retrieval"],n);const r=A(e,["computerUse"]);if(r!=null&&_(t,["computerUse"],r),A(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=A(e,["codeExecution"]);i!=null&&_(t,["codeExecution"],i);const a=A(e,["enterpriseWebSearch"]);a!=null&&_(t,["enterpriseWebSearch"],a);const l=A(e,["functionDeclarations"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(E=>B7(E))),_(t,["functionDeclarations"],y)}const f=A(e,["googleMaps"]);f!=null&&_(t,["googleMaps"],f);const h=A(e,["googleSearch"]);h!=null&&_(t,["googleSearch"],h);const u=A(e,["googleSearchRetrieval"]);u!=null&&_(t,["googleSearchRetrieval"],u);const g=A(e,["urlContext"]);return g!=null&&_(t,["urlContext"],g),t}function LF(e){const t={},n=A(e,["baseModel"]);n!=null&&_(t,["baseModel"],n);const r=A(e,["createTime"]);r!=null&&_(t,["createTime"],r);const i=A(e,["updateTime"]);return i!=null&&_(t,["updateTime"],i),t}function BF(e){const t={},n=A(e,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&_(t,["baseModel"],n);const r=A(e,["createTime"]);r!=null&&_(t,["createTime"],r);const i=A(e,["updateTime"]);return i!=null&&_(t,["updateTime"],i),t}function UF(e,t){const n={},r=A(e,["displayName"]);t!==void 0&&r!=null&&_(t,["displayName"],r);const i=A(e,["description"]);t!==void 0&&i!=null&&_(t,["description"],i);const a=A(e,["defaultCheckpointId"]);return t!==void 0&&a!=null&&_(t,["defaultCheckpointId"],a),n}function FF(e,t){const n={},r=A(e,["displayName"]);t!==void 0&&r!=null&&_(t,["displayName"],r);const i=A(e,["description"]);t!==void 0&&i!=null&&_(t,["description"],i);const a=A(e,["defaultCheckpointId"]);return t!==void 0&&a!=null&&_(t,["defaultCheckpointId"],a),n}function HF(e,t){const n={},r=A(t,["model"]);r!=null&&_(n,["_url","name"],en(e,r));const i=A(t,["config"]);return i!=null&&UF(i,n),n}function zF(e,t){const n={},r=A(t,["model"]);r!=null&&_(n,["_url","model"],en(e,r));const i=A(t,["config"]);return i!=null&&FF(i,n),n}function GF(e,t){const n={},r=A(e,["outputGcsUri"]);t!==void 0&&r!=null&&_(t,["parameters","storageUri"],r);const i=A(e,["safetyFilterLevel"]);t!==void 0&&i!=null&&_(t,["parameters","safetySetting"],i);const a=A(e,["personGeneration"]);t!==void 0&&a!=null&&_(t,["parameters","personGeneration"],a);const l=A(e,["includeRaiReason"]);t!==void 0&&l!=null&&_(t,["parameters","includeRaiReason"],l);const f=A(e,["outputMimeType"]);t!==void 0&&f!=null&&_(t,["parameters","outputOptions","mimeType"],f);const h=A(e,["outputCompressionQuality"]);t!==void 0&&h!=null&&_(t,["parameters","outputOptions","compressionQuality"],h);const u=A(e,["enhanceInputImage"]);t!==void 0&&u!=null&&_(t,["parameters","upscaleConfig","enhanceInputImage"],u);const g=A(e,["imagePreservationFactor"]);t!==void 0&&g!=null&&_(t,["parameters","upscaleConfig","imagePreservationFactor"],g);const y=A(e,["labels"]);t!==void 0&&y!=null&&_(t,["labels"],y);const E=A(e,["numberOfImages"]);t!==void 0&&E!=null&&_(t,["parameters","sampleCount"],E);const C=A(e,["mode"]);return t!==void 0&&C!=null&&_(t,["parameters","mode"],C),n}function VF(e,t){const n={},r=A(t,["model"]);r!=null&&_(n,["_url","model"],en(e,r));const i=A(t,["image"]);i!=null&&_(n,["instances[0]","image"],es(i));const a=A(t,["upscaleFactor"]);a!=null&&_(n,["parameters","upscaleConfig","upscaleFactor"],a);const l=A(t,["config"]);return l!=null&&GF(l,n),n}function qF(e){const t={},n=A(e,["sdkHttpResponse"]);n!=null&&_(t,["sdkHttpResponse"],n);const r=A(e,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>_m(a))),_(t,["generatedImages"],i)}return t}function $F(e){const t={},n=A(e,["uri"]);n!=null&&_(t,["uri"],n);const r=A(e,["encodedVideo"]);r!=null&&_(t,["videoBytes"],El(r));const i=A(e,["encoding"]);return i!=null&&_(t,["mimeType"],i),t}function YF(e){const t={},n=A(e,["gcsUri"]);n!=null&&_(t,["uri"],n);const r=A(e,["bytesBase64Encoded"]);r!=null&&_(t,["videoBytes"],El(r));const i=A(e,["mimeType"]);return i!=null&&_(t,["mimeType"],i),t}function WF(e){const t={},n=A(e,["image"]);n!=null&&_(t,["_self"],es(n));const r=A(e,["maskMode"]);return r!=null&&_(t,["maskMode"],r),t}function KF(e){const t={},n=A(e,["image"]);n!=null&&_(t,["image"],Tm(n));const r=A(e,["referenceType"]);return r!=null&&_(t,["referenceType"],r),t}function XF(e){const t={},n=A(e,["image"]);n!=null&&_(t,["image"],es(n));const r=A(e,["referenceType"]);return r!=null&&_(t,["referenceType"],r),t}function q3(e){const t={},n=A(e,["uri"]);n!=null&&_(t,["uri"],n);const r=A(e,["videoBytes"]);r!=null&&_(t,["encodedVideo"],El(r));const i=A(e,["mimeType"]);return i!=null&&_(t,["encoding"],i),t}function $3(e){const t={},n=A(e,["uri"]);n!=null&&_(t,["gcsUri"],n);const r=A(e,["videoBytes"]);r!=null&&_(t,["bytesBase64Encoded"],El(r));const i=A(e,["mimeType"]);return i!=null&&_(t,["mimeType"],i),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JF(e,t){const n={},r=A(e,["displayName"]);return t!==void 0&&r!=null&&_(t,["displayName"],r),n}function ZF(e){const t={},n=A(e,["config"]);return n!=null&&JF(n,t),t}function QF(e,t){const n={},r=A(e,["force"]);return t!==void 0&&r!=null&&_(t,["_query","force"],r),n}function eH(e){const t={},n=A(e,["name"]);n!=null&&_(t,["_url","name"],n);const r=A(e,["config"]);return r!=null&&QF(r,t),t}function tH(e){const t={},n=A(e,["name"]);return n!=null&&_(t,["_url","name"],n),t}function nH(e,t){const n={},r=A(e,["customMetadata"]);if(t!==void 0&&r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>l)),_(t,["customMetadata"],a)}const i=A(e,["chunkingConfig"]);return t!==void 0&&i!=null&&_(t,["chunkingConfig"],i),n}function rH(e){const t={},n=A(e,["name"]);n!=null&&_(t,["name"],n);const r=A(e,["metadata"]);r!=null&&_(t,["metadata"],r);const i=A(e,["done"]);i!=null&&_(t,["done"],i);const a=A(e,["error"]);a!=null&&_(t,["error"],a);const l=A(e,["response"]);return l!=null&&_(t,["response"],aH(l)),t}function iH(e){const t={},n=A(e,["fileSearchStoreName"]);n!=null&&_(t,["_url","file_search_store_name"],n);const r=A(e,["fileName"]);r!=null&&_(t,["fileName"],r);const i=A(e,["config"]);return i!=null&&nH(i,t),t}function aH(e){const t={},n=A(e,["sdkHttpResponse"]);n!=null&&_(t,["sdkHttpResponse"],n);const r=A(e,["parent"]);r!=null&&_(t,["parent"],r);const i=A(e,["documentName"]);return i!=null&&_(t,["documentName"],i),t}function sH(e,t){const n={},r=A(e,["pageSize"]);t!==void 0&&r!=null&&_(t,["_query","pageSize"],r);const i=A(e,["pageToken"]);return t!==void 0&&i!=null&&_(t,["_query","pageToken"],i),n}function oH(e){const t={},n=A(e,["config"]);return n!=null&&sH(n,t),t}function lH(e){const t={},n=A(e,["sdkHttpResponse"]);n!=null&&_(t,["sdkHttpResponse"],n);const r=A(e,["nextPageToken"]);r!=null&&_(t,["nextPageToken"],r);const i=A(e,["fileSearchStores"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),_(t,["fileSearchStores"],a)}return t}function Y3(e,t){const n={},r=A(e,["mimeType"]);t!==void 0&&r!=null&&_(t,["mimeType"],r);const i=A(e,["displayName"]);t!==void 0&&i!=null&&_(t,["displayName"],i);const a=A(e,["customMetadata"]);if(t!==void 0&&a!=null){let f=a;Array.isArray(f)&&(f=f.map(h=>h)),_(t,["customMetadata"],f)}const l=A(e,["chunkingConfig"]);return t!==void 0&&l!=null&&_(t,["chunkingConfig"],l),n}function cH(e){const t={},n=A(e,["fileSearchStoreName"]);n!=null&&_(t,["_url","file_search_store_name"],n);const r=A(e,["config"]);return r!=null&&Y3(r,t),t}function uH(e){const t={},n=A(e,["sdkHttpResponse"]);return n!=null&&_(t,["sdkHttpResponse"],n),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dH="Content-Type",fH="X-Server-Timeout",hH="User-Agent",Pv="x-goog-api-client",pH="1.37.0",mH=`google-genai-sdk/${pH}`,gH="v1beta1",xH="v1beta";class yH{constructor(t){var n,r;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:gH,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:xH,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const t=new Headers;return await this.clientOptions.auth.addAuthHeaders(t),t}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&r.push(t.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),n=new URL(t);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),t!==""&&i.push(t),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const r=this.shouldPrependVertexProjectPath(t),i=this.constructUrl(t.path,n,r);if(t.queryParams)for(const[l,f]of Object.entries(t.queryParams))i.searchParams.append(l,String(f));let a={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=t.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,i.toString(),t.abortSignal),this.unaryApiCall(i,a,t.httpMethod)}patchHttpOptions(t,n){const r=JSON.parse(JSON.stringify(t));for(const[i,a]of Object.entries(n))typeof a=="object"?r[i]=Object.assign(Object.assign({},r[i]),a):a!==void 0&&(r[i]=a);return r}async requestStream(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const r=this.shouldPrependVertexProjectPath(t),i=this.constructUrl(t.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let a={};return a.body=t.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,i.toString(),t.abortSignal),this.streamApiCall(i,a,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,n,r,i){if(n&&n.timeout||i){const a=new AbortController,l=a.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const f=setTimeout(()=>a.abort(),n.timeout);f&&typeof f.unref=="function"&&f.unref()}i&&i.addEventListener("abort",()=>{a.abort()}),t.signal=l}return n&&n.extraBody!==null&&vH(t,n.extraBody),t.headers=await this.getHeadersInternal(n,r),t}async unaryApiCall(t,n,r){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await l_(i),new Rv(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(t,n,r){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await l_(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(t){return Ka(this,arguments,function*(){var r;const i=(r=t==null?void 0:t.body)===null||r===void 0?void 0:r.getReader(),a=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let l="";const f="data:",h=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:u,value:g}=yield Ct(i.read());if(u){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const y=a.decode(g,{stream:!0});try{const I=JSON.parse(y);if("error"in I){const M=JSON.parse(JSON.stringify(I.error)),O=M.status,j=M.code,U=`got status: ${O}. ${JSON.stringify(I)}`;if(j>=400&&j<600)throw new Cm({message:U,status:j})}}catch(I){if(I.name==="ApiError")throw I}l+=y;let E=-1,C=0;for(;;){E=-1,C=0;for(const O of h){const j=l.indexOf(O);j!==-1&&(E===-1||j<E)&&(E=j,C=O.length)}if(E===-1)break;const I=l.substring(0,E);l=l.substring(E+C);const M=I.trim();if(M.startsWith(f)){const O=M.substring(f.length).trim();try{const j=new Response(O,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield Ct(new Rv(j))}catch(j){throw new Error(`exception parsing stream chunk ${O}. ${j}`)}}}}}finally{i.releaseLock()}})}async apiCall(t,n){return fetch(t,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const t={},n=mH+" "+this.clientOptions.userAgentExtra;return t[hH]=n,t[Pv]=n,t[dH]="application/json",t}async getHeadersInternal(t,n){const r=new Headers;if(t&&t.headers){for(const[i,a]of Object.entries(t.headers))r.append(i,a);t.timeout&&t.timeout>0&&r.append(fH,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(t){var n;let r="";return typeof t=="string"&&(r=t.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(t,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const a=this.clientOptions.uploader,l=await a.stat(t);i.sizeBytes=String(l.size);const f=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:l.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=f;const h={file:i},u=this.getFileName(t),g=Xe("upload/v1beta/files",h._url),y=await this.fetchUploadUrl(g,i.sizeBytes,i.mimeType,u,h,n==null?void 0:n.httpOptions);return a.upload(t,y,this)}async uploadFileToFileSearchStore(t,n,r){var i;const a=this.clientOptions.uploader,l=await a.stat(n),f=String(l.size),h=(i=r==null?void 0:r.mimeType)!==null&&i!==void 0?i:l.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const u=`upload/v1beta/${t}:uploadToFileSearchStore`,g=this.getFileName(n),y={};r!=null&&Y3(r,y);const E=await this.fetchUploadUrl(u,f,h,g,y,r==null?void 0:r.httpOptions);return a.uploadToFileSearchStore(n,E,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,n,r,i,a,l){var f;let h={};l?h=l:h={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},i?{"X-Goog-Upload-File-Name":i}:{})};const u=await this.request({path:t,body:JSON.stringify(a),httpMethod:"POST",httpOptions:h});if(!u||!(u!=null&&u.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const g=(f=u==null?void 0:u.headers)===null||f===void 0?void 0:f["x-goog-upload-url"];if(g===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return g}}async function l_(e){var t;if(e===void 0)throw new Error("response is undefined");if(!e.ok){const n=e.status;let r;!((t=e.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?r=await e.json():r={error:{message:await e.text(),code:e.status,status:e.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new Cm({message:i,status:n}):new Error(i)}}function vH(e,t){if(!t||Object.keys(t).length===0)return;if(e.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof e.body=="string"&&e.body.length>0)try{const a=JSON.parse(e.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(a,l){const f=Object.assign({},a);for(const h in l)if(Object.prototype.hasOwnProperty.call(l,h)){const u=l[h],g=f[h];u&&typeof u=="object"&&!Array.isArray(u)&&g&&typeof g=="object"&&!Array.isArray(g)?f[h]=r(g,u):(g&&u&&typeof g!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${h}". Original type: ${typeof g}, New type: ${typeof u}. Overwriting.`),f[h]=u)}return f}const i=r(n,t);e.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bH="mcp_used/unknown";let wH=!1;function W3(e){for(const t of e)if(EH(t)||typeof t=="object"&&"inputSchema"in t)return!0;return wH}function K3(e){var t;const n=(t=e[Pv])!==null&&t!==void 0?t:"";e[Pv]=(n+` ${bH}`).trimStart()}function EH(e){return e!==null&&typeof e=="object"&&e instanceof gw}function SH(e){return Ka(this,arguments,function*(n,r=100){let i,a=0;for(;a<r;){const l=yield Ct(n.listTools({cursor:i}));for(const f of l.tools)yield yield Ct(f),a++;if(!l.nextCursor)break;i=l.nextCursor}})}class gw{constructor(t=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=n}static create(t,n){return new gw(t,n)}async initialize(){var t,n,r,i;if(this.mcpTools.length>0)return;const a={},l=[];for(const g of this.mcpClients)try{for(var f=!0,h=(n=void 0,Xa(SH(g))),u;u=await h.next(),t=u.done,!t;f=!0){i=u.value,f=!1;const y=i;l.push(y);const E=y.name;if(a[E])throw new Error(`Duplicate function name ${E} found in MCP tools. Please ensure function names are unique.`);a[E]=g}}catch(y){n={error:y}}finally{try{!f&&!t&&(r=h.return)&&await r.call(h)}finally{if(n)throw n.error}}this.mcpTools=l,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),eU(this.mcpTools,this.config)}async callTool(t){await this.initialize();const n=[];for(const r of t)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const l=await i.callTool({name:r.name,arguments:r.args},void 0,a);n.push({functionResponse:{name:r.name,response:l.isError?{error:l}:l}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function AH(e,t,n){const r=new $B;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(r,i),t(r)}class CH{constructor(t,n,r){this.apiClient=t,this.auth=n,this.webSocketFactory=r}async connect(t){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),l=TH(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),h=`${i}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${f}`;let u=()=>{};const g=new Promise(L=>{u=L}),y=t.callbacks,E=function(){u({})},C=this.apiClient,I={onopen:E,onmessage:L=>{AH(C,y.onmessage,L)},onerror:(n=y==null?void 0:y.onerror)!==null&&n!==void 0?n:function(L){},onclose:(r=y==null?void 0:y.onclose)!==null&&r!==void 0?r:function(L){}},M=this.webSocketFactory.create(h,_H(l),I);M.connect(),await g;const U={setup:{model:en(this.apiClient,t.model)}};return M.send(JSON.stringify(U)),new NH(M,this.apiClient)}}class NH{constructor(t,n){this.conn=t,this.apiClient=n}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=J9(t);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const n=X9(t);this.conn.send(JSON.stringify(n))}sendPlaybackControl(t){const n={playbackControl:t};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Cu.PLAY)}pause(){this.sendPlaybackControl(Cu.PAUSE)}stop(){this.sendPlaybackControl(Cu.STOP)}resetContext(){this.sendPlaybackControl(Cu.RESET_CONTEXT)}close(){this.conn.close()}}function _H(e){const t={};return e.forEach((n,r)=>{t[r]=n}),t}function TH(e){const t=new Headers;for(const[n,r]of Object.entries(e))t.append(n,r);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const IH="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function RH(e,t,n){const r=new qB;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const a=JSON.parse(i);if(e.isVertexAI()){const l=e7(a);Object.assign(r,l)}else Object.assign(r,a);t(r)}class MH{constructor(t,n,r){this.apiClient=t,this.auth=n,this.webSocketFactory=r,this.music=new CH(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var n,r,i,a,l,f;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const h=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let g;const y=this.apiClient.getHeaders();t.config&&t.config.tools&&W3(t.config.tools)&&K3(y);const E=PH(y);if(this.apiClient.isVertexAI())g=`${h}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(E,g);else{const W=this.apiClient.getApiKey();let Z="BidiGenerateContent",te="key";W!=null&&W.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),Z="BidiGenerateContentConstrained",te="access_token"),g=`${h}/ws/google.ai.generativelanguage.${u}.GenerativeService.${Z}?${te}=${W}`}let C=()=>{};const I=new Promise(W=>{C=W}),M=t.callbacks,O=function(){var W;(W=M==null?void 0:M.onopen)===null||W===void 0||W.call(M),C({})},j=this.apiClient,U={onopen:O,onmessage:W=>{RH(j,M.onmessage,W)},onerror:(n=M==null?void 0:M.onerror)!==null&&n!==void 0?n:function(W){},onclose:(r=M==null?void 0:M.onclose)!==null&&r!==void 0?r:function(W){}},L=this.webSocketFactory.create(g,kH(E),U);L.connect(),await I;let G=en(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&G.startsWith("publishers/")){const W=this.apiClient.getProject(),Z=this.apiClient.getLocation();G=`projects/${W}/locations/${Z}/`+G}let V={};this.apiClient.isVertexAI()&&((i=t.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[xp.AUDIO]}:t.config.responseModalities=[xp.AUDIO]),!((a=t.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const z=(f=(l=t.config)===null||l===void 0?void 0:l.tools)!==null&&f!==void 0?f:[],B=[];for(const W of z)if(this.isCallableTool(W)){const Z=W;B.push(await Z.tool())}else B.push(W);B.length>0&&(t.config.tools=B);const J={model:G,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?V=K9(this.apiClient,J):V=W9(this.apiClient,J),delete V.config,L.send(JSON.stringify(V)),new DH(L,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const OH={turnComplete:!0};class DH{constructor(t,n){this.conn=t,this.apiClient=n}tLiveClientContent(t,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=Ca(n.turns),t.isVertexAI()||(r=r.map(i=>Nm(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(t,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const a of r){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!t.isVertexAI()&&!("id"in a))throw new Error(IH)}return{toolResponse:{functionResponses:r}}}sendClientContent(t){t=Object.assign(Object.assign({},OH),t);const n=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendRealtimeInput(t){let n={};this.apiClient.isVertexAI()?n={realtimeInput:Q9(t)}:n={realtimeInput:Z9(t)},this.conn.send(JSON.stringify(n))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function kH(e){const t={};return e.forEach((n,r)=>{t[r]=n}),t}function PH(e){const t=new Headers;for(const[n,r]of Object.entries(e))t.append(n,r);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const c_=10;function u_(e){var t,n,r;if(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let i=!1;for(const l of(n=e==null?void 0:e.tools)!==null&&n!==void 0?n:[])if(Du(l)){i=!0;break}if(!i)return!0;const a=(r=e==null?void 0:e.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Du(e){return"callTool"in e&&typeof e.callTool=="function"}function jH(e){var t,n,r;return(r=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(i=>Du(i)))!==null&&r!==void 0?r:!1}function d_(e){var t;const n=[];return!((t=e==null?void 0:e.config)===null||t===void 0)&&t.tools&&e.config.tools.forEach((r,i)=>{if(Du(r))return;const a=r;a.functionDeclarations&&a.functionDeclarations.length>0&&n.push(i)}),n}function f_(e){var t;return!(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class LH extends go{constructor(t){super(),this.apiClient=t,this.generateContent=async n=>{var r,i,a,l,f;const h=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!jH(n)||u_(n.config))return await this.generateContentInternal(h);const u=d_(n);if(u.length>0){const M=u.map(O=>`tools[${O}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${M}.`)}let g,y;const E=Ca(h.contents),C=(a=(i=(r=h.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&a!==void 0?a:c_;let I=0;for(;I<C&&(g=await this.generateContentInternal(h),!(!g.functionCalls||g.functionCalls.length===0));){const M=g.candidates[0].content,O=[];for(const j of(f=(l=n.config)===null||l===void 0?void 0:l.tools)!==null&&f!==void 0?f:[])if(Du(j)){const L=await j.callTool(g.functionCalls);O.push(...L)}I++,y={role:"user",parts:O},h.contents=Ca(h.contents),h.contents.push(M),h.contents.push(y),f_(h.config)&&(E.push(M),E.push(y))}return f_(h.config)&&(g.automaticFunctionCallingHistory=E),g},this.generateContentStream=async n=>{var r,i,a,l,f;if(this.maybeMoveToResponseJsonSchem(n),u_(n.config)){const y=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(y)}const h=d_(n);if(h.length>0){const y=h.map(E=>`tools[${E}]`).join(", ");throw new Error(`Incompatible tools found at ${y}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const u=(a=(i=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,g=(f=(l=n==null?void 0:n.config)===null||l===void 0?void 0:l.automaticFunctionCalling)===null||f===void 0?void 0:f.disable;if(u&&!g)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let a;const l=[];if(r!=null&&r.generatedImages)for(const h of r.generatedImages)h&&(h!=null&&h.safetyAttributes)&&((i=h==null?void 0:h.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?a=h==null?void 0:h.safetyAttributes:l.push(h);let f;return a?f={generatedImages:l,positivePromptSafetyAttributes:a,sdkHttpResponse:r.sdkHttpResponse}:f={generatedImages:l,sdkHttpResponse:r.sdkHttpResponse},f}),this.list=async n=>{var r;const l={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((r=l.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new Cc(oo.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(l),l)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var r,i,a,l,f,h;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.uri&&(!((h=(f=n.source)===null||f===void 0?void 0:f.video)===null||h===void 0)&&h.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var n,r,i;const a=(n=t.config)===null||n===void 0?void 0:n.tools;if(!a)return t;const l=await Promise.all(a.map(async h=>Du(h)?await h.tool():h)),f={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:l})};if(f.config.tools=l,t.config&&t.config.tools&&W3(t.config.tools)){const h=(i=(r=t.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let u=Object.assign({},h);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),K3(u),f.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:u})}return f}async initAfcToolsMap(t){var n,r,i;const a=new Map;for(const l of(r=(n=t.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(Du(l)){const f=l,h=await f.tool();for(const u of(i=h.functionDeclarations)!==null&&i!==void 0?i:[]){if(!u.name)throw new Error("Function declaration name is required.");if(a.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);a.set(u.name,f)}}return a}async processAfcStream(t){var n,r,i;const a=(i=(r=(n=t.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:c_;let l=!1,f=0;const h=await this.initAfcToolsMap(t);return(function(u,g,y){return Ka(this,arguments,function*(){for(var E,C,I,M,O,j;f<a;){l&&(f++,l=!1);const V=yield Ct(u.processParamsMaybeAddMcpUsage(y)),z=yield Ct(u.generateContentStreamInternal(V)),B=[],J=[];try{for(var U=!0,L=(C=void 0,Xa(z)),G;G=yield Ct(L.next()),E=G.done,!E;U=!0){M=G.value,U=!1;const W=M;if(yield yield Ct(W),W.candidates&&(!((O=W.candidates[0])===null||O===void 0)&&O.content)){J.push(W.candidates[0].content);for(const Z of(j=W.candidates[0].content.parts)!==null&&j!==void 0?j:[])if(f<a&&Z.functionCall){if(!Z.functionCall.name)throw new Error("Function call name was not returned by the model.");if(g.has(Z.functionCall.name)){const te=yield Ct(g.get(Z.functionCall.name).callTool([Z.functionCall]));B.push(...te)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${g.keys()}, mising tool: ${Z.functionCall.name}`)}}}}catch(W){C={error:W}}finally{try{!U&&!E&&(I=L.return)&&(yield Ct(I.call(L)))}finally{if(C)throw C.error}}if(B.length>0){l=!0;const W=new tf;W.candidates=[{content:{role:"user",parts:B}}],yield yield Ct(W);const Z=[];Z.push(...J),Z.push({role:"user",parts:B});const te=Ca(y.contents).concat(Z);y.contents=te}else break}})})(this,h,t)}async generateContentInternal(t){var n,r,i,a;let l,f="",h={};if(this.apiClient.isVertexAI()){const u=a_(this.apiClient,t);return f=Xe("{model}:generateContent",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),l.then(g=>{const y=o_(g),E=new tf;return Object.assign(E,y),E})}else{const u=i_(this.apiClient,t);return f=Xe("{model}:generateContent",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),l.then(g=>{const y=s_(g),E=new tf;return Object.assign(E,y),E})}}async generateContentStreamInternal(t){var n,r,i,a;let l,f="",h={};if(this.apiClient.isVertexAI()){const u=a_(this.apiClient,t);return f=Xe("{model}:streamGenerateContent?alt=sse",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.requestStream({path:f,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}),l.then(function(y){return Ka(this,arguments,function*(){var E,C,I,M;try{for(var O=!0,j=Xa(y),U;U=yield Ct(j.next()),E=U.done,!E;O=!0){M=U.value,O=!1;const L=M,G=o_(yield Ct(L.json()));G.sdkHttpResponse={headers:L.headers};const V=new tf;Object.assign(V,G),yield yield Ct(V)}}catch(L){C={error:L}}finally{try{!O&&!E&&(I=j.return)&&(yield Ct(I.call(j)))}finally{if(C)throw C.error}}})})}else{const u=i_(this.apiClient,t);return f=Xe("{model}:streamGenerateContent?alt=sse",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.requestStream({path:f,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}),l.then(function(y){return Ka(this,arguments,function*(){var E,C,I,M;try{for(var O=!0,j=Xa(y),U;U=yield Ct(j.next()),E=U.done,!E;O=!0){M=U.value,O=!1;const L=M,G=s_(yield Ct(L.json()));G.sdkHttpResponse={headers:L.headers};const V=new tf;Object.assign(V,G),yield yield Ct(V)}}catch(L){C={error:L}}finally{try{!O&&!E&&(I=j.return)&&(yield Ct(I.call(j)))}finally{if(C)throw C.error}}})})}}async embedContent(t){var n,r,i,a;let l,f="",h={};if(this.apiClient.isVertexAI()){const u=M7(this.apiClient,t);return f=Xe("{model}:predict",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),l.then(g=>{const y=D7(g),E=new HN;return Object.assign(E,y),E})}else{const u=R7(this.apiClient,t);return f=Xe("{model}:batchEmbedContents",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),l.then(g=>{const y=O7(g),E=new HN;return Object.assign(E,y),E})}}async generateImagesInternal(t){var n,r,i,a;let l,f="",h={};if(this.apiClient.isVertexAI()){const u=V7(this.apiClient,t);return f=Xe("{model}:predict",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),l.then(g=>{const y=$7(g),E=new zN;return Object.assign(E,y),E})}else{const u=G7(this.apiClient,t);return f=Xe("{model}:predict",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),l.then(g=>{const y=q7(g),E=new zN;return Object.assign(E,y),E})}}async editImageInternal(t){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI()){const f=N7(this.apiClient,t);return a=Xe("{model}:predict",f._url),l=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(u=>{const g=u;return g.sdkHttpResponse={headers:h.headers},g})),i.then(h=>{const u=_7(h),g=new kB;return Object.assign(g,u),g})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI()){const f=VF(this.apiClient,t);return a=Xe("{model}:predict",f._url),l=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(u=>{const g=u;return g.sdkHttpResponse={headers:h.headers},g})),i.then(h=>{const u=qF(h),g=new PB;return Object.assign(g,u),g})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI()){const f=CF(this.apiClient,t);return a=Xe("{model}:predict",f._url),l=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),i.then(h=>{const u=NF(h),g=new jB;return Object.assign(g,u),g})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI()){const f=OF(this.apiClient,t);return a=Xe("{model}:predict",f._url),l=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),i.then(h=>{const u=DF(h),g=new LB;return Object.assign(g,u),g})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var n,r,i,a;let l,f="",h={};if(this.apiClient.isVertexAI()){const u=cF(this.apiClient,t);return f=Xe("{name}",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),l.then(g=>kv(g))}else{const u=lF(this.apiClient,t);return f=Xe("{name}",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),l.then(g=>Dv(g))}}async listInternal(t){var n,r,i,a;let l,f="",h={};if(this.apiClient.isVertexAI()){const u=yF(this.apiClient,t);return f=Xe("{models_url}",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),l.then(g=>{const y=bF(g),E=new GN;return Object.assign(E,y),E})}else{const u=xF(this.apiClient,t);return f=Xe("{models_url}",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),l.then(g=>{const y=vF(g),E=new GN;return Object.assign(E,y),E})}}async update(t){var n,r,i,a;let l,f="",h={};if(this.apiClient.isVertexAI()){const u=zF(this.apiClient,t);return f=Xe("{model}",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),l.then(g=>kv(g))}else{const u=HF(this.apiClient,t);return f=Xe("{name}",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),l.then(g=>Dv(g))}}async delete(t){var n,r,i,a;let l,f="",h={};if(this.apiClient.isVertexAI()){const u=E7(this.apiClient,t);return f=Xe("{name}",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),l.then(g=>{const y=A7(g),E=new VN;return Object.assign(E,y),E})}else{const u=w7(this.apiClient,t);return f=Xe("{name}",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),l.then(g=>{const y=S7(g),E=new VN;return Object.assign(E,y),E})}}async countTokens(t){var n,r,i,a;let l,f="",h={};if(this.apiClient.isVertexAI()){const u=y7(this.apiClient,t);return f=Xe("{model}:countTokens",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),l.then(g=>{const y=b7(g),E=new qN;return Object.assign(E,y),E})}else{const u=x7(this.apiClient,t);return f=Xe("{model}:countTokens",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),l.then(g=>{const y=v7(g),E=new qN;return Object.assign(E,y),E})}}async computeTokens(t){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI()){const f=u7(this.apiClient,t);return a=Xe("{model}:computeTokens",f._url),l=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(u=>{const g=u;return g.sdkHttpResponse={headers:h.headers},g})),i.then(h=>{const u=d7(h),g=new BB;return Object.assign(g,u),g})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var n,r,i,a;let l,f="",h={};if(this.apiClient.isVertexAI()){const u=Z7(this.apiClient,t);return f=Xe("{model}:predictLongRunning",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),l.then(g=>{const y=X7(g),E=new yp;return Object.assign(E,y),E})}else{const u=J7(this.apiClient,t);return f=Xe("{model}:predictLongRunning",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),l.then(g=>{const y=K7(g),E=new yp;return Object.assign(E,y),E})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BH extends go{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const n=t.operation,r=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let a;r&&"httpOptions"in r&&(a=r.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(t){const n=t.operation,r=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let a;r&&"httpOptions"in r&&(a=r.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(t){var n,r,i,a;let l,f="",h={};if(this.apiClient.isVertexAI()){const u=TB(t);return f=Xe("{operationName}",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),l}else{const u=_B(t);return f=Xe("{operationName}",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),l}}async fetchPredictVideosOperationInternal(t){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI()){const f=bB(t);return a=Xe("{resourceName}:fetchPredictOperation",f._url),l=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function UH(e){const t={},n=A(e,["data"]);if(n!=null&&_(t,["data"],n),A(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=A(e,["mimeType"]);return r!=null&&_(t,["mimeType"],r),t}function FH(e){const t={},n=A(e,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>KH(a))),_(t,["parts"],i)}const r=A(e,["role"]);return r!=null&&_(t,["role"],r),t}function HH(e,t,n){const r={},i=A(t,["expireTime"]);n!==void 0&&i!=null&&_(n,["expireTime"],i);const a=A(t,["newSessionExpireTime"]);n!==void 0&&a!=null&&_(n,["newSessionExpireTime"],a);const l=A(t,["uses"]);n!==void 0&&l!=null&&_(n,["uses"],l);const f=A(t,["liveConnectConstraints"]);n!==void 0&&f!=null&&_(n,["bidiGenerateContentSetup"],WH(e,f));const h=A(t,["lockAdditionalFields"]);return n!==void 0&&h!=null&&_(n,["fieldMask"],h),r}function zH(e,t){const n={},r=A(t,["config"]);return r!=null&&_(n,["config"],HH(e,r,n)),n}function GH(e){const t={};if(A(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=A(e,["fileUri"]);n!=null&&_(t,["fileUri"],n);const r=A(e,["mimeType"]);return r!=null&&_(t,["mimeType"],r),t}function VH(e){const t={},n=A(e,["id"]);n!=null&&_(t,["id"],n);const r=A(e,["args"]);r!=null&&_(t,["args"],r);const i=A(e,["name"]);if(i!=null&&_(t,["name"],i),A(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(A(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function qH(e){const t={};if(A(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=A(e,["enableWidget"]);return n!=null&&_(t,["enableWidget"],n),t}function $H(e){const t={};if(A(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(A(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=A(e,["timeRangeFilter"]);return n!=null&&_(t,["timeRangeFilter"],n),t}function YH(e,t){const n={},r=A(e,["generationConfig"]);t!==void 0&&r!=null&&_(t,["setup","generationConfig"],r);const i=A(e,["responseModalities"]);t!==void 0&&i!=null&&_(t,["setup","generationConfig","responseModalities"],i);const a=A(e,["temperature"]);t!==void 0&&a!=null&&_(t,["setup","generationConfig","temperature"],a);const l=A(e,["topP"]);t!==void 0&&l!=null&&_(t,["setup","generationConfig","topP"],l);const f=A(e,["topK"]);t!==void 0&&f!=null&&_(t,["setup","generationConfig","topK"],f);const h=A(e,["maxOutputTokens"]);t!==void 0&&h!=null&&_(t,["setup","generationConfig","maxOutputTokens"],h);const u=A(e,["mediaResolution"]);t!==void 0&&u!=null&&_(t,["setup","generationConfig","mediaResolution"],u);const g=A(e,["seed"]);t!==void 0&&g!=null&&_(t,["setup","generationConfig","seed"],g);const y=A(e,["speechConfig"]);t!==void 0&&y!=null&&_(t,["setup","generationConfig","speechConfig"],mw(y));const E=A(e,["thinkingConfig"]);t!==void 0&&E!=null&&_(t,["setup","generationConfig","thinkingConfig"],E);const C=A(e,["enableAffectiveDialog"]);t!==void 0&&C!=null&&_(t,["setup","generationConfig","enableAffectiveDialog"],C);const I=A(e,["systemInstruction"]);t!==void 0&&I!=null&&_(t,["setup","systemInstruction"],FH(ci(I)));const M=A(e,["tools"]);if(t!==void 0&&M!=null){let z=Ju(M);Array.isArray(z)&&(z=z.map(B=>JH(Xu(B)))),_(t,["setup","tools"],z)}const O=A(e,["sessionResumption"]);t!==void 0&&O!=null&&_(t,["setup","sessionResumption"],XH(O));const j=A(e,["inputAudioTranscription"]);t!==void 0&&j!=null&&_(t,["setup","inputAudioTranscription"],j);const U=A(e,["outputAudioTranscription"]);t!==void 0&&U!=null&&_(t,["setup","outputAudioTranscription"],U);const L=A(e,["realtimeInputConfig"]);t!==void 0&&L!=null&&_(t,["setup","realtimeInputConfig"],L);const G=A(e,["contextWindowCompression"]);t!==void 0&&G!=null&&_(t,["setup","contextWindowCompression"],G);const V=A(e,["proactivity"]);if(t!==void 0&&V!=null&&_(t,["setup","proactivity"],V),A(e,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function WH(e,t){const n={},r=A(t,["model"]);r!=null&&_(n,["setup","model"],en(e,r));const i=A(t,["config"]);return i!=null&&_(n,["config"],YH(i,n)),n}function KH(e){const t={},n=A(e,["mediaResolution"]);n!=null&&_(t,["mediaResolution"],n);const r=A(e,["codeExecutionResult"]);r!=null&&_(t,["codeExecutionResult"],r);const i=A(e,["executableCode"]);i!=null&&_(t,["executableCode"],i);const a=A(e,["fileData"]);a!=null&&_(t,["fileData"],GH(a));const l=A(e,["functionCall"]);l!=null&&_(t,["functionCall"],VH(l));const f=A(e,["functionResponse"]);f!=null&&_(t,["functionResponse"],f);const h=A(e,["inlineData"]);h!=null&&_(t,["inlineData"],UH(h));const u=A(e,["text"]);u!=null&&_(t,["text"],u);const g=A(e,["thought"]);g!=null&&_(t,["thought"],g);const y=A(e,["thoughtSignature"]);y!=null&&_(t,["thoughtSignature"],y);const E=A(e,["videoMetadata"]);return E!=null&&_(t,["videoMetadata"],E),t}function XH(e){const t={},n=A(e,["handle"]);if(n!=null&&_(t,["handle"],n),A(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function JH(e){const t={};if(A(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=A(e,["computerUse"]);n!=null&&_(t,["computerUse"],n);const r=A(e,["fileSearch"]);r!=null&&_(t,["fileSearch"],r);const i=A(e,["codeExecution"]);if(i!=null&&_(t,["codeExecution"],i),A(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=A(e,["functionDeclarations"]);if(a!=null){let g=a;Array.isArray(g)&&(g=g.map(y=>y)),_(t,["functionDeclarations"],g)}const l=A(e,["googleMaps"]);l!=null&&_(t,["googleMaps"],qH(l));const f=A(e,["googleSearch"]);f!=null&&_(t,["googleSearch"],$H(f));const h=A(e,["googleSearchRetrieval"]);h!=null&&_(t,["googleSearchRetrieval"],h);const u=A(e,["urlContext"]);return u!=null&&_(t,["urlContext"],u),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZH(e){const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const r=e[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(a=>`${n}.${a}`);t.push(...i)}else t.push(n)}return t.join(",")}function QH(e,t){let n=null;const r=e.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const a=r.setup;typeof a=="object"&&a!==null?(e.bidiGenerateContentSetup=a,n=a):delete e.bidiGenerateContentSetup}else r!==void 0&&delete e.bidiGenerateContentSetup;const i=e.fieldMask;if(n){const a=ZH(n);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)a?e.fieldMask=a:delete e.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];i.length>0&&(f=i.map(u=>l.includes(u)?`generationConfig.${u}`:u));const h=[];a&&h.push(a),f.length>0&&h.push(...f),h.length>0?e.fieldMask=h.join(","):delete e.fieldMask}else delete e.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?e.fieldMask=i.join(","):delete e.fieldMask;return e}class ez extends go{constructor(t){super(),this.apiClient=t}async create(t){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=zH(this.apiClient,t);a=Xe("auth_tokens",f._url),l=f._query,delete f.config,delete f._url,delete f._query;const h=QH(f,t.config);return i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tz(e,t){const n={},r=A(e,["force"]);return t!==void 0&&r!=null&&_(t,["_query","force"],r),n}function nz(e){const t={},n=A(e,["name"]);n!=null&&_(t,["_url","name"],n);const r=A(e,["config"]);return r!=null&&tz(r,t),t}function rz(e){const t={},n=A(e,["name"]);return n!=null&&_(t,["_url","name"],n),t}function iz(e,t){const n={},r=A(e,["pageSize"]);t!==void 0&&r!=null&&_(t,["_query","pageSize"],r);const i=A(e,["pageToken"]);return t!==void 0&&i!=null&&_(t,["_query","pageToken"],i),n}function az(e){const t={},n=A(e,["parent"]);n!=null&&_(t,["_url","parent"],n);const r=A(e,["config"]);return r!=null&&iz(r,t),t}function sz(e){const t={},n=A(e,["sdkHttpResponse"]);n!=null&&_(t,["sdkHttpResponse"],n);const r=A(e,["nextPageToken"]);r!=null&&_(t,["nextPageToken"],r);const i=A(e,["documents"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),_(t,["documents"],a)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oz extends go{constructor(t){super(),this.apiClient=t,this.list=async n=>new Cc(oo.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(t){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=rz(t);return a=Xe("{name}",f._url),l=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),i.then(h=>h)}}async delete(t){var n,r;let i="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=nz(t);i=Xe("{name}",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(t){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=az(t);return a=Xe("{parent}/documents",f._url),l=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),i.then(h=>{const u=sz(h),g=new UB;return Object.assign(g,u),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lz extends go{constructor(t,n=new oz(t)){super(),this.apiClient=t,this.documents=n,this.list=async(r={})=>new Cc(oo.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(r),r)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=ZF(t);return a=Xe("fileSearchStores",f._url),l=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),i.then(h=>h)}}async get(t){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=tH(t);return a=Xe("{name}",f._url),l=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),i.then(h=>h)}}async delete(t){var n,r;let i="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=eH(t);i=Xe("{name}",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(t){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=oH(t);return a=Xe("fileSearchStores",f._url),l=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),i.then(h=>{const u=lH(h),g=new FB;return Object.assign(g,u),g})}}async uploadToFileSearchStoreInternal(t){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=cH(t);return a=Xe("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",f._url),l=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),i.then(h=>{const u=uH(h),g=new HB;return Object.assign(g,u),g})}}async importFile(t){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=iH(t);return a=Xe("{file_search_store_name}:importFile",f._url),l=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),i.then(h=>{const u=rH(h),g=new uw;return Object.assign(g,u),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let X3=function(){const{crypto:e}=globalThis;if(e!=null&&e.randomUUID)return X3=e.randomUUID.bind(e),e.randomUUID();const t=new Uint8Array(1),n=e?()=>e.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};const cz=()=>X3();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jv(e){return typeof e=="object"&&e!==null&&("name"in e&&e.name==="AbortError"||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}const Lv=e=>{if(e instanceof Error)return e;if(typeof e=="object"&&e!==null){try{if(Object.prototype.toString.call(e)==="[object Error]"){const t=new Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch{}try{return new Error(JSON.stringify(e))}catch{}}return new Error(e)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _a extends Error{}class vi extends _a{constructor(t,n,r,i){super(`${vi.makeMessage(t,n,r)}`),this.status=t,this.headers=i,this.error=n}static makeMessage(t,n,r){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return t&&i?`${t} ${i}`:t?`${t} status code (no body)`:i||"(no status code or body)"}static generate(t,n,r,i){if(!t||!i)return new Im({message:r,cause:Lv(n)});const a=n;return t===400?new Z3(t,a,r,i):t===401?new Q3(t,a,r,i):t===403?new eD(t,a,r,i):t===404?new tD(t,a,r,i):t===409?new nD(t,a,r,i):t===422?new rD(t,a,r,i):t===429?new iD(t,a,r,i):t>=500?new aD(t,a,r,i):new vi(t,a,r,i)}}class Bv extends vi{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class Im extends vi{constructor({message:t,cause:n}){super(void 0,void 0,t||"Connection error.",void 0),n&&(this.cause=n)}}class J3 extends Im{constructor({message:t}={}){super({message:t??"Request timed out."})}}class Z3 extends vi{}class Q3 extends vi{}class eD extends vi{}class tD extends vi{}class nD extends vi{}class rD extends vi{}class iD extends vi{}class aD extends vi{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uz=/^[a-z][a-z0-9+.-]*:/i,dz=e=>uz.test(e);let Uv=e=>(Uv=Array.isArray,Uv(e));const fz=Uv;let hz=fz;const h_=hz;function pz(e){if(!e)return!0;for(const t in e)return!1;return!0}function mz(e,t){return Object.prototype.hasOwnProperty.call(e,t)}const gz=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new _a(`${e} must be an integer`);if(t<0)throw new _a(`${e} must be a positive integer`);return t},xz=e=>{try{return JSON.parse(e)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yz=e=>new Promise(t=>setTimeout(t,e));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bu="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vz(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const bz=()=>{var e,t,n,r,i;const a=vz();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":bu,"X-Stainless-OS":m_(Deno.build.os),"X-Stainless-Arch":p_(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(t=(e=Deno.version)===null||e===void 0?void 0:e.deno)!==null&&t!==void 0?t:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":bu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":bu,"X-Stainless-OS":m_((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":p_((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(i=globalThis.process.version)!==null&&i!==void 0?i:"unknown"};const l=wz();return l?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":bu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${l.browser}`,"X-Stainless-Runtime-Version":l.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":bu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function wz(){if(typeof navigator>"u"||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,a=r[2]||0,l=r[3]||0;return{browser:t,version:`${i}.${a}.${l}`}}}return null}const p_=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",m_=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown");let M0;const Ez=()=>M0??(M0=bz());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Sz(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function sD(...e){const t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}function Az(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return sD({start(){},async pull(n){const{done:r,value:i}=await t.next();r?n.close():n.enqueue(i)},async cancel(){var n;await((n=t.return)===null||n===void 0?void 0:n.call(t))}})}function oD(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const n=await t.read();return n!=null&&n.done&&t.releaseLock(),n}catch(n){throw t.releaseLock(),n}},async return(){const n=t.cancel();return t.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Cz(e){var t,n;if(e===null||typeof e!="object")return;if(e[Symbol.asyncIterator]){await((n=(t=e[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(t));return}const r=e.getReader(),i=r.cancel();r.releaseLock(),await i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Nz=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lD=()=>{var e;if(typeof File>"u"){const{process:t}=globalThis,n=typeof((e=t==null?void 0:t.versions)===null||e===void 0?void 0:e.node)=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Oy(e,t,n){return lD(),new File(e,t??"unknown_file",n)}function _z(e){return(typeof e=="object"&&e!==null&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}const Tz=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cD=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",Iz=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&cD(e),Rz=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function";async function Mz(e,t,n){if(lD(),e=await e,Iz(e))return e instanceof File?e:Oy([await e.arrayBuffer()],e.name);if(Rz(e)){const i=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),Oy(await Fv(i),t,n)}const r=await Fv(e);if(t||(t=_z(e)),!(n!=null&&n.type)){const i=r.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof i=="string"&&(n=Object.assign(Object.assign({},n),{type:i}))}return Oy(r,t,n)}async function Fv(e){var t,n,r,i,a;let l=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)l.push(e);else if(cD(e))l.push(e instanceof Blob?e:await e.arrayBuffer());else if(Tz(e))try{for(var f=!0,h=Xa(e),u;u=await h.next(),t=u.done,!t;f=!0){i=u.value,f=!1;const g=i;l.push(...await Fv(g))}}catch(g){n={error:g}}finally{try{!f&&!t&&(r=h.return)&&await r.call(h)}finally{if(n)throw n.error}}else{const g=(a=e==null?void 0:e.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof e}${g?`; constructor: ${g}`:""}${Oz(e)}`)}return l}function Oz(e){return typeof e!="object"||e===null?"":`; props: [${Object.getOwnPropertyNames(e).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uD{constructor(t){this._client=t}}uD._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dD(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const g_=Object.freeze(Object.create(null)),Dz=(e=dD)=>(function(n,...r){if(n.length===1)return n[0];let i=!1;const a=[],l=n.reduce((g,y,E)=>{var C,I,M;/[?#]/.test(y)&&(i=!0);const O=r[E];let j=(i?encodeURIComponent:e)(""+O);return E!==r.length&&(O==null||typeof O=="object"&&O.toString===((M=Object.getPrototypeOf((I=Object.getPrototypeOf((C=O.hasOwnProperty)!==null&&C!==void 0?C:g_))!==null&&I!==void 0?I:g_))===null||M===void 0?void 0:M.toString))&&(j=O+"",a.push({start:g.length+y.length,length:j.length,error:`Value of type ${Object.prototype.toString.call(O).slice(8,-1)} is not a valid path parameter`})),g+y+(E===r.length?"":j)},""),f=l.split(/[?#]/,1)[0],h=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let u;for(;(u=h.exec(f))!==null;)a.push({start:u.index,length:u[0].length,error:`Value "${u[0]}" can't be safely passed as a path parameter`});if(a.sort((g,y)=>g.start-y.start),a.length>0){let g=0;const y=a.reduce((E,C)=>{const I=" ".repeat(C.start-g),M="^".repeat(C.length);return g=C.start+C.length,E+I+M},"");throw new _a(`Path parameters result in path with invalid segments:
${a.map(E=>E.error).join(`
`)}
${l}
${y}`)}return l}),O0=Dz(dD);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fD extends uD{create(t,n){var r;const{api_version:i=this._client.apiVersion}=t,a=bp(t,["api_version"]);if("model"in a&&"agent_config"in a)throw new _a("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new _a("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(O0`/${i}/interactions`,Object.assign(Object.assign({body:a},n),{stream:(r=t.stream)!==null&&r!==void 0?r:!1}))}delete(t,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.delete(O0`/${i}/interactions/${t}`,r)}cancel(t,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.post(O0`/${i}/interactions/${t}/cancel`,r)}get(t,n={},r){var i;const a=n??{},{api_version:l=this._client.apiVersion}=a,f=bp(a,["api_version"]);return this._client.get(O0`/${l}/interactions/${t}`,Object.assign(Object.assign({query:f},r),{stream:(i=n==null?void 0:n.stream)!==null&&i!==void 0?i:!1}))}}fD._key=Object.freeze(["interactions"]);class hD extends fD{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kz(e){let t=0;for(const i of e)t+=i.length;const n=new Uint8Array(t);let r=0;for(const i of e)n.set(i,r),r+=i.length;return n}let D0;function xw(e){let t;return(D0??(t=new globalThis.TextEncoder,D0=t.encode.bind(t)))(e)}let k0;function x_(e){let t;return(k0??(t=new globalThis.TextDecoder,k0=t.decode.bind(t)))(e)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rm{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(t){if(t==null)return[];const n=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?xw(t):t;this.buffer=kz([this.buffer,n]);const r=[];let i;for(;(i=Pz(this.buffer,this.carriageReturnIndex))!=null;){if(i.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=i.index;continue}if(this.carriageReturnIndex!=null&&(i.index!==this.carriageReturnIndex+1||i.carriage)){r.push(x_(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?i.preceding-1:i.preceding,l=x_(this.buffer.subarray(0,a));r.push(l),this.buffer=this.buffer.subarray(i.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}Rm.NEWLINE_CHARS=new Set([`
`,"\r"]);Rm.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Pz(e,t){for(let i=t??0;i<e.length;i++){if(e[i]===10)return{preceding:i,index:i+1,carriage:!1};if(e[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function jz(e){for(let r=0;r<e.length-1;r++){if(e[r]===10&&e[r+1]===10||e[r]===13&&e[r+1]===13)return r+2;if(e[r]===13&&e[r+1]===10&&r+3<e.length&&e[r+2]===13&&e[r+3]===10)return r+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wp={off:0,error:200,warn:300,info:400,debug:500},y_=(e,t,n)=>{if(e){if(mz(wp,e))return e;xi(n).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(wp))}`)}};function hf(){}function P0(e,t,n){return!t||wp[e]>wp[n]?hf:t[e].bind(t)}const Lz={error:hf,warn:hf,info:hf,debug:hf};let v_=new WeakMap;function xi(e){var t;const n=e.logger,r=(t=e.logLevel)!==null&&t!==void 0?t:"off";if(!n)return Lz;const i=v_.get(n);if(i&&i[0]===r)return i[1];const a={error:P0("error",n,r),warn:P0("warn",n,r),info:P0("info",n,r),debug:P0("debug",n,r)};return v_.set(n,[r,a]),a}const ec=e=>(e.options&&(e.options=Object.assign({},e.options),delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([t,n])=>[t,t.toLowerCase()==="x-goog-api-key"||t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Nu{constructor(t,n,r){this.iterator=t,this.controller=n,this.client=r}static fromSSEResponse(t,n,r){let i=!1;const a=r?xi(r):console;function l(){return Ka(this,arguments,function*(){var h,u,g,y;if(i)throw new _a("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let E=!1;try{try{for(var C=!0,I=Xa(Bz(t,n)),M;M=yield Ct(I.next()),h=M.done,!h;C=!0){y=M.value,C=!1;const O=y;if(!E)if(O.data.startsWith("[DONE]")){E=!0;continue}else try{yield yield Ct(JSON.parse(O.data))}catch(j){throw a.error("Could not parse message into JSON:",O.data),a.error("From chunk:",O.raw),j}}}catch(O){u={error:O}}finally{try{!C&&!h&&(g=I.return)&&(yield Ct(g.call(I)))}finally{if(u)throw u.error}}E=!0}catch(O){if(jv(O))return yield Ct(void 0);throw O}finally{E||n.abort()}})}return new Nu(l,n,r)}static fromReadableStream(t,n,r){let i=!1;function a(){return Ka(this,arguments,function*(){var h,u,g,y;const E=new Rm,C=oD(t);try{for(var I=!0,M=Xa(C),O;O=yield Ct(M.next()),h=O.done,!h;I=!0){y=O.value,I=!1;const j=y;for(const U of E.decode(j))yield yield Ct(U)}}catch(j){u={error:j}}finally{try{!I&&!h&&(g=M.return)&&(yield Ct(g.call(M)))}finally{if(u)throw u.error}}for(const j of E.flush())yield yield Ct(j)})}function l(){return Ka(this,arguments,function*(){var h,u,g,y;if(i)throw new _a("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let E=!1;try{try{for(var C=!0,I=Xa(a()),M;M=yield Ct(I.next()),h=M.done,!h;C=!0){y=M.value,C=!1;const O=y;E||O&&(yield yield Ct(JSON.parse(O)))}}catch(O){u={error:O}}finally{try{!C&&!h&&(g=I.return)&&(yield Ct(g.call(I)))}finally{if(u)throw u.error}}E=!0}catch(O){if(jv(O))return yield Ct(void 0);throw O}finally{E||n.abort()}})}return new Nu(l,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],n=[],r=this.iterator(),i=a=>({next:()=>{if(a.length===0){const l=r.next();t.push(l),n.push(l)}return a.shift()}});return[new Nu(()=>i(t),this.controller,this.client),new Nu(()=>i(n),this.controller,this.client)]}toReadableStream(){const t=this;let n;return sD({async start(){n=t[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:a}=await n.next();if(a)return r.close();const l=xw(JSON.stringify(i)+`
`);r.enqueue(l)}catch(i){r.error(i)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}}function Bz(e,t){return Ka(this,arguments,function*(){var r,i,a,l;if(!e.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new _a("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new _a("Attempted to iterate over a response with no body");const f=new Fz,h=new Rm,u=oD(e.body);try{for(var g=!0,y=Xa(Uz(u)),E;E=yield Ct(y.next()),r=E.done,!r;g=!0){l=E.value,g=!1;const C=l;for(const I of h.decode(C)){const M=f.decode(I);M&&(yield yield Ct(M))}}}catch(C){i={error:C}}finally{try{!g&&!r&&(a=y.return)&&(yield Ct(a.call(y)))}finally{if(i)throw i.error}}for(const C of h.flush()){const I=f.decode(C);I&&(yield yield Ct(I))}})}function Uz(e){return Ka(this,arguments,function*(){var n,r,i,a;let l=new Uint8Array;try{for(var f=!0,h=Xa(e),u;u=yield Ct(h.next()),n=u.done,!n;f=!0){a=u.value,f=!1;const g=a;if(g==null)continue;const y=g instanceof ArrayBuffer?new Uint8Array(g):typeof g=="string"?xw(g):g;let E=new Uint8Array(l.length+y.length);E.set(l),E.set(y,l.length),l=E;let C;for(;(C=jz(l))!==-1;)yield yield Ct(l.slice(0,C)),l=l.slice(C)}}catch(g){r={error:g}}finally{try{!f&&!n&&(i=h.return)&&(yield Ct(i.call(h)))}finally{if(r)throw r.error}}l.length>0&&(yield yield Ct(l))})}class Fz{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(t),t.startsWith(":"))return null;let[n,r,i]=Hz(t,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function Hz(e,t){const n=e.indexOf(t);return n!==-1?[e.substring(0,n),t,e.substring(n+t.length)]:[e,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function zz(e,t){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:a}=t,l=await(async()=>{var f;if(t.options.stream)return xi(e).debug("response",n.status,n.url,n.headers,n.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(n,t.controller,e):Nu.fromSSEResponse(n,t.controller,e);if(n.status===204)return null;if(t.options.__binaryResponse)return n;const h=n.headers.get("content-type"),u=(f=h==null?void 0:h.split(";")[0])===null||f===void 0?void 0:f.trim();return(u==null?void 0:u.includes("application/json"))||(u==null?void 0:u.endsWith("+json"))?await n.json():await n.text()})();return xi(e).debug(`[${r}] response parsed`,ec({retryOfRequestLogID:i,url:n.url,status:n.status,body:l,durationMs:Date.now()-a})),l}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yw extends Promise{constructor(t,n,r=zz){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,this.client=t}_thenUnwrap(t){return new yw(this.client,this.responsePromise,async(n,r)=>t(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(this.client,t))),this.parsedPromise}then(t,n){return this.parse().then(t,n)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pD=Symbol("brand.privateNullableHeaders");function*Gz(e){if(!e)return;if(pD in e){const{values:r,nulls:i}=e;yield*r.entries();for(const a of i)yield[a,null];return}let t=!1,n;e instanceof Headers?n=e.entries():h_(e)?n=e:(t=!0,n=Object.entries(e??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const a=h_(r[1])?r[1]:[r[1]];let l=!1;for(const f of a)f!==void 0&&(t&&!l&&(l=!0,yield[i,null]),yield[i,f])}}const nf=e=>{const t=new Headers,n=new Set;for(const r of e){const i=new Set;for(const[a,l]of Gz(r)){const f=a.toLowerCase();i.has(f)||(t.delete(a),i.add(f)),l===null?(t.delete(a),n.add(f)):(t.append(a,l),n.delete(f))}}return{[pD]:!0,values:t,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Dy=e=>{var t,n,r,i,a,l;if(typeof globalThis.process<"u")return(r=(n=(t=pB)===null||t===void 0?void 0:t[e])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(l=(a=(i=globalThis.Deno.env)===null||i===void 0?void 0:i.get)===null||a===void 0?void 0:a.call(i,e))===null||l===void 0?void 0:l.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var mD;class Mm{constructor(t){var n,r,i,a,l,f,h,{baseURL:u=Dy("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:g=(n=Dy("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:y="v1beta"}=t,E=bp(t,["baseURL","apiKey","apiVersion"]);const C=Object.assign(Object.assign({apiKey:g,apiVersion:y},E),{baseURL:u||"https://generativelanguage.googleapis.com"});this.baseURL=C.baseURL,this.timeout=(r=C.timeout)!==null&&r!==void 0?r:Mm.DEFAULT_TIMEOUT,this.logger=(i=C.logger)!==null&&i!==void 0?i:console;const I="warn";this.logLevel=I,this.logLevel=(l=(a=y_(C.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:y_(Dy("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&l!==void 0?l:I,this.fetchOptions=C.fetchOptions,this.maxRetries=(f=C.maxRetries)!==null&&f!==void 0?f:2,this.fetch=(h=C.fetch)!==null&&h!==void 0?h:Sz(),this.encoder=Nz,this._options=C,this.apiKey=g,this.apiVersion=y,this.clientAdapter=C.clientAdapter}withOptions(t){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),t))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:n}){if(!(t.has("authorization")||t.has("x-goog-api-key"))&&!(this.apiKey&&t.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(t){const n=nf([t.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return nf([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return nf([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(t){return Object.entries(t).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new _a(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${bu}`}defaultIdempotencyKey(){return`stainless-node-retry-${cz()}`}makeStatusError(t,n,r,i){return vi.generate(t,n,r,i)}buildURL(t,n,r){const i=!this.baseURLOverridden()&&r||this.baseURL,a=dz(t)?new URL(t):new URL(i+(i.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),l=this.defaultQuery();return pz(l)||(n=Object.assign(Object.assign({},l),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(a.search=this.stringifyQuery(n)),a.toString()}async prepareOptions(t){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!t.path.startsWith(`/${this.apiVersion}/projects/`)){const n=t.path.slice(this.apiVersion.length+1);t.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(t,{url:n,options:r}){}get(t,n){return this.methodRequest("get",t,n)}post(t,n){return this.methodRequest("post",t,n)}patch(t,n){return this.methodRequest("patch",t,n)}put(t,n){return this.methodRequest("put",t,n)}delete(t,n){return this.methodRequest("delete",t,n)}methodRequest(t,n,r){return this.request(Promise.resolve(r).then(i=>Object.assign({method:t,path:n},i)))}request(t,n=null){return new yw(this,this.makeRequest(t,n,void 0))}async makeRequest(t,n,r){var i,a,l;const f=await t,h=(i=f.maxRetries)!==null&&i!==void 0?i:this.maxRetries;n==null&&(n=h),await this.prepareOptions(f);const{req:u,url:g,timeout:y}=await this.buildRequest(f,{retryCount:h-n});await this.prepareRequest(u,{url:g,options:f});const E="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),C=r===void 0?"":`, retryOf: ${r}`,I=Date.now();if(xi(this).debug(`[${E}] sending request`,ec({retryOfRequestLogID:r,method:f.method,url:g,options:f,headers:u.headers})),!((a=f.signal)===null||a===void 0)&&a.aborted)throw new Bv;const M=new AbortController,O=await this.fetchWithTimeout(g,u,y,M).catch(Lv),j=Date.now();if(O instanceof globalThis.Error){const L=`retrying, ${n} attempts remaining`;if(!((l=f.signal)===null||l===void 0)&&l.aborted)throw new Bv;const G=jv(O)||/timed? ?out/i.test(String(O)+("cause"in O?String(O.cause):""));if(n)return xi(this).info(`[${E}] connection ${G?"timed out":"failed"} - ${L}`),xi(this).debug(`[${E}] connection ${G?"timed out":"failed"} (${L})`,ec({retryOfRequestLogID:r,url:g,durationMs:j-I,message:O.message})),this.retryRequest(f,n,r??E);throw xi(this).info(`[${E}] connection ${G?"timed out":"failed"} - error; no more retries left`),xi(this).debug(`[${E}] connection ${G?"timed out":"failed"} (error; no more retries left)`,ec({retryOfRequestLogID:r,url:g,durationMs:j-I,message:O.message})),G?new J3:new Im({cause:O})}const U=`[${E}${C}] ${u.method} ${g} ${O.ok?"succeeded":"failed"} with status ${O.status} in ${j-I}ms`;if(!O.ok){const L=await this.shouldRetry(O);if(n&&L){const W=`retrying, ${n} attempts remaining`;return await Cz(O.body),xi(this).info(`${U} - ${W}`),xi(this).debug(`[${E}] response error (${W})`,ec({retryOfRequestLogID:r,url:O.url,status:O.status,headers:O.headers,durationMs:j-I})),this.retryRequest(f,n,r??E,O.headers)}const G=L?"error; no more retries left":"error; not retryable";xi(this).info(`${U} - ${G}`);const V=await O.text().catch(W=>Lv(W).message),z=xz(V),B=z?void 0:V;throw xi(this).debug(`[${E}] response error (${G})`,ec({retryOfRequestLogID:r,url:O.url,status:O.status,headers:O.headers,message:B,durationMs:Date.now()-I})),this.makeStatusError(O.status,z,B,O.headers)}return xi(this).info(U),xi(this).debug(`[${E}] response start`,ec({retryOfRequestLogID:r,url:O.url,status:O.status,headers:O.headers,durationMs:j-I})),{response:O,options:f,controller:M,requestLogID:E,retryOfRequestLogID:r,startTime:I}}async fetchWithTimeout(t,n,r,i){const a=n||{},{signal:l,method:f}=a,h=bp(a,["signal","method"]);l&&l.addEventListener("abort",()=>i.abort());const u=setTimeout(()=>i.abort(),r),g=globalThis.ReadableStream&&h.body instanceof globalThis.ReadableStream||typeof h.body=="object"&&h.body!==null&&Symbol.asyncIterator in h.body,y=Object.assign(Object.assign(Object.assign({signal:i.signal},g?{duplex:"half"}:{}),{method:"GET"}),h);f&&(y.method=f.toUpperCase());try{return await this.fetch.call(void 0,t,y)}finally{clearTimeout(u)}}async shouldRetry(t){const n=t.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,n,r,i){var a;let l;const f=i==null?void 0:i.get("retry-after-ms");if(f){const u=parseFloat(f);Number.isNaN(u)||(l=u)}const h=i==null?void 0:i.get("retry-after");if(h&&!l){const u=parseFloat(h);Number.isNaN(u)?l=Date.parse(h)-Date.now():l=u*1e3}if(!(l&&0<=l&&l<60*1e3)){const u=(a=t.maxRetries)!==null&&a!==void 0?a:this.maxRetries;l=this.calculateDefaultRetryTimeoutMillis(n,u)}return await yz(l),this.makeRequest(t,n-1,r)}calculateDefaultRetryTimeoutMillis(t,n){const a=n-t,l=Math.min(.5*Math.pow(2,a),8),f=1-Math.random()*.25;return l*f*1e3}async buildRequest(t,{retryCount:n=0}={}){var r,i,a;const l=Object.assign({},t),{method:f,path:h,query:u,defaultBaseURL:g}=l,y=this.buildURL(h,u,g);"timeout"in l&&gz("timeout",l.timeout),l.timeout=(r=l.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:E,body:C}=this.buildBody({options:l}),I=await this.buildHeaders({options:t,method:f,bodyHeaders:E,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:f,headers:I},l.signal&&{signal:l.signal}),globalThis.ReadableStream&&C instanceof globalThis.ReadableStream&&{duplex:"half"}),C&&{body:C}),(i=this.fetchOptions)!==null&&i!==void 0?i:{}),(a=l.fetchOptions)!==null&&a!==void 0?a:{}),url:y,timeout:l.timeout}}async buildHeaders({options:t,method:n,bodyHeaders:r,retryCount:i}){let a={};this.idempotencyHeader&&n!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=t.idempotencyKey);const l=await this.authHeaders(t);let f=nf([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),Ez()),this._options.defaultHeaders,r,t.headers,l]);return this.validateHeaders(f),f.values}buildBody({options:{body:t,headers:n}}){if(!t)return{bodyHeaders:void 0,body:void 0};const r=nf([n]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&r.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:Az(t)}:this.encoder({body:t,headers:r})}}Mm.DEFAULT_TIMEOUT=6e4;class $r extends Mm{constructor(){super(...arguments),this.interactions=new hD(this)}}mD=$r;$r.GeminiNextGenAPIClient=mD;$r.GeminiNextGenAPIClientError=_a;$r.APIError=vi;$r.APIConnectionError=Im;$r.APIConnectionTimeoutError=J3;$r.APIUserAbortError=Bv;$r.NotFoundError=tD;$r.ConflictError=nD;$r.RateLimitError=iD;$r.BadRequestError=Z3;$r.AuthenticationError=Q3;$r.InternalServerError=aD;$r.PermissionDeniedError=eD;$r.UnprocessableEntityError=rD;$r.toFile=Mz;$r.Interactions=hD;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Vz(e,t){const n={},r=A(e,["name"]);return r!=null&&_(n,["_url","name"],r),n}function qz(e,t){const n={},r=A(e,["name"]);return r!=null&&_(n,["_url","name"],r),n}function $z(e,t){const n={},r=A(e,["sdkHttpResponse"]);return r!=null&&_(n,["sdkHttpResponse"],r),n}function Yz(e,t){const n={},r=A(e,["sdkHttpResponse"]);return r!=null&&_(n,["sdkHttpResponse"],r),n}function Wz(e,t,n){const r={};if(A(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=A(e,["tunedModelDisplayName"]);if(t!==void 0&&i!=null&&_(t,["displayName"],i),A(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=A(e,["epochCount"]);t!==void 0&&a!=null&&_(t,["tuningTask","hyperparameters","epochCount"],a);const l=A(e,["learningRateMultiplier"]);if(l!=null&&_(r,["tuningTask","hyperparameters","learningRateMultiplier"],l),A(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(A(e,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(A(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const f=A(e,["batchSize"]);t!==void 0&&f!=null&&_(t,["tuningTask","hyperparameters","batchSize"],f);const h=A(e,["learningRate"]);if(t!==void 0&&h!=null&&_(t,["tuningTask","hyperparameters","learningRate"],h),A(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(A(e,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function Kz(e,t,n){const r={};let i=A(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const C=A(e,["validationDataset"]);t!==void 0&&C!=null&&_(t,["supervisedTuningSpec"],b_(C))}else if(i==="PREFERENCE_TUNING"){const C=A(e,["validationDataset"]);t!==void 0&&C!=null&&_(t,["preferenceOptimizationSpec"],b_(C))}const a=A(e,["tunedModelDisplayName"]);t!==void 0&&a!=null&&_(t,["tunedModelDisplayName"],a);const l=A(e,["description"]);t!==void 0&&l!=null&&_(t,["description"],l);let f=A(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const C=A(e,["epochCount"]);t!==void 0&&C!=null&&_(t,["supervisedTuningSpec","hyperParameters","epochCount"],C)}else if(f==="PREFERENCE_TUNING"){const C=A(e,["epochCount"]);t!==void 0&&C!=null&&_(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],C)}let h=A(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const C=A(e,["learningRateMultiplier"]);t!==void 0&&C!=null&&_(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],C)}else if(h==="PREFERENCE_TUNING"){const C=A(e,["learningRateMultiplier"]);t!==void 0&&C!=null&&_(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],C)}let u=A(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const C=A(e,["exportLastCheckpointOnly"]);t!==void 0&&C!=null&&_(t,["supervisedTuningSpec","exportLastCheckpointOnly"],C)}else if(u==="PREFERENCE_TUNING"){const C=A(e,["exportLastCheckpointOnly"]);t!==void 0&&C!=null&&_(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],C)}let g=A(n,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const C=A(e,["adapterSize"]);t!==void 0&&C!=null&&_(t,["supervisedTuningSpec","hyperParameters","adapterSize"],C)}else if(g==="PREFERENCE_TUNING"){const C=A(e,["adapterSize"]);t!==void 0&&C!=null&&_(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],C)}if(A(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(A(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const y=A(e,["labels"]);t!==void 0&&y!=null&&_(t,["labels"],y);const E=A(e,["beta"]);return t!==void 0&&E!=null&&_(t,["preferenceOptimizationSpec","hyperParameters","beta"],E),r}function Xz(e,t){const n={},r=A(e,["baseModel"]);r!=null&&_(n,["baseModel"],r);const i=A(e,["preTunedModel"]);i!=null&&_(n,["preTunedModel"],i);const a=A(e,["trainingDataset"]);a!=null&&oG(a);const l=A(e,["config"]);return l!=null&&Wz(l,n),n}function Jz(e,t){const n={},r=A(e,["baseModel"]);r!=null&&_(n,["baseModel"],r);const i=A(e,["preTunedModel"]);i!=null&&_(n,["preTunedModel"],i);const a=A(e,["trainingDataset"]);a!=null&&lG(a,n,t);const l=A(e,["config"]);return l!=null&&Kz(l,n,t),n}function Zz(e,t){const n={},r=A(e,["name"]);return r!=null&&_(n,["_url","name"],r),n}function Qz(e,t){const n={},r=A(e,["name"]);return r!=null&&_(n,["_url","name"],r),n}function eG(e,t,n){const r={},i=A(e,["pageSize"]);t!==void 0&&i!=null&&_(t,["_query","pageSize"],i);const a=A(e,["pageToken"]);t!==void 0&&a!=null&&_(t,["_query","pageToken"],a);const l=A(e,["filter"]);return t!==void 0&&l!=null&&_(t,["_query","filter"],l),r}function tG(e,t,n){const r={},i=A(e,["pageSize"]);t!==void 0&&i!=null&&_(t,["_query","pageSize"],i);const a=A(e,["pageToken"]);t!==void 0&&a!=null&&_(t,["_query","pageToken"],a);const l=A(e,["filter"]);return t!==void 0&&l!=null&&_(t,["_query","filter"],l),r}function nG(e,t){const n={},r=A(e,["config"]);return r!=null&&eG(r,n),n}function rG(e,t){const n={},r=A(e,["config"]);return r!=null&&tG(r,n),n}function iG(e,t){const n={},r=A(e,["sdkHttpResponse"]);r!=null&&_(n,["sdkHttpResponse"],r);const i=A(e,["nextPageToken"]);i!=null&&_(n,["nextPageToken"],i);const a=A(e,["tunedModels"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(f=>gD(f))),_(n,["tuningJobs"],l)}return n}function aG(e,t){const n={},r=A(e,["sdkHttpResponse"]);r!=null&&_(n,["sdkHttpResponse"],r);const i=A(e,["nextPageToken"]);i!=null&&_(n,["nextPageToken"],i);const a=A(e,["tuningJobs"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(f=>Hv(f))),_(n,["tuningJobs"],l)}return n}function sG(e,t){const n={},r=A(e,["name"]);r!=null&&_(n,["model"],r);const i=A(e,["name"]);return i!=null&&_(n,["endpoint"],i),n}function oG(e,t){const n={};if(A(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(A(e,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=A(e,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>a)),_(n,["examples","examples"],i)}return n}function lG(e,t,n){const r={};let i=A(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const l=A(e,["gcsUri"]);t!==void 0&&l!=null&&_(t,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(i==="PREFERENCE_TUNING"){const l=A(e,["gcsUri"]);t!==void 0&&l!=null&&_(t,["preferenceOptimizationSpec","trainingDatasetUri"],l)}let a=A(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const l=A(e,["vertexDatasetResource"]);t!==void 0&&l!=null&&_(t,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(a==="PREFERENCE_TUNING"){const l=A(e,["vertexDatasetResource"]);t!==void 0&&l!=null&&_(t,["preferenceOptimizationSpec","trainingDatasetUri"],l)}if(A(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function gD(e,t){const n={},r=A(e,["sdkHttpResponse"]);r!=null&&_(n,["sdkHttpResponse"],r);const i=A(e,["name"]);i!=null&&_(n,["name"],i);const a=A(e,["state"]);a!=null&&_(n,["state"],O3(a));const l=A(e,["createTime"]);l!=null&&_(n,["createTime"],l);const f=A(e,["tuningTask","startTime"]);f!=null&&_(n,["startTime"],f);const h=A(e,["tuningTask","completeTime"]);h!=null&&_(n,["endTime"],h);const u=A(e,["updateTime"]);u!=null&&_(n,["updateTime"],u);const g=A(e,["description"]);g!=null&&_(n,["description"],g);const y=A(e,["baseModel"]);y!=null&&_(n,["baseModel"],y);const E=A(e,["_self"]);return E!=null&&_(n,["tunedModel"],sG(E)),n}function Hv(e,t){const n={},r=A(e,["sdkHttpResponse"]);r!=null&&_(n,["sdkHttpResponse"],r);const i=A(e,["name"]);i!=null&&_(n,["name"],i);const a=A(e,["state"]);a!=null&&_(n,["state"],O3(a));const l=A(e,["createTime"]);l!=null&&_(n,["createTime"],l);const f=A(e,["startTime"]);f!=null&&_(n,["startTime"],f);const h=A(e,["endTime"]);h!=null&&_(n,["endTime"],h);const u=A(e,["updateTime"]);u!=null&&_(n,["updateTime"],u);const g=A(e,["error"]);g!=null&&_(n,["error"],g);const y=A(e,["description"]);y!=null&&_(n,["description"],y);const E=A(e,["baseModel"]);E!=null&&_(n,["baseModel"],E);const C=A(e,["tunedModel"]);C!=null&&_(n,["tunedModel"],C);const I=A(e,["preTunedModel"]);I!=null&&_(n,["preTunedModel"],I);const M=A(e,["supervisedTuningSpec"]);M!=null&&_(n,["supervisedTuningSpec"],M);const O=A(e,["preferenceOptimizationSpec"]);O!=null&&_(n,["preferenceOptimizationSpec"],O);const j=A(e,["tuningDataStats"]);j!=null&&_(n,["tuningDataStats"],j);const U=A(e,["encryptionSpec"]);U!=null&&_(n,["encryptionSpec"],U);const L=A(e,["partnerModelTuningSpec"]);L!=null&&_(n,["partnerModelTuningSpec"],L);const G=A(e,["customBaseModel"]);G!=null&&_(n,["customBaseModel"],G);const V=A(e,["experiment"]);V!=null&&_(n,["experiment"],V);const z=A(e,["labels"]);z!=null&&_(n,["labels"],z);const B=A(e,["outputUri"]);B!=null&&_(n,["outputUri"],B);const J=A(e,["pipelineJob"]);J!=null&&_(n,["pipelineJob"],J);const W=A(e,["serviceAccount"]);W!=null&&_(n,["serviceAccount"],W);const Z=A(e,["tunedModelDisplayName"]);Z!=null&&_(n,["tunedModelDisplayName"],Z);const te=A(e,["veoTuningSpec"]);return te!=null&&_(n,["veoTuningSpec"],te),n}function cG(e,t){const n={},r=A(e,["sdkHttpResponse"]);r!=null&&_(n,["sdkHttpResponse"],r);const i=A(e,["name"]);i!=null&&_(n,["name"],i);const a=A(e,["metadata"]);a!=null&&_(n,["metadata"],a);const l=A(e,["done"]);l!=null&&_(n,["done"],l);const f=A(e,["error"]);return f!=null&&_(n,["error"],f),n}function b_(e,t){const n={},r=A(e,["gcsUri"]);r!=null&&_(n,["validationDatasetUri"],r);const i=A(e,["vertexDatasetResource"]);return i!=null&&_(n,["validationDatasetUri"],i),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uG extends go{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Cc(oo.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},n),{preTunedModel:i});return a.baseModel=void 0,await this.tuneInternal(a)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),a=await this.tuneMldevInternal(i);let l="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?l=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(l=a.name.split("/operations/")[0]),{name:l,state:Iv.JOB_STATE_QUEUED}}}}async getInternal(t){var n,r,i,a;let l,f="",h={};if(this.apiClient.isVertexAI()){const u=Qz(t);return f=Xe("{name}",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),l.then(g=>Hv(g))}else{const u=Zz(t);return f=Xe("{name}",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),l.then(g=>gD(g))}}async listInternal(t){var n,r,i,a;let l,f="",h={};if(this.apiClient.isVertexAI()){const u=rG(t);return f=Xe("tuningJobs",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),l.then(g=>{const y=aG(g),E=new $N;return Object.assign(E,y),E})}else{const u=nG(t);return f=Xe("tunedModels",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),l.then(g=>{const y=iG(g),E=new $N;return Object.assign(E,y),E})}}async cancel(t){var n,r,i,a;let l,f="",h={};if(this.apiClient.isVertexAI()){const u=qz(t);return f=Xe("{name}:cancel",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),l.then(g=>{const y=Yz(g),E=new YN;return Object.assign(E,y),E})}else{const u=Vz(t);return f=Xe("{name}:cancel",u._url),h=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(y=>{const E=y;return E.sdkHttpResponse={headers:g.headers},E})),l.then(g=>{const y=$z(g),E=new YN;return Object.assign(E,y),E})}}async tuneInternal(t){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI()){const f=Jz(t,t);return a=Xe("tuningJobs",f._url),l=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(u=>{const g=u;return g.sdkHttpResponse={headers:h.headers},g})),i.then(h=>Hv(h))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var n,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Xz(t);return a=Xe("tunedModels",f._url),l=f._query,delete f._url,delete f._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(u=>{const g=u;return g.sdkHttpResponse={headers:h.headers},g})),i.then(h=>cG(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dG{async download(t,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const fG=1024*1024*8,hG=3,pG=1e3,mG=2,Ep="x-goog-upload-status";async function gG(e,t,n){var r;const i=await xD(e,t,n),a=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[Ep])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function xG(e,t,n){var r;const i=await xD(e,t,n),a=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[Ep])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const l=N3(a),f=new dw;return Object.assign(f,l),f}async function xD(e,t,n){var r,i;let a=0,l=0,f=new Rv(new Response),h="upload";for(a=e.size;l<a;){const u=Math.min(fG,a-l),g=e.slice(l,l+u);l+u>=a&&(h+=", finalize");let y=0,E=pG;for(;y<hG&&(f=await n.request({path:"",body:g,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":h,"X-Goog-Upload-Offset":String(l),"Content-Length":String(u)}}}),!(!((r=f==null?void 0:f.headers)===null||r===void 0)&&r[Ep]));)y++,await vG(E),E=E*mG;if(l+=u,((i=f==null?void 0:f.headers)===null||i===void 0?void 0:i[Ep])!=="active")break;if(a<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return f}async function yG(e){return{size:e.size,type:e.type}}function vG(e){return new Promise(t=>setTimeout(t,e))}class bG{async upload(t,n,r){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await gG(t,n,r)}async uploadToFileSearchStore(t,n,r){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await xG(t,n,r)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await yG(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wG{create(t,n,r){return new EG(t,n,r)}}class EG{constructor(t,n,r){this.url=t,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const w_="x-goog-api-key";class SG{constructor(t){this.apiKey=t}async addAuthHeaders(t,n){if(t.get(w_)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(w_,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const AG="gl-node/";class CG{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const t=this.httpOptions;t!=null&&t.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new $r({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:t==null?void 0:t.timeout});return this._interactions=n.interactions,this._interactions}constructor(t){var n;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=t.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=t.apiKey;const r=yB(t.httpOptions,t.vertexai,void 0,void 0);r&&(t.httpOptions?t.httpOptions.baseUrl=r:t.httpOptions={baseUrl:r}),this.apiVersion=t.apiVersion,this.httpOptions=t.httpOptions;const i=new SG(this.apiKey);this.apiClient=new yH({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:AG+"web",uploader:new bG,downloader:new dG}),this.models=new LH(this.apiClient),this.live=new MH(this.apiClient,i,new wG),this.batches=new YU(this.apiClient),this.chats=new T9(this.models,this.apiClient),this.caches=new C9(this.apiClient),this.files=new B9(this.apiClient),this.operations=new BH(this.apiClient),this.authTokens=new ez(this.apiClient),this.tunings=new uG(this.apiClient),this.fileSearchStores=new lz(this.apiClient)}}function Om(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function NG(e,t,n,r){function i(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function f(g){try{u(r.next(g))}catch(y){l(y)}}function h(g){try{u(r.throw(g))}catch(y){l(y)}}function u(g){g.done?a(g.value):i(g.value).then(f,h)}u((r=r.apply(e,t||[])).next())})}const _G=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class vw extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class TG extends vw{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class E_ extends vw{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class S_ extends vw{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var zv;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(zv||(zv={}));class IG{constructor(t,{headers:n={},customFetch:r,region:i=zv.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=_G(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return NG(this,arguments,void 0,function*(n,r={}){var i;let a,l;try{const{headers:f,method:h,body:u,signal:g,timeout:y}=r;let E={},{region:C}=r;C||(C=this.region);const I=new URL(`${this.url}/${n}`);C&&C!=="any"&&(E["x-region"]=C,I.searchParams.set("forceFunctionRegion",C));let M;u&&(f&&!Object.prototype.hasOwnProperty.call(f,"Content-Type")||!f)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(E["Content-Type"]="application/octet-stream",M=u):typeof u=="string"?(E["Content-Type"]="text/plain",M=u):typeof FormData<"u"&&u instanceof FormData?M=u:(E["Content-Type"]="application/json",M=JSON.stringify(u)):u&&typeof u!="string"&&!(typeof Blob<"u"&&u instanceof Blob)&&!(u instanceof ArrayBuffer)&&!(typeof FormData<"u"&&u instanceof FormData)?M=JSON.stringify(u):M=u;let O=g;y&&(l=new AbortController,a=setTimeout(()=>l.abort(),y),g?(O=l.signal,g.addEventListener("abort",()=>l.abort())):O=l.signal);const j=yield this.fetch(I.toString(),{method:h||"POST",headers:Object.assign(Object.assign(Object.assign({},E),this.headers),f),body:M,signal:O}).catch(V=>{throw new TG(V)}),U=j.headers.get("x-relay-error");if(U&&U==="true")throw new E_(j);if(!j.ok)throw new S_(j);let L=((i=j.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),G;return L==="application/json"?G=yield j.json():L==="application/octet-stream"||L==="application/pdf"?G=yield j.blob():L==="text/event-stream"?G=j:L==="multipart/form-data"?G=yield j.formData():G=yield j.text(),{data:G,error:null,response:j}}catch(f){return{data:null,error:f,response:f instanceof S_||f instanceof E_?f.context:void 0}}finally{a&&clearTimeout(a)}})}}var RG=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},MG=class{constructor(e){var t,n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,this.urlLengthLimit=(r=e.urlLengthLimit)!==null&&r!==void 0?r:8e3,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{let l=null,f=null,h=null,u=a.status,g=a.statusText;if(a.ok){var y,E;if(n.method!=="HEAD"){var C;const j=await a.text();j===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((C=n.headers.get("Accept"))===null||C===void 0)&&C.includes("application/vnd.pgrst.plan+text"))?f=j:f=JSON.parse(j))}const M=(y=n.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),O=(E=a.headers.get("content-range"))===null||E===void 0?void 0:E.split("/");M&&O&&O.length>1&&(h=parseInt(O[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(f)&&(f.length>1?(l={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,h=null,u=406,g="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{var I;const M=await a.text();try{l=JSON.parse(M),Array.isArray(l)&&a.status===404&&(f=[],l=null,u=200,g="OK")}catch{a.status===404&&M===""?(u=204,g="No Content"):l={message:M}}if(l&&n.isMaybeSingle&&(!(l==null||(I=l.details)===null||I===void 0)&&I.includes("0 rows"))&&(l=null,u=200,g="OK"),l&&n.shouldThrowOnError)throw new RG(l)}return{error:l,data:f,count:h,status:u,statusText:g}});return this.shouldThrowOnError||(i=i.catch(a=>{var l;let f="",h="",u="";const g=a==null?void 0:a.cause;if(g){var y,E,C,I;const j=(y=g==null?void 0:g.message)!==null&&y!==void 0?y:"",U=(E=g==null?void 0:g.code)!==null&&E!==void 0?E:"";f=`${(C=a==null?void 0:a.name)!==null&&C!==void 0?C:"FetchError"}: ${a==null?void 0:a.message}`,f+=`

Caused by: ${(I=g==null?void 0:g.name)!==null&&I!==void 0?I:"Error"}: ${j}`,U&&(f+=` (${U})`),g!=null&&g.stack&&(f+=`
${g.stack}`)}else{var M;f=(M=a==null?void 0:a.stack)!==null&&M!==void 0?M:""}const O=this.url.toString().length;return(a==null?void 0:a.name)==="AbortError"||(a==null?void 0:a.code)==="ABORT_ERR"?(u="",h="Request was aborted (timeout or manual cancellation)",O>this.urlLengthLimit&&(h+=`. Note: Your request URL is ${O} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((g==null?void 0:g.name)==="HeadersOverflowError"||(g==null?void 0:g.code)==="UND_ERR_HEADERS_OVERFLOW")&&(u="",h="HTTP headers exceeded server limits (typically 16KB)",O>this.urlLengthLimit&&(h+=`. Your request URL is ${O} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(l=a==null?void 0:a.name)!==null&&l!==void 0?l:"FetchError"}: ${a==null?void 0:a.message}`,details:f,hint:h,code:u},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}returns(){return this}overrideTypes(){return this}},OG=class extends MG{select(e){let t=!1;const n=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const a=i?`${i}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:a="text"}={}){var l;const f=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),h=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${h}"; options=${f};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const A_=new RegExp("[,()]");var wu=class extends OG{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&A_.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}notIn(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&A_.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`not.in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const a=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}},DG=class{constructor(e,{headers:t={},schema:n,fetch:r,urlLengthLimit:i=8e3}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=r,this.urlLengthLimit=i}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:n=!1,count:r}=t??{},i=n?"HEAD":"GET";let a=!1;const l=(e??"*").split("").map(u=>/\s/.test(u)&&!a?"":(u==='"'&&(a=!a),u)).join(""),{url:f,headers:h}=this.cloneRequestState();return f.searchParams.set("select",l),r&&h.append("Prefer",`count=${r}`),new wu({method:i,url:f,headers:h,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(e,{count:t,defaultToNull:n=!0}={}){var r;const i="POST",{url:a,headers:l}=this.cloneRequestState();if(t&&l.append("Prefer",`count=${t}`),n||l.append("Prefer","missing=default"),Array.isArray(e)){const f=e.reduce((h,u)=>h.concat(Object.keys(u)),[]);if(f.length>0){const h=[...new Set(f)].map(u=>`"${u}"`);a.searchParams.set("columns",h.join(","))}}return new wu({method:i,url:a,headers:l,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){var a;const l="POST",{url:f,headers:h}=this.cloneRequestState();if(h.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),t!==void 0&&f.searchParams.set("on_conflict",t),r&&h.append("Prefer",`count=${r}`),i||h.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((g,y)=>g.concat(Object.keys(y)),[]);if(u.length>0){const g=[...new Set(u)].map(y=>`"${y}"`);f.searchParams.set("columns",g.join(","))}}return new wu({method:l,url:f,headers:h,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch,urlLengthLimit:this.urlLengthLimit})}update(e,{count:t}={}){var n;const r="PATCH",{url:i,headers:a}=this.cloneRequestState();return t&&a.append("Prefer",`count=${t}`),new wu({method:r,url:i,headers:a,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:e}={}){var t;const n="DELETE",{url:r,headers:i}=this.cloneRequestState();return e&&i.append("Prefer",`count=${e}`),new wu({method:n,url:r,headers:i,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch,urlLengthLimit:this.urlLengthLimit})}};function Ef(e){"@babel/helpers - typeof";return Ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ef(e)}function kG(e,t){if(Ef(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Ef(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function PG(e){var t=kG(e,"string");return Ef(t)=="symbol"?t:t+""}function jG(e,t,n){return(t=PG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function j0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?C_(Object(n),!0).forEach(function(r){jG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var LG=class yD{constructor(t,{headers:n={},schema:r,fetch:i,timeout:a,urlLengthLimit:l=8e3}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.urlLengthLimit=l;const f=i??globalThis.fetch;a!==void 0&&a>0?this.fetch=(h,u)=>{const g=new AbortController,y=setTimeout(()=>g.abort(),a),E=u==null?void 0:u.signal;if(E){if(E.aborted)return clearTimeout(y),f(h,u);const C=()=>{clearTimeout(y),g.abort()};return E.addEventListener("abort",C,{once:!0}),f(h,j0(j0({},u),{},{signal:g.signal})).finally(()=>{clearTimeout(y),E.removeEventListener("abort",C)})}return f(h,j0(j0({},u),{},{signal:g.signal})).finally(()=>clearTimeout(y))}:this.fetch=f}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new DG(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(t){return new yD(this.url,{headers:this.headers,schema:t,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(t,n={},{head:r=!1,get:i=!1,count:a}={}){var l;let f;const h=new URL(`${this.url}/rpc/${t}`);let u;const g=C=>C!==null&&typeof C=="object"&&(!Array.isArray(C)||C.some(g)),y=r&&Object.values(n).some(g);y?(f="POST",u=n):r||i?(f=r?"HEAD":"GET",Object.entries(n).filter(([C,I])=>I!==void 0).map(([C,I])=>[C,Array.isArray(I)?`{${I.join(",")}}`:`${I}`]).forEach(([C,I])=>{h.searchParams.append(C,I)})):(f="POST",u=n);const E=new Headers(this.headers);return y?E.set("Prefer",a?`count=${a},return=minimal`:"return=minimal"):a&&E.set("Prefer",`count=${a}`),new wu({method:f,url:h,headers:E,schema:this.schemaName,body:u,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch,urlLengthLimit:this.urlLengthLimit})}};class BG{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const r=n.versions;if(r&&r.node){const i=r.node,a=parseInt(i.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const UG="2.95.3",FG=`realtime-js/${UG}`,HG="1.0.0",vD="2.0.0",N_=vD,Gv=1e4,zG=1e3,GG=100;var ul;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(ul||(ul={}));var Mr;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Mr||(Mr={}));var Va;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Va||(Va={}));var Vv;(function(e){e.websocket="websocket"})(Vv||(Vv={}));var ac;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(ac||(ac={}));class VG{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let r=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,r;const i=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(t){var n,r;const i=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},l=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,l)}_encodeUserBroadcastPush(t,n,r){var i,a;const l=t.topic,f=(i=t.ref)!==null&&i!==void 0?i:"",h=(a=t.join_ref)!==null&&a!==void 0?a:"",u=t.payload.event,g=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},y=Object.keys(g).length===0?"":JSON.stringify(g);if(h.length>255)throw new Error(`joinRef length ${h.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`ref length ${f.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`topic length ${l.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(y.length>255)throw new Error(`metadata length ${y.length} exceeds maximum of 255`);const E=this.USER_BROADCAST_PUSH_META_LENGTH+h.length+f.length+l.length+u.length+y.length,C=new ArrayBuffer(this.HEADER_LENGTH+E);let I=new DataView(C),M=0;I.setUint8(M++,this.KINDS.userBroadcastPush),I.setUint8(M++,h.length),I.setUint8(M++,f.length),I.setUint8(M++,l.length),I.setUint8(M++,u.length),I.setUint8(M++,y.length),I.setUint8(M++,n),Array.from(h,j=>I.setUint8(M++,j.charCodeAt(0))),Array.from(f,j=>I.setUint8(M++,j.charCodeAt(0))),Array.from(l,j=>I.setUint8(M++,j.charCodeAt(0))),Array.from(u,j=>I.setUint8(M++,j.charCodeAt(0))),Array.from(y,j=>I.setUint8(M++,j.charCodeAt(0)));var O=new Uint8Array(C.byteLength+r.byteLength);return O.set(new Uint8Array(C),0),O.set(new Uint8Array(r),C.byteLength),O.buffer}decode(t,n){if(this._isArrayBuffer(t)){let r=this._binaryDecode(t);return n(r)}if(typeof t=="string"){const r=JSON.parse(t),[i,a,l,f,h]=r;return n({join_ref:i,ref:a,topic:l,event:f,payload:h})}return n({})}_binaryDecode(t){const n=new DataView(t),r=n.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,i)}}_decodeUserBroadcast(t,n,r){const i=n.getUint8(1),a=n.getUint8(2),l=n.getUint8(3),f=n.getUint8(4);let h=this.HEADER_LENGTH+4;const u=r.decode(t.slice(h,h+i));h=h+i;const g=r.decode(t.slice(h,h+a));h=h+a;const y=r.decode(t.slice(h,h+l));h=h+l;const E=t.slice(h,t.byteLength),C=f===this.JSON_ENCODING?JSON.parse(r.decode(E)):E,I={type:this.BROADCAST_EVENT,event:g,payload:C};return l>0&&(I.meta=JSON.parse(y)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:I}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t==null?void 0:t.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([r])=>n.includes(r)))}}class bD{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var In;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(In||(In={}));const __=(e,t,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((a,l)=>(a[l]=qG(l,e,t,i),a),{}):{}},qG=(e,t,n,r)=>{const i=t.find(f=>f.name===e),a=i==null?void 0:i.type,l=n[e];return a&&!r.includes(a)?wD(a,l):qv(l)},wD=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return KG(t,n)}switch(e){case In.bool:return $G(t);case In.float4:case In.float8:case In.int2:case In.int4:case In.int8:case In.numeric:case In.oid:return YG(t);case In.json:case In.jsonb:return WG(t);case In.timestamp:return XG(t);case In.abstime:case In.date:case In.daterange:case In.int4range:case In.int8range:case In.money:case In.reltime:case In.text:case In.time:case In.timestamptz:case In.timetz:case In.tsrange:case In.tstzrange:return qv(t);default:return qv(t)}},qv=e=>e,$G=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},YG=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},WG=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},KG=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let a;const l=e.slice(1,n);try{a=JSON.parse("["+l+"]")}catch{a=l?l.split(","):[]}return a.map(f=>wD(t,f))}return e},XG=e=>typeof e=="string"?e.replace(" ","T"):e,ED=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class ky{constructor(t,n,r={},i=Gv){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var T_;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(T_||(T_={}));class yf{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:a,onLeave:l,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=yf.syncState(this.state,i,a,l),this.pendingDiffs.forEach(h=>{this.state=yf.syncDiff(this.state,h,a,l)}),this.pendingDiffs=[],f()}),this.channel._on(r.diff,{},i=>{const{onJoin:a,onLeave:l,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=yf.syncDiff(this.state,i,a,l),f())}),this.onJoin((i,a,l)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:l})}),this.onLeave((i,a,l)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){const a=this.cloneDeep(t),l=this.transformState(n),f={},h={};return this.map(a,(u,g)=>{l[u]||(h[u]=g)}),this.map(l,(u,g)=>{const y=a[u];if(y){const E=g.map(O=>O.presence_ref),C=y.map(O=>O.presence_ref),I=g.filter(O=>C.indexOf(O.presence_ref)<0),M=y.filter(O=>E.indexOf(O.presence_ref)<0);I.length>0&&(f[u]=I),M.length>0&&(h[u]=M)}else f[u]=g}),this.syncDiff(a,{joins:f,leaves:h},r,i)}static syncDiff(t,n,r,i){const{joins:a,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(a,(f,h)=>{var u;const g=(u=t[f])!==null&&u!==void 0?u:[];if(t[f]=this.cloneDeep(h),g.length>0){const y=t[f].map(C=>C.presence_ref),E=g.filter(C=>y.indexOf(C.presence_ref)<0);t[f].unshift(...E)}r(f,g,h)}),this.map(l,(f,h)=>{let u=t[f];if(!u)return;const g=h.map(y=>y.presence_ref);u=u.filter(y=>g.indexOf(y.presence_ref)<0),t[f]=u,i(f,u,h),u.length===0&&delete t[f]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const i=t[r];return"metas"in i?n[r]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var I_;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(I_||(I_={}));var vf;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(vf||(vf={}));var Ks;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Ks||(Ks={}));class _u{constructor(t,n={config:{}},r){var i,a;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Mr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new ky(this,Va.join,this.params,this.timeout),this.rejoinTimer=new bD(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Mr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Mr.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Mr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Mr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Mr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Va.reply,{},(l,f)=>{this._trigger(this._replyEventName(f),l)}),this.presence=new yf(this),this.broadcastEndpointURL=ED(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Mr.closed){const{config:{broadcast:l,presence:f,private:h}}=this.params,u=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(C=>C.filter))!==null&&i!==void 0?i:[],g=!!this.bindings[vf.PRESENCE]&&this.bindings[vf.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,y={},E={broadcast:l,presence:Object.assign(Object.assign({},f),{enabled:g}),postgres_changes:u,private:h};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(C=>t==null?void 0:t(Ks.CHANNEL_ERROR,C)),this._onClose(()=>t==null?void 0:t(Ks.CLOSED)),this.updateJoinPayload(Object.assign({config:E},y)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:C})=>{var I;if(this.socket._isManualToken()||this.socket.setAuth(),C===void 0){t==null||t(Ks.SUBSCRIBED);return}else{const M=this.bindings.postgres_changes,O=(I=M==null?void 0:M.length)!==null&&I!==void 0?I:0,j=[];for(let U=0;U<O;U++){const L=M[U],{filter:{event:G,schema:V,table:z,filter:B}}=L,J=C&&C[U];if(J&&J.event===G&&_u.isFilterValueEqual(J.schema,V)&&_u.isFilterValueEqual(J.table,z)&&_u.isFilterValueEqual(J.filter,B))j.push(Object.assign(Object.assign({},L),{id:J.id}));else{this.unsubscribe(),this.state=Mr.errored,t==null||t(Ks.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=j,t&&t(Ks.SUBSCRIBED);return}}).receive("error",C=>{this.state=Mr.errored,t==null||t(Ks.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(C).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Ks.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===Mr.joined&&t===vf.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,n,r)}async httpSend(t,n,r={}){var i;if(n==null)return Promise.reject("Payload is required for httpSend()");const a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},f=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(f.status===202)return{success:!0};let h=f.statusText;try{const u=await f.json();h=u.error||u.message||h}catch{}return Promise.reject(new Error(h))}async send(t,n={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:l}=t,f={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(f.Authorization=`Bearer ${this.socket.accessTokenValue}`);const h={method:"POST",headers:f,body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:l,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var l,f,h;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((h=(f=(l=this.params)===null||l===void 0?void 0:l.config)===null||f===void 0?void 0:f.broadcast)===null||h===void 0)&&h.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Mr.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Va.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new ky(this,Va.leave,{},t),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Mr.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const i=new AbortController,a=setTimeout(()=>i.abort(),r),l=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(a),l}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new ky(this,t,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>GG){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,a;const l=t.toLocaleLowerCase(),{close:f,error:h,leave:u,join:g}=Va;if(r&&[f,h,u,g].indexOf(l)>=0&&r!==this._joinRef())return;let E=this._onMessage(l,n,r);if(n&&!E)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(C=>{var I,M,O;return((I=C.filter)===null||I===void 0?void 0:I.event)==="*"||((O=(M=C.filter)===null||M===void 0?void 0:M.event)===null||O===void 0?void 0:O.toLocaleLowerCase())===l}).map(C=>C.callback(E,r)):(a=this.bindings[l])===null||a===void 0||a.filter(C=>{var I,M,O,j,U,L;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in C){const G=C.id,V=(I=C.filter)===null||I===void 0?void 0:I.event;return G&&((M=n.ids)===null||M===void 0?void 0:M.includes(G))&&(V==="*"||(V==null?void 0:V.toLocaleLowerCase())===((O=n.data)===null||O===void 0?void 0:O.type.toLocaleLowerCase()))}else{const G=(U=(j=C==null?void 0:C.filter)===null||j===void 0?void 0:j.event)===null||U===void 0?void 0:U.toLocaleLowerCase();return G==="*"||G===((L=n==null?void 0:n.event)===null||L===void 0?void 0:L.toLocaleLowerCase())}else return C.type.toLocaleLowerCase()===l}).map(C=>{if(typeof E=="object"&&"ids"in E){const I=E.data,{schema:M,table:O,commit_timestamp:j,type:U,errors:L}=I;E=Object.assign(Object.assign({},{schema:M,table:O,commit_timestamp:j,eventType:U,new:{},old:{},errors:L}),this._getPayloadRecords(I))}C.callback(E,r)})}_isClosed(){return this.state===Mr.closed}_isJoined(){return this.state===Mr.joined}_isJoining(){return this.state===Mr.joining}_isLeaving(){return this.state===Mr.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const i=t.toLocaleLowerCase(),a={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&_u.isEqual(i.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}static isFilterValueEqual(t,n){return(t??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Va.close,{},t)}_onError(t){this._on(Va.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Mr.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=__(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=__(t.columns,t.old_record)),n}}const Py=()=>{},L0={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},JG=[1e3,2e3,5e3,1e4],ZG=1e4,QG=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class eV{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Gv,this.transport=null,this.heartbeatIntervalMs=L0.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Py,this.ref=0,this.reconnectTimer=null,this.vsn=N_,this.logger=Py,this.conn=null,this.sendBuffer=[],this.serializer=new VG,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=i=>i?(...a)=>i(...a):(...a)=>fetch(...a),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Vv.websocket}`,this.httpEndpoint=ED(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=BG.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return n==="ok"&&this._remove(t),this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ul.connecting:return ac.Connecting;case ul.open:return ac.Open;case ul.closing:return ac.Closing;default:return ac.Closed}}isConnected(){return this.connectionState()===ac.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,i=this.getChannels().find(a=>a.topic===r);if(i)return i;{const a=new _u(`realtime:${t}`,n,this);return this.channels.push(a),a}}push(t){const{topic:n,event:r,payload:i,ref:a}=t,l=()=>{this.encode(t,f=>{var h;(h=this.conn)===null||h===void 0||h.send(f)})};this.log("push",`${n} ${r} (${a})`,i),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(zG,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},L0.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const u=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",u)}catch(g){this.log("error","error in heartbeat callback",g)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:i,payload:a,ref:l}=n,f=l?`(${l})`:"",h=a.status||"";this.log("receive",`${h} ${r} ${i} ${f}`.trim(),a),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(i,a,l)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===ul.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===ul.open||this.conn.readyState===ul.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(n){this.log("error","error in heartbeat callback",n)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(Va.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${r}${i}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([QG],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n,r=!1;if(t)n=t,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const a={access_token:n,version:FG};n&&i.updateJoinPayload(a),i.joinedOnce&&i._isJoined()&&i._push(Va.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new bD(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},L0.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,i,a,l,f,h,u,g,y,E,C;switch(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:Gv,this.heartbeatIntervalMs=(i=t==null?void 0:t.heartbeatIntervalMs)!==null&&i!==void 0?i:L0.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(l=t==null?void 0:t.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(f=t==null?void 0:t.heartbeatCallback)!==null&&f!==void 0?f:Py,this.vsn=(h=t==null?void 0:t.vsn)!==null&&h!==void 0?h:N_,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:(I=>JG[I-1]||ZG),this.vsn){case HG:this.encode=(g=t==null?void 0:t.encode)!==null&&g!==void 0?g:((I,M)=>M(JSON.stringify(I))),this.decode=(y=t==null?void 0:t.decode)!==null&&y!==void 0?y:((I,M)=>M(JSON.parse(I)));break;case vD:this.encode=(E=t==null?void 0:t.encode)!==null&&E!==void 0?E:this.serializer.encode.bind(this.serializer),this.decode=(C=t==null?void 0:t.decode)!==null&&C!==void 0?C:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var Sf=class extends Error{constructor(e,t){var n;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((n=t.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function tV(e,t,n){const r=new URL(t,e);if(n)for(const[i,a]of Object.entries(n))a!==void 0&&r.searchParams.set(i,a);return r.toString()}async function nV(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function rV(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:a,headers:l}){const f=tV(e.baseUrl,r,i),h=await nV(e.auth),u=await t(f,{method:n,headers:{...a?{"Content-Type":"application/json"}:{},...h,...l},body:a?JSON.stringify(a):void 0}),g=await u.text(),y=(u.headers.get("content-type")||"").includes("application/json"),E=y&&g?JSON.parse(g):g;if(!u.ok){const C=y?E:void 0,I=C==null?void 0:C.error;throw new Sf((I==null?void 0:I.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:I==null?void 0:I.type,icebergCode:I==null?void 0:I.code,details:C})}return{status:u.status,headers:u.headers,data:E}}}}function B0(e){return e.join("")}var iV=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:B0(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${B0(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${B0(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${B0(e.namespace)}`}),!0}catch(t){if(t instanceof Sf&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof Sf&&n.status===409)return;throw n}}};function cu(e){return e.join("")}var aV=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${cu(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${cu(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${cu(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${cu(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${cu(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${cu(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof Sf&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof Sf&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},sV=class{constructor(e){var r;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=rV({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(r=e.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new iV(this.client,t),this.tableOps=new aV(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},Dm=class extends Error{constructor(e,t="storage",n,r){super(e),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=r}};function km(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var U0=class extends Dm{constructor(e,t,n,r="storage"){super(e,r,t,n),this.name=r==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},SD=class extends Dm{constructor(e,t,n="storage"){super(e,n),this.name=n==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const oV=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),lV=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},$v=e=>{if(Array.isArray(e))return e.map(n=>$v(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[i]=$v(r)}),t},cV=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function Af(e){"@babel/helpers - typeof";return Af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Af(e)}function uV(e,t){if(Af(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Af(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dV(e){var t=uV(e,"string");return Af(t)=="symbol"?t:t+""}function fV(e,t,n){return(t=dV(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function vt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?R_(Object(n),!0).forEach(function(r){fV(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const M_=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},hV=async(e,t,n,r)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const i=e,a=i.status||500;if(typeof i.json=="function")i.json().then(l=>{const f=(l==null?void 0:l.statusCode)||(l==null?void 0:l.code)||a+"";t(new U0(M_(l),a,f,r))}).catch(()=>{if(r==="vectors"){const l=a+"";t(new U0(i.statusText||`HTTP ${a} error`,a,l,r))}else{const l=a+"";t(new U0(i.statusText||`HTTP ${a} error`,a,l,r))}});else{const l=a+"";t(new U0(i.statusText||`HTTP ${a} error`,a,l,r))}}else t(new SD(M_(e),e,r))},pV=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||e==="HEAD"||!r?vt(vt({},i),n):(lV(r)?(i.headers=vt({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(r)):i.body=r,t!=null&&t.duplex&&(i.duplex=t.duplex),vt(vt({},i),n))};async function rf(e,t,n,r,i,a,l){return new Promise((f,h)=>{e(n,pV(t,r,i,a)).then(u=>{if(!u.ok)throw u;if(r!=null&&r.noResolveJson)return u;if(l==="vectors"){const g=u.headers.get("content-type");if(u.headers.get("content-length")==="0"||u.status===204)return{};if(!g||!g.includes("application/json"))return{}}return u.json()}).then(u=>f(u)).catch(u=>hV(u,h,r,l))})}function AD(e="storage"){return{get:async(t,n,r,i)=>rf(t,"GET",n,r,i,void 0,e),post:async(t,n,r,i,a)=>rf(t,"POST",n,i,a,r,e),put:async(t,n,r,i,a)=>rf(t,"PUT",n,i,a,r,e),head:async(t,n,r,i)=>rf(t,"HEAD",n,vt(vt({},r),{},{noResolveJson:!0}),i,void 0,e),remove:async(t,n,r,i,a)=>rf(t,"DELETE",n,i,a,r,e)}}const mV=AD("storage"),{get:Cf,post:Ga,put:Yv,head:gV,remove:bw}=mV,Ji=AD("vectors");var Qu=class{constructor(e,t={},n,r="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=oV(n),this.namespace=r}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(e){var t=this;try{return{data:await e(),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(km(n))return{data:null,error:n};throw n}}},xV=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(km(t))return{data:null,error:t};throw t}}};let CD;CD=Symbol.toStringTag;var yV=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[CD]="BlobDownloadBuilder",this.promise=null}asStream(){return new xV(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(km(t))return{data:null,error:t};throw t}}};const vV={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},O_={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var bV=class extends Qu{constructor(e,t={},n,r){super(e,t,r,"storage"),this.bucketId=n}async uploadOrUpdate(e,t,n,r){var i=this;return i.handleOperation(async()=>{let a;const l=vt(vt({},O_),r);let f=vt(vt({},i.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const h=l.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",l.cacheControl),h&&a.append("metadata",i.encodeMetadata(h)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.has("cacheControl")||a.append("cacheControl",l.cacheControl),h&&!a.has("metadata")&&a.append("metadata",i.encodeMetadata(h))):(a=n,f["cache-control"]=`max-age=${l.cacheControl}`,f["content-type"]=l.contentType,h&&(f["x-metadata"]=i.toBase64(i.encodeMetadata(h))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!l.duplex&&(l.duplex="half")),r!=null&&r.headers&&(f=vt(vt({},f),r.headers));const u=i._removeEmptyFolders(t),g=i._getFinalPath(u),y=await(e=="PUT"?Yv:Ga)(i.fetch,`${i.url}/object/${g}`,a,vt({headers:f},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{path:u,id:y.Id,fullPath:y.Key}})}async upload(e,t,n){return this.uploadOrUpdate("POST",e,t,n)}async uploadToSignedUrl(e,t,n,r){var i=this;const a=i._removeEmptyFolders(e),l=i._getFinalPath(a),f=new URL(i.url+`/object/upload/sign/${l}`);return f.searchParams.set("token",t),i.handleOperation(async()=>{let h;const u=vt({upsert:O_.upsert},r),g=vt(vt({},i.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&n instanceof Blob?(h=new FormData,h.append("cacheControl",u.cacheControl),h.append("",n)):typeof FormData<"u"&&n instanceof FormData?(h=n,h.append("cacheControl",u.cacheControl)):(h=n,g["cache-control"]=`max-age=${u.cacheControl}`,g["content-type"]=u.contentType),{path:a,fullPath:(await Yv(i.fetch,f.toString(),h,{headers:g})).Key}})}async createSignedUploadUrl(e,t){var n=this;return n.handleOperation(async()=>{let r=n._getFinalPath(e);const i=vt({},n.headers);t!=null&&t.upsert&&(i["x-upsert"]="true");const a=await Ga(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:i}),l=new URL(n.url+a.url),f=l.searchParams.get("token");if(!f)throw new Dm("No token returned by API");return{signedUrl:l.toString(),path:e,token:f}})}async update(e,t,n){return this.uploadOrUpdate("PUT",e,t,n)}async move(e,t,n){var r=this;return r.handleOperation(async()=>await Ga(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}))}async copy(e,t,n){var r=this;return r.handleOperation(async()=>({path:(await Ga(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key}))}async createSignedUrl(e,t,n){var r=this;return r.handleOperation(async()=>{let i=r._getFinalPath(e),a=await Ga(r.fetch,`${r.url}/object/sign/${i}`,vt({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{signedUrl:encodeURI(`${r.url}${a.signedURL}${l}`)}})}async createSignedUrls(e,t,n){var r=this;return r.handleOperation(async()=>{const i=await Ga(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:t,paths:e},{headers:r.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i.map(l=>vt(vt({},l),{},{signedUrl:l.signedURL?encodeURI(`${r.url}${l.signedURL}${a}`):null}))})}download(e,t,n){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=i?`?${i}`:"",l=this._getFinalPath(e),f=()=>Cf(this.fetch,`${this.url}/${r}/${l}${a}`,{headers:this.headers,noResolveJson:!0},n);return new yV(f,this.shouldThrowOnError)}async info(e){var t=this;const n=t._getFinalPath(e);return t.handleOperation(async()=>$v(await Cf(t.fetch,`${t.url}/object/info/${n}`,{headers:t.headers})))}async exists(e){var t=this;const n=t._getFinalPath(e);try{return await gV(t.fetch,`${t.url}/object/${n}`,{headers:t.headers}),{data:!0,error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(km(r)&&r instanceof SD){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&r.push(i);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&r.push(l);let f=r.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${f}`)}}}async remove(e){var t=this;return t.handleOperation(async()=>await bw(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}))}async list(e,t,n){var r=this;return r.handleOperation(async()=>{const i=vt(vt(vt({},vV),t),{},{prefix:e||""});return await Ga(r.fetch,`${r.url}/object/list/${r.bucketId}`,i,{headers:r.headers},n)})}async listV2(e,t){var n=this;return n.handleOperation(async()=>{const r=vt({},e);return await Ga(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const wV="2.95.3",Yf={"X-Client-Info":`storage-js/${wV}`};var EV=class extends Qu{constructor(e,t={},n,r){const i=new URL(e);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase."));const a=i.href.replace(/\/$/,""),l=vt(vt({},Yf),t);super(a,l,n,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const n=t.listBucketOptionsToQueryString(e);return await Cf(t.fetch,`${t.url}/bucket${n}`,{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await Cf(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}))}async createBucket(e,t={public:!1}){var n=this;return n.handleOperation(async()=>await Ga(n.fetch,`${n.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}))}async updateBucket(e,t){var n=this;return n.handleOperation(async()=>await Yv(n.fetch,`${n.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await Ga(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await bw(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},SV=class extends Qu{constructor(e,t={},n){const r=e.replace(/\/$/,""),i=vt(vt({},Yf),t);super(r,i,n,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await Ga(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),i=r?`${t.url}/bucket?${r}`:`${t.url}/bucket`;return await Cf(t.fetch,i,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await bw(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}from(e){var t=this;if(!cV(e))throw new Dm("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new sV({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(i,a){const l=i[a];return typeof l!="function"?l:async(...f)=>{try{return{data:await l.apply(i,f),error:null}}catch(h){if(r)throw h;return{data:null,error:h}}}}})}},AV=class extends Qu{constructor(e,t={},n){const r=e.replace(/\/$/,""),i=vt(vt({},Yf),{},{"Content-Type":"application/json"},t);super(r,i,n,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await Ji.post(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{})}async getIndex(e,t){var n=this;return n.handleOperation(async()=>await Ji.post(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await Ji.post(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}))}async deleteIndex(e,t){var n=this;return n.handleOperation(async()=>await Ji.post(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers})||{})}},CV=class extends Qu{constructor(e,t={},n){const r=e.replace(/\/$/,""),i=vt(vt({},Yf),{},{"Content-Type":"application/json"},t);super(r,i,n,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Ji.post(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await Ji.post(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}))}async listVectors(e){var t=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return t.handleOperation(async()=>await Ji.post(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await Ji.post(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Ji.post(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{})}},NV=class extends Qu{constructor(e,t={},n){const r=e.replace(/\/$/,""),i=vt(vt({},Yf),{},{"Content-Type":"application/json"},t);super(r,i,n,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await Ji.post(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await Ji.post(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}))}async listBuckets(e={}){var t=this;return t.handleOperation(async()=>await Ji.post(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Ji.post(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}},_V=class extends NV{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new TV(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,n=this;return t().call(n,e)}async getBucket(e){var t=()=>super.getBucket,n=this;return t().call(n,e)}async listBuckets(e={}){var t=()=>super.listBuckets,n=this;return t().call(n,e)}async deleteBucket(e){var t=()=>super.deleteBucket,n=this;return t().call(n,e)}},TV=class extends AV{constructor(e,t,n,r){super(e,t,r),this.vectorBucketName=n}async createIndex(e){var t=()=>super.createIndex,n=this;return t().call(n,vt(vt({},e),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,n=this;return t().call(n,vt(vt({},e),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,n=this;return t().call(n,n.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,n=this;return t().call(n,n.vectorBucketName,e)}index(e){return new IV(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},IV=class extends CV{constructor(e,t,n,r,i){super(e,t,i),this.vectorBucketName=n,this.indexName=r}async putVectors(e){var t=()=>super.putVectors,n=this;return t().call(n,vt(vt({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(e){var t=()=>super.getVectors,n=this;return t().call(n,vt(vt({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,n=this;return t().call(n,vt(vt({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,n=this;return t().call(n,vt(vt({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,n=this;return t().call(n,vt(vt({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},RV=class extends EV{constructor(e,t={},n,r){super(e,t,n,r)}from(e){return new bV(this.url,this.headers,e,this.fetch)}get vectors(){return new _V(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new SV(this.url+"/iceberg",this.headers,this.fetch)}};const ND="2.95.3",Eu=30*1e3,Wv=3,jy=Wv*Eu,MV="http://localhost:9999",OV="supabase.auth.token",DV={"X-Client-Info":`gotrue-js/${ND}`},Kv="X-Supabase-Api-Version",_D={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},kV=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,PV=600*1e3;class Nf extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function ot(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class jV extends Nf{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function LV(e){return ot(e)&&e.name==="AuthApiError"}class sc extends Nf{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class yo extends Nf{constructor(t,n,r,i){super(t,r,i),this.name=n,this.status=r}}class Yi extends yo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Ly(e){return ot(e)&&e.name==="AuthSessionMissingError"}class uu extends yo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class F0 extends yo{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class H0 extends yo{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function BV(e){return ot(e)&&e.name==="AuthImplicitGrantRedirectError"}class D_ extends yo{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class UV extends yo{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Xv extends yo{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function By(e){return ot(e)&&e.name==="AuthRetryableFetchError"}class k_ extends yo{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Jv extends yo{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Sp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),P_=` 	
\r=`.split(""),FV=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<P_.length;t+=1)e[P_[t].charCodeAt(0)]=-2;for(let t=0;t<Sp.length;t+=1)e[Sp[t].charCodeAt(0)]=t;return e})();function j_(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Sp[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Sp[r]),t.queuedBits-=6}}function TD(e,t,n){const r=FV[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function L_(e){const t=[],n=l=>{t.push(String.fromCodePoint(l))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=l=>{GV(l,r,n)};for(let l=0;l<e.length;l+=1)TD(e.charCodeAt(l),i,a);return t.join("")}function HV(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function zV(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}HV(r,t)}}function GV(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if((e>>7-r&1)===0){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function ku(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)TD(e.charCodeAt(i),n,r);return new Uint8Array(t)}function VV(e){const t=[];return zV(e,n=>t.push(n)),new Uint8Array(t)}function oc(e){const t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};return e.forEach(i=>j_(i,n,r)),j_(null,n,r),t.join("")}function qV(e){return Math.round(Date.now()/1e3)+e}function $V(){return Symbol("auth-callback")}const ti=()=>typeof window<"u"&&typeof document<"u",Zl={tested:!1,writable:!1},ID=()=>{if(!ti())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Zl.tested)return Zl.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Zl.tested=!0,Zl.writable=!0}catch{Zl.tested=!0,Zl.writable=!1}return Zl.writable};function YV(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,a)=>{t[a]=i})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}const RD=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),WV=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Su=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Ql=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},ei=async(e,t)=>{await e.removeItem(t)};class Pm{constructor(){this.promise=new Pm.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Pm.promiseConstructor=Promise;function z0(e){const t=e.split(".");if(t.length!==3)throw new Jv("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!kV.test(t[r]))throw new Jv("JWT not in base64url format");return{header:JSON.parse(L_(t[0])),payload:JSON.parse(L_(t[1])),signature:ku(t[2]),raw:{header:t[0],payload:t[1]}}}async function KV(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function XV(e,t){return new Promise((r,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const l=await e(a);if(!t(a,null,l)){r(l);return}}catch(l){if(!t(a,l)){i(l);return}}})()})}function JV(e){return("0"+e.toString(16)).substr(-2)}function ZV(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let a=0;a<56;a++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,JV).join("")}async function QV(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function eq(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await QV(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function du(e,t,n=!1){const r=ZV();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await Su(e,`${t}-code-verifier`,i);const a=await eq(r);return[a,r===a?"plain":"s256"]}const tq=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function nq(e){const t=e.headers.get(Kv);if(!t||!t.match(tq))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function rq(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function iq(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const aq=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function fu(e){if(!aq.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Uy(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function sq(e,t){return new Proxy(e,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const a=r.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,r,i)}})}function B_(e){return JSON.parse(JSON.stringify(e))}const tc=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),oq=[502,503,504];async function U_(e){var t;if(!WV(e))throw new Xv(tc(e),0);if(oq.includes(e.status))throw new Xv(tc(e),e.status);let n;try{n=await e.json()}catch(a){throw new sc(tc(a),a)}let r;const i=nq(e);if(i&&i.getTime()>=_D["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new k_(tc(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Yi}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,l)=>a&&typeof l=="string",!0))throw new k_(tc(n),e.status,n.weak_password.reasons);throw new jV(tc(n),e.status||500,r)}const lq=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function xt(e,t,n,r){var i;const a=Object.assign({},r==null?void 0:r.headers);a[Kv]||(a[Kv]=_D["2024-01-01"].name),r!=null&&r.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const l=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(l.redirect_to=r.redirectTo);const f=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",h=await cq(e,t,n+f,{headers:a,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(h):{data:Object.assign({},h),error:null}}async function cq(e,t,n,r,i,a){const l=lq(t,r,i,a);let f;try{f=await e(n,Object.assign({},l))}catch(h){throw console.error(h),new Xv(tc(h),0)}if(f.ok||await U_(f),r!=null&&r.noResolveJson)return f;try{return await f.json()}catch(h){await U_(h)}}function Ha(e){var t;let n=null;fq(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=qV(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function F_(e){const t=Ha(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function pl(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function uq(e){return{data:e,error:null}}function dq(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:a}=e,l=Om(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:a},h=Object.assign({},l);return{data:{properties:f,user:h},error:null}}function H_(e){return e}function fq(e){return e.access_token&&e.refresh_token&&e.expires_in}const Fy=["global","local","others"];class hq{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=RD(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=Fy[0]){if(Fy.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Fy.join(", ")}`);try{return await xt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ot(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await xt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:pl})}catch(r){if(ot(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=Om(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await xt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:dq,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ot(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await xt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:pl})}catch(n){if(ot(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,i,a,l,f,h;try{const u={nextPage:null,lastPage:0,total:0},g=await xt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:H_});if(g.error)throw g.error;const y=await g.json(),E=(l=g.headers.get("x-total-count"))!==null&&l!==void 0?l:0,C=(h=(f=g.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&h!==void 0?h:[];return C.length>0&&(C.forEach(I=>{const M=parseInt(I.split(";")[0].split("=")[1].substring(0,1)),O=JSON.parse(I.split(";")[1].split("=")[1]);u[`${O}Page`]=M}),u.total=parseInt(E)),{data:Object.assign(Object.assign({},y),u),error:null}}catch(u){if(ot(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){fu(t);try{return await xt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:pl})}catch(n){if(ot(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){fu(t);try{return await xt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:pl})}catch(r){if(ot(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){fu(t);try{return await xt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:pl})}catch(r){if(ot(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){fu(t.userId);try{const{data:n,error:r}=await xt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(ot(n))return{data:null,error:n};throw n}}async _deleteFactor(t){fu(t.userId),fu(t.id);try{return{data:await xt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(ot(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,i,a,l,f,h;try{const u={nextPage:null,lastPage:0,total:0},g=await xt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:H_});if(g.error)throw g.error;const y=await g.json(),E=(l=g.headers.get("x-total-count"))!==null&&l!==void 0?l:0,C=(h=(f=g.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&h!==void 0?h:[];return C.length>0&&(C.forEach(I=>{const M=parseInt(I.split(";")[0].split("=")[1].substring(0,1)),O=JSON.parse(I.split(";")[1].split("=")[1]);u[`${O}Page`]=M}),u.total=parseInt(E)),{data:Object.assign(Object.assign({},y),u),error:null}}catch(u){if(ot(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await xt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ot(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await xt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ot(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await xt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ot(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await xt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ot(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await xt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ot(n))return{data:null,error:n};throw n}}}function z_(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const hu={debug:!!(globalThis&&ID()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class MD extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class pq extends MD{}async function mq(e,t,n){hu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),hu.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){hu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{hu.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw hu.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new pq(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(hu.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function gq(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function OD(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function xq(e){return parseInt(e,16)}function yq(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function vq(e){var t;const{chainId:n,domain:r,expirationTime:i,issuedAt:a=new Date,nonce:l,notBefore:f,requestId:h,resources:u,scheme:g,uri:y,version:E}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!y)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(E!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${E}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const C=OD(e.address),I=g?`${g}://${r}`:r,M=e.statement?`${e.statement}
`:"",O=`${I} wants you to sign in with your Ethereum account:
${C}

${M}`;let j=`URI: ${y}
Version: ${E}
Chain ID: ${n}${l?`
Nonce: ${l}`:""}
Issued At: ${a.toISOString()}`;if(i&&(j+=`
Expiration Time: ${i.toISOString()}`),f&&(j+=`
Not Before: ${f.toISOString()}`),h&&(j+=`
Request ID: ${h}`),u){let U=`
Resources:`;for(const L of u){if(!L||typeof L!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${L}`);U+=`
- ${L}`}j+=U}return`${O}
${j}`}class br extends Error{constructor({message:t,code:n,cause:r,name:i}){var a;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(a=i??(r instanceof Error?r.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=n}}class Ap extends br{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function bq({error:e,options:t}){var n,r,i;const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new br({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=a.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new br({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=a.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new br({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=a.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new br({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new br({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new br({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return a.pubKeyCredParams.filter(f=>f.type==="public-key").length===0?new br({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new br({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const l=window.location.hostname;if(DD(l)){if(a.rp.id!==l)return new br({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new br({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new br({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new br({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new br({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function wq({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new br({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new br({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(DD(r)){if(n.rpId!==r)return new br({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new br({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new br({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new br({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class Eq{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const Sq=new Eq;function Aq(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,i=Om(e,["challenge","user","excludeCredentials"]),a=ku(t).buffer,l=Object.assign(Object.assign({},n),{id:ku(n.id).buffer}),f=Object.assign(Object.assign({},i),{challenge:a,user:l});if(r&&r.length>0){f.excludeCredentials=new Array(r.length);for(let h=0;h<r.length;h++){const u=r[h];f.excludeCredentials[h]=Object.assign(Object.assign({},u),{id:ku(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return f}function Cq(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=Om(e,["challenge","allowCredentials"]),i=ku(t).buffer,a=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){a.allowCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const f=n[l];a.allowCredentials[l]=Object.assign(Object.assign({},f),{id:ku(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return a}function Nq(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:oc(new Uint8Array(e.response.attestationObject)),clientDataJSON:oc(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function _q(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:oc(new Uint8Array(i.authenticatorData)),clientDataJSON:oc(new Uint8Array(i.clientDataJSON)),signature:oc(new Uint8Array(i.signature)),userHandle:i.userHandle?oc(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function DD(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function G_(){var e,t;return!!(ti()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function Tq(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Ap("Browser returned unexpected credential type",t)}:{data:null,error:new Ap("Empty credential response",t)}}catch(t){return{data:null,error:bq({error:t,options:e})}}}async function Iq(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Ap("Browser returned unexpected credential type",t)}:{data:null,error:new Ap("Empty credential response",t)}}catch(t){return{data:null,error:wq({error:t,options:e})}}}const Rq={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Mq={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Cp(...e){const t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of e)if(i)for(const a in i){const l=i[a];if(l!==void 0)if(Array.isArray(l))r[a]=l;else if(n(l))r[a]=l;else if(t(l)){const f=r[a];t(f)?r[a]=Cp(f,l):r[a]=Cp(l)}else r[a]=l}return r}function Oq(e,t){return Cp(Rq,e,t||{})}function Dq(e,t){return Cp(Mq,e,t||{})}class kq{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:i},a){var l;try{const{data:f,error:h}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!f)return{data:null,error:h};const u=i??Sq.createNewAbortSignal();if(f.webauthn.type==="create"){const{user:g}=f.webauthn.credential_options.publicKey;if(!g.name){const y=r;if(y)g.name=`${g.id}:${y}`;else{const C=(await this.client.getUser()).data.user,I=((l=C==null?void 0:C.user_metadata)===null||l===void 0?void 0:l.name)||(C==null?void 0:C.email)||(C==null?void 0:C.id)||"User";g.name=`${g.id}:${I}`}}g.displayName||(g.displayName=g.name)}switch(f.webauthn.type){case"create":{const g=Oq(f.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:y,error:E}=await Tq({publicKey:g,signal:u});return y?{data:{factorId:t,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:y}},error:null}:{data:null,error:E}}case"request":{const g=Dq(f.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:y,error:E}=await Iq(Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:g,signal:u}));return y?{data:{factorId:t,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:y}},error:null}:{data:null,error:E}}}}catch(f){return ot(f)?{data:null,error:f}:{data:null,error:new sc("Unexpected error in challenge",f)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!n)return{data:null,error:new Nf("rpId is required for WebAuthn authentication")};try{if(!G_())return{data:null,error:new sc("Browser does not support WebAuthn",null)};const{data:l,error:f}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:a});if(!l)return{data:null,error:f};const{webauthn:h}=l;return this._verify({factorId:t,challengeId:l.challengeId,webauthn:{type:h.type,rpId:n,rpOrigins:r,credential_response:h.credential_response}})}catch(l){return ot(l)?{data:null,error:l}:{data:null,error:new sc("Unexpected error in authenticate",l)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!n)return{data:null,error:new Nf("rpId is required for WebAuthn registration")};try{if(!G_())return{data:null,error:new sc("Browser does not support WebAuthn",null)};const{data:l,error:f}=await this._enroll({friendlyName:t});if(!l)return await this.client.mfa.listFactors().then(g=>{var y;return(y=g.data)===null||y===void 0?void 0:y.all.find(E=>E.factor_type==="webauthn"&&E.friendly_name===t&&E.status!=="unverified")}).then(g=>g?this.client.mfa.unenroll({factorId:g==null?void 0:g.id}):void 0),{data:null,error:f};const{data:h,error:u}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:a});return h?this._verify({factorId:l.id,challengeId:h.challengeId,webauthn:{rpId:n,rpOrigins:r,type:h.webauthn.type,credential_response:h.webauthn.credential_response}}):{data:null,error:u}}catch(l){return ot(l)?{data:null,error:l}:{data:null,error:new sc("Unexpected error in register",l)}}}}gq();const Pq={url:MV,storageKey:OV,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:DV,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function V_(e,t,n){return await n()}const pu={};class _f{get jwks(){var t,n;return(n=(t=pu[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){pu[this.storageKey]=Object.assign(Object.assign({},pu[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=pu[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){pu[this.storageKey]=Object.assign(Object.assign({},pu[this.storageKey]),{cachedAt:t})}constructor(t){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},Pq),t);if(this.storageKey=a.storageKey,this.instanceID=(n=_f.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,_f.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&ti()){const l=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(l),this.logDebugMessages&&console.trace(l)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new hq({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=RD(a.fetch),this.lock=a.lock||V_,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,this.lockAcquireTimeout=a.lockAcquireTimeout,a.lock?this.lock=a.lock:this.persistSession&&ti()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=mq:this.lock=V_,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new kq(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:ID()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=z_(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=z_(this.memoryStorage)),ti()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l);try{await this._notifyAllSubscribers(l.data.event,l.data.session,!1)}catch(f){this._debug("#broadcastChannel","error",f)}})}this.initialize().catch(l=>{this._debug("#initialize()","error",l)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${ND}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},r="none";if(ti()&&(n=YV(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),ti()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:a}=await this._getSessionFromURL(n,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),BV(a)){const h=(t=a.details)===null||t===void 0?void 0:t.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:a}}return{error:a}}const{session:l,redirectType:f}=i;return this._debug("#_initialize()","detected session in URL",l,"redirect type",f),await this._saveSession(l),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ot(n)?this._returnResult({error:n}):this._returnResult({error:new sc("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,i;try{const a=await xt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:Ha}),{data:l,error:f}=a;if(f||!l)return this._returnResult({data:{user:null,session:null},error:f});const h=l.session,u=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:u,session:h},error:null})}catch(a){if(ot(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(t){var n,r,i;try{let a;if("email"in t){const{email:g,password:y,options:E}=t;let C=null,I=null;this.flowType==="pkce"&&([C,I]=await du(this.storage,this.storageKey)),a=await xt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:E==null?void 0:E.emailRedirectTo,body:{email:g,password:y,data:(n=E==null?void 0:E.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:E==null?void 0:E.captchaToken},code_challenge:C,code_challenge_method:I},xform:Ha})}else if("phone"in t){const{phone:g,password:y,options:E}=t;a=await xt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:y,data:(r=E==null?void 0:E.data)!==null&&r!==void 0?r:{},channel:(i=E==null?void 0:E.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:E==null?void 0:E.captchaToken}},xform:Ha})}else throw new F0("You must provide either an email or phone number and a password");const{data:l,error:f}=a;if(f||!l)return await ei(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:f});const h=l.session,u=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:u,session:h},error:null})}catch(a){if(await ei(this.storage,`${this.storageKey}-code-verifier`),ot(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(t){try{let n;if("email"in t){const{email:a,password:l,options:f}=t;n=await xt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:F_})}else if("phone"in t){const{phone:a,password:l,options:f}=t;n=await xt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:F_})}else throw new F0("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const a=new uu;return this._returnResult({data:{user:null,session:null},error:a})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(ot(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,r,i,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,i,a,l,f,h,u,g,y,E;let C,I;if("message"in t)C=t.message,I=t.signature;else{const{chain:M,wallet:O,statement:j,options:U}=t;let L;if(ti())if(typeof O=="object")L=O;else{const W=window;if("ethereum"in W&&typeof W.ethereum=="object"&&"request"in W.ethereum&&typeof W.ethereum.request=="function")L=W.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof O!="object"||!(U!=null&&U.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");L=O}const G=new URL((n=U==null?void 0:U.url)!==null&&n!==void 0?n:window.location.href),V=await L.request({method:"eth_requestAccounts"}).then(W=>W).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!V||V.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const z=OD(V[0]);let B=(r=U==null?void 0:U.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!B){const W=await L.request({method:"eth_chainId"});B=xq(W)}const J={domain:G.host,address:z,statement:j,uri:G.href,version:"1",chainId:B,nonce:(i=U==null?void 0:U.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(l=(a=U==null?void 0:U.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(f=U==null?void 0:U.signInWithEthereum)===null||f===void 0?void 0:f.expirationTime,notBefore:(h=U==null?void 0:U.signInWithEthereum)===null||h===void 0?void 0:h.notBefore,requestId:(u=U==null?void 0:U.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(g=U==null?void 0:U.signInWithEthereum)===null||g===void 0?void 0:g.resources};C=vq(J),I=await L.request({method:"personal_sign",params:[yq(C),z]})}try{const{data:M,error:O}=await xt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:C,signature:I},!((y=t.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(E=t.options)===null||E===void 0?void 0:E.captchaToken}}:null),xform:Ha});if(O)throw O;if(!M||!M.session||!M.user){const j=new uu;return this._returnResult({data:{user:null,session:null},error:j})}return M.session&&(await this._saveSession(M.session),await this._notifyAllSubscribers("SIGNED_IN",M.session)),this._returnResult({data:Object.assign({},M),error:O})}catch(M){if(ot(M))return this._returnResult({data:{user:null,session:null},error:M});throw M}}async signInWithSolana(t){var n,r,i,a,l,f,h,u,g,y,E,C;let I,M;if("message"in t)I=t.message,M=t.signature;else{const{chain:O,wallet:j,statement:U,options:L}=t;let G;if(ti())if(typeof j=="object")G=j;else{const z=window;if("solana"in z&&typeof z.solana=="object"&&("signIn"in z.solana&&typeof z.solana.signIn=="function"||"signMessage"in z.solana&&typeof z.solana.signMessage=="function"))G=z.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof j!="object"||!(L!=null&&L.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");G=j}const V=new URL((n=L==null?void 0:L.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in G&&G.signIn){const z=await G.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},L==null?void 0:L.signInWithSolana),{version:"1",domain:V.host,uri:V.href}),U?{statement:U}:null));let B;if(Array.isArray(z)&&z[0]&&typeof z[0]=="object")B=z[0];else if(z&&typeof z=="object"&&"signedMessage"in z&&"signature"in z)B=z;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in B&&"signature"in B&&(typeof B.signedMessage=="string"||B.signedMessage instanceof Uint8Array)&&B.signature instanceof Uint8Array)I=typeof B.signedMessage=="string"?B.signedMessage:new TextDecoder().decode(B.signedMessage),M=B.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in G)||typeof G.signMessage!="function"||!("publicKey"in G)||typeof G!="object"||!G.publicKey||!("toBase58"in G.publicKey)||typeof G.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");I=[`${V.host} wants you to sign in with your Solana account:`,G.publicKey.toBase58(),...U?["",U,""]:[""],"Version: 1",`URI: ${V.href}`,`Issued At: ${(i=(r=L==null?void 0:L.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=L==null?void 0:L.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${L.signInWithSolana.notBefore}`]:[],...!((l=L==null?void 0:L.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${L.signInWithSolana.expirationTime}`]:[],...!((f=L==null?void 0:L.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${L.signInWithSolana.chainId}`]:[],...!((h=L==null?void 0:L.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${L.signInWithSolana.nonce}`]:[],...!((u=L==null?void 0:L.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${L.signInWithSolana.requestId}`]:[],...!((y=(g=L==null?void 0:L.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||y===void 0)&&y.length?["Resources",...L.signInWithSolana.resources.map(B=>`- ${B}`)]:[]].join(`
`);const z=await G.signMessage(new TextEncoder().encode(I),"utf8");if(!z||!(z instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");M=z}}try{const{data:O,error:j}=await xt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:I,signature:oc(M)},!((E=t.options)===null||E===void 0)&&E.captchaToken?{gotrue_meta_security:{captcha_token:(C=t.options)===null||C===void 0?void 0:C.captchaToken}}:null),xform:Ha});if(j)throw j;if(!O||!O.session||!O.user){const U=new uu;return this._returnResult({data:{user:null,session:null},error:U})}return O.session&&(await this._saveSession(O.session),await this._notifyAllSubscribers("SIGNED_IN",O.session)),this._returnResult({data:Object.assign({},O),error:j})}catch(O){if(ot(O))return this._returnResult({data:{user:null,session:null},error:O});throw O}}async _exchangeCodeForSession(t){const n=await Ql(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new UV;const{data:a,error:l}=await xt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Ha});if(await ei(this.storage,`${this.storageKey}-code-verifier`),l)throw l;if(!a||!a.session||!a.user){const f=new uu;return this._returnResult({data:{user:null,session:null,redirectType:null},error:f})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:l})}catch(a){if(await ei(this.storage,`${this.storageKey}-code-verifier`),ot(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(t){try{const{options:n,provider:r,token:i,access_token:a,nonce:l}=t,f=await xt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Ha}),{data:h,error:u}=f;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!h||!h.session||!h.user){const g=new uu;return this._returnResult({data:{user:null,session:null},error:g})}return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),this._returnResult({data:h,error:u})}catch(n){if(ot(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,r,i,a,l;try{if("email"in t){const{email:f,options:h}=t;let u=null,g=null;this.flowType==="pkce"&&([u,g]=await du(this.storage,this.storageKey));const{error:y}=await xt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},create_user:(r=h==null?void 0:h.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:u,code_challenge_method:g},redirectTo:h==null?void 0:h.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:y})}if("phone"in t){const{phone:f,options:h}=t,{data:u,error:g}=await xt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(i=h==null?void 0:h.data)!==null&&i!==void 0?i:{},create_user:(a=h==null?void 0:h.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},channel:(l=h==null?void 0:h.channel)!==null&&l!==void 0?l:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:g})}throw new F0("You must provide either an email or phone number.")}catch(f){if(await ei(this.storage,`${this.storageKey}-code-verifier`),ot(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async verifyOtp(t){var n,r;try{let i,a;"options"in t&&(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo,a=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:f}=await xt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:Ha});if(f)throw f;if(!l)throw new Error("An error occurred on token verification.");const h=l.session,u=l.user;return h!=null&&h.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),this._returnResult({data:{user:u,session:h},error:null})}catch(i){if(ot(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(t){var n,r,i,a,l;try{let f=null,h=null;this.flowType==="pkce"&&([f,h]=await du(this.storage,this.storageKey));const u=await xt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:f,code_challenge_method:h}),headers:this.headers,xform:uq});return!((a=u.data)===null||a===void 0)&&a.url&&ti()&&!(!((l=t.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(f){if(await ei(this.storage,`${this.storageKey}-code-verifier`),ot(f))return this._returnResult({data:null,error:f});throw f}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Yi;const{error:i}=await xt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(t){if(ot(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:i,options:a}=t,{error:l}=await xt(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:l})}else if("phone"in t){const{phone:r,type:i,options:a}=t,{data:l,error:f}=await xt(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:f})}throw new F0("You must provide either an email or phone number and a type")}catch(n){if(ot(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Ql(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<jy:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const l=await Ql(this.userStorage,this.storageKey+"-user");l!=null&&l.user?t.user=l.user:t.user=Uy()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};t.user=sq(t.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(t){try{return t?await xt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:pl}):await this._useSession(async n=>{var r,i,a;const{data:l,error:f}=n;if(f)throw f;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Yi}:await xt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:pl})})}catch(n){if(ot(n))return Ly(n)&&(await this._removeSession(),await ei(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:i,error:a}=r;if(a)throw a;if(!i.session)throw new Yi;const l=i.session;let f=null,h=null;this.flowType==="pkce"&&t.email!=null&&([f,h]=await du(this.storage,this.storageKey));const{data:u,error:g}=await xt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:f,code_challenge_method:h}),jwt:l.access_token,xform:pl});if(g)throw g;return l.user=u.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),this._returnResult({data:{user:l.user},error:null})})}catch(r){if(await ei(this.storage,`${this.storageKey}-code-verifier`),ot(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Yi;const n=Date.now()/1e3;let r=n,i=!0,a=null;const{payload:l}=z0(t.access_token);if(l.exp&&(r=l.exp,i=r<=n),i){const{data:f,error:h}=await this._callRefreshToken(t.refresh_token);if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!f)return{data:{user:null,session:null},error:null};a=f}else{const{data:f,error:h}=await this._getUser(t.access_token);if(h)return this._returnResult({data:{user:null,session:null},error:h});a={access_token:t.access_token,refresh_token:t.refresh_token,user:f.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(n){if(ot(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:l,error:f}=n;if(f)throw f;t=(r=l.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Yi;const{data:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(ot(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!ti())throw new H0("No browser detected.");if(t.error||t.error_description||t.error_code)throw new H0(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new D_("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new H0("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new D_("No code detected.");const{data:U,error:L}=await this._exchangeCodeForSession(t.code);if(L)throw L;const G=new URL(window.location.href);return G.searchParams.delete("code"),window.history.replaceState(window.history.state,"",G.toString()),{data:{session:U.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:a,refresh_token:l,expires_in:f,expires_at:h,token_type:u}=t;if(!a||!f||!l||!u)throw new H0("No session defined in URL");const g=Math.round(Date.now()/1e3),y=parseInt(f);let E=g+y;h&&(E=parseInt(h));const C=E-g;C*1e3<=Eu&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${C}s, should have been closer to ${y}s`);const I=E-y;g-I>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",I,E,g):g-I<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",I,E,g);const{data:M,error:O}=await this._getUser(a);if(O)throw O;const j={provider_token:r,provider_refresh_token:i,access_token:a,expires_in:y,expires_at:E,refresh_token:l,token_type:u,user:M.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:j,redirectType:t.type},error:null})}catch(r){if(ot(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Ql(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a&&!Ly(a))return this._returnResult({error:a});const l=(r=i.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:f}=await this.admin.signOut(l,t);if(f&&!(LV(f)&&(f.status===404||f.status===401||f.status===403)||Ly(f)))return this._returnResult({error:f})}return t!=="others"&&(await this._removeSession(),await ei(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=$V(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,i;try{const{data:{session:a},error:l}=n;if(l)throw l;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await du(this.storage,this.storageKey,!0));try{return await xt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(await ei(this.storage,`${this.storageKey}-code-verifier`),ot(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(ot(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:i}=await this._useSession(async a=>{var l,f,h,u,g;const{data:y,error:E}=a;if(E)throw E;const C=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(f=t.options)===null||f===void 0?void 0:f.scopes,queryParams:(h=t.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await xt(this.fetch,"GET",C,{headers:this.headers,jwt:(g=(u=y.session)===null||u===void 0?void 0:u.access_token)!==null&&g!==void 0?g:void 0})});if(i)throw i;return ti()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:t.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(ot(r))return this._returnResult({data:{provider:t.provider,url:null},error:r});throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:a}}=n;if(i)throw i;const{options:l,provider:f,token:h,access_token:u,nonce:g}=t,y=await xt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=a==null?void 0:a.access_token)!==null&&r!==void 0?r:void 0,body:{provider:f,id_token:h,access_token:u,nonce:g,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Ha}),{data:E,error:C}=y;return C?this._returnResult({data:{user:null,session:null},error:C}):!E||!E.session||!E.user?this._returnResult({data:{user:null,session:null},error:new uu}):(E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("USER_UPDATED",E.session)),this._returnResult({data:E,error:C}))}catch(i){if(await ei(this.storage,`${this.storageKey}-code-verifier`),ot(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,i;const{data:a,error:l}=n;if(l)throw l;return await xt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(ot(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await XV(async i=>(i>0&&await KV(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await xt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ha})),(i,a)=>{const l=200*Math.pow(2,i);return a&&By(a)&&Date.now()+l-r<Eu})}catch(r){if(this._debug(n,"error",r),ot(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),ti()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await Ql(this.storage,this.storageKey);if(i&&this.userStorage){let l=await Ql(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:i.user},await Su(this.userStorage,this.storageKey+"-user",l)),i.user=(t=l==null?void 0:l.user)!==null&&t!==void 0?t:Uy()}else if(i&&!i.user&&!i.user){const l=await Ql(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(i.user=l.user,await ei(this.storage,this.storageKey+"-user"),await Su(this.storage,this.storageKey,i)):i.user=Uy()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const a=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<jy;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${jy}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:l}=await this._callRefreshToken(i.refresh_token);l&&(console.error(l),By(l)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:f}=await this._getUser(i.access_token);!f&&(l!=null&&l.user)?(i.user=l.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(r,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Yi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Pm;const{data:a,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!a.session)throw new Yi;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const f={data:a.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(a){if(this._debug(i,"error",a),ot(a)){const l={data:null,error:a};return By(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,n,r=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const a=[],l=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(t,n)}catch(h){a.push(h)}});if(await Promise.all(l),a.length>0){for(let f=0;f<a.length;f+=1)console.error(a[f]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await ei(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Su(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const a=B_(i);await Su(this.storage,this.storageKey,a)}else{const i=B_(n);await Su(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await ei(this.storage,this.storageKey),await ei(this.storage,this.storageKey+"-code-verifier"),await ei(this.storage,this.storageKey+"-user"),this.userStorage&&await ei(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ti()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Eu);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-t)/Eu);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Eu}ms, refresh threshold is ${Wv} ticks`),i<=Wv&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof MD)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ti()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(t){this._debug("#visibilityChangedCallback","error",t)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,l]=await du(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});i.push(f.toString())}if(r!=null&&r.queryParams){const a=new URLSearchParams(r.queryParams);i.push(a.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;return a?this._returnResult({data:null,error:a}):await xt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ot(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,i;const{data:a,error:l}=n;if(l)return this._returnResult({data:null,error:l});const f=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:h,error:u}=await xt(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&h.type==="totp"&&(!((i=h==null?void 0:h.totp)===null||i===void 0)&&i.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),this._returnResult({data:h,error:null}))})}catch(n){if(ot(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return this._returnResult({data:null,error:a});const l=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?Nq(t.webauthn.credential_response):_q(t.webauthn.credential_response)})}:{code:t.code}),{data:f,error:h}=await xt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return h?this._returnResult({data:null,error:h}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),this._returnResult({data:f,error:h}))})}catch(n){if(ot(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return this._returnResult({data:null,error:a});const l=await xt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(l.error)return l;const{data:f}=l;if(f.type!=="webauthn")return{data:f,error:null};switch(f.webauthn.type){case"create":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:Aq(f.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:Cq(f.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(ot(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const a of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])i.all.push(a),a.status==="verified"&&i[a.factor_type].push(a);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(t){var n,r,i,a;if(t)try{const{payload:C}=z0(t);let I=null;C.aal&&(I=C.aal);let M=I;const{data:{user:O},error:j}=await this.getUser(t);if(j)return this._returnResult({data:null,error:j});((r=(n=O==null?void 0:O.factors)===null||n===void 0?void 0:n.filter(G=>G.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(M="aal2");const L=C.amr||[];return{data:{currentLevel:I,nextLevel:M,currentAuthenticationMethods:L},error:null}}catch(C){if(ot(C))return this._returnResult({data:null,error:C});throw C}const{data:{session:l},error:f}=await this.getSession();if(f)return this._returnResult({data:null,error:f});if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:h}=z0(l.access_token);let u=null;h.aal&&(u=h.aal);let g=u;((a=(i=l.user.factors)===null||i===void 0?void 0:i.filter(C=>C.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(g="aal2");const E=h.amr||[];return{data:{currentLevel:u,nextLevel:g,currentAuthenticationMethods:E},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await xt(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Yi})})}catch(n){if(ot(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:i},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new Yi});const l=await xt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:f=>({data:f,error:null})});return l.data&&l.data.redirect_url&&ti()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(r){if(ot(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:i},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new Yi});const l=await xt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:f=>({data:f,error:null})});return l.data&&l.data.redirect_url&&ti()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(r){if(ot(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;return r?this._returnResult({data:null,error:r}):n?await xt(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Yi})})}catch(t){if(ot(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?(await xt(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Yi})})}catch(n){if(ot(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(f=>f.kid===t);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(f=>f.kid===t),r&&this.jwks_cached_at+PV>i)return r;const{data:a,error:l}=await xt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,r=a.keys.find(f=>f.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:C,error:I}=await this.getSession();if(I||!C.session)return this._returnResult({data:null,error:I});r=C.session.access_token}const{header:i,payload:a,signature:l,raw:{header:f,payload:h}}=z0(r);n!=null&&n.allowExpired||rq(a.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:C}=await this.getUser(r);if(C)throw C;return{data:{claims:a,header:i,signature:l},error:null}}const g=iq(i.alg),y=await crypto.subtle.importKey("jwk",u,g,!0,["verify"]);if(!await crypto.subtle.verify(g,y,l,VV(`${f}.${h}`)))throw new Jv("Invalid JWT signature");return{data:{claims:a,header:i,signature:l},error:null}}catch(r){if(ot(r))return this._returnResult({data:null,error:r});throw r}}}_f.nextInstanceID={};const jq=_f,Lq="2.95.3";let pf="";typeof Deno<"u"?pf="deno":typeof document<"u"?pf="web":typeof navigator<"u"&&navigator.product==="ReactNative"?pf="react-native":pf="node";const Bq={"X-Client-Info":`supabase-js-${pf}/${Lq}`},Uq={headers:Bq},Fq={schema:"public"},Hq={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},zq={};function Tf(e){"@babel/helpers - typeof";return Tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tf(e)}function Gq(e,t){if(Tf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Tf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vq(e){var t=Gq(e,"string");return Tf(t)=="symbol"?t:t+""}function qq(e,t,n){return(t=Vq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function rr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?q_(Object(n),!0).forEach(function(r){qq(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const $q=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Yq=()=>Headers,Wq=(e,t,n)=>{const r=$q(n),i=Yq();return async(a,l)=>{var f;const h=(f=await t())!==null&&f!==void 0?f:e;let u=new i(l==null?void 0:l.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${h}`),r(a,rr(rr({},l),{},{headers:u}))}};function Kq(e){return e.endsWith("/")?e:e+"/"}function Xq(e,t){var n,r;const{db:i,auth:a,realtime:l,global:f}=e,{db:h,auth:u,realtime:g,global:y}=t,E={db:rr(rr({},h),i),auth:rr(rr({},u),a),realtime:rr(rr({},g),l),storage:{},global:rr(rr(rr({},y),f),{},{headers:rr(rr({},(n=y==null?void 0:y.headers)!==null&&n!==void 0?n:{}),(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return e.accessToken?E.accessToken=e.accessToken:delete E.accessToken,E}function Jq(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Kq(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Zq=class extends jq{constructor(e){super(e)}},Qq=class{constructor(e,t,n){var r,i;this.supabaseUrl=e,this.supabaseKey=t;const a=Jq(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,f={db:Fq,realtime:zq,auth:rr(rr({},Hq),{},{storageKey:l}),global:Uq},h=Xq(n??{},f);if(this.storageKey=(r=h.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken)this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(g,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=h.auth)!==null&&u!==void 0?u:{},this.headers,h.global.fetch)}this.fetch=Wq(t,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(rr({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(g=>this.realtime.setAuth(g)).catch(g=>console.warn("Failed to set initial Realtime auth token:",g)),this.rest=new LG(new URL("rest/v1",a).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch,timeout:h.db.timeout,urlLengthLimit:h.db.urlLengthLimit}),this.storage=new RV(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new IG(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,n;if(e.accessToken)return await e.accessToken();const{data:r}=await e.auth.getSession();return(t=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:i,storageKey:a,flowType:l,lock:f,debug:h,throwOnError:u},g,y){const E={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Zq({url:this.authUrl.href,headers:rr(rr({},E),g),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:i,flowType:l,lock:f,debug:h,throwOnError:u,fetch:y,hasCustomAuthorizationHeader:Object.keys(this.headers).some(C=>C.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new eV(this.realtimeUrl.href,rr(rr({},e),{},{params:rr(rr({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const e$=(e,t,n)=>new Qq(e,t,n);function t$(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const n=t.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}t$()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const n$="https://niimekyoivuonfypigzf.supabase.co",r$="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5paW1la3lvaXZ1b25meXBpZ3pmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA3NTU3ODYsImV4cCI6MjA4NjMzMTc4Nn0.c90K0qHlTEk4Tul8A7v6g6BGaJZjrVNc8WXAp8dqAXo",Ve=e$(n$,r$),kD=k.createContext(void 0),i$=({children:e})=>{const[t,n]=k.useState(null),[r,i]=k.useState([]),[a,l]=k.useState([]),[f,h]=k.useState([]),[u,g]=k.useState([]),[y,E]=k.useState([]),[C,I]=k.useState([]),[M,O]=k.useState([]),[j,U]=k.useState([]),[L,G]=k.useState([]),[V,z]=k.useState([]),[B,J]=k.useState([]),[W,Z]=k.useState([]),[te,Y]=k.useState([]),[pe,Te]=k.useState([]),[le,de]=k.useState([]),[ge,De]=k.useState(250),[we,$e]=k.useState(null),[ne,re]=k.useState(!1),he=k.useCallback((ve,xe="success")=>{$e({message:ve,type:xe}),setTimeout(()=>$e(null),3e3)},[]),se=k.useCallback(async()=>{await Ve.auth.signOut(),localStorage.removeItem("ironflow_session"),n(null),he("Logged out successfully","success")},[he]);k.useEffect(()=>{const ve=()=>{const xe=localStorage.getItem("ironflow_session");if(xe)try{const je=JSON.parse(xe);if(je.expiresAt&&new Date(je.expiresAt)>new Date){const Ye=a.find(tt=>tt.id===je.userId);Ye?n(Ye):localStorage.removeItem("ironflow_session")}else localStorage.removeItem("ironflow_session")}catch{localStorage.removeItem("ironflow_session")}};a.length>0&&ve()},[a]),k.useEffect(()=>{if(!t)return;const ve=setInterval(()=>{const xe=localStorage.getItem("ironflow_session");if(xe)try{const je=JSON.parse(xe);(!je.expiresAt||new Date(je.expiresAt)<=new Date)&&(se(),he("Session expired. Please login again.","error"))}catch{se()}},6e4);return()=>clearInterval(ve)},[t,se,he]),k.useEffect(()=>{const{data:{subscription:ve}}=Ve.auth.onAuthStateChange((xe,je)=>{xe==="SIGNED_IN"&&je?console.log("Supabase Auth: User signed in"):xe==="SIGNED_OUT"&&n(null)});return()=>{ve.unsubscribe()}},[]);const ke=!!t,ie=async()=>{re(!0);try{const{data:ve}=await Ve.from("branches").select("*");if(ve&&ve.length>0)i(ve);else{const{error:Kn}=await Ve.from("branches").insert(BC);Kn||i(BC)}const{data:xe}=await Ve.from("users").select("*");if(xe&&xe.length>0)l(xe);else{const{error:Kn}=await Ve.from("users").insert(UC);Kn||l(UC)}const{data:je}=await Ve.from("plans").select("*");if(je&&je.length>0)h(je);else{const{error:Kn}=await Ve.from("plans").insert(FC);Kn||h(FC)}const{data:Ye}=await Ve.from("subscriptions").select("*");Ye&&g(Ye);const{data:tt}=await Ve.from("sales").select("*");tt&&E(tt);const{data:bt}=await Ve.from("attendance").select("*");bt&&I(bt);const{data:kt}=await Ve.from("bookings").select("*");kt&&O(kt);const{data:St}=await Ve.from("feedback").select("*");St&&U(St);const{data:We}=await Ve.from("communications").select("*");We&&G(We);const{data:Bt}=await Ve.from("inventory").select("*");Bt&&z(Bt);const{data:Ut}=await Ve.from("metrics").select("*");Ut&&J(Ut);const{data:ct}=await Ve.from("offers").select("*");if(ct&&ct.length>0)Z(ct);else{const{error:Kn}=await Ve.from("offers").insert(zC);Kn||Z(zC)}const{data:or}=await Ve.from("class_schedules").select("*");or&&Y(or);const{data:Fr}=await Ve.from("expenses").select("*");Fr&&Te(Fr);const{data:Hr}=await Ve.from("holidays").select("*");Hr&&de(Hr)}catch(ve){console.error("Error fetching data:",ve),he("Error connecting to database","error")}finally{re(!1)}};k.useEffect(()=>{ie();const ve=Ve.channel("db-changes").on("postgres_changes",{event:"*",schema:"public",table:"attendance"},()=>{Ve.from("attendance").select("*").then(({data:xe})=>{xe&&I(xe)})}).on("postgres_changes",{event:"*",schema:"public",table:"bookings"},()=>{Ve.from("bookings").select("*").then(({data:xe})=>{xe&&O(xe)})}).on("postgres_changes",{event:"*",schema:"public",table:"class_schedules"},()=>{Ve.from("class_schedules").select("*").then(({data:xe})=>{xe&&Y(xe)})}).on("postgres_changes",{event:"*",schema:"public",table:"communications"},()=>{Ve.from("communications").select("*").then(({data:xe})=>{xe&&G(xe)})}).on("postgres_changes",{event:"*",schema:"public",table:"expenses"},()=>{Ve.from("expenses").select("*").then(({data:xe})=>{xe&&Te(xe)})}).on("postgres_changes",{event:"*",schema:"public",table:"feedback"},()=>{Ve.from("feedback").select("*").then(({data:xe})=>{xe&&U(xe)})}).on("postgres_changes",{event:"*",schema:"public",table:"holidays"},()=>{Ve.from("holidays").select("*").then(({data:xe})=>{xe&&de(xe)})}).on("postgres_changes",{event:"*",schema:"public",table:"inventory"},()=>{Ve.from("inventory").select("*").then(({data:xe})=>{xe&&z(xe)})}).on("postgres_changes",{event:"*",schema:"public",table:"metrics"},()=>{Ve.from("metrics").select("*").then(({data:xe})=>{xe&&J(xe)})}).on("postgres_changes",{event:"*",schema:"public",table:"offers"},()=>{Ve.from("offers").select("*").then(({data:xe})=>{xe&&Z(xe)})}).on("postgres_changes",{event:"*",schema:"public",table:"sales"},()=>{Ve.from("sales").select("*").then(({data:xe})=>{xe&&E(xe)})}).on("postgres_changes",{event:"*",schema:"public",table:"subscriptions"},()=>{Ve.from("subscriptions").select("*").then(({data:xe})=>{xe&&g(xe)})}).on("postgres_changes",{event:"*",schema:"public",table:"users"},()=>{Ve.from("users").select("*").then(({data:xe})=>{xe&&l(xe)})}).subscribe();return()=>{Ve.removeChannel(ve)}},[]);const ue=async(ve,xe="flash")=>{try{return"API Key not configured."}catch(je){return console.error(je),"AI services offline."}},qe=ve=>{const xe=r.find(bt=>bt.id===ve),je=(xe==null?void 0:xe.name.slice(0,3).toUpperCase())||"IF",Ye=new Date().getFullYear(),tt=y.filter(bt=>bt.branchId===ve).length+1001;return`INV/${je}/${Ye}/${tt}`},me=async ve=>{const{error:xe}=await Ve.from("branches").insert(ve);if(xe)throw console.error("Add branch error:",xe),he("Failed to add branch: "+xe.message,"error"),xe;i(je=>[...je,ve]),he("Branch added successfully","success")},Je=async(ve,xe)=>{const{error:je}=await Ve.from("branches").update(xe).eq("id",ve);if(je)throw console.error("Update branch error:",je),he("Failed to update branch: "+je.message,"error"),je;i(Ye=>Ye.map(tt=>tt.id===ve?{...tt,...xe}:tt)),he("Branch updated successfully","success")},Qe=async ve=>{const xe={...ve};xe.password&&(xe.password=await hr(xe.password));const{error:je}=await Ve.from("users").insert(xe);je?(console.error(je),he("Failed to add user","error")):(l(Ye=>[...Ye,xe]),he("User added successfully"))},Ue=async(ve,xe)=>{const{error:je}=await Ve.from("users").update(xe).eq("id",ve);je?he("Failed to update user","error"):(l(Ye=>Ye.map(tt=>tt.id===ve?{...tt,...xe}:tt)),(t==null?void 0:t.id)===ve&&n(Ye=>Ye?{...Ye,...xe}:null),he("User updated"))},ft=async ve=>{const{error:xe}=await Ve.from("users").delete().eq("id",ve);xe?he("Failed to delete user","error"):(l(je=>je.filter(Ye=>Ye.id!==ve)),he("User deleted"))},Et=async ve=>{const{error:xe}=await Ve.from("plans").insert(ve);xe?he("Failed to create plan","error"):(h(je=>[...je,ve]),he("Plan created"))},jt=async(ve,xe)=>{const{error:je}=await Ve.from("plans").update(xe).eq("id",ve);je?he("Failed to update plan","error"):(h(Ye=>Ye.map(tt=>tt.id===ve?{...tt,...xe}:tt)),he("Plan updated"))},gn=async ve=>{const{error:xe}=await Ve.from("subscriptions").insert(ve);xe?he("Failed to add subscription","error"):g(je=>[...je,ve])},nn=async ve=>{const{error:xe}=await Ve.from("sales").insert(ve);xe?he("Failed to record sale","error"):E(je=>[...je,ve])},Ft=async ve=>{const{error:xe}=await Ve.from("attendance").insert(ve);xe?he("Failed to record attendance","error"):(I(je=>[...je,ve]),he("Attendance recorded"))},Rt=async(ve,xe)=>{const{error:je}=await Ve.from("attendance").update(xe).eq("id",ve);je?he("Failed to update attendance","error"):I(Ye=>Ye.map(tt=>tt.id===ve?{...tt,...xe}:tt))},sa=async ve=>{const{error:xe}=await Ve.from("bookings").insert(ve);xe?he("Booking failed","error"):(O(je=>[...je,ve]),he("Booking confirmed"))},Ze=async ve=>{const{error:xe}=await Ve.from("feedback").insert(ve);xe?he("Failed to submit feedback","error"):(U(je=>[...je,ve]),he("Feedback submitted"))},rs=async(ve,xe)=>{const{error:je}=await Ve.from("feedback").update({status:xe}).eq("id",ve);je||U(Ye=>Ye.map(tt=>tt.id===ve?{...tt,status:xe}:tt))},Ke=async ve=>{const{error:xe}=await Ve.from("inventory").insert(ve);xe?he("Failed to add item","error"):(z(je=>[...je,ve]),he("Item added to inventory"))},_t=async(ve,xe)=>{const{error:je}=await Ve.from("inventory").update(xe).eq("id",ve);je?he("Failed to update inventory","error"):z(Ye=>Ye.map(tt=>tt.id===ve?{...tt,...xe}:tt))},Br=async(ve,xe,je)=>{const Ye=V.find(Bt=>Bt.id===ve);if(!Ye||Ye.stock<je){he("Insufficient stock!","error");return}const tt=Ye.branchId,bt=Ye.price*je,kt={id:`sale-${Date.now()}`,invoiceNo:qe(tt),date:new Date().toISOString().split("T")[0],amount:bt,memberId:xe,itemId:ve,staffId:(t==null?void 0:t.id)||"pos",branchId:tt,paymentMethod:"CASH"},{error:St}=await Ve.from("inventory").update({stock:Ye.stock-je}).eq("id",ve);if(St){he("Failed to update stock","error");return}const{error:We}=await Ve.from("sales").insert(kt);if(We){await Ve.from("inventory").update({stock:Ye.stock}).eq("id",ve),he("Failed to record sale","error");return}z(Bt=>Bt.map(Ut=>Ut.id===ve?{...Ut,stock:Ut.stock-je}:Ut)),E(Bt=>[...Bt,kt]),he(`Sold ${Ye.name} x ${je}!`)},Ur=async ve=>{const{error:xe}=await Ve.from("metrics").insert(ve);xe?he("Failed to record metrics","error"):(J(je=>[...je,ve]),he("Metrics recorded"))},_l=async ve=>{const{error:xe}=await Ve.from("offers").insert(ve);xe?he("Failed to create offer","error"):(Z(je=>[...je,ve]),he("Offer created"))},di=async ve=>{const{error:xe}=await Ve.from("offers").delete().eq("id",ve);xe||Z(je=>je.filter(Ye=>Ye.id!==ve))},Cr=async ve=>{const{error:xe}=await Ve.from("class_templates").insert(ve);xe?he("Failed to update schedule","error"):(he("Weekly schedule updated"),is())},Tl=async ve=>{const{error:xe}=await Ve.from("class_templates").delete().eq("id",ve);xe?he("Failed to remove schedule","error"):(he("Schedule removed"),is())},is=async()=>{const{data:ve}=await Ve.from("class_templates").select("*");if(!ve)return;const xe=[],je=new Date,Ye=4,{data:tt}=await Ve.from("class_schedules").select("*").gte("date",je.toISOString().split("T")[0]),bt=new Set(tt==null?void 0:tt.map(kt=>`${kt.trainerId}-${kt.date}-${kt.timeSlot}`));for(let kt=0;kt<Ye*7;kt++){const St=new Date(je);St.setDate(je.getDate()+kt);const We=St.toLocaleDateString("en-US",{weekday:"long"}).toUpperCase(),Bt=St.toISOString().split("T")[0];ve.filter(ct=>ct.dayOfWeek===We).forEach(ct=>{const or=`${ct.trainerId}-${Bt}-${ct.timeSlot}`;bt.has(or)||(xe.push({id:`sess-${Date.now()}-${Math.random().toString(36).substr(2,5)}`,templateId:ct.id,trainerId:ct.trainerId,date:Bt,timeSlot:ct.timeSlot,title:ct.title,capacity:ct.capacity,branchId:ct.branchId}),bt.add(or))})}if(xe.length>0){const{error:kt}=await Ve.from("class_schedules").insert(xe);kt||Y(St=>[...St,...xe])}},cd=async ve=>{const{error:xe}=await Ve.from("class_schedules").insert(ve);xe?he("Failed to schedule class","error"):(Y(je=>[...je,ve]),he("Class scheduled successfully"))},xn=async ve=>{const{error:xe}=await Ve.from("class_schedules").delete().eq("id",ve);xe?he("Failed to cancel class","error"):Y(je=>je.filter(Ye=>Ye.id!==ve))},ze=async ve=>{const{error:xe}=await Ve.from("expenses").insert(ve);xe?he("Failed to record expense","error"):(Te(je=>[...je,ve]),he("Expense recorded"))},ln=async ve=>{const{error:xe}=await Ve.from("expenses").delete().eq("id",ve);xe?he("Failed to delete expense","error"):Te(je=>je.filter(Ye=>Ye.id!==ve))},Tt=async(ve,xe=!1)=>{const{error:je}=await Ve.from("holidays").insert(ve);je?he("Failed to add holiday","error"):(de(Ye=>[...Ye,ve]),he("Holiday added successfully"),xe&&await Sn(ve))},Sn=async ve=>{var Ye;const xe=ve.branchId==="ALL"?"All Branches":((Ye=r.find(tt=>tt.id===ve.branchId))==null?void 0:Ye.name)||"Your Branch",je=a.filter(tt=>ve.branchId==="ALL"||tt.branchId===ve.branchId);for(const tt of je)await Nr({userId:tt.id,type:Sa.SMS,recipient:tt.phone||tt.email||"In-App",subject:` Holiday Notice: ${ve.name}`,body:`Important Update: ${ve.name} is scheduled for ${ve.date}. ${xe} will be closed on this day. Please plan your workouts accordingly. You can view this notification in the Communications section.`,category:"HOLIDAY",branchId:ve.branchId});he(`Holiday notification sent to ${je.length} users (In-App Only)`,"success")},As=async(ve,xe,je,Ye)=>{var kt;const tt=ve==="ALL"?"All Branches":((kt=r.find(St=>St.id===ve))==null?void 0:kt.name)||"Your Branch";let bt=a.filter(St=>ve==="ALL"||St.branchId===ve);Ye&&Ye.length>0&&(bt=bt.filter(St=>Ye.includes(St.role)));for(const St of bt)await Nr({userId:St.id,type:Sa.SMS,recipient:St.phone||St.email||"In-App",subject:` ${xe}`,body:`${je}

This is an important announcement for ${tt}. You can view all notifications in the Communications section of the app.`,category:"ANNOUNCEMENT",branchId:ve});he(`Notification sent to ${bt.length} users (In-App Only)`,"success")},Il=async ve=>{const{error:xe}=await Ve.from("holidays").delete().eq("id",ve);xe?he("Failed to delete holiday","error"):(de(je=>je.filter(Ye=>Ye.id!==ve)),he("Holiday deleted"))},Cs=async ve=>{const xe=Math.floor(1e5+Math.random()*9e5).toString(),je=ve||(t==null?void 0:t.branchId)||r[0].id,{error:Ye}=await Ve.from("transaction_codes").insert({code:xe,branchId:je,status:"VALID",generatedBy:t==null?void 0:t.id});return Ye?(console.error("Error generating PIN:",Ye),he("Failed to generate PIN","error"),""):xe},Lt=async ve=>{const{data:xe,error:je}=await Ve.from("transaction_codes").select("*").eq("code",ve).eq("status","VALID").single();return je||!xe?!1:(await Ve.from("transaction_codes").update({status:"USED"}).eq("code",ve),!0)},Nr=async ve=>{var bt;const xe=a.find(kt=>kt.id===ve.userId),je=ve.branchId||(xe==null?void 0:xe.branchId)||((bt=r[0])==null?void 0:bt.id),Ye={...ve,id:`comm-${Date.now()}-${Math.random().toString(36).substr(2,5)}`,timestamp:new Date().toISOString(),status:"DELIVERED",branchId:je,isRead:!1},{error:tt}=await Ve.from("communications").insert(Ye);tt?he("Failed to send notification","error"):(G(kt=>[Ye,...kt]),he("Notification sent successfully","success"))},oa=async ve=>{const{error:xe}=await Ve.from("communications").update({isRead:!0}).eq("id",ve);xe||G(je=>je.map(Ye=>Ye.id===ve?{...Ye,isRead:!0}:Ye))},Ns=async()=>{if(!t)return;const ve=L.filter(je=>(je.branchId==="ALL"||je.branchId===t.branchId)&&!je.isRead);if(ve.length===0)return;const{error:xe}=await Ve.from("communications").update({isRead:!0}).in("id",ve.map(je=>je.id));xe||G(je=>je.map(Ye=>ve.some(tt=>tt.id===Ye.id)?{...Ye,isRead:!0}:Ye))},hr=async ve=>{const je=new TextEncoder().encode(ve),Ye=await crypto.subtle.digest("SHA-256",je);return Array.from(new Uint8Array(Ye)).map(bt=>bt.toString(16).padStart(2,"0")).join("")},Rl=()=>{const ve="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%&*";let xe="";xe+=ve.charAt(Math.floor(Math.random()*26)),xe+=ve.charAt(Math.floor(Math.random()*26)+26),xe+=ve.charAt(Math.floor(Math.random()*10)+52),xe+=ve.charAt(Math.floor(Math.random()*7)+62);for(let je=0;je<4;je++)xe+=ve.charAt(Math.floor(Math.random()*ve.length));return xe.split("").sort(()=>Math.random()-.5).join("")},sr=async(ve,xe,je,Ye,tt=0,bt="ONLINE",kt)=>{re(!0);const St=xe?f.find(Hr=>Hr.id===xe):void 0,We=ve.branchId||(t==null?void 0:t.branchId)||r[0].id,Bt=`u-${Date.now()}`,Ut=kt||new Date().toISOString().split("T")[0],ct=Ye||Rl(),or=await hr(ct),Fr={id:Bt,name:ve.name||"New Member",email:ve.email||"",password:or,role:Oe.MEMBER,branchId:We,memberId:`IF-IND-${Math.floor(1e3+Math.random()*9e3)}`,avatar:ve.avatar||`https://i.pravatar.cc/150?u=${Bt}`,emergencyContact:ve.emergencyContact,address:ve.address,phone:ve.phone};try{if(await Ve.from("users").insert(Fr),l(Hr=>[...Hr,Fr]),St){const Hr={id:`s-${Date.now()}`,memberId:Bt,planId:xe,startDate:Ut,endDate:new Date(new Date(Ut).getTime()+St.durationDays*864e5).toISOString().split("T")[0],status:Na.ACTIVE,branchId:We,trainerId:je},Kn=Math.max(0,St.price-tt),Co={id:`sale-${Date.now()}`,invoiceNo:qe(We),date:new Date().toISOString().split("T")[0],amount:Kn,discount:tt,memberId:Bt,planId:xe,staffId:(t==null?void 0:t.id)||"admin",branchId:We,paymentMethod:"ONLINE",trainerId:je};await Ve.from("subscriptions").insert(Hr),await Ve.from("sales").insert(Co),g(Oa=>[...Oa,Hr]),E(Oa=>[...Oa,Co]),await Nr({userId:Bt,type:Sa.SMS,recipient:"In-App",subject:"Welcome to IronFlow! ",body:`Welcome ${Fr.name}! Your athlete ID is ${Fr.memberId}. Your temporary login token is: ${ct}. You can login now and change your token in Settings. This is an important notification - please check the Communications section for more details.`,category:"WELCOME",branchId:We}),he(`Member enrolled! Invoice: ${Co.invoiceNo}. Welcome notification sent (In-App Only).`)}else await Nr({userId:Bt,type:Sa.SMS,recipient:"In-App",subject:"Welcome to IronFlow! ",body:`Welcome ${Fr.name}! Your athlete ID is ${Fr.memberId}. Your temporary login token is: ${ct}. Login to purchase a membership and get started. This is an important notification - please check the Communications section for more details.`,category:"WELCOME",branchId:We}),he("Account created! Welcome notification sent (In-App Only). Please login to purchase a membership.")}catch(Hr){console.error(Hr),he("Enrollment failed","error")}finally{re(!1)}},la=async(ve,xe,je,Ye,tt)=>{re(!0);const bt=f.find(ct=>ct.id===xe),kt=a.find(ct=>ct.id===ve);if(!bt||!kt){re(!1);return}const St=kt.branchId,We=tt||new Date().toISOString().split("T")[0],Bt={id:`s-${Date.now()}`,memberId:ve,planId:xe,startDate:We,endDate:new Date(new Date(We).getTime()+bt.durationDays*864e5).toISOString().split("T")[0],status:Na.ACTIVE,branchId:St,trainerId:Ye},Ut={id:`sale-${Date.now()}`,invoiceNo:qe(St),date:new Date().toISOString().split("T")[0],amount:bt.price,memberId:ve,planId:xe,staffId:(t==null?void 0:t.id)||"self",branchId:St,paymentMethod:je,trainerId:Ye};try{await Ve.from("subscriptions").insert(Bt),await Ve.from("sales").insert(Ut),g(ct=>[...ct,Bt]),E(ct=>[...ct,Ut]),await Nr({userId:ve,type:Sa.SMS,recipient:"In-App",subject:" Payment Confirmation",body:`Payment successful! Your ${bt.name} membership is now active until ${Bt.endDate}. Reference: ${Ut.invoiceNo}. This is an important notification - please check the Communications section for payment details.`,category:"PAYMENT",branchId:St}),he(`Payment received! Invoice: ${Ut.invoiceNo} (Notification sent in-app)`)}catch(ct){console.error(ct),he("Transaction failed","error")}finally{re(!1)}};return p.jsxs(kD.Provider,{value:{currentUser:t,setCurrentUser:n,branches:r,users:a,plans:f,subscriptions:u,sales:y,attendance:C,bookings:M,feedback:j,communications:L,inventory:V,metrics:B,offers:W,classSchedules:te,addClassTemplate:Cr,deleteClassTemplate:Tl,generateUpcomingClasses:is,addClassSession:cd,deleteClassSession:xn,expenses:pe,addExpense:ze,deleteExpense:ln,holidays:le,addHoliday:Tt,deleteHoliday:Il,sendHolidayNotification:Sn,sendBranchNotification:As,settlementRate:ge,setSettlementRate:De,isGlobalLoading:ne,setGlobalLoading:re,addBranch:me,updateBranch:Je,addUser:Qe,updateUser:Ue,deleteUser:ft,addPlan:Et,updatePlan:jt,addSubscription:gn,addSale:nn,recordAttendance:Ft,updateAttendance:Rt,addBooking:sa,addFeedback:Ze,updateFeedbackStatus:rs,addInventory:Ke,updateInventory:_t,sellInventoryItem:Br,addMetric:Ur,addOffer:_l,deleteOffer:di,enrollMember:sr,purchaseSubscription:la,generateTransactionCode:Cs,verifyTransactionCode:Lt,sendNotification:Nr,markNotificationAsRead:oa,markAllNotificationsAsRead:Ns,askGemini:ue,toast:we,showToast:he,logout:se,isAuthenticated:ke,refreshData:ie},children:[e,we&&p.jsxs("div",{className:`fixed bottom-8 right-8 px-6 py-4 rounded-2xl shadow-2xl z-[9999] flex items-center gap-3 animate-[slideLeft_0.3s_ease-out] text-white font-bold ${we.type==="error"?"bg-red-600":"bg-slate-900"}`,children:[p.jsx("i",{className:`fas ${we.type==="error"?"fa-exclamation-circle":"fa-check-circle"} text-xl`}),we.message]}),ne&&p.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-[2px] z-[10000] flex items-center justify-center",children:p.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-2xl flex flex-col items-center gap-4 animate-bounce",children:[p.jsx("i",{className:"fas fa-dumbbell text-4xl text-blue-600 animate-spin"}),p.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Syncing with IronFlow Cloud..."})]})})]})},Un=()=>{const e=k.useContext(kD);if(!e)throw new Error("useAppContext must be used within AppProvider");return e},a$=()=>{const{communications:e,currentUser:t,branches:n,markNotificationAsRead:r,markAllNotificationsAsRead:i}=Un(),a=Ku(),[l,f]=k.useState(!1),h=k.useMemo(()=>t?e.filter(I=>{const M=I.branchId==="ALL"||I.branchId===t.branchId,O=I.userId===t.id||I.category==="ANNOUNCEMENT"||I.category==="HOLIDAY";return M&&O}).sort((I,M)=>new Date(M.timestamp).getTime()-new Date(I.timestamp).getTime()).slice(0,10):[],[e,t]),u=h.filter(I=>!I.isRead).length,g=I=>{switch(I){case"HOLIDAY":return"fa-calendar-day";case"ANNOUNCEMENT":return"fa-bullhorn";case"PAYMENT":return"fa-credit-card";case"REMINDER":return"fa-clock";case"WELCOME":return"fa-hand-wave";default:return"fa-bell"}},y=I=>{switch(I){case"HOLIDAY":return"text-amber-500 bg-amber-50";case"ANNOUNCEMENT":return"text-indigo-500 bg-indigo-50";case"PAYMENT":return"text-emerald-500 bg-emerald-50";case"REMINDER":return"text-blue-500 bg-blue-50";case"WELCOME":return"text-pink-500 bg-pink-50";default:return"text-slate-500 bg-slate-50"}},E=I=>{const M=new Date(I),j=new Date().getTime()-M.getTime(),U=Math.floor(j/6e4),L=Math.floor(j/36e5),G=Math.floor(j/864e5);return U<1?"Just now":U<60?`${U}m ago`:L<24?`${L}h ago`:G<7?`${G}d ago`:M.toLocaleDateString("en-IN",{day:"numeric",month:"short"})},C=I=>{if(I==="ALL")return"All Branches";const M=n.find(O=>O.id===I);return(M==null?void 0:M.name)||"Unknown"};return p.jsxs("div",{className:"relative",children:[p.jsxs("button",{onClick:()=>f(!l),className:"relative p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-xl transition-all",children:[p.jsx("i",{className:"fas fa-bell text-lg"}),u>0&&p.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-[10px] font-black rounded-full flex items-center justify-center animate-pulse",children:u>9?"9+":u})]}),l&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>f(!1)}),p.jsxs("div",{className:"absolute right-0 top-full mt-2 w-80 md:w-96 bg-white rounded-2xl shadow-2xl border border-slate-100 z-50 overflow-hidden animate-[slideDown_0.2s_ease-out]",children:[p.jsxs("div",{className:"p-4 border-b border-slate-100 flex items-center justify-between bg-slate-50",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"font-black text-slate-900 text-sm uppercase tracking-tight",children:"Notifications"}),p.jsx("p",{className:"text-[10px] text-slate-400 font-bold",children:u>0?`${u} unread`:"No new notifications"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("button",{onClick:async I=>{I.stopPropagation(),await i()},className:"text-[10px] font-black text-blue-600 hover:text-blue-700 uppercase tracking-wider",children:"Mark All Read"}),p.jsx("button",{onClick:()=>a("/communications"),className:"text-[10px] font-black text-indigo-600 hover:text-indigo-700 uppercase tracking-wider",children:"View All"})]})]}),p.jsx("div",{className:"max-h-[400px] overflow-y-auto",children:h.length===0?p.jsxs("div",{className:"p-8 text-center text-slate-400",children:[p.jsx("i",{className:"fas fa-bell-slash text-3xl mb-3 opacity-30"}),p.jsx("p",{className:"text-sm font-medium",children:"No notifications yet"})]}):h.map((I,M)=>p.jsx("div",{className:`p-4 border-b border-slate-50 hover:bg-slate-50 transition-colors cursor-pointer ${I.isRead?"":"bg-blue-50/30"}`,onClick:async()=>{I.isRead||await r(I.id),a("/communications"),f(!1)},children:p.jsxs("div",{className:"flex gap-3",children:[p.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center shrink-0 ${y(I.category)}`,children:p.jsx("i",{className:`fas ${g(I.category)} text-sm`})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsxs("div",{className:"flex items-start justify-between gap-2",children:[p.jsx("p",{className:"text-xs font-bold text-slate-900 truncate",children:I.subject||I.category}),p.jsx("span",{className:"text-[10px] text-slate-400 font-medium shrink-0",children:E(I.timestamp)})]}),p.jsx("p",{className:"text-xs text-slate-500 line-clamp-2 mt-1",children:I.body}),p.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[p.jsx("span",{className:"text-[9px] font-black text-slate-400 uppercase tracking-wider bg-slate-100 px-2 py-0.5 rounded",children:C(I.branchId)}),!I.isRead&&p.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"})]})]})]})},I.id))}),h.length>0&&p.jsxs("div",{className:"p-3 border-t border-slate-100 bg-slate-50 flex gap-2",children:[p.jsx("button",{onClick:async I=>{I.stopPropagation(),await i()},className:"flex-1 py-2 text-[11px] font-black text-slate-600 uppercase tracking-widest hover:text-slate-900 hover:bg-slate-100 rounded-lg transition-colors",children:"Mark All Read"}),p.jsx("button",{onClick:()=>{a("/communications"),f(!1)},className:"flex-1 py-2 text-[11px] font-black text-blue-600 uppercase tracking-widest hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-colors",children:"See All"})]})]})]}),p.jsx("style",{children:`
        @keyframes slideDown {
          from { opacity: 0; transform: translateY(-10px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .line-clamp-2 {
          display: -webkit-box;
          -webkit-line-clamp: 2;
          -webkit-box-orient: vertical;
          overflow: hidden;
        }
      `})]})},s$=({children:e})=>{const{currentUser:t,logout:n,branches:r,updateUser:i,showToast:a}=Un(),l=mo(),f=Ku(),[h,u]=k.useState(!0),[g,y]=k.useState(!1),[E,C]=k.useState(!1),[I,M]=k.useState({name:(t==null?void 0:t.name)||"",email:(t==null?void 0:t.email)||"",emergencyContact:(t==null?void 0:t.emergencyContact)||"",address:(t==null?void 0:t.address)||""}),[O,j]=k.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[U,L]=k.useState(!1);if(!t)return null;const G=hB.filter(Y=>Y.roles.includes(t.role)),V=r.find(Y=>Y.id===t.branchId),z=G.slice(0,5),B=()=>{n(),f("/login",{replace:!0})},J=Y=>{Y.preventDefault(),i(t.id,I),C(!1)},W=async Y=>{const Te=new TextEncoder().encode(Y),le=await crypto.subtle.digest("SHA-256",Te);return Array.from(new Uint8Array(le)).map(ge=>ge.toString(16).padStart(2,"0")).join("")},Z=async Y=>{if(Y.preventDefault(),O.newPassword.length<6){a("Password must be at least 6 characters","error");return}if(O.newPassword!==O.confirmPassword){a("New passwords do not match","error");return}L(!0);try{const pe=await W(O.newPassword);await i(t.id,{password:pe}),a("Password updated successfully","success"),j({currentPassword:"",newPassword:"",confirmPassword:""})}catch{a("Failed to update password","error")}finally{L(!1)}},te=()=>y(!1);return p.jsxs("div",{className:"flex h-full w-full overflow-hidden bg-gray-50 font-sans",children:[g&&p.jsx("div",{className:"md:hidden fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[55] transition-opacity animate-[fadeIn_0.2s_ease-out]",onClick:te}),p.jsxs("aside",{className:`
        fixed inset-y-0 left-0 z-[60] bg-slate-900 text-white transition-transform duration-300 transform 
        ${g?"translate-x-0":"-translate-x-full"} 
        md:relative md:translate-x-0 md:flex flex-col shadow-2xl shrink-0
        ${h?"w-72":"w-20"}
      `,children:[p.jsxs("div",{className:"p-6 flex items-center justify-between border-b border-slate-800",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"bg-blue-600 p-2 rounded-lg shrink-0",children:p.jsx("i",{className:"fas fa-dumbbell text-xl"})}),(h||g)&&p.jsx("span",{className:"font-black text-lg tracking-widest uppercase truncate",children:"IronFlow"})]}),p.jsx("button",{onClick:te,className:"md:hidden text-slate-400 hover:text-white",children:p.jsx("i",{className:"fas fa-times text-xl"})})]}),p.jsx("nav",{className:"flex-1 mt-6 overflow-y-auto scrollbar-hide",children:G.map(Y=>{const pe=l.pathname===Y.path;return p.jsxs(Lu,{to:Y.path,onClick:te,className:`flex items-center gap-4 px-6 py-4 hover:bg-slate-800 transition-all ${pe?"bg-slate-800 border-l-4 border-blue-500 text-blue-400 font-bold":"text-slate-400"}`,children:[p.jsx("span",{className:"text-xl w-6 flex justify-center",children:Y.icon}),(h||g)&&p.jsx("span",{className:"font-medium text-sm truncate",children:Y.label})]},Y.path)})}),p.jsxs("div",{className:"p-4 border-t border-slate-800 space-y-2",children:[p.jsxs("button",{onClick:()=>{M({name:t.name,email:t.email,emergencyContact:t.emergencyContact||"",address:t.address||""}),C(!0)},className:`w-full flex items-center gap-4 px-4 py-3 text-slate-400 hover:text-white hover:bg-slate-800 rounded-xl transition-all font-bold text-sm ${!h&&!g&&"justify-center px-0"}`,children:[p.jsx("i",{className:"fas fa-cog text-lg"}),(h||g)&&p.jsx("span",{children:"SETTINGS"})]}),p.jsxs("button",{onClick:B,className:`w-full flex items-center gap-4 px-4 py-3 text-red-400 hover:bg-red-500/10 rounded-xl transition-all font-bold text-sm ${!h&&!g&&"justify-center px-0"}`,children:[p.jsx("i",{className:"fas fa-sign-out-alt text-lg"}),(h||g)&&p.jsx("span",{children:"LOGOUT"})]})]})]}),p.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden relative",children:[p.jsxs("header",{className:"bg-white border-b h-16 md:h-20 flex items-center justify-between px-4 md:px-8 z-20 shadow-sm shrink-0",children:[p.jsxs("div",{className:"flex items-center gap-3 md:gap-4 overflow-hidden min-w-0 flex-1",children:[p.jsx("button",{onClick:()=>y(!0),className:"md:hidden text-slate-400 hover:text-slate-900 transition-colors p-2 hover:bg-slate-100 rounded-lg shrink-0",children:p.jsx("i",{className:"fas fa-bars text-xl"})}),p.jsx("button",{onClick:()=>u(!h),className:"hidden md:flex text-gray-400 hover:text-gray-900 transition-colors p-2 hover:bg-gray-100 rounded-lg shrink-0",children:p.jsx("i",{className:`fas ${h?"fa-indent":"fa-outdent"} text-xl`})}),p.jsx("div",{className:"bg-blue-600 p-1.5 rounded-lg md:hidden shrink-0",children:p.jsx("i",{className:"fas fa-dumbbell text-white text-[10px]"})}),p.jsx("h1",{className:"text-sm md:text-lg font-black text-gray-800 tracking-tight truncate pr-2",children:V?V.name:"IronFlow Global"})]}),p.jsxs("div",{className:"flex items-center gap-3 md:gap-6 shrink-0 ml-auto pl-2",children:[p.jsx(a$,{}),p.jsxs("div",{className:"hidden sm:flex flex-col text-right min-w-0 max-w-[150px]",children:[p.jsx("span",{className:"text-[12px] md:text-sm font-black text-gray-900 truncate",children:t.name}),p.jsx("span",{className:"text-[8px] md:text-[9px] text-blue-600 font-black uppercase tracking-widest truncate",children:t.role.replace("_"," ")})]}),p.jsxs("div",{className:"relative group cursor-pointer shrink-0",onClick:()=>C(!0),children:[p.jsx("img",{src:t.avatar,alt:"User",className:"w-9 h-9 md:w-11 md:h-11 rounded-xl md:rounded-2xl border-2 border-white shadow-md object-cover transition-transform group-hover:scale-105"}),p.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-500 border-2 border-white rounded-full"})]})]})]}),p.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-8 bg-gray-50/50 pb-24 md:pb-8 scrollbar-hide",children:e}),p.jsxs("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur-2xl border-t border-gray-100 flex items-center justify-around px-1 py-3 z-50 shadow-[0_-10px_30px_rgba(0,0,0,0.08)] rounded-t-[2.5rem] safe-area-pb",children:[z.map(Y=>{const pe=l.pathname===Y.path;return p.jsxs(Lu,{to:Y.path,className:`flex flex-col items-center gap-1 transition-all flex-1 min-w-0 ${pe?"text-blue-600":"text-slate-500"}`,children:[p.jsx("span",{className:`text-[1.25rem] ${pe?"scale-110":""}`,children:Y.icon}),p.jsx("span",{className:`text-[9px] font-black uppercase tracking-tight truncate w-full text-center px-1 ${pe?"opacity-100":"opacity-70"}`,children:Y.label}),pe&&p.jsx("span",{className:"w-1.5 h-1.5 bg-blue-600 rounded-full mt-0.5 animate-pulse"})]},Y.path)}),p.jsxs("button",{onClick:()=>y(!0),className:"flex flex-col items-center gap-1 transition-all flex-1 min-w-0 text-slate-500",children:[p.jsx("i",{className:"fas fa-ellipsis-h text-[1.25rem]"}),p.jsx("span",{className:"text-[9px] font-black uppercase tracking-tight opacity-70",children:"More"})]})]})]}),E&&p.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4",children:p.jsxs("div",{className:"bg-white rounded-[2.5rem] w-full max-w-md overflow-hidden shadow-2xl animate-[slideUp_0.3s_ease-out] max-h-[90dvh] flex flex-col",children:[p.jsxs("div",{className:"bg-slate-900 p-6 md:p-8 text-white flex justify-between items-center shrink-0",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-xl font-black uppercase tracking-tight",children:"Account Profile"}),p.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest mt-1",children:"Manage your identity"})]}),p.jsx("button",{onClick:()=>C(!1),className:"bg-white/10 p-2 rounded-xl hover:bg-white/20 transition-colors",children:p.jsx("i",{className:"fas fa-times"})})]}),p.jsxs("form",{onSubmit:J,className:"p-6 md:p-8 space-y-6 overflow-y-auto flex-1 scrollbar-hide",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Full Name"}),p.jsxs("div",{className:"relative",children:[p.jsx("i",{className:"fas fa-user absolute left-4 top-1/2 -translate-y-1/2 text-slate-300"}),p.jsx("input",{required:!0,className:"w-full p-4 pl-12 bg-slate-50 border rounded-2xl outline-none focus:ring-2 focus:ring-blue-500 font-bold",value:I.name,onChange:Y=>M({...I,name:Y.target.value})})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Address"}),p.jsxs("div",{className:"relative",children:[p.jsx("i",{className:"fas fa-map-marker-alt absolute left-4 top-4 text-slate-300"}),p.jsx("textarea",{className:"w-full p-4 pl-12 bg-slate-50 border rounded-2xl outline-none focus:ring-2 focus:ring-blue-500 font-bold text-sm",value:I.address,onChange:Y=>M({...I,address:Y.target.value}),placeholder:"Residential Address",rows:2})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("label",{className:"text-[10px] font-black text-red-500 uppercase tracking-widest flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-life-ring"})," Emergency Contact"]}),p.jsxs("div",{className:"relative",children:[p.jsx("i",{className:"fas fa-phone-medical absolute left-4 top-1/2 -translate-y-1/2 text-red-200"}),p.jsx("input",{required:!0,type:"tel",className:"w-full p-4 pl-12 bg-red-50 border border-red-100 text-red-700 rounded-2xl outline-none focus:ring-2 focus:ring-red-500 font-black",value:I.emergencyContact,onChange:Y=>M({...I,emergencyContact:Y.target.value}),placeholder:"+91 XXXXX XXXXX"})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Email Address"}),p.jsxs("div",{className:"relative",children:[p.jsx("i",{className:"fas fa-envelope absolute left-4 top-1/2 -translate-y-1/2 text-slate-300"}),p.jsx("input",{required:!0,type:"email",className:"w-full p-4 pl-12 bg-slate-50 border rounded-2xl outline-none focus:ring-2 focus:ring-blue-500 font-bold",value:I.email,onChange:Y=>M({...I,email:Y.target.value})})]})]}),p.jsxs("div",{className:"border-t border-slate-200 pt-6 mt-6",children:[p.jsxs("h4",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-4 flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-lock"})," Change Password"]}),p.jsxs("form",{onSubmit:Z,className:"space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"New Password"}),p.jsxs("div",{className:"relative",children:[p.jsx("i",{className:"fas fa-key absolute left-4 top-1/2 -translate-y-1/2 text-slate-300"}),p.jsx("input",{type:"password",required:!0,minLength:6,className:"w-full p-4 pl-12 bg-slate-50 border rounded-2xl outline-none focus:ring-2 focus:ring-blue-500 font-bold",value:O.newPassword,onChange:Y=>j({...O,newPassword:Y.target.value}),placeholder:"Min 6 characters"})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Confirm New Password"}),p.jsxs("div",{className:"relative",children:[p.jsx("i",{className:"fas fa-key absolute left-4 top-1/2 -translate-y-1/2 text-slate-300"}),p.jsx("input",{type:"password",required:!0,minLength:6,className:"w-full p-4 pl-12 bg-slate-50 border rounded-2xl outline-none focus:ring-2 focus:ring-blue-500 font-bold",value:O.confirmPassword,onChange:Y=>j({...O,confirmPassword:Y.target.value}),placeholder:"Confirm password"})]})]}),p.jsx("button",{type:"submit",disabled:U,className:"w-full py-3 bg-slate-800 text-white rounded-2xl font-black text-xs uppercase tracking-widest hover:bg-slate-700 transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:U?p.jsxs(p.Fragment,{children:[p.jsx("i",{className:"fas fa-spinner fa-spin"})," UPDATING..."]}):p.jsxs(p.Fragment,{children:[p.jsx("i",{className:"fas fa-save"})," UPDATE PASSWORD"]})})]})]}),p.jsxs("div",{className:"pt-4 space-y-3 shrink-0 border-t border-slate-200",children:[p.jsx("button",{type:"submit",className:"w-full py-4 bg-blue-600 text-white rounded-2xl font-black text-sm uppercase tracking-widest shadow-xl shadow-blue-100 hover:bg-blue-700 transition-all active:scale-95",children:"SAVE PROFILE CHANGES"}),p.jsx("button",{type:"button",onClick:B,className:"w-full py-3 bg-red-50 text-red-600 rounded-2xl font-black text-xs uppercase tracking-widest hover:bg-red-100 transition-all",children:"LOGOUT SESSION"})]})]})]})}),p.jsx("style",{children:`
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .safe-area-pb { padding-bottom: calc(0.75rem + env(safe-area-inset-bottom)); }
      `})]})};function PD(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=PD(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function on(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=PD(e))&&(r&&(r+=" "),r+=t);return r}var o$=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function ww(e){if(typeof e!="string")return!1;var t=o$;return t.includes(e)}var l$=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],c$=new Set(l$);function jD(e){return typeof e!="string"?!1:c$.has(e)}function LD(e){return typeof e=="string"&&e.startsWith("data-")}function Ta(e){if(typeof e!="object"||e===null)return{};var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(jD(n)||LD(n))&&(t[n]=e[n]);return t}function Bu(e){if(e==null)return null;if(k.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Ta(t)}return typeof e=="object"&&!Array.isArray(e)?Ta(e):null}function bi(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(jD(n)||LD(n)||ww(n))&&(t[n]=e[n]);return t}function u$(e){return e==null?null:k.isValidElement(e)?bi(e.props):typeof e=="object"&&!Array.isArray(e)?bi(e):null}var d$=["children","width","height","viewBox","className","style","title","desc"];function Zv(){return Zv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zv.apply(null,arguments)}function f$(e,t){if(e==null)return{};var n,r,i=h$(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function h$(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Ew=k.forwardRef((e,t)=>{var{children:n,width:r,height:i,viewBox:a,className:l,style:f,title:h,desc:u}=e,g=f$(e,d$),y=a||{width:r,height:i,x:0,y:0},E=on("recharts-surface",l);return k.createElement("svg",Zv({},bi(g),{className:E,width:r,height:i,style:f,viewBox:"".concat(y.x," ").concat(y.y," ").concat(y.width," ").concat(y.height),ref:t}),k.createElement("title",null,h),k.createElement("desc",null,u),n)}),p$=["children","className"];function Qv(){return Qv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qv.apply(null,arguments)}function m$(e,t){if(e==null)return{};var n,r,i=g$(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function g$(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Oi=k.forwardRef((e,t)=>{var{children:n,className:r}=e,i=m$(e,p$),a=on("recharts-layer",r);return k.createElement("g",Qv({className:a},bi(i),{ref:t}),n)}),BD=k.createContext(null),x$=()=>k.useContext(BD);function Rn(e){return function(){return e}}const UD=Math.cos,Np=Math.sin,ts=Math.sqrt,_p=Math.PI,jm=2*_p,eb=Math.PI,tb=2*eb,nc=1e-6,y$=tb-nc;function FD(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function v$(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return FD;const n=10**t;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class b${constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?FD:v$(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,a,l){this._append`C${+t},${+n},${+r},${+i},${this._x1=+a},${this._y1=+l}`}arcTo(t,n,r,i,a){if(t=+t,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let l=this._x1,f=this._y1,h=r-t,u=i-n,g=l-t,y=f-n,E=g*g+y*y;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(E>nc)if(!(Math.abs(y*h-u*g)>nc)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let C=r-l,I=i-f,M=h*h+u*u,O=C*C+I*I,j=Math.sqrt(M),U=Math.sqrt(E),L=a*Math.tan((eb-Math.acos((M+E-O)/(2*j*U)))/2),G=L/U,V=L/j;Math.abs(G-1)>nc&&this._append`L${t+G*g},${n+G*y}`,this._append`A${a},${a},0,0,${+(y*C>g*I)},${this._x1=t+V*h},${this._y1=n+V*u}`}}arc(t,n,r,i,a,l){if(t=+t,n=+n,r=+r,l=!!l,r<0)throw new Error(`negative radius: ${r}`);let f=r*Math.cos(i),h=r*Math.sin(i),u=t+f,g=n+h,y=1^l,E=l?i-a:a-i;this._x1===null?this._append`M${u},${g}`:(Math.abs(this._x1-u)>nc||Math.abs(this._y1-g)>nc)&&this._append`L${u},${g}`,r&&(E<0&&(E=E%tb+tb),E>y$?this._append`A${r},${r},0,1,${y},${t-f},${n-h}A${r},${r},0,1,${y},${this._x1=u},${this._y1=g}`:E>nc&&this._append`A${r},${r},0,${+(E>=eb)},${y},${this._x1=t+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Sw(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new b$(t)}function Aw(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function HD(e){this._context=e}HD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Lm(e){return new HD(e)}function zD(e){return e[0]}function GD(e){return e[1]}function VD(e,t){var n=Rn(!0),r=null,i=Lm,a=null,l=Sw(f);e=typeof e=="function"?e:e===void 0?zD:Rn(e),t=typeof t=="function"?t:t===void 0?GD:Rn(t);function f(h){var u,g=(h=Aw(h)).length,y,E=!1,C;for(r==null&&(a=i(C=l())),u=0;u<=g;++u)!(u<g&&n(y=h[u],u,h))===E&&((E=!E)?a.lineStart():a.lineEnd()),E&&a.point(+e(y,u,h),+t(y,u,h));if(C)return a=null,C+""||null}return f.x=function(h){return arguments.length?(e=typeof h=="function"?h:Rn(+h),f):e},f.y=function(h){return arguments.length?(t=typeof h=="function"?h:Rn(+h),f):t},f.defined=function(h){return arguments.length?(n=typeof h=="function"?h:Rn(!!h),f):n},f.curve=function(h){return arguments.length?(i=h,r!=null&&(a=i(r)),f):i},f.context=function(h){return arguments.length?(h==null?r=a=null:a=i(r=h),f):r},f}function G0(e,t,n){var r=null,i=Rn(!0),a=null,l=Lm,f=null,h=Sw(u);e=typeof e=="function"?e:e===void 0?zD:Rn(+e),t=typeof t=="function"?t:Rn(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?GD:Rn(+n);function u(y){var E,C,I,M=(y=Aw(y)).length,O,j=!1,U,L=new Array(M),G=new Array(M);for(a==null&&(f=l(U=h())),E=0;E<=M;++E){if(!(E<M&&i(O=y[E],E,y))===j)if(j=!j)C=E,f.areaStart(),f.lineStart();else{for(f.lineEnd(),f.lineStart(),I=E-1;I>=C;--I)f.point(L[I],G[I]);f.lineEnd(),f.areaEnd()}j&&(L[E]=+e(O,E,y),G[E]=+t(O,E,y),f.point(r?+r(O,E,y):L[E],n?+n(O,E,y):G[E]))}if(U)return f=null,U+""||null}function g(){return VD().defined(i).curve(l).context(a)}return u.x=function(y){return arguments.length?(e=typeof y=="function"?y:Rn(+y),r=null,u):e},u.x0=function(y){return arguments.length?(e=typeof y=="function"?y:Rn(+y),u):e},u.x1=function(y){return arguments.length?(r=y==null?null:typeof y=="function"?y:Rn(+y),u):r},u.y=function(y){return arguments.length?(t=typeof y=="function"?y:Rn(+y),n=null,u):t},u.y0=function(y){return arguments.length?(t=typeof y=="function"?y:Rn(+y),u):t},u.y1=function(y){return arguments.length?(n=y==null?null:typeof y=="function"?y:Rn(+y),u):n},u.lineX0=u.lineY0=function(){return g().x(e).y(t)},u.lineY1=function(){return g().x(e).y(n)},u.lineX1=function(){return g().x(r).y(t)},u.defined=function(y){return arguments.length?(i=typeof y=="function"?y:Rn(!!y),u):i},u.curve=function(y){return arguments.length?(l=y,a!=null&&(f=l(a)),u):l},u.context=function(y){return arguments.length?(y==null?a=f=null:f=l(a=y),u):a},u}class qD{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function w$(e){return new qD(e,!0)}function E$(e){return new qD(e,!1)}const Cw={draw(e,t){const n=ts(t/_p);e.moveTo(n,0),e.arc(0,0,n,0,jm)}},S$={draw(e,t){const n=ts(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},$D=ts(1/3),A$=$D*2,C$={draw(e,t){const n=ts(t/A$),r=n*$D;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},N$={draw(e,t){const n=ts(t),r=-n/2;e.rect(r,r,n,n)}},_$=.8908130915292852,YD=Np(_p/10)/Np(7*_p/10),T$=Np(jm/10)*YD,I$=-UD(jm/10)*YD,R$={draw(e,t){const n=ts(t*_$),r=T$*n,i=I$*n;e.moveTo(0,-n),e.lineTo(r,i);for(let a=1;a<5;++a){const l=jm*a/5,f=UD(l),h=Np(l);e.lineTo(h*n,-f*n),e.lineTo(f*r-h*i,h*r+f*i)}e.closePath()}},Hy=ts(3),M$={draw(e,t){const n=-ts(t/(Hy*3));e.moveTo(0,n*2),e.lineTo(-Hy*n,-n),e.lineTo(Hy*n,-n),e.closePath()}},va=-.5,ba=ts(3)/2,nb=1/ts(12),O$=(nb/2+1)*3,D$={draw(e,t){const n=ts(t/O$),r=n/2,i=n*nb,a=r,l=n*nb+n,f=-a,h=l;e.moveTo(r,i),e.lineTo(a,l),e.lineTo(f,h),e.lineTo(va*r-ba*i,ba*r+va*i),e.lineTo(va*a-ba*l,ba*a+va*l),e.lineTo(va*f-ba*h,ba*f+va*h),e.lineTo(va*r+ba*i,va*i-ba*r),e.lineTo(va*a+ba*l,va*l-ba*a),e.lineTo(va*f+ba*h,va*h-ba*f),e.closePath()}};function k$(e,t){let n=null,r=Sw(i);e=typeof e=="function"?e:Rn(e||Cw),t=typeof t=="function"?t:Rn(t===void 0?64:+t);function i(){let a;if(n||(n=a=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(e=typeof a=="function"?a:Rn(a),i):e},i.size=function(a){return arguments.length?(t=typeof a=="function"?a:Rn(+a),i):t},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function Tp(){}function Ip(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function WD(e){this._context=e}WD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ip(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ip(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function P$(e){return new WD(e)}function KD(e){this._context=e}KD.prototype={areaStart:Tp,areaEnd:Tp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Ip(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function j$(e){return new KD(e)}function XD(e){this._context=e}XD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Ip(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function L$(e){return new XD(e)}function JD(e){this._context=e}JD.prototype={areaStart:Tp,areaEnd:Tp,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function B$(e){return new JD(e)}function $_(e){return e<0?-1:1}function Y_(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),l=(n-e._y1)/(i||r<0&&-0),f=(a*i+l*r)/(r+i);return($_(a)+$_(l))*Math.min(Math.abs(a),Math.abs(l),.5*Math.abs(f))||0}function W_(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function zy(e,t,n){var r=e._x0,i=e._y0,a=e._x1,l=e._y1,f=(a-r)/3;e._context.bezierCurveTo(r+f,i+f*t,a-f,l-f*n,a,l)}function Rp(e){this._context=e}Rp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:zy(this,this._t0,W_(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,zy(this,W_(this,n=Y_(this,e,t)),n);break;default:zy(this,this._t0,n=Y_(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function ZD(e){this._context=new QD(e)}(ZD.prototype=Object.create(Rp.prototype)).point=function(e,t){Rp.prototype.point.call(this,t,e)};function QD(e){this._context=e}QD.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}};function U$(e){return new Rp(e)}function F$(e){return new ZD(e)}function ek(e){this._context=e}ek.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=K_(e),i=K_(t),a=0,l=1;l<n;++a,++l)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],e[l],t[l]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function K_(e){var t,n=e.length-1,r,i=new Array(n),a=new Array(n),l=new Array(n);for(i[0]=0,a[0]=2,l[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,a[t]=4,l[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,a[n-1]=7,l[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/a[t-1],a[t]-=r,l[t]-=r*l[t-1];for(i[n-1]=l[n-1]/a[n-1],t=n-2;t>=0;--t)i[t]=(l[t]-i[t+1])/a[t];for(a[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function H$(e){return new ek(e)}function Bm(e,t){this._context=e,this._t=t}Bm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function z$(e){return new Bm(e,.5)}function G$(e){return new Bm(e,0)}function V$(e){return new Bm(e,1)}function mc(e,t){if((l=e.length)>1)for(var n=1,r,i,a=e[t[0]],l,f=a.length;n<l;++n)for(i=a,a=e[t[n]],r=0;r<f;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function rb(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function q$(e,t){return e[t]}function $$(e){const t=[];return t.key=e,t}function Y$(){var e=Rn([]),t=rb,n=mc,r=q$;function i(a){var l=Array.from(e.apply(this,arguments),$$),f,h=l.length,u=-1,g;for(const y of a)for(f=0,++u;f<h;++f)(l[f][u]=[0,+r(y,l[f].key,u,a)]).data=y;for(f=0,g=Aw(t(l));f<h;++f)l[g[f]].index=f;return n(l,g),l}return i.keys=function(a){return arguments.length?(e=typeof a=="function"?a:Rn(Array.from(a)),i):e},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:Rn(+a),i):r},i.order=function(a){return arguments.length?(t=a==null?rb:typeof a=="function"?a:Rn(Array.from(a)),i):t},i.offset=function(a){return arguments.length?(n=a??mc,i):n},i}function W$(e,t){if((r=e.length)>0){for(var n,r,i=0,a=e[0].length,l;i<a;++i){for(l=n=0;n<r;++n)l+=e[n][i][1]||0;if(l)for(n=0;n<r;++n)e[n][i][1]/=l}mc(e,t)}}function K$(e,t){if((i=e.length)>0){for(var n=0,r=e[t[0]],i,a=r.length;n<a;++n){for(var l=0,f=0;l<i;++l)f+=e[l][n][1]||0;r[n][1]+=r[n][0]=-f/2}mc(e,t)}}function X$(e,t){if(!(!((l=e.length)>0)||!((a=(i=e[t[0]]).length)>0))){for(var n=0,r=1,i,a,l;r<a;++r){for(var f=0,h=0,u=0;f<l;++f){for(var g=e[t[f]],y=g[r][1]||0,E=g[r-1][1]||0,C=(y-E)/2,I=0;I<f;++I){var M=e[t[I]],O=M[r][1]||0,j=M[r-1][1]||0;C+=O-j}h+=y,u+=C*y}i[r-1][1]+=i[r-1][0]=n,h&&(n-=u/h)}i[r-1][1]+=i[r-1][0]=n,mc(e,t)}}var Gy={},Vy={},X_;function J$(){return X_||(X_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(Vy)),Vy}var qy={},J_;function tk(){return J_||(J_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(qy)),qy}var $y={},Z_;function Nw(){return Z_||(Z_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){var r;return typeof n=="string"||typeof n=="symbol"?n:Object.is((r=n==null?void 0:n.valueOf)==null?void 0:r.call(n),-0)?"-0":String(n)}e.toKey=t})($y)),$y}var Yy={},Wy={},Q_;function Z$(){return Q_||(Q_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(t).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}e.toString=t})(Wy)),Wy}var eT;function _w(){return eT||(eT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Z$(),n=Nw();function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=t.toString(i);const a=[],l=i.length;if(l===0)return a;let f=0,h="",u="",g=!1;for(i.charCodeAt(0)===46&&(a.push(""),f++);f<l;){const y=i[f];u?y==="\\"&&f+1<l?(f++,h+=i[f]):y===u?u="":h+=y:g?y==='"'||y==="'"?u=y:y==="]"?(g=!1,a.push(h),h=""):h+=y:y==="["?(g=!0,h&&(a.push(h),h="")):y==="."?h&&(a.push(h),h=""):h+=y,f++}return h&&a.push(h),a}e.toPath=r})(Yy)),Yy}var tT;function Tw(){return tT||(tT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=J$(),n=tk(),r=Nw(),i=_w();function a(f,h,u){if(f==null)return u;switch(typeof h){case"string":{if(t.isUnsafeProperty(h))return u;const g=f[h];return g===void 0?n.isDeepKey(h)?a(f,i.toPath(h),u):u:g}case"number":case"symbol":{typeof h=="number"&&(h=r.toKey(h));const g=f[h];return g===void 0?u:g}default:{if(Array.isArray(h))return l(f,h,u);if(Object.is(h==null?void 0:h.valueOf(),-0)?h="-0":h=String(h),t.isUnsafeProperty(h))return u;const g=f[h];return g===void 0?u:g}}}function l(f,h,u){if(h.length===0)return u;let g=f;for(let y=0;y<h.length;y++){if(g==null||t.isUnsafeProperty(h[y]))return u;g=g[h[y]]}return g===void 0?u:g}e.get=a})(Gy)),Gy}var Ky,nT;function Q$(){return nT||(nT=1,Ky=Tw().get),Ky}var eY=Q$();const gc=Qa(eY);var tY=4;function xl(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:tY,n=10**t,r=Math.round(e*n)/n;return Object.is(r,-0)?0:r}function ir(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.reduce((i,a,l)=>{var f=n[l-1];return typeof f=="string"?i+f+a:f!==void 0?i+xl(f)+a:i+a},"")}var ui=e=>e===0?0:e>0?1:-1,vs=e=>typeof e=="number"&&e!=+e,lo=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,lt=e=>(typeof e=="number"||e instanceof Number)&&!vs(e),bs=e=>lt(e)||typeof e=="string",nY=0,If=e=>{var t=++nY;return"".concat(e||"").concat(t)},ta=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!lt(t)&&typeof t!="string")return r;var a;if(lo(t)){if(n==null)return r;var l=t.indexOf("%");a=n*parseFloat(t.slice(0,l))/100}else a=+t;return vs(a)&&(a=r),i&&n!=null&&a>n&&(a=n),a},nk=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++)if(!n[String(e[r])])n[String(e[r])]=!0;else return!0;return!1};function li(e,t,n){return lt(e)&&lt(t)?xl(e+n*(t-e)):t}function rk(e,t,n){if(!(!e||!e.length))return e.find(r=>r&&(typeof t=="function"?t(r):gc(r,t))===n)}var Dr=e=>e===null||typeof e>"u",Wf=e=>Dr(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function rY(e){return e!=null}function Kf(){}var iY=["type","size","sizeType"];function ib(){return ib=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ib.apply(null,arguments)}function rT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function iT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rT(Object(n),!0).forEach(function(r){aY(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function aY(e,t,n){return(t=sY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sY(e){var t=oY(e,"string");return typeof t=="symbol"?t:t+""}function oY(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lY(e,t){if(e==null)return{};var n,r,i=cY(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function cY(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var ik={symbolCircle:Cw,symbolCross:S$,symbolDiamond:C$,symbolSquare:N$,symbolStar:R$,symbolTriangle:M$,symbolWye:D$},uY=Math.PI/180,dY=e=>{var t="symbol".concat(Wf(e));return ik[t]||Cw},fY=(e,t,n)=>{if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var r=18*uY;return 1.25*e*e*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},hY=(e,t)=>{ik["symbol".concat(Wf(e))]=t},Iw=e=>{var{type:t="circle",size:n=64,sizeType:r="area"}=e,i=lY(e,iY),a=iT(iT({},i),{},{type:t,size:n,sizeType:r}),l="circle";typeof t=="string"&&(l=t);var f=()=>{var E=dY(l),C=k$().type(E).size(fY(n,r,l)),I=C();if(I!==null)return I},{className:h,cx:u,cy:g}=a,y=bi(a);return lt(u)&&lt(g)&&lt(n)?k.createElement("path",ib({},y,{className:on("recharts-symbols",h),transform:"translate(".concat(u,", ").concat(g,")"),d:f()})):null};Iw.registerSymbol=hY;var ak=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,Rw=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(k.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{ww(i)&&(r[i]=(a=>n[i](n,a)))}),r},pY=(e,t,n)=>r=>(e(t,n,r),null),Mw=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var r=null;return Object.keys(e).forEach(i=>{var a=e[i];ww(i)&&typeof a=="function"&&(r||(r={}),r[i]=pY(a,t,n))}),r};function aT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function mY(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aT(Object(n),!0).forEach(function(r){gY(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function gY(e,t,n){return(t=xY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xY(e){var t=yY(e,"string");return typeof t=="symbol"?t:t+""}function yY(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kr(e,t){var n=mY({},e),r=t,i=Object.keys(t),a=i.reduce((l,f)=>(l[f]===void 0&&r[f]!==void 0&&(l[f]=r[f]),l),n);return a}function Mp(){return Mp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mp.apply(null,arguments)}function sT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function vY(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sT(Object(n),!0).forEach(function(r){bY(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bY(e,t,n){return(t=wY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wY(e){var t=EY(e,"string");return typeof t=="symbol"?t:t+""}function EY(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ea=32,SY={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function AY(e){var{data:t,iconType:n,inactiveColor:r}=e,i=Ea/2,a=Ea/6,l=Ea/3,f=t.inactive?r:t.color,h=n??t.type;if(h==="none")return null;if(h==="plainline"){var u;return k.createElement("line",{strokeWidth:4,fill:"none",stroke:f,strokeDasharray:(u=t.payload)===null||u===void 0?void 0:u.strokeDasharray,x1:0,y1:i,x2:Ea,y2:i,className:"recharts-legend-icon"})}if(h==="line")return k.createElement("path",{strokeWidth:4,fill:"none",stroke:f,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(Ea,"M").concat(2*l,",").concat(i,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(h==="rect")return k.createElement("path",{stroke:"none",fill:f,d:"M0,".concat(Ea/8,"h").concat(Ea,"v").concat(Ea*3/4,"h").concat(-Ea,"z"),className:"recharts-legend-icon"});if(k.isValidElement(t.legendIcon)){var g=vY({},t);return delete g.legendIcon,k.cloneElement(t.legendIcon,g)}return k.createElement(Iw,{fill:f,cx:i,cy:i,size:Ea,sizeType:"diameter",type:h})}function CY(e){var{payload:t,iconSize:n,layout:r,formatter:i,inactiveColor:a,iconType:l}=e,f={x:0,y:0,width:Ea,height:Ea},h={display:r==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((g,y)=>{var E=g.formatter||i,C=on({"recharts-legend-item":!0,["legend-item-".concat(y)]:!0,inactive:g.inactive});if(g.type==="none")return null;var I=g.inactive?a:g.color,M=E?E(g.value,g,y):g.value;return k.createElement("li",Mp({className:C,style:h,key:"legend-item-".concat(y)},Mw(e,g,y)),k.createElement(Ew,{width:n,height:n,viewBox:f,style:u,"aria-label":"".concat(M," legend icon")},k.createElement(AY,{data:g,iconType:l,inactiveColor:a})),k.createElement("span",{className:"recharts-legend-item-text",style:{color:I}},M))})}var NY=e=>{var t=kr(e,SY),{payload:n,layout:r,align:i}=t;if(!n||!n.length)return null;var a={padding:0,margin:0,textAlign:r==="horizontal"?i:"left"};return k.createElement("ul",{className:"recharts-default-legend",style:a},k.createElement(CY,Mp({},t,{payload:n})))},Xy={},Jy={},oT;function _Y(){return oT||(oT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){const i=new Map;for(let a=0;a<n.length;a++){const l=n[a],f=r(l,a,n);i.has(f)||i.set(f,l)}return Array.from(i.values())}e.uniqBy=t})(Jy)),Jy}var Zy={},lT;function TY(){return lT||(lT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){return function(...i){return n.apply(this,i.slice(0,r))}}e.ary=t})(Zy)),Zy}var Qy={},cT;function sk(){return cT||(cT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(Qy)),Qy}var e1={},t1={},n1={},uT;function IY(){return uT||(uT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(n1)),n1}var dT;function Ow(){return dT||(dT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=IY();function n(r){return r!=null&&typeof r!="function"&&t.isLength(r.length)}e.isArrayLike=n})(t1)),t1}var r1={},fT;function RY(){return fT||(fT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(r1)),r1}var hT;function MY(){return hT||(hT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ow(),n=RY();function r(i){return n.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=r})(e1)),e1}var i1={},a1={},pT;function OY(){return pT||(pT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Tw();function n(r){return function(i){return t.get(i,r)}}e.property=n})(a1)),a1}var s1={},o1={},l1={},c1={},mT;function ok(){return mT||(mT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(c1)),c1}var u1={},gT;function lk(){return gT||(gT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(u1)),u1}var d1={},xT;function ck(){return xT||(xT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}e.isEqualsSameValueZero=t})(d1)),d1}var yT;function DY(){return yT||(yT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ok(),n=lk(),r=ck();function i(g,y,E){return typeof E!="function"?i(g,y,()=>{}):a(g,y,function C(I,M,O,j,U,L){const G=E(I,M,O,j,U,L);return G!==void 0?!!G:a(I,M,C,L)},new Map)}function a(g,y,E,C){if(y===g)return!0;switch(typeof y){case"object":return l(g,y,E,C);case"function":return Object.keys(y).length>0?a(g,{...y},E,C):r.isEqualsSameValueZero(g,y);default:return t.isObject(g)?typeof y=="string"?y==="":!0:r.isEqualsSameValueZero(g,y)}}function l(g,y,E,C){if(y==null)return!0;if(Array.isArray(y))return h(g,y,E,C);if(y instanceof Map)return f(g,y,E,C);if(y instanceof Set)return u(g,y,E,C);const I=Object.keys(y);if(g==null||n.isPrimitive(g))return I.length===0;if(I.length===0)return!0;if(C!=null&&C.has(y))return C.get(y)===g;C==null||C.set(y,g);try{for(let M=0;M<I.length;M++){const O=I[M];if(!n.isPrimitive(g)&&!(O in g)||y[O]===void 0&&g[O]!==void 0||y[O]===null&&g[O]!==null||!E(g[O],y[O],O,g,y,C))return!1}return!0}finally{C==null||C.delete(y)}}function f(g,y,E,C){if(y.size===0)return!0;if(!(g instanceof Map))return!1;for(const[I,M]of y.entries()){const O=g.get(I);if(E(O,M,I,g,y,C)===!1)return!1}return!0}function h(g,y,E,C){if(y.length===0)return!0;if(!Array.isArray(g))return!1;const I=new Set;for(let M=0;M<y.length;M++){const O=y[M];let j=!1;for(let U=0;U<g.length;U++){if(I.has(U))continue;const L=g[U];let G=!1;if(E(L,O,M,g,y,C)&&(G=!0),G){I.add(U),j=!0;break}}if(!j)return!1}return!0}function u(g,y,E,C){return y.size===0?!0:g instanceof Set?h([...g],[...y],E,C):!1}e.isMatchWith=i,e.isSetMatch=u})(l1)),l1}var vT;function uk(){return vT||(vT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=DY();function n(r,i){return t.isMatchWith(r,i,()=>{})}e.isMatch=n})(o1)),o1}var f1={},h1={},p1={},bT;function kY(){return bT||(bT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}e.getSymbols=t})(p1)),p1}var m1={},wT;function Dw(){return wT||(wT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(m1)),m1}var g1={},ET;function dk(){return ET||(ET=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",a="[object Arguments]",l="[object Symbol]",f="[object Date]",h="[object Map]",u="[object Set]",g="[object Array]",y="[object Function]",E="[object ArrayBuffer]",C="[object Object]",I="[object Error]",M="[object DataView]",O="[object Uint8Array]",j="[object Uint8ClampedArray]",U="[object Uint16Array]",L="[object Uint32Array]",G="[object BigUint64Array]",V="[object Int8Array]",z="[object Int16Array]",B="[object Int32Array]",J="[object BigInt64Array]",W="[object Float32Array]",Z="[object Float64Array]";e.argumentsTag=a,e.arrayBufferTag=E,e.arrayTag=g,e.bigInt64ArrayTag=J,e.bigUint64ArrayTag=G,e.booleanTag=i,e.dataViewTag=M,e.dateTag=f,e.errorTag=I,e.float32ArrayTag=W,e.float64ArrayTag=Z,e.functionTag=y,e.int16ArrayTag=z,e.int32ArrayTag=B,e.int8ArrayTag=V,e.mapTag=h,e.numberTag=r,e.objectTag=C,e.regexpTag=t,e.setTag=u,e.stringTag=n,e.symbolTag=l,e.uint16ArrayTag=U,e.uint32ArrayTag=L,e.uint8ArrayTag=O,e.uint8ClampedArrayTag=j})(g1)),g1}var x1={},ST;function PY(){return ST||(ST=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(x1)),x1}var AT;function fk(){return AT||(AT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kY(),n=Dw(),r=dk(),i=lk(),a=PY();function l(g,y){return f(g,void 0,g,new Map,y)}function f(g,y,E,C=new Map,I=void 0){const M=I==null?void 0:I(g,y,E,C);if(M!==void 0)return M;if(i.isPrimitive(g))return g;if(C.has(g))return C.get(g);if(Array.isArray(g)){const O=new Array(g.length);C.set(g,O);for(let j=0;j<g.length;j++)O[j]=f(g[j],j,E,C,I);return Object.hasOwn(g,"index")&&(O.index=g.index),Object.hasOwn(g,"input")&&(O.input=g.input),O}if(g instanceof Date)return new Date(g.getTime());if(g instanceof RegExp){const O=new RegExp(g.source,g.flags);return O.lastIndex=g.lastIndex,O}if(g instanceof Map){const O=new Map;C.set(g,O);for(const[j,U]of g)O.set(j,f(U,j,E,C,I));return O}if(g instanceof Set){const O=new Set;C.set(g,O);for(const j of g)O.add(f(j,void 0,E,C,I));return O}if(typeof Buffer<"u"&&Buffer.isBuffer(g))return g.subarray();if(a.isTypedArray(g)){const O=new(Object.getPrototypeOf(g)).constructor(g.length);C.set(g,O);for(let j=0;j<g.length;j++)O[j]=f(g[j],j,E,C,I);return O}if(g instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&g instanceof SharedArrayBuffer)return g.slice(0);if(g instanceof DataView){const O=new DataView(g.buffer.slice(0),g.byteOffset,g.byteLength);return C.set(g,O),h(O,g,E,C,I),O}if(typeof File<"u"&&g instanceof File){const O=new File([g],g.name,{type:g.type});return C.set(g,O),h(O,g,E,C,I),O}if(typeof Blob<"u"&&g instanceof Blob){const O=new Blob([g],{type:g.type});return C.set(g,O),h(O,g,E,C,I),O}if(g instanceof Error){const O=new g.constructor;return C.set(g,O),O.message=g.message,O.name=g.name,O.stack=g.stack,O.cause=g.cause,h(O,g,E,C,I),O}if(g instanceof Boolean){const O=new Boolean(g.valueOf());return C.set(g,O),h(O,g,E,C,I),O}if(g instanceof Number){const O=new Number(g.valueOf());return C.set(g,O),h(O,g,E,C,I),O}if(g instanceof String){const O=new String(g.valueOf());return C.set(g,O),h(O,g,E,C,I),O}if(typeof g=="object"&&u(g)){const O=Object.create(Object.getPrototypeOf(g));return C.set(g,O),h(O,g,E,C,I),O}return g}function h(g,y,E=g,C,I){const M=[...Object.keys(y),...t.getSymbols(y)];for(let O=0;O<M.length;O++){const j=M[O],U=Object.getOwnPropertyDescriptor(g,j);(U==null||U.writable)&&(g[j]=f(y[j],j,E,C,I))}}function u(g){switch(n.getTag(g)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=l,e.cloneDeepWithImpl=f,e.copyProperties=h})(h1)),h1}var CT;function jY(){return CT||(CT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fk();function n(r){return t.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}e.cloneDeep=n})(f1)),f1}var NT;function LY(){return NT||(NT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uk(),n=jY();function r(i){return i=n.cloneDeep(i),a=>t.isMatch(a,i)}e.matches=r})(s1)),s1}var y1={},v1={},b1={},_T;function BY(){return _T||(_T=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fk(),n=Dw(),r=dk();function i(a,l){return t.cloneDeepWith(a,(f,h,u,g)=>{const y=l==null?void 0:l(f,h,u,g);if(y!==void 0)return y;if(typeof a=="object"){if(n.getTag(a)===r.objectTag&&typeof a.constructor!="function"){const E={};return g.set(a,E),t.copyProperties(E,a,u,g),E}switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const E=new a.constructor(a==null?void 0:a.valueOf());return t.copyProperties(E,a),E}case r.argumentsTag:{const E={};return t.copyProperties(E,a),E.length=a.length,E[Symbol.iterator]=a[Symbol.iterator],E}default:return}}})}e.cloneDeepWith=i})(b1)),b1}var TT;function UY(){return TT||(TT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BY();function n(r){return t.cloneDeepWith(r)}e.cloneDeep=n})(v1)),v1}var w1={},E1={},IT;function hk(){return IT||(IT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return t.test(r)}}e.isIndex=n})(E1)),E1}var S1={},RT;function FY(){return RT||(RT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Dw();function n(r){return r!==null&&typeof r=="object"&&t.getTag(r)==="[object Arguments]"}e.isArguments=n})(S1)),S1}var MT;function HY(){return MT||(MT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tk(),n=hk(),r=FY(),i=_w();function a(l,f){let h;if(Array.isArray(f)?h=f:typeof f=="string"&&t.isDeepKey(f)&&(l==null?void 0:l[f])==null?h=i.toPath(f):h=[f],h.length===0)return!1;let u=l;for(let g=0;g<h.length;g++){const y=h[g];if((u==null||!Object.hasOwn(u,y))&&!((Array.isArray(u)||r.isArguments(u))&&n.isIndex(y)&&y<u.length))return!1;u=u[y]}return!0}e.has=a})(w1)),w1}var OT;function zY(){return OT||(OT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uk(),n=Nw(),r=UY(),i=Tw(),a=HY();function l(f,h){switch(typeof f){case"object":{Object.is(f==null?void 0:f.valueOf(),-0)&&(f="-0");break}case"number":{f=n.toKey(f);break}}return h=r.cloneDeep(h),function(u){const g=i.get(u,f);return g===void 0?a.has(u,f):h===void 0?g===void 0:t.isMatch(g,h)}}e.matchesProperty=l})(y1)),y1}var DT;function GY(){return DT||(DT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sk(),n=OY(),r=LY(),i=zY();function a(l){if(l==null)return t.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?i.matchesProperty(l[0],l[1]):r.matches(l);case"string":case"symbol":case"number":return n.property(l)}}e.iteratee=a})(i1)),i1}var kT;function VY(){return kT||(kT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_Y(),n=TY(),r=sk(),i=MY(),a=GY();function l(f,h=r.identity){return i.isArrayLikeObject(f)?t.uniqBy(Array.from(f),n.ary(a.iteratee(h),1)):[]}e.uniqBy=l})(Xy)),Xy}var A1,PT;function qY(){return PT||(PT=1,A1=VY().uniqBy),A1}var $Y=qY();const jT=Qa($Y);function pk(e,t,n){return t===!0?jT(e,n):typeof t=="function"?jT(e,t):e}var C1={exports:{}},N1={},_1={exports:{}},T1={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LT;function YY(){if(LT)return T1;LT=1;var e=$u();function t(y,E){return y===E&&(y!==0||1/y===1/E)||y!==y&&E!==E}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,a=e.useLayoutEffect,l=e.useDebugValue;function f(y,E){var C=E(),I=r({inst:{value:C,getSnapshot:E}}),M=I[0].inst,O=I[1];return a(function(){M.value=C,M.getSnapshot=E,h(M)&&O({inst:M})},[y,C,E]),i(function(){return h(M)&&O({inst:M}),y(function(){h(M)&&O({inst:M})})},[y]),l(C),C}function h(y){var E=y.getSnapshot;y=y.value;try{var C=E();return!n(y,C)}catch{return!0}}function u(y,E){return E()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:f;return T1.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:g,T1}var BT;function WY(){return BT||(BT=1,_1.exports=YY()),_1.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UT;function KY(){if(UT)return N1;UT=1;var e=$u(),t=WY();function n(u,g){return u===g&&(u!==0||1/u===1/g)||u!==u&&g!==g}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,a=e.useRef,l=e.useEffect,f=e.useMemo,h=e.useDebugValue;return N1.useSyncExternalStoreWithSelector=function(u,g,y,E,C){var I=a(null);if(I.current===null){var M={hasValue:!1,value:null};I.current=M}else M=I.current;I=f(function(){function j(z){if(!U){if(U=!0,L=z,z=E(z),C!==void 0&&M.hasValue){var B=M.value;if(C(B,z))return G=B}return G=z}if(B=G,r(L,z))return B;var J=E(z);return C!==void 0&&C(B,J)?(L=z,B):(L=z,G=J)}var U=!1,L,G,V=y===void 0?null:y;return[function(){return j(g())},V===null?void 0:function(){return j(V())}]},[g,y,E,C]);var O=i(u,I[0],I[1]);return l(function(){M.hasValue=!0,M.value=O},[O]),h(O),O},N1}var FT;function XY(){return FT||(FT=1,C1.exports=KY()),C1.exports}var JY=XY(),kw=k.createContext(null),ZY=e=>e,Mn=()=>{var e=k.useContext(kw);return e?e.store.dispatch:ZY},dp=()=>{},QY=()=>dp,eW=(e,t)=>e===t;function st(e){var t=k.useContext(kw);return JY.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:QY,t?t.store.getState:dp,t?t.store.getState:dp,t?e:dp,eW)}function tW(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function nW(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function rW(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var HT=e=>Array.isArray(e)?e:[e];function iW(e){const t=Array.isArray(e[0])?e[0]:e;return rW(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function aW(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var sW=class{constructor(e){this.value=e}deref(){return this.value}},oW=typeof WeakRef<"u"?WeakRef:sW,lW=0,zT=1;function V0(){return{s:lW,v:void 0,o:null,p:null}}function mk(e,t={}){let n=V0();const{resultEqualityCheck:r}=t;let i,a=0;function l(){var y;let f=n;const{length:h}=arguments;for(let E=0,C=h;E<C;E++){const I=arguments[E];if(typeof I=="function"||typeof I=="object"&&I!==null){let M=f.o;M===null&&(f.o=M=new WeakMap);const O=M.get(I);O===void 0?(f=V0(),M.set(I,f)):f=O}else{let M=f.p;M===null&&(f.p=M=new Map);const O=M.get(I);O===void 0?(f=V0(),M.set(I,f)):f=O}}const u=f;let g;if(f.s===zT)g=f.v;else if(g=e.apply(null,arguments),a++,r){const E=((y=i==null?void 0:i.deref)==null?void 0:y.call(i))??i;E!=null&&r(E,g)&&(g=E,a!==0&&a--),i=typeof g=="object"&&g!==null||typeof g=="function"?new oW(g):g}return u.s=zT,u.v=g,g}return l.clearCache=()=>{n=V0(),l.resetResultsCount()},l.resultsCount=()=>a,l.resetResultsCount=()=>{a=0},l}function cW(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let a=0,l=0,f,h={},u=i.pop();typeof u=="object"&&(h=u,u=i.pop()),tW(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const g={...n,...h},{memoize:y,memoizeOptions:E=[],argsMemoize:C=mk,argsMemoizeOptions:I=[]}=g,M=HT(E),O=HT(I),j=iW(i),U=y(function(){return a++,u.apply(null,arguments)},...M),L=C(function(){l++;const V=aW(j,arguments);return f=U.apply(null,V),f},...O);return Object.assign(L,{resultFunc:u,memoizedResultFunc:U,dependencies:j,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>f,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:y,argsMemoize:C})};return Object.assign(r,{withTypes:()=>r}),r}var Ne=cW(mk),uW=Object.assign((e,t=Ne)=>{nW(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(a=>e[a]);return t(r,(...a)=>a.reduce((l,f,h)=>(l[n[h]]=f,l),{}))},{withTypes:()=>uW}),I1={},R1={},M1={},GT;function dW(){return GT||(GT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,a)=>{if(r!==i){const l=t(r),f=t(i);if(l===f&&l===0){if(r<i)return a==="desc"?1:-1;if(r>i)return a==="desc"?-1:1}return a==="desc"?f-l:l-f}return 0};e.compareValues=n})(M1)),M1}var O1={},D1={},VT;function gk(){return VT||(VT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(D1)),D1}var qT;function fW(){return qT||(qT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gk(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,l){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||t.isSymbol(a)?!0:typeof a=="string"&&(r.test(a)||!n.test(a))||l!=null&&Object.hasOwn(l,a)}e.isKey=i})(O1)),O1}var $T;function hW(){return $T||($T=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dW(),n=fW(),r=_w();function i(a,l,f,h){if(a==null)return[];f=h?void 0:f,Array.isArray(a)||(a=Object.values(a)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(f)||(f=f==null?[]:[f]),f=f.map(C=>String(C));const u=(C,I)=>{let M=C;for(let O=0;O<I.length&&M!=null;++O)M=M[I[O]];return M},g=(C,I)=>I==null||C==null?I:typeof C=="object"&&"key"in C?Object.hasOwn(I,C.key)?I[C.key]:u(I,C.path):typeof C=="function"?C(I):Array.isArray(C)?u(I,C):typeof I=="object"?I[C]:I,y=l.map(C=>(Array.isArray(C)&&C.length===1&&(C=C[0]),C==null||typeof C=="function"||Array.isArray(C)||n.isKey(C)?C:{key:C,path:r.toPath(C)}));return a.map(C=>({original:C,criteria:y.map(I=>g(I,C))})).slice().sort((C,I)=>{for(let M=0;M<y.length;M++){const O=t.compareValues(C.criteria[M],I.criteria[M],f[M]);if(O!==0)return O}return 0}).map(C=>C.original)}e.orderBy=i})(R1)),R1}var k1={},YT;function pW(){return YT||(YT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r=1){const i=[],a=Math.floor(r),l=(f,h)=>{for(let u=0;u<f.length;u++){const g=f[u];Array.isArray(g)&&h<a?l(g,h+1):i.push(g)}};return l(n,0),i}e.flatten=t})(k1)),k1}var P1={},WT;function xk(){return WT||(WT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hk(),n=Ow(),r=ok(),i=ck();function a(l,f,h){return r.isObject(h)&&(typeof f=="number"&&n.isArrayLike(h)&&t.isIndex(f)&&f<h.length||typeof f=="string"&&f in h)?i.isEqualsSameValueZero(h[f],l):!1}e.isIterateeCall=a})(P1)),P1}var KT;function mW(){return KT||(KT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hW(),n=pW(),r=xk();function i(a,...l){const f=l.length;return f>1&&r.isIterateeCall(a,l[0],l[1])?l=[]:f>2&&r.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),t.orderBy(a,n.flatten(l),["asc"])}e.sortBy=i})(I1)),I1}var j1,XT;function gW(){return XT||(XT=1,j1=mW().sortBy),j1}var xW=gW();const Um=Qa(xW);var yk=e=>e.legend.settings,yW=e=>e.legend.size,vW=e=>e.legend.payload,bW=Ne([vW,yk],(e,t)=>{var{itemSorter:n}=t,r=e.flat(1);return n?Um(r,n):r});function wW(){return st(bW)}var q0=1;function vk(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=k.useState({height:0,left:0,top:0,width:0}),r=k.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),l={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(l.height-t.height)>q0||Math.abs(l.left-t.left)>q0||Math.abs(l.top-t.top)>q0||Math.abs(l.width-t.width)>q0)&&n({height:l.height,left:l.left,top:l.top,width:l.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,r]}function ni(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var EW=typeof Symbol=="function"&&Symbol.observable||"@@observable",JT=EW,L1=()=>Math.random().toString(36).substring(7).split("").join("."),SW={INIT:`@@redux/INIT${L1()}`,REPLACE:`@@redux/REPLACE${L1()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${L1()}`},Op=SW;function Pw(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function bk(e,t,n){if(typeof e!="function")throw new Error(ni(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ni(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ni(1));return n(bk)(e,t)}let r=e,i=t,a=new Map,l=a,f=0,h=!1;function u(){l===a&&(l=new Map,a.forEach((O,j)=>{l.set(j,O)}))}function g(){if(h)throw new Error(ni(3));return i}function y(O){if(typeof O!="function")throw new Error(ni(4));if(h)throw new Error(ni(5));let j=!0;u();const U=f++;return l.set(U,O),function(){if(j){if(h)throw new Error(ni(6));j=!1,u(),l.delete(U),a=null}}}function E(O){if(!Pw(O))throw new Error(ni(7));if(typeof O.type>"u")throw new Error(ni(8));if(typeof O.type!="string")throw new Error(ni(17));if(h)throw new Error(ni(9));try{h=!0,i=r(i,O)}finally{h=!1}return(a=l).forEach(U=>{U()}),O}function C(O){if(typeof O!="function")throw new Error(ni(10));r=O,E({type:Op.REPLACE})}function I(){const O=y;return{subscribe(j){if(typeof j!="object"||j===null)throw new Error(ni(11));function U(){const G=j;G.next&&G.next(g())}return U(),{unsubscribe:O(U)}},[JT](){return this}}}return E({type:Op.INIT}),{dispatch:E,subscribe:y,getState:g,replaceReducer:C,[JT]:I}}function AW(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:Op.INIT})>"u")throw new Error(ni(12));if(typeof n(void 0,{type:Op.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ni(13))})}function wk(e){const t=Object.keys(e),n={};for(let a=0;a<t.length;a++){const l=t[a];typeof e[l]=="function"&&(n[l]=e[l])}const r=Object.keys(n);let i;try{AW(n)}catch(a){i=a}return function(l={},f){if(i)throw i;let h=!1;const u={};for(let g=0;g<r.length;g++){const y=r[g],E=n[y],C=l[y],I=E(C,f);if(typeof I>"u")throw f&&f.type,new Error(ni(14));u[y]=I,h=h||I!==C}return h=h||r.length!==Object.keys(l).length,h?u:l}}function Dp(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function CW(...e){return t=>(n,r)=>{const i=t(n,r);let a=()=>{throw new Error(ni(15))};const l={getState:i.getState,dispatch:(h,...u)=>a(h,...u)},f=e.map(h=>h(l));return a=Dp(...f)(i.dispatch),{...i,dispatch:a}}}function Ek(e){return Pw(e)&&"type"in e&&typeof e.type=="string"}var Sk=Symbol.for("immer-nothing"),ZT=Symbol.for("immer-draftable"),wi=Symbol.for("immer-state");function $a(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var ea=Object,Uu=ea.getPrototypeOf,kp="constructor",Fm="prototype",ab="configurable",Pp="enumerable",fp="writable",Rf="value",co=e=>!!e&&!!e[wi];function Za(e){var t;return e?Ak(e)||zm(e)||!!e[ZT]||!!((t=e[kp])!=null&&t[ZT])||Gm(e)||Vm(e):!1}var NW=ea[Fm][kp].toString(),QT=new WeakMap;function Ak(e){if(!e||!jw(e))return!1;const t=Uu(e);if(t===null||t===ea[Fm])return!0;const n=ea.hasOwnProperty.call(t,kp)&&t[kp];if(n===Object)return!0;if(!Au(n))return!1;let r=QT.get(n);return r===void 0&&(r=Function.toString.call(n),QT.set(n,r)),r===NW}function Hm(e,t,n=!0){Xf(e)===0?(n?Reflect.ownKeys(e):ea.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((r,i)=>t(i,r,e))}function Xf(e){const t=e[wi];return t?t.type_:zm(e)?1:Gm(e)?2:Vm(e)?3:0}var eI=(e,t,n=Xf(e))=>n===2?e.has(t):ea[Fm].hasOwnProperty.call(e,t),sb=(e,t,n=Xf(e))=>n===2?e.get(t):e[t],jp=(e,t,n,r=Xf(e))=>{r===2?e.set(t,n):r===3?e.add(n):e[t]=n};function _W(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var zm=Array.isArray,Gm=e=>e instanceof Map,Vm=e=>e instanceof Set,jw=e=>typeof e=="object",Au=e=>typeof e=="function",B1=e=>typeof e=="boolean";function TW(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var Xs=e=>e.copy_||e.base_,Lw=e=>e.modified_?e.copy_:e.base_;function ob(e,t){if(Gm(e))return new Map(e);if(Vm(e))return new Set(e);if(zm(e))return Array[Fm].slice.call(e);const n=Ak(e);if(t===!0||t==="class_only"&&!n){const r=ea.getOwnPropertyDescriptors(e);delete r[wi];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const l=i[a],f=r[l];f[fp]===!1&&(f[fp]=!0,f[ab]=!0),(f.get||f.set)&&(r[l]={[ab]:!0,[fp]:!0,[Pp]:f[Pp],[Rf]:e[l]})}return ea.create(Uu(e),r)}else{const r=Uu(e);if(r!==null&&n)return{...e};const i=ea.create(r);return ea.assign(i,e)}}function Bw(e,t=!1){return qm(e)||co(e)||!Za(e)||(Xf(e)>1&&ea.defineProperties(e,{set:$0,add:$0,clear:$0,delete:$0}),ea.freeze(e),t&&Hm(e,(n,r)=>{Bw(r,!0)},!1)),e}function IW(){$a(2)}var $0={[Rf]:IW};function qm(e){return e===null||!jw(e)?!0:ea.isFrozen(e)}var Lp="MapSet",lb="Patches",tI="ArrayMethods",Ck={};function xc(e){const t=Ck[e];return t||$a(0,e),t}var nI=e=>!!Ck[e],Mf,Nk=()=>Mf,RW=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:nI(Lp)?xc(Lp):void 0,arrayMethodsPlugin_:nI(tI)?xc(tI):void 0});function rI(e,t){t&&(e.patchPlugin_=xc(lb),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function cb(e){ub(e),e.drafts_.forEach(MW),e.drafts_=null}function ub(e){e===Mf&&(Mf=e.parent_)}var iI=e=>Mf=RW(Mf,e);function MW(e){const t=e[wi];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function aI(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];if(e!==void 0&&e!==n){n[wi].modified_&&(cb(t),$a(4)),Za(e)&&(e=sI(t,e));const{patchPlugin_:i}=t;i&&i.generateReplacementPatches_(n[wi].base_,e,t)}else e=sI(t,n);return OW(t,e,!0),cb(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Sk?e:void 0}function sI(e,t){if(qm(t))return t;const n=t[wi];if(!n)return Bp(t,e.handledSet_,e);if(!$m(n,e))return t;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(e);Ik(n,e)}return n.copy_}function OW(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Bw(t,n)}function _k(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var $m=(e,t)=>e.scope_===t,DW=[];function Tk(e,t,n,r){const i=Xs(e),a=e.type_;if(r!==void 0&&sb(i,r,a)===t){jp(i,r,n,a);return}if(!e.draftLocations_){const f=e.draftLocations_=new Map;Hm(i,(h,u)=>{if(co(u)){const g=f.get(u)||[];g.push(h),f.set(u,g)}})}const l=e.draftLocations_.get(t)??DW;for(const f of l)jp(i,f,n,a)}function kW(e,t,n){e.callbacks_.push(function(i){var f;const a=t;if(!a||!$m(a,i))return;(f=i.mapSetPlugin_)==null||f.fixSetContents(a);const l=Lw(a);Tk(e,a.draft_??a,l,n),Ik(a,i)})}function Ik(e,t){var r;if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(((r=e.assigned_)==null?void 0:r.size)??0)>0)){const{patchPlugin_:i}=t;if(i){const a=i.getPath(e);a&&i.generatePatches_(e,a,t)}_k(e)}}function PW(e,t,n){const{scope_:r}=e;if(co(n)){const i=n[wi];$m(i,r)&&i.callbacks_.push(function(){hp(e);const l=Lw(i);Tk(e,n,l,t)})}else Za(n)&&e.callbacks_.push(function(){const a=Xs(e);e.type_===3?a.has(n)&&Bp(n,r.handledSet_,r):sb(a,t,e.type_)===n&&r.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&Bp(sb(e.copy_,t,e.type_),r.handledSet_,r)})}function Bp(e,t,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||co(e)||t.has(e)||!Za(e)||qm(e)||(t.add(e),Hm(e,(r,i)=>{if(co(i)){const a=i[wi];if($m(a,n)){const l=Lw(a);jp(e,r,l,e.type_),_k(a)}}else Za(i)&&Bp(i,t,n)})),e}function jW(e,t){const n=zm(e),r={type_:n?1:0,scope_:t?t.scope_:Nk(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,a=Up;n&&(i=[r],a=Of);const{revoke:l,proxy:f}=Proxy.revocable(i,a);return r.draft_=f,r.revoke_=l,[f,r]}var Up={get(e,t){if(t===wi)return e;let n=e.scope_.arrayMethodsPlugin_;const r=e.type_===1&&typeof t=="string";if(r&&n!=null&&n.isArrayOperationMethod(t))return n.createMethodInterceptor(e,t);const i=Xs(e);if(!eI(i,t,e.type_))return LW(e,i,t);const a=i[t];if(e.finalized_||!Za(a)||r&&e.operationMethod&&(n!=null&&n.isMutatingArrayMethod(e.operationMethod))&&TW(t))return a;if(a===U1(e.base_,t)){hp(e);const l=e.type_===1?+t:t,f=fb(e.scope_,a,e,l);return e.copy_[l]=f}return a},has(e,t){return t in Xs(e)},ownKeys(e){return Reflect.ownKeys(Xs(e))},set(e,t,n){const r=Rk(Xs(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=U1(Xs(e),t),a=i==null?void 0:i[wi];if(a&&a.base_===n)return e.copy_[t]=n,e.assigned_.set(t,!1),!0;if(_W(n,i)&&(n!==void 0||eI(e.base_,t,e.type_)))return!0;hp(e),db(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_.set(t,!0),PW(e,t,n)),!0},deleteProperty(e,t){return hp(e),U1(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),db(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Xs(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{[fp]:!0,[ab]:e.type_!==1||t!=="length",[Pp]:r[Pp],[Rf]:n[t]}},defineProperty(){$a(11)},getPrototypeOf(e){return Uu(e.base_)},setPrototypeOf(){$a(12)}},Of={};for(let e in Up){let t=Up[e];Of[e]=function(){const n=arguments;return n[0]=n[0][0],t.apply(this,n)}}Of.deleteProperty=function(e,t){return Of.set.call(this,e,t,void 0)};Of.set=function(e,t,n){return Up.set.call(this,e[0],t,n,e[0])};function U1(e,t){const n=e[wi];return(n?Xs(n):e)[t]}function LW(e,t,n){var i;const r=Rk(t,n);return r?Rf in r?r[Rf]:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function Rk(e,t){if(!(t in e))return;let n=Uu(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Uu(n)}}function db(e){e.modified_||(e.modified_=!0,e.parent_&&db(e.parent_))}function hp(e){e.copy_||(e.assigned_=new Map,e.copy_=ob(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var BW=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,i)=>{if(Au(n)&&!Au(r)){const l=r;r=n;const f=this;return function(u=l,...g){return f.produce(u,y=>r.call(this,y,...g))}}Au(r)||$a(6),i!==void 0&&!Au(i)&&$a(7);let a;if(Za(n)){const l=iI(this),f=fb(l,n,void 0);let h=!0;try{a=r(f),h=!1}finally{h?cb(l):ub(l)}return rI(l,i),aI(a,l)}else if(!n||!jw(n)){if(a=r(n),a===void 0&&(a=n),a===Sk&&(a=void 0),this.autoFreeze_&&Bw(a,!0),i){const l=[],f=[];xc(lb).generateReplacementPatches_(n,a,{patches_:l,inversePatches_:f}),i(l,f)}return a}else $a(1,n)},this.produceWithPatches=(n,r)=>{if(Au(n))return(f,...h)=>this.produceWithPatches(f,u=>n(u,...h));let i,a;return[this.produce(n,r,(f,h)=>{i=f,a=h}),i,a]},B1(t==null?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),B1(t==null?void 0:t.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),B1(t==null?void 0:t.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Za(t)||$a(8),co(t)&&(t=Ja(t));const n=iI(this),r=fb(n,t,void 0);return r[wi].isManual_=!0,ub(n),r}finishDraft(t,n){const r=t&&t[wi];(!r||!r.isManual_)&&$a(9);const{scope_:i}=r;return rI(i,n),aI(void 0,i)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,n){let r;for(r=n.length-1;r>=0;r--){const a=n[r];if(a.path.length===0&&a.op==="replace"){t=a.value;break}}r>-1&&(n=n.slice(r+1));const i=xc(lb).applyPatches_;return co(t)?i(t,n):this.produce(t,a=>i(a,n))}};function fb(e,t,n,r){const[i,a]=Gm(t)?xc(Lp).proxyMap_(t,n):Vm(t)?xc(Lp).proxySet_(t,n):jW(t,n);return((n==null?void 0:n.scope_)??Nk()).drafts_.push(i),a.callbacks_=(n==null?void 0:n.callbacks_)??[],a.key_=r,n&&r!==void 0?kW(n,a,r):a.callbacks_.push(function(h){var g;(g=h.mapSetPlugin_)==null||g.fixSetContents(a);const{patchPlugin_:u}=h;a.modified_&&u&&u.generatePatches_(a,[],h)}),i}function Ja(e){return co(e)||$a(10,e),Mk(e)}function Mk(e){if(!Za(e)||qm(e))return e;const t=e[wi];let n,r=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=ob(e,t.scope_.immer_.useStrictShallowCopy_),r=t.scope_.immer_.shouldUseStrictIteration()}else n=ob(e,!0);return Hm(n,(i,a)=>{jp(n,i,Mk(a))},r),t&&(t.finalized_=!1),n}var UW=new BW,Ok=UW.produce;function Dk(e){return({dispatch:n,getState:r})=>i=>a=>typeof a=="function"?a(n,r,e):i(a)}var FW=Dk(),HW=Dk,zW=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Dp:Dp.apply(null,arguments)};function Ia(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(na(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>Ek(r)&&r.type===e,n}var kk=class mf extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,mf.prototype)}static get[Symbol.species](){return mf}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new mf(...t[0].concat(this)):new mf(...t.concat(this))}};function oI(e){return Za(e)?Ok(e,()=>{}):e}function Y0(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function GW(e){return typeof e=="boolean"}var VW=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=t??{};let l=new kk;return n&&(GW(n)?l.push(FW):l.push(HW(n.extraArgument))),l},Pk="RTK_autoBatch",Gn=()=>e=>({payload:e,meta:{[Pk]:!0}}),lI=e=>t=>{setTimeout(t,e)},jk=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,a=!1,l=!1;const f=new Set,h=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:lI(10):e.type==="callback"?e.queueNotification:lI(e.timeout),u=()=>{l=!1,a&&(a=!1,f.forEach(g=>g()))};return Object.assign({},r,{subscribe(g){const y=()=>i&&g(),E=r.subscribe(y);return f.add(g),()=>{E(),f.delete(g)}},dispatch(g){var y;try{return i=!((y=g==null?void 0:g.meta)!=null&&y[Pk]),a=!i,a&&(l||(l=!0,h(u))),r.dispatch(g)}finally{i=!0}}})},qW=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new kk(e);return r&&i.push(jk(typeof r=="object"?r:void 0)),i};function $W(e){const t=VW(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:a=void 0,enhancers:l=void 0}=e||{};let f;if(typeof n=="function")f=n;else if(Pw(n))f=wk(n);else throw new Error(na(1));let h;typeof r=="function"?h=r(t):h=t();let u=Dp;i&&(u=zW({trace:!1,...typeof i=="object"&&i}));const g=CW(...h),y=qW(g);let E=typeof l=="function"?l(y):y();const C=u(...E);return bk(f,a,C)}function Lk(e){const t={},n=[];let r;const i={addCase(a,l){const f=typeof a=="string"?a:a.type;if(!f)throw new Error(na(28));if(f in t)throw new Error(na(29));return t[f]=l,i},addAsyncThunk(a,l){return l.pending&&(t[a.pending.type]=l.pending),l.rejected&&(t[a.rejected.type]=l.rejected),l.fulfilled&&(t[a.fulfilled.type]=l.fulfilled),l.settled&&n.push({matcher:a.settled,reducer:l.settled}),i},addMatcher(a,l){return n.push({matcher:a,reducer:l}),i},addDefaultCase(a){return r=a,i}};return e(i),[t,n,r]}function YW(e){return typeof e=="function"}function WW(e,t){let[n,r,i]=Lk(t),a;if(YW(e))a=()=>oI(e());else{const f=oI(e);a=()=>f}function l(f=a(),h){let u=[n[h.type],...r.filter(({matcher:g})=>g(h)).map(({reducer:g})=>g)];return u.filter(g=>!!g).length===0&&(u=[i]),u.reduce((g,y)=>{if(y)if(co(g)){const C=y(g,h);return C===void 0?g:C}else{if(Za(g))return Ok(g,E=>y(E,h));{const E=y(g,h);if(E===void 0){if(g===null)return g;throw Error("A case reducer on a non-draftable value must not return undefined")}return E}}return g},f)}return l.getInitialState=a,l}var KW="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",XW=(e=21)=>{let t="",n=e;for(;n--;)t+=KW[Math.random()*64|0];return t},JW=Symbol.for("rtk-slice-createasyncthunk");function ZW(e,t){return`${e}/${t}`}function QW({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[JW];return function(i){const{name:a,reducerPath:l=a}=i;if(!a)throw new Error(na(11));const f=(typeof i.reducers=="function"?i.reducers(tK()):i.reducers)||{},h=Object.keys(f),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},g={addCase(G,V){const z=typeof G=="string"?G:G.type;if(!z)throw new Error(na(12));if(z in u.sliceCaseReducersByType)throw new Error(na(13));return u.sliceCaseReducersByType[z]=V,g},addMatcher(G,V){return u.sliceMatchers.push({matcher:G,reducer:V}),g},exposeAction(G,V){return u.actionCreators[G]=V,g},exposeCaseReducer(G,V){return u.sliceCaseReducersByName[G]=V,g}};h.forEach(G=>{const V=f[G],z={reducerName:G,type:ZW(a,G),createNotation:typeof i.reducers=="function"};rK(V)?aK(z,V,g,t):nK(z,V,g)});function y(){const[G={},V=[],z=void 0]=typeof i.extraReducers=="function"?Lk(i.extraReducers):[i.extraReducers],B={...G,...u.sliceCaseReducersByType};return WW(i.initialState,J=>{for(let W in B)J.addCase(W,B[W]);for(let W of u.sliceMatchers)J.addMatcher(W.matcher,W.reducer);for(let W of V)J.addMatcher(W.matcher,W.reducer);z&&J.addDefaultCase(z)})}const E=G=>G,C=new Map,I=new WeakMap;let M;function O(G,V){return M||(M=y()),M(G,V)}function j(){return M||(M=y()),M.getInitialState()}function U(G,V=!1){function z(J){let W=J[G];return typeof W>"u"&&V&&(W=Y0(I,z,j)),W}function B(J=E){const W=Y0(C,V,()=>new WeakMap);return Y0(W,J,()=>{const Z={};for(const[te,Y]of Object.entries(i.selectors??{}))Z[te]=eK(Y,J,()=>Y0(I,J,j),V);return Z})}return{reducerPath:G,getSelectors:B,get selectors(){return B(z)},selectSlice:z}}const L={name:a,reducer:O,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:j,...U(l),injectInto(G,{reducerPath:V,...z}={}){const B=V??l;return G.inject({reducerPath:B,reducer:O},z),{...L,...U(B,!0)}}};return L}}function eK(e,t,n,r){function i(a,...l){let f=t(a);return typeof f>"u"&&r&&(f=n()),e(f,...l)}return i.unwrapped=e,i}var Di=QW();function tK(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function nK({type:e,reducerName:t,createNotation:n},r,i){let a,l;if("reducer"in r){if(n&&!iK(r))throw new Error(na(17));a=r.reducer,l=r.prepare}else a=r;i.addCase(e,a).exposeCaseReducer(t,a).exposeAction(t,l?Ia(e,l):Ia(e))}function rK(e){return e._reducerDefinitionType==="asyncThunk"}function iK(e){return e._reducerDefinitionType==="reducerWithPrepare"}function aK({type:e,reducerName:t},n,r,i){if(!i)throw new Error(na(18));const{payloadCreator:a,fulfilled:l,pending:f,rejected:h,settled:u,options:g}=n,y=i(e,a,g);r.exposeAction(t,y),l&&r.addCase(y.fulfilled,l),f&&r.addCase(y.pending,f),h&&r.addCase(y.rejected,h),u&&r.addMatcher(y.settled,u),r.exposeCaseReducer(t,{fulfilled:l||W0,pending:f||W0,rejected:h||W0,settled:u||W0})}function W0(){}var sK="task",Bk="listener",Uk="completed",Uw="cancelled",oK=`task-${Uw}`,lK=`task-${Uk}`,hb=`${Bk}-${Uw}`,cK=`${Bk}-${Uk}`,Ym=class{constructor(e){Ey(this,"name","TaskAbortError");Ey(this,"message");this.code=e,this.message=`${sK} ${Uw} (reason: ${e})`}},Fw=(e,t)=>{if(typeof e!="function")throw new TypeError(na(32))},Fp=()=>{},Fk=(e,t=Fp)=>(e.catch(t),e),Hk=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),fc=e=>{if(e.aborted)throw new Ym(e.reason)};function zk(e,t){let n=Fp;return new Promise((r,i)=>{const a=()=>i(new Ym(e.reason));if(e.aborted){a();return}n=Hk(e,a),t.finally(()=>n()).then(r,i)}).finally(()=>{n=Fp})}var uK=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof Ym?"cancelled":"rejected",error:n}}finally{t==null||t()}},Hp=e=>t=>Fk(zk(e,t).then(n=>(fc(e),n))),Gk=e=>{const t=Hp(e);return n=>t(new Promise(r=>setTimeout(r,n)))},{assign:Pu}=Object,cI={},Wm="listenerMiddleware",dK=(e,t)=>{const n=r=>Hk(e,()=>r.abort(e.reason));return(r,i)=>{Fw(r);const a=new AbortController;n(a);const l=uK(async()=>{fc(e),fc(a.signal);const f=await r({pause:Hp(a.signal),delay:Gk(a.signal),signal:a.signal});return fc(a.signal),f},()=>a.abort(lK));return i!=null&&i.autoJoin&&t.push(l.catch(Fp)),{result:Hp(e)(l),cancel(){a.abort(oK)}}}},fK=(e,t)=>{const n=async(r,i)=>{fc(t);let a=()=>{};const f=[new Promise((h,u)=>{let g=e({predicate:r,effect:(y,E)=>{E.unsubscribe(),h([y,E.getState(),E.getOriginalState()])}});a=()=>{g(),u()}})];i!=null&&f.push(new Promise(h=>setTimeout(h,i,null)));try{const h=await zk(t,Promise.race(f));return fc(t),h}finally{a()}};return(r,i)=>Fk(n(r,i))},Vk=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:a}=e;if(t)i=Ia(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(na(21));return Fw(a),{predicate:i,type:t,effect:a}},qk=Pu(e=>{const{type:t,predicate:n,effect:r}=Vk(e);return{id:XW(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(na(22))}}},{withTypes:()=>qk}),uI=(e,t)=>{const{type:n,effect:r,predicate:i}=Vk(t);return Array.from(e.values()).find(a=>(typeof n=="string"?a.type===n:a.predicate===i)&&a.effect===r)},pb=e=>{e.pending.forEach(t=>{t.abort(hb)})},hK=(e,t)=>()=>{for(const n of t.keys())pb(n);e.clear()},dI=(e,t,n)=>{try{e(t,n)}catch(r){setTimeout(()=>{throw r},0)}},$k=Pu(Ia(`${Wm}/add`),{withTypes:()=>$k}),pK=Ia(`${Wm}/removeAll`),Yk=Pu(Ia(`${Wm}/remove`),{withTypes:()=>Yk}),mK=(...e)=>{console.error(`${Wm}/error`,...e)},Jf=(e={})=>{const t=new Map,n=new Map,r=C=>{const I=n.get(C)??0;n.set(C,I+1)},i=C=>{const I=n.get(C)??1;I===1?n.delete(C):n.set(C,I-1)},{extra:a,onError:l=mK}=e;Fw(l);const f=C=>(C.unsubscribe=()=>t.delete(C.id),t.set(C.id,C),I=>{C.unsubscribe(),I!=null&&I.cancelActive&&pb(C)}),h=C=>{const I=uI(t,C)??qk(C);return f(I)};Pu(h,{withTypes:()=>h});const u=C=>{const I=uI(t,C);return I&&(I.unsubscribe(),C.cancelActive&&pb(I)),!!I};Pu(u,{withTypes:()=>u});const g=async(C,I,M,O)=>{const j=new AbortController,U=fK(h,j.signal),L=[];try{C.pending.add(j),r(C),await Promise.resolve(C.effect(I,Pu({},M,{getOriginalState:O,condition:(G,V)=>U(G,V).then(Boolean),take:U,delay:Gk(j.signal),pause:Hp(j.signal),extra:a,signal:j.signal,fork:dK(j.signal,L),unsubscribe:C.unsubscribe,subscribe:()=>{t.set(C.id,C)},cancelActiveListeners:()=>{C.pending.forEach((G,V,z)=>{G!==j&&(G.abort(hb),z.delete(G))})},cancel:()=>{j.abort(hb),C.pending.delete(j)},throwIfCancelled:()=>{fc(j.signal)}})))}catch(G){G instanceof Ym||dI(l,G,{raisedBy:"effect"})}finally{await Promise.all(L),j.abort(cK),i(C),C.pending.delete(j)}},y=hK(t,n);return{middleware:C=>I=>M=>{if(!Ek(M))return I(M);if($k.match(M))return h(M.payload);if(pK.match(M)){y();return}if(Yk.match(M))return u(M.payload);let O=C.getState();const j=()=>{if(O===cI)throw new Error(na(23));return O};let U;try{if(U=I(M),t.size>0){const L=C.getState(),G=Array.from(t.values());for(const V of G){let z=!1;try{z=V.predicate(M,L,O)}catch(B){z=!1,dI(l,B,{raisedBy:"predicate"})}z&&g(V,M,C,j)}}}finally{O=cI}return U},startListening:h,stopListening:u,clearListeners:y}};function na(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var gK={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Wk=Di({name:"chartLayout",initialState:gK,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,r,i,a;e.margin.top=(n=t.payload.top)!==null&&n!==void 0?n:0,e.margin.right=(r=t.payload.right)!==null&&r!==void 0?r:0,e.margin.bottom=(i=t.payload.bottom)!==null&&i!==void 0?i:0,e.margin.left=(a=t.payload.left)!==null&&a!==void 0?a:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:xK,setLayout:yK,setChartSize:vK,setScale:bK}=Wk.actions,wK=Wk.reducer;function Kk(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function Ar(e){return Number.isFinite(e)}function ws(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function fI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Tu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fI(Object(n),!0).forEach(function(r){EK(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function EK(e,t,n){return(t=SK(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function SK(e){var t=AK(e,"string");return typeof t=="symbol"?t:t+""}function AK(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bn(e,t,n){return Dr(e)||Dr(t)?n:bs(t)?gc(e,t,n):typeof t=="function"?t(e):n}var CK=(e,t,n)=>{if(t&&n){var{width:r,height:i}=n,{align:a,verticalAlign:l,layout:f}=t;if((f==="vertical"||f==="horizontal"&&l==="middle")&&a!=="center"&&lt(e[a]))return Tu(Tu({},e),{},{[a]:e[a]+(r||0)});if((f==="horizontal"||f==="vertical"&&a==="center")&&l!=="middle"&&lt(e[l]))return Tu(Tu({},e),{},{[l]:e[l]+(i||0)})}return e},Sl=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",Xk=(e,t,n,r)=>{if(r)return e.map(f=>f.coordinate);var i,a,l=e.map(f=>(f.coordinate===t&&(i=!0),f.coordinate===n&&(a=!0),f.coordinate));return i||l.push(t),a||l.push(n),l},Jk=(e,t,n)=>{if(!e)return null;var{duplicateDomain:r,type:i,range:a,scale:l,realScaleType:f,isCategorical:h,categoricalDomain:u,tickCount:g,ticks:y,niceTicks:E,axisType:C}=e;if(!l)return null;var I=f==="scaleBand"&&l.bandwidth?l.bandwidth()/2:2,M=i==="category"&&l.bandwidth?l.bandwidth()/I:0;if(M=C==="angleAxis"&&a&&a.length>=2?ui(a[0]-a[1])*2*M:M,y||E){var O=(y||E||[]).map((j,U)=>{var L=r?r.indexOf(j):j;return{coordinate:l(L)+M,value:j,offset:M,index:U}});return O.filter(j=>!vs(j.coordinate))}return h&&u?u.map((j,U)=>({coordinate:l(j)+M,value:j,index:U,offset:M})):l.ticks&&g!=null?l.ticks(g).map((j,U)=>({coordinate:l(j)+M,value:j,offset:M,index:U})):l.domain().map((j,U)=>({coordinate:l(j)+M,value:r?r[j]:j,index:U,offset:M}))},hI=1e-4,NK=e=>{var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,r=e.range(),i=Math.min(r[0],r[1])-hI,a=Math.max(r[0],r[1])+hI,l=e(t[0]),f=e(t[n-1]);(l<i||l>a||f<i||f>a)&&e.domain([t[0],t[n-1]])}},_K=e=>{var t,n=e.length;if(!(n<=0)){var r=(t=e[0])===null||t===void 0?void 0:t.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var a=0,l=0,f=0;f<n;++f){var h=e[f],u=h==null?void 0:h[i];if(u!=null){var g=u[1],y=u[0],E=vs(g)?y:g;E>=0?(u[0]=a,u[1]=a+E,a=g):(u[0]=l,u[1]=l+E,l=g)}}}},TK=e=>{var t,n=e.length;if(!(n<=0)){var r=(t=e[0])===null||t===void 0?void 0:t.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var a=0,l=0;l<n;++l){var f=e[l],h=f==null?void 0:f[i];if(h!=null){var u=vs(h[1])?h[0]:h[1];u>=0?(h[0]=a,h[1]=a+u,a=h[1]):(h[0]=0,h[1]=0)}}}},IK={sign:_K,expand:W$,none:mc,silhouette:K$,wiggle:X$,positive:TK},RK=(e,t,n)=>{var r,i=(r=IK[n])!==null&&r!==void 0?r:mc,a=Y$().keys(t).value((f,h)=>Number(Bn(f,h,0))).order(rb).offset(i),l=a(e);return l.forEach((f,h)=>{f.forEach((u,g)=>{var y=Bn(e[g],t[h],0);Array.isArray(y)&&y.length===2&&lt(y[0])&&lt(y[1])&&(u[0]=y[0],u[1]=y[1])})}),l};function pI(e){var{axis:t,ticks:n,bandSize:r,entry:i,index:a,dataKey:l}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Dr(i[t.dataKey])){var f=rk(n,"value",i[t.dataKey]);if(f)return f.coordinate+r/2}return n[a]?n[a].coordinate+r/2:null}var h=Bn(i,Dr(l)?t.dataKey:l);return Dr(h)?null:t.scale(h)}var MK=e=>{var t=e.flat(2).filter(lt);return[Math.min(...t),Math.max(...t)]},OK=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],DK=(e,t,n)=>{if(e!=null)return OK(Object.keys(e).reduce((r,i)=>{var a=e[i];if(!a)return r;var{stackedData:l}=a,f=l.reduce((h,u)=>{var g=Kk(u,t,n),y=MK(g);return!Ar(y[0])||!Ar(y[1])?h:[Math.min(h[0],y[0]),Math.max(h[1],y[1])]},[1/0,-1/0]);return[Math.min(f[0],r[0]),Math.max(f[1],r[1])]},[1/0,-1/0]))},mI=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,gI=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,zp=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var i=Um(t,g=>g.coordinate),a=1/0,l=1,f=i.length;l<f;l++){var h=i[l],u=i[l-1];a=Math.min(((h==null?void 0:h.coordinate)||0)-((u==null?void 0:u.coordinate)||0),a)}return a===1/0?0:a}return n?void 0:0};function xI(e){var{tooltipEntrySettings:t,dataKey:n,payload:r,value:i,name:a}=e;return Tu(Tu({},t),{},{dataKey:n,payload:r,value:i,name:a})}function Km(e,t){if(e)return String(e);if(typeof t=="string")return t}var kK=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},PK=(e,t)=>t==="centric"?e.angle:e.radius,vo=e=>e.layout.width,bo=e=>e.layout.height,jK=e=>e.layout.scale,Zk=e=>e.layout.margin,Xm=Ne(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Jm=Ne(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),Qk="data-recharts-item-index",eP="data-recharts-item-id",Zf=60;function yI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function K0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yI(Object(n),!0).forEach(function(r){LK(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function LK(e,t,n){return(t=BK(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function BK(e){var t=UK(e,"string");return typeof t=="symbol"?t:t+""}function UK(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var FK=e=>e.brush.height;function HK(e){var t=Jm(e);return t.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Zf;return n+i}return n},0)}function zK(e){var t=Jm(e);return t.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Zf;return n+i}return n},0)}function GK(e){var t=Xm(e);return t.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function VK(e){var t=Xm(e);return t.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var Yr=Ne([vo,bo,Zk,FK,HK,zK,GK,VK,yk,yW],(e,t,n,r,i,a,l,f,h,u)=>{var g={left:(n.left||0)+i,right:(n.right||0)+a},y={top:(n.top||0)+l,bottom:(n.bottom||0)+f},E=K0(K0({},y),g),C=E.bottom;E.bottom+=r,E=CK(E,h,u);var I=e-E.left-E.right,M=t-E.top-E.bottom;return K0(K0({brushBottom:C},E),{},{width:Math.max(I,0),height:Math.max(M,0)})}),qK=Ne(Yr,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),tP=Ne(vo,bo,(e,t)=>({x:0,y:0,width:e,height:t})),$K=k.createContext(null),ki=()=>k.useContext($K)!=null,Zm=e=>e.brush,Qm=Ne([Zm,Yr,Zk],(e,t,n)=>({height:e.height,x:lt(e.x)?e.x:t.left,y:lt(e.y)?e.y:t.top+t.height+t.brushBottom-((n==null?void 0:n.bottom)||0),width:lt(e.width)?e.width:t.width})),F1={},H1={},z1={},vI;function YK(){return vI||(vI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r,{signal:i,edges:a}={}){let l,f=null;const h=a!=null&&a.includes("leading"),u=a==null||a.includes("trailing"),g=()=>{f!==null&&(n.apply(l,f),l=void 0,f=null)},y=()=>{u&&g(),M()};let E=null;const C=()=>{E!=null&&clearTimeout(E),E=setTimeout(()=>{E=null,y()},r)},I=()=>{E!==null&&(clearTimeout(E),E=null)},M=()=>{I(),l=void 0,f=null},O=()=>{g()},j=function(...U){if(i!=null&&i.aborted)return;l=this,f=U;const L=E==null;C(),h&&L&&g()};return j.schedule=C,j.cancel=M,j.flush=O,i==null||i.addEventListener("abort",M,{once:!0}),j}e.debounce=t})(z1)),z1}var bI;function WK(){return bI||(bI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YK();function n(r,i=0,a={}){typeof a!="object"&&(a={});const{leading:l=!1,trailing:f=!0,maxWait:h}=a,u=Array(2);l&&(u[0]="leading"),f&&(u[1]="trailing");let g,y=null;const E=t.debounce(function(...M){g=r.apply(this,M),y=null},i,{edges:u}),C=function(...M){return h!=null&&(y===null&&(y=Date.now()),Date.now()-y>=h)?(g=r.apply(this,M),y=Date.now(),E.cancel(),E.schedule(),g):(E.apply(this,M),g)},I=()=>(E.flush(),g);return C.cancel=E.cancel,C.flush=I,C}e.debounce=n})(H1)),H1}var wI;function KK(){return wI||(wI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=WK();function n(r,i=0,a={}){const{leading:l=!0,trailing:f=!0}=a;return t.debounce(r,i,{leading:l,maxWait:i,trailing:f})}e.throttle=n})(F1)),F1}var G1,EI;function XK(){return EI||(EI=1,G1=KK().throttle),G1}var JK=XK();const ZK=Qa(JK);var Gp=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=0;console.warn(n.replace(/%s/g,()=>i[l++]))}},nP=(e,t,n)=>{var{width:r="100%",height:i="100%",aspect:a,maxHeight:l}=n,f=lo(r)?e:Number(r),h=lo(i)?t:Number(i);return a&&a>0&&(f?h=f/a:h&&(f=h*a),l&&h!=null&&h>l&&(h=l)),{calculatedWidth:f,calculatedHeight:h}},QK={width:0,height:0,overflow:"visible"},eX={width:0,overflowX:"visible"},tX={height:0,overflowY:"visible"},nX={},rX=e=>{var{width:t,height:n}=e,r=lo(t),i=lo(n);return r&&i?QK:r?eX:i?tX:nX};function iX(e){var{width:t,height:n,aspect:r}=e,i=t,a=n;return i===void 0&&a===void 0?(i="100%",a="100%"):i===void 0?i=r&&r>0?void 0:"100%":a===void 0&&(a=r&&r>0?void 0:"100%"),{width:i,height:a}}function mb(){return mb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mb.apply(null,arguments)}function SI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function AI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SI(Object(n),!0).forEach(function(r){aX(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function aX(e,t,n){return(t=sX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sX(e){var t=oX(e,"string");return typeof t=="symbol"?t:t+""}function oX(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rP=k.createContext({width:-1,height:-1});function lX(e){return ws(e.width)&&ws(e.height)}function iP(e){var{children:t,width:n,height:r}=e,i=k.useMemo(()=>({width:n,height:r}),[n,r]);return lX(i)?k.createElement(rP.Provider,{value:i},t):null}var Hw=()=>k.useContext(rP),cX=k.forwardRef((e,t)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i,height:a,minWidth:l=0,minHeight:f,maxHeight:h,children:u,debounce:g=0,id:y,className:E,onResize:C,style:I={}}=e,M=k.useRef(null),O=k.useRef();O.current=C,k.useImperativeHandle(t,()=>M.current);var[j,U]=k.useState({containerWidth:r.width,containerHeight:r.height}),L=k.useCallback((J,W)=>{U(Z=>{var te=Math.round(J),Y=Math.round(W);return Z.containerWidth===te&&Z.containerHeight===Y?Z:{containerWidth:te,containerHeight:Y}})},[]);k.useEffect(()=>{if(M.current==null||typeof ResizeObserver>"u")return Kf;var J=Y=>{var pe,{width:Te,height:le}=Y[0].contentRect;L(Te,le),(pe=O.current)===null||pe===void 0||pe.call(O,Te,le)};g>0&&(J=ZK(J,g,{trailing:!0,leading:!1}));var W=new ResizeObserver(J),{width:Z,height:te}=M.current.getBoundingClientRect();return L(Z,te),W.observe(M.current),()=>{W.disconnect()}},[L,g]);var{containerWidth:G,containerHeight:V}=j;Gp(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:z,calculatedHeight:B}=nP(G,V,{width:i,height:a,aspect:n,maxHeight:h});return Gp(z!=null&&z>0||B!=null&&B>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,z,B,i,a,l,f,n),k.createElement("div",{id:y?"".concat(y):void 0,className:on("recharts-responsive-container",E),style:AI(AI({},I),{},{width:i,height:a,minWidth:l,minHeight:f,maxHeight:h}),ref:M},k.createElement("div",{style:rX({width:i,height:a})},k.createElement(iP,{width:z,height:B},u)))}),CI=k.forwardRef((e,t)=>{var n=Hw();if(ws(n.width)&&ws(n.height))return e.children;var{width:r,height:i}=iX({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:a,calculatedHeight:l}=nP(void 0,void 0,{width:r,height:i,aspect:e.aspect,maxHeight:e.maxHeight});return lt(a)&&lt(l)?k.createElement(iP,{width:a,height:l},e.children):k.createElement(cX,mb({},e,{width:r,height:i,ref:t}))});function aP(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var eg=()=>{var e,t=ki(),n=st(qK),r=st(Qm),i=(e=st(Zm))===null||e===void 0?void 0:e.padding;return!t||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},uX={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},sP=()=>{var e;return(e=st(Yr))!==null&&e!==void 0?e:uX},zw=()=>st(vo),Gw=()=>st(bo),dX=()=>st(e=>e.layout.margin),En=e=>e.layout.layoutType,Qf=()=>st(En),fX=()=>{var e=Qf();return e!==void 0},tg=e=>{var t=Mn(),n=ki(),{width:r,height:i}=e,a=Hw(),l=r,f=i;return a&&(l=a.width>0?a.width:r,f=a.height>0?a.height:i),k.useEffect(()=>{!n&&ws(l)&&ws(f)&&t(vK({width:l,height:f}))},[t,n,l,f]),null},oP=Symbol.for("immer-nothing"),NI=Symbol.for("immer-draftable"),ia=Symbol.for("immer-state");function Ya(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Df=Object.getPrototypeOf;function Fu(e){return!!e&&!!e[ia]}function yc(e){var t;return e?lP(e)||Array.isArray(e)||!!e[NI]||!!((t=e.constructor)!=null&&t[NI])||eh(e)||rg(e):!1}var hX=Object.prototype.constructor.toString(),_I=new WeakMap;function lP(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=_I.get(n);return r===void 0&&(r=Function.toString.call(n),_I.set(n,r)),r===hX}function Vp(e,t,n=!0){ng(e)===0?(n?Reflect.ownKeys(e):Object.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((r,i)=>t(i,r,e))}function ng(e){const t=e[ia];return t?t.type_:Array.isArray(e)?1:eh(e)?2:rg(e)?3:0}function gb(e,t){return ng(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function cP(e,t,n){const r=ng(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function pX(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function eh(e){return e instanceof Map}function rg(e){return e instanceof Set}function rc(e){return e.copy_||e.base_}function xb(e,t){if(eh(e))return new Map(e);if(rg(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=lP(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[ia];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const l=i[a],f=r[l];f.writable===!1&&(f.writable=!0,f.configurable=!0),(f.get||f.set)&&(r[l]={configurable:!0,writable:!0,enumerable:f.enumerable,value:e[l]})}return Object.create(Df(e),r)}else{const r=Df(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function Vw(e,t=!1){return ig(e)||Fu(e)||!yc(e)||(ng(e)>1&&Object.defineProperties(e,{set:X0,add:X0,clear:X0,delete:X0}),Object.freeze(e),t&&Object.values(e).forEach(n=>Vw(n,!0))),e}function mX(){Ya(2)}var X0={value:mX};function ig(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var gX={};function vc(e){const t=gX[e];return t||Ya(0,e),t}var kf;function uP(){return kf}function xX(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function TI(e,t){t&&(vc("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function yb(e){vb(e),e.drafts_.forEach(yX),e.drafts_=null}function vb(e){e===kf&&(kf=e.parent_)}function II(e){return kf=xX(kf,e)}function yX(e){const t=e[ia];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function RI(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[ia].modified_&&(yb(t),Ya(4)),yc(e)&&(e=qp(t,e),t.parent_||$p(t,e)),t.patches_&&vc("Patches").generateReplacementPatches_(n[ia].base_,e,t.patches_,t.inversePatches_)):e=qp(t,n,[]),yb(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==oP?e:void 0}function qp(e,t,n){if(ig(t))return t;const r=e.immer_.shouldUseStrictIteration(),i=t[ia];if(!i)return Vp(t,(a,l)=>MI(e,i,t,a,l,n),r),t;if(i.scope_!==e)return t;if(!i.modified_)return $p(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let l=a,f=!1;i.type_===3&&(l=new Set(a),a.clear(),f=!0),Vp(l,(h,u)=>MI(e,i,a,h,u,n,f),r),$p(e,a,!1),n&&e.patches_&&vc("Patches").generatePatches_(i,n,e.patches_,e.inversePatches_)}return i.copy_}function MI(e,t,n,r,i,a,l){if(i==null||typeof i!="object"&&!l)return;const f=ig(i);if(!(f&&!l)){if(Fu(i)){const h=a&&t&&t.type_!==3&&!gb(t.assigned_,r)?a.concat(r):void 0,u=qp(e,i,h);if(cP(n,r,u),Fu(u))e.canAutoFreeze_=!1;else return}else l&&n.add(i);if(yc(i)&&!f){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[r]===i&&f)return;qp(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&(eh(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&$p(e,i)}}}function $p(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Vw(t,n)}function vX(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:uP(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,a=qw;n&&(i=[r],a=Pf);const{revoke:l,proxy:f}=Proxy.revocable(i,a);return r.draft_=f,r.revoke_=l,f}var qw={get(e,t){if(t===ia)return e;const n=rc(e);if(!gb(n,t))return bX(e,n,t);const r=n[t];return e.finalized_||!yc(r)?r:r===V1(e.base_,t)?(q1(e),e.copy_[t]=wb(r,e)):r},has(e,t){return t in rc(e)},ownKeys(e){return Reflect.ownKeys(rc(e))},set(e,t,n){const r=dP(rc(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=V1(rc(e),t),a=i==null?void 0:i[ia];if(a&&a.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(pX(n,i)&&(n!==void 0||gb(e.base_,t)))return!0;q1(e),bb(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return V1(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,q1(e),bb(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=rc(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){Ya(11)},getPrototypeOf(e){return Df(e.base_)},setPrototypeOf(){Ya(12)}},Pf={};Vp(qw,(e,t)=>{Pf[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Pf.deleteProperty=function(e,t){return Pf.set.call(this,e,t,void 0)};Pf.set=function(e,t,n){return qw.set.call(this,e[0],t,n,e[0])};function V1(e,t){const n=e[ia];return(n?rc(n):e)[t]}function bX(e,t,n){var i;const r=dP(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function dP(e,t){if(!(t in e))return;let n=Df(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Df(n)}}function bb(e){e.modified_||(e.modified_=!0,e.parent_&&bb(e.parent_))}function q1(e){e.copy_||(e.copy_=xb(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var wX=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const a=n;n=t;const l=this;return function(h=a,...u){return l.produce(h,g=>n.call(this,g,...u))}}typeof n!="function"&&Ya(6),r!==void 0&&typeof r!="function"&&Ya(7);let i;if(yc(t)){const a=II(this),l=wb(t,void 0);let f=!0;try{i=n(l),f=!1}finally{f?yb(a):vb(a)}return TI(a,r),RI(i,a)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===oP&&(i=void 0),this.autoFreeze_&&Vw(i,!0),r){const a=[],l=[];vc("Patches").generateReplacementPatches_(t,i,a,l),r(a,l)}return i}else Ya(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(l,...f)=>this.produceWithPatches(l,h=>t(h,...f));let r,i;return[this.produce(t,n,(l,f)=>{r=l,i=f}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){yc(e)||Ya(8),Fu(e)&&(e=EX(e));const t=II(this),n=wb(e,void 0);return n[ia].isManual_=!0,vb(t),n}finishDraft(e,t){const n=e&&e[ia];(!n||!n.isManual_)&&Ya(9);const{scope_:r}=n;return TI(r,t),RI(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=vc("Patches").applyPatches_;return Fu(e)?r(e,t):this.produce(e,i=>r(i,t))}};function wb(e,t){const n=eh(e)?vc("MapSet").proxyMap_(e,t):rg(e)?vc("MapSet").proxySet_(e,t):vX(e,t);return(t?t.scope_:uP()).drafts_.push(n),n}function EX(e){return Fu(e)||Ya(10,e),fP(e)}function fP(e){if(!yc(e)||ig(e))return e;const t=e[ia];let n,r=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=xb(e,t.scope_.immer_.useStrictShallowCopy_),r=t.scope_.immer_.shouldUseStrictIteration()}else n=xb(e,!0);return Vp(n,(i,a)=>{cP(n,i,fP(a))},r),t&&(t.finalized_=!1),n}var SX=new wX;SX.produce;var AX={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},hP=Di({name:"legend",initialState:AX,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Gn()},replaceLegendPayload:{reducer(e,t){var{prev:n,next:r}=t.payload,i=Ja(e).payload.indexOf(n);i>-1&&(e.payload[i]=r)},prepare:Gn()},removeLegendPayload:{reducer(e,t){var n=Ja(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)},prepare:Gn()}}}),{setLegendSize:OI,setLegendSettings:CX,addLegendPayload:pP,replaceLegendPayload:mP,removeLegendPayload:gP}=hP.actions,NX=hP.reducer,_X=["contextPayload"];function Eb(){return Eb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Eb.apply(null,arguments)}function DI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Hu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DI(Object(n),!0).forEach(function(r){TX(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function TX(e,t,n){return(t=IX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function IX(e){var t=RX(e,"string");return typeof t=="symbol"?t:t+""}function RX(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function MX(e,t){if(e==null)return{};var n,r,i=OX(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function OX(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function DX(e){return e.value}function kX(e){var{contextPayload:t}=e,n=MX(e,_X),r=pk(t,e.payloadUniqBy,DX),i=Hu(Hu({},n),{},{payload:r});return k.isValidElement(e.content)?k.cloneElement(e.content,i):typeof e.content=="function"?k.createElement(e.content,i):k.createElement(NY,i)}function PX(e,t,n,r,i,a){var{layout:l,align:f,verticalAlign:h}=t,u,g;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(f==="center"&&l==="vertical"?u={left:((r||0)-a.width)/2}:u=f==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(h==="middle"?g={top:((i||0)-a.height)/2}:g=h==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),Hu(Hu({},u),g)}function jX(e){var t=Mn();return k.useEffect(()=>{t(CX(e))},[t,e]),null}function LX(e){var t=Mn();return k.useEffect(()=>(t(OI(e)),()=>{t(OI({width:0,height:0}))}),[t,e]),null}function BX(e,t,n,r){return e==="vertical"&&lt(t)?{height:t}:e==="horizontal"?{width:n||r}:null}var UX={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function xP(e){var t=kr(e,UX),n=wW(),r=x$(),i=dX(),{width:a,height:l,wrapperStyle:f,portal:h}=t,[u,g]=vk([n]),y=zw(),E=Gw();if(y==null||E==null)return null;var C=y-((i==null?void 0:i.left)||0)-((i==null?void 0:i.right)||0),I=BX(t.layout,l,a,C),M=h?f:Hu(Hu({position:"absolute",width:(I==null?void 0:I.width)||a||"auto",height:(I==null?void 0:I.height)||l||"auto"},PX(f,t,i,y,E,u)),f),O=h??r;if(O==null||n==null)return null;var j=k.createElement("div",{className:"recharts-legend-wrapper",style:M,ref:g},k.createElement(jX,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),!h&&k.createElement(LX,{width:u.width,height:u.height}),k.createElement(kX,Eb({},t,I,{margin:i,chartWidth:y,chartHeight:E,contextPayload:n})));return lw.createPortal(j,O)}xP.displayName="Legend";function Sb(){return Sb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sb.apply(null,arguments)}function kI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function $1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kI(Object(n),!0).forEach(function(r){FX(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function FX(e,t,n){return(t=HX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HX(e){var t=zX(e,"string");return typeof t=="symbol"?t:t+""}function zX(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function GX(e){return Array.isArray(e)&&bs(e[0])&&bs(e[1])?e.join(" ~ "):e}var VX=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:a,formatter:l,itemSorter:f,wrapperClassName:h,labelClassName:u,label:g,labelFormatter:y,accessibilityLayer:E=!1}=e,C=()=>{if(a&&a.length){var V={padding:0,margin:0},z=(f?Um(a,f):a).map((B,J)=>{if(B.type==="none")return null;var W=B.formatter||l||GX,{value:Z,name:te}=B,Y=Z,pe=te;if(W){var Te=W(Z,te,B,J,a);if(Array.isArray(Te))[Y,pe]=Te;else if(Te!=null)Y=Te;else return null}var le=$1({display:"block",paddingTop:4,paddingBottom:4,color:B.color||"#000"},r);return k.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(J),style:le},bs(pe)?k.createElement("span",{className:"recharts-tooltip-item-name"},pe):null,bs(pe)?k.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,k.createElement("span",{className:"recharts-tooltip-item-value"},Y),k.createElement("span",{className:"recharts-tooltip-item-unit"},B.unit||""))});return k.createElement("ul",{className:"recharts-tooltip-item-list",style:V},z)}return null},I=$1({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),M=$1({margin:0},i),O=!Dr(g),j=O?g:"",U=on("recharts-default-tooltip",h),L=on("recharts-tooltip-label",u);O&&y&&a!==void 0&&a!==null&&(j=y(g,a));var G=E?{role:"status","aria-live":"assertive"}:{};return k.createElement("div",Sb({className:U,style:I},G),k.createElement("p",{className:L,style:M},k.isValidElement(j)?j:"".concat(j)),C())},af="recharts-tooltip-wrapper",qX={visibility:"hidden"};function $X(e){var{coordinate:t,translateX:n,translateY:r}=e;return on(af,{["".concat(af,"-right")]:lt(n)&&t&&lt(t.x)&&n>=t.x,["".concat(af,"-left")]:lt(n)&&t&&lt(t.x)&&n<t.x,["".concat(af,"-bottom")]:lt(r)&&t&&lt(t.y)&&r>=t.y,["".concat(af,"-top")]:lt(r)&&t&&lt(t.y)&&r<t.y})}function PI(e){var{allowEscapeViewBox:t,coordinate:n,key:r,offsetTopLeft:i,position:a,reverseDirection:l,tooltipDimension:f,viewBox:h,viewBoxDimension:u}=e;if(a&&lt(a[r]))return a[r];var g=n[r]-f-(i>0?i:0),y=n[r]+i;if(t[r])return l[r]?g:y;var E=h[r];if(E==null)return 0;if(l[r]){var C=g,I=E;return C<I?Math.max(y,E):Math.max(g,E)}if(u==null)return 0;var M=y+f,O=E+u;return M>O?Math.max(g,E):Math.max(y,E)}function YX(e){var{translateX:t,translateY:n,useTranslate3d:r}=e;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function WX(e){var{allowEscapeViewBox:t,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:a,tooltipBox:l,useTranslate3d:f,viewBox:h}=e,u,g,y;return l.height>0&&l.width>0&&n?(g=PI({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:l.width,viewBox:h,viewBoxDimension:h.width}),y=PI({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:l.height,viewBox:h,viewBoxDimension:h.height}),u=YX({translateX:g,translateY:y,useTranslate3d:f})):u=qX,{cssProperties:u,cssClasses:$X({translateX:g,translateY:y,coordinate:n})}}function jI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function J0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jI(Object(n),!0).forEach(function(r){Ab(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ab(e,t,n){return(t=KX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KX(e){var t=XX(e,"string");return typeof t=="symbol"?t:t+""}function XX(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class JX extends k.PureComponent{constructor(){super(...arguments),Ab(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Ab(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,r,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:a,coordinate:l,hasPayload:f,isAnimationActive:h,offset:u,position:g,reverseDirection:y,useTranslate3d:E,viewBox:C,wrapperStyle:I,lastBoundingBox:M,innerRef:O,hasPortalFromProps:j}=this.props,{cssClasses:U,cssProperties:L}=WX({allowEscapeViewBox:n,coordinate:l,offsetTopLeft:u,position:g,reverseDirection:y,tooltipBox:{height:M.height,width:M.width},useTranslate3d:E,viewBox:C}),G=j?{}:J0(J0({transition:h&&t?"transform ".concat(r,"ms ").concat(i):void 0},L),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&f?"visible":"hidden",position:"absolute",top:0,left:0}),V=J0(J0({},G),{},{visibility:!this.state.dismissed&&t&&f?"visible":"hidden"},I);return k.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:U,style:V,ref:O},a)}}var yP=()=>{var e;return(e=st(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function Cb(){return Cb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cb.apply(null,arguments)}function LI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function BI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?LI(Object(n),!0).forEach(function(r){ZX(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ZX(e,t,n){return(t=QX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function QX(e){var t=eJ(e,"string");return typeof t=="symbol"?t:t+""}function eJ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var UI={curveBasisClosed:j$,curveBasisOpen:L$,curveBasis:P$,curveBumpX:w$,curveBumpY:E$,curveLinearClosed:B$,curveLinear:Lm,curveMonotoneX:U$,curveMonotoneY:F$,curveNatural:H$,curveStep:z$,curveStepAfter:V$,curveStepBefore:G$},Yp=e=>Ar(e.x)&&Ar(e.y),FI=e=>e.base!=null&&Yp(e.base)&&Yp(e),sf=e=>e.x,of=e=>e.y,tJ=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(Wf(e));return(n==="curveMonotone"||n==="curveBump")&&t?UI["".concat(n).concat(t==="vertical"?"Y":"X")]:UI[n]||Lm},nJ=e=>{var{type:t="linear",points:n=[],baseLine:r,layout:i,connectNulls:a=!1}=e,l=tJ(t,i),f=a?n.filter(Yp):n,h;if(Array.isArray(r)){var u=n.map((C,I)=>BI(BI({},C),{},{base:r[I]}));i==="vertical"?h=G0().y(of).x1(sf).x0(C=>C.base.x):h=G0().x(sf).y1(of).y0(C=>C.base.y);var g=h.defined(FI).curve(l),y=a?u.filter(FI):u;return g(y)}i==="vertical"&&lt(r)?h=G0().y(of).x1(sf).x0(r):lt(r)?h=G0().x(sf).y1(of).y0(r):h=VD().x(sf).y(of);var E=h.defined(Yp).curve(l);return E(f)},$w=e=>{var{className:t,points:n,path:r,pathRef:i}=e,a=Qf();if((!n||!n.length)&&!r)return null;var l={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||a,connectNulls:e.connectNulls},f=n&&n.length?nJ(l):r;return k.createElement("path",Cb({},Ta(e),Rw(e),{className:on("recharts-curve",t),d:f===null?void 0:f,ref:i}))},rJ=["x","y","top","left","width","height","className"];function Nb(){return Nb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nb.apply(null,arguments)}function HI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function iJ(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?HI(Object(n),!0).forEach(function(r){aJ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function aJ(e,t,n){return(t=sJ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sJ(e){var t=oJ(e,"string");return typeof t=="symbol"?t:t+""}function oJ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lJ(e,t){if(e==null)return{};var n,r,i=cJ(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function cJ(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var uJ=(e,t,n,r,i,a)=>"M".concat(e,",").concat(i,"v").concat(r,"M").concat(a,",").concat(t,"h").concat(n),dJ=e=>{var{x:t=0,y:n=0,top:r=0,left:i=0,width:a=0,height:l=0,className:f}=e,h=lJ(e,rJ),u=iJ({x:t,y:n,top:r,left:i,width:a,height:l},h);return!lt(t)||!lt(n)||!lt(a)||!lt(l)||!lt(r)||!lt(i)?null:k.createElement("path",Nb({},bi(u),{className:on("recharts-cross",f),d:uJ(t,n,a,l,r,i)}))};function fJ(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function zI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function GI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zI(Object(n),!0).forEach(function(r){hJ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function hJ(e,t,n){return(t=pJ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pJ(e){var t=mJ(e,"string");return typeof t=="symbol"?t:t+""}function mJ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gJ=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),vP=(e,t,n)=>e.map(r=>"".concat(gJ(r)," ").concat(t,"ms ").concat(n)).join(","),xJ=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,r)=>n.filter(i=>r.includes(i))),jf=(e,t)=>Object.keys(t).reduce((n,r)=>GI(GI({},n),{},{[r]:e(r,t[r])}),{});function VI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Or(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?VI(Object(n),!0).forEach(function(r){yJ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function yJ(e,t,n){return(t=vJ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vJ(e){var t=bJ(e,"string");return typeof t=="symbol"?t:t+""}function bJ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Wp=(e,t,n)=>e+(t-e)*n,_b=e=>{var{from:t,to:n}=e;return t!==n},bP=(e,t,n)=>{var r=jf((i,a)=>{if(_b(a)){var[l,f]=e(a.from,a.to,a.velocity);return Or(Or({},a),{},{from:l,velocity:f})}return a},t);return n<1?jf((i,a)=>_b(a)&&r[i]!=null?Or(Or({},a),{},{velocity:Wp(a.velocity,r[i].velocity,n),from:Wp(a.from,r[i].from,n)}):a,t):bP(e,r,n-1)};function wJ(e,t,n,r,i,a){var l,f=r.reduce((E,C)=>Or(Or({},E),{},{[C]:{from:e[C],velocity:0,to:t[C]}}),{}),h=()=>jf((E,C)=>C.from,f),u=()=>!Object.values(f).filter(_b).length,g=null,y=E=>{l||(l=E);var C=E-l,I=C/n.dt;f=bP(n,f,I),i(Or(Or(Or({},e),t),h())),l=E,u()||(g=a.setTimeout(y))};return()=>(g=a.setTimeout(y),()=>{var E;(E=g)===null||E===void 0||E()})}function EJ(e,t,n,r,i,a,l){var f=null,h=i.reduce((y,E)=>{var C=e[E],I=t[E];return C==null||I==null?y:Or(Or({},y),{},{[E]:[C,I]})},{}),u,g=y=>{u||(u=y);var E=(y-u)/r,C=jf((M,O)=>Wp(...O,n(E)),h);if(a(Or(Or(Or({},e),t),C)),E<1)f=l.setTimeout(g);else{var I=jf((M,O)=>Wp(...O,n(1)),h);a(Or(Or(Or({},e),t),I))}};return()=>(f=l.setTimeout(g),()=>{var y;(y=f)===null||y===void 0||y()})}const SJ=(e,t,n,r,i,a)=>{var l=xJ(e,t);return n==null?()=>(i(Or(Or({},e),t)),()=>{}):n.isStepper===!0?wJ(e,t,n,l,i,a):EJ(e,t,n,r,l,i,a)};var Kp=1e-4,wP=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],EP=(e,t)=>e.map((n,r)=>n*t**r).reduce((n,r)=>n+r),qI=(e,t)=>n=>{var r=wP(e,t);return EP(r,n)},AJ=(e,t)=>n=>{var r=wP(e,t),i=[...r.map((a,l)=>a*l).slice(1),0];return EP(i,n)},CJ=e=>{var t,n=e.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var r=(t=n[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(r==null||r.length!==4)return null;var i=r.map(a=>parseFloat(a));return[i[0],i[1],i[2],i[3]]},NJ=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i=CJ(n[0]);if(i)return i}}return n.length===4?n:[0,0,1,1]},_J=(e,t,n,r)=>{var i=qI(e,n),a=qI(t,r),l=AJ(e,n),f=u=>u>1?1:u<0?0:u,h=u=>{for(var g=u>1?1:u,y=g,E=0;E<8;++E){var C=i(y)-g,I=l(y);if(Math.abs(C-g)<Kp||I<Kp)return a(y);y=f(y-C/I)}return a(y)};return h.isStepper=!1,h},$I=function(){return _J(...NJ(...arguments))},TJ=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=t,a=(l,f,h)=>{var u=-(l-f)*n,g=h*r,y=h+(u-g)*i/1e3,E=h*i/1e3+l;return Math.abs(E-f)<Kp&&Math.abs(y)<Kp?[f,0]:[E,y]};return a.isStepper=!0,a.dt=i,a},IJ=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return $I(e);case"spring":return TJ();default:if(e.split("(")[0]==="cubic-bezier")return $I(e)}return typeof e=="function"?e:null};function RJ(e){var t,n=()=>null,r=!1,i=null,a=l=>{if(!r){if(Array.isArray(l)){if(!l.length)return;var f=l,[h,...u]=f;if(typeof h=="number"){i=e.setTimeout(a.bind(null,u),h);return}a(h),i=e.setTimeout(a.bind(null,u));return}typeof l=="string"&&(t=l,n(t)),typeof l=="object"&&(t=l,n(t)),typeof l=="function"&&l()}};return{stop:()=>{r=!0},start:l=>{r=!1,i&&(i(),i=null),a(l)},subscribe:l=>(n=l,()=>{n=()=>null}),getTimeoutController:()=>e}}class MJ{setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,a=l=>{l-r>=n?t(l):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{i!=null&&cancelAnimationFrame(i)}}}function OJ(){return RJ(new MJ)}var DJ=k.createContext(OJ);function kJ(e,t){var n=k.useContext(DJ);return k.useMemo(()=>t??n(e),[e,t,n])}var PJ=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),ag={isSsr:PJ()},jJ={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},YI={t:0},Y1={t:1};function sg(e){var t=kr(e,jJ),{isActive:n,canBegin:r,duration:i,easing:a,begin:l,onAnimationEnd:f,onAnimationStart:h,children:u}=t,g=n==="auto"?!ag.isSsr:n,y=kJ(t.animationId,t.animationManager),[E,C]=k.useState(g?YI:Y1),I=k.useRef(null);return k.useEffect(()=>{g||C(Y1)},[g]),k.useEffect(()=>{if(!g||!r)return Kf;var M=SJ(YI,Y1,IJ(a),i,C,y.getTimeoutController()),O=()=>{I.current=M()};return y.start([h,l,O,i,f]),()=>{y.stop(),I.current&&I.current(),f()}},[g,r,i,a,l,h,f,y]),u(E.t)}function og(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=k.useRef(If(t)),r=k.useRef(e);return r.current!==e&&(n.current=If(t),r.current=e),n.current}var LJ=["radius"],BJ=["radius"],WI,KI,XI,JI,ZI,QI,eR,tR,nR,rR;function iR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function aR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iR(Object(n),!0).forEach(function(r){UJ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function UJ(e,t,n){return(t=FJ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FJ(e){var t=HJ(e,"string");return typeof t=="symbol"?t:t+""}function HJ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xp(){return Xp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xp.apply(null,arguments)}function sR(e,t){if(e==null)return{};var n,r,i=zJ(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function zJ(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function hs(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var oR=(e,t,n,r,i)=>{var a=xl(n),l=xl(r),f=Math.min(Math.abs(a)/2,Math.abs(l)/2),h=l>=0?1:-1,u=a>=0?1:-1,g=l>=0&&a>=0||l<0&&a<0?1:0,y;if(f>0&&i instanceof Array){for(var E=[0,0,0,0],C=0,I=4;C<I;C++)E[C]=i[C]>f?f:i[C];y=ir(WI||(WI=hs(["M",",",""])),e,t+h*E[0]),E[0]>0&&(y+=ir(KI||(KI=hs(["A ",",",",0,0,",",",",",""])),E[0],E[0],g,e+u*E[0],t)),y+=ir(XI||(XI=hs(["L ",",",""])),e+n-u*E[1],t),E[1]>0&&(y+=ir(JI||(JI=hs(["A ",",",",0,0,",`,
        `,",",""])),E[1],E[1],g,e+n,t+h*E[1])),y+=ir(ZI||(ZI=hs(["L ",",",""])),e+n,t+r-h*E[2]),E[2]>0&&(y+=ir(QI||(QI=hs(["A ",",",",0,0,",`,
        `,",",""])),E[2],E[2],g,e+n-u*E[2],t+r)),y+=ir(eR||(eR=hs(["L ",",",""])),e+u*E[3],t+r),E[3]>0&&(y+=ir(tR||(tR=hs(["A ",",",",0,0,",`,
        `,",",""])),E[3],E[3],g,e,t+r-h*E[3])),y+="Z"}else if(f>0&&i===+i&&i>0){var M=Math.min(f,i);y=ir(nR||(nR=hs(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+h*M,M,M,g,e+u*M,t,e+n-u*M,t,M,M,g,e+n,t+h*M,e+n,t+r-h*M,M,M,g,e+n-u*M,t+r,e+u*M,t+r,M,M,g,e,t+r-h*M)}else y=ir(rR||(rR=hs(["M ",","," h "," v "," h "," Z"])),e,t,n,r,-n);return y},lR={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},SP=e=>{var t=kr(e,lR),n=k.useRef(null),[r,i]=k.useState(-1);k.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var ge=n.current.getTotalLength();ge&&i(ge)}catch{}},[]);var{x:a,y:l,width:f,height:h,radius:u,className:g}=t,{animationEasing:y,animationDuration:E,animationBegin:C,isAnimationActive:I,isUpdateAnimationActive:M}=t,O=k.useRef(f),j=k.useRef(h),U=k.useRef(a),L=k.useRef(l),G=k.useMemo(()=>({x:a,y:l,width:f,height:h,radius:u}),[a,l,f,h,u]),V=og(G,"rectangle-");if(a!==+a||l!==+l||f!==+f||h!==+h||f===0||h===0)return null;var z=on("recharts-rectangle",g);if(!M){var B=bi(t),{radius:J}=B,W=sR(B,LJ);return k.createElement("path",Xp({},W,{x:xl(a),y:xl(l),width:xl(f),height:xl(h),radius:typeof u=="number"?u:void 0,className:z,d:oR(a,l,f,h,u)}))}var Z=O.current,te=j.current,Y=U.current,pe=L.current,Te="0px ".concat(r===-1?1:r,"px"),le="".concat(r,"px 0px"),de=vP(["strokeDasharray"],E,typeof y=="string"?y:lR.animationEasing);return k.createElement(sg,{animationId:V,key:V,canBegin:r>0,duration:E,easing:y,isActive:M,begin:C},ge=>{var De=li(Z,f,ge),we=li(te,h,ge),$e=li(Y,a,ge),ne=li(pe,l,ge);n.current&&(O.current=De,j.current=we,U.current=$e,L.current=ne);var re;I?ge>0?re={transition:de,strokeDasharray:le}:re={strokeDasharray:Te}:re={strokeDasharray:le};var he=bi(t),{radius:se}=he,ke=sR(he,BJ);return k.createElement("path",Xp({},ke,{radius:typeof u=="number"?u:void 0,className:z,d:oR($e,ne,De,we,u),ref:n,style:aR(aR({},re),t.style)}))})};function cR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function uR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cR(Object(n),!0).forEach(function(r){GJ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function GJ(e,t,n){return(t=VJ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function VJ(e){var t=qJ(e,"string");return typeof t=="symbol"?t:t+""}function qJ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Jp=Math.PI/180,$J=e=>e*180/Math.PI,Er=(e,t,n,r)=>({x:e+Math.cos(-Jp*r)*n,y:t+Math.sin(-Jp*r)*n}),AP=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},YJ=(e,t)=>{var{x:n,y:r}=e,{x:i,y:a}=t;return Math.sqrt((n-i)**2+(r-a)**2)},WJ=(e,t)=>{var{x:n,y:r}=e,{cx:i,cy:a}=t,l=YJ({x:n,y:r},{x:i,y:a});if(l<=0)return{radius:l,angle:0};var f=(n-i)/l,h=Math.acos(f);return r>a&&(h=2*Math.PI-h),{radius:l,angle:$J(h),angleInRadian:h}},KJ=e=>{var{startAngle:t,endAngle:n}=e,r=Math.floor(t/360),i=Math.floor(n/360),a=Math.min(r,i);return{startAngle:t-a*360,endAngle:n-a*360}},XJ=(e,t)=>{var{startAngle:n,endAngle:r}=t,i=Math.floor(n/360),a=Math.floor(r/360),l=Math.min(i,a);return e+l*360},JJ=(e,t)=>{var{chartX:n,chartY:r}=e,{radius:i,angle:a}=WJ({x:n,y:r},t),{innerRadius:l,outerRadius:f}=t;if(i<l||i>f||i===0)return null;var{startAngle:h,endAngle:u}=KJ(t),g=a,y;if(h<=u){for(;g>u;)g-=360;for(;g<h;)g+=360;y=g>=h&&g<=u}else{for(;g>h;)g-=360;for(;g<u;)g+=360;y=g>=u&&g<=h}return y?uR(uR({},t),{},{radius:i,angle:XJ(g,t)}):null};function CP(e){var{cx:t,cy:n,radius:r,startAngle:i,endAngle:a}=e,l=Er(t,n,r,i),f=Er(t,n,r,a);return{points:[l,f],cx:t,cy:n,radius:r,startAngle:i,endAngle:a}}var dR,fR,hR,pR,mR,gR,xR;function Tb(){return Tb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tb.apply(null,arguments)}function lc(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var ZJ=(e,t)=>{var n=ui(t-e),r=Math.min(Math.abs(t-e),359.999);return n*r},Z0=e=>{var{cx:t,cy:n,radius:r,angle:i,sign:a,isExternal:l,cornerRadius:f,cornerIsExternal:h}=e,u=f*(l?1:-1)+r,g=Math.asin(f/u)/Jp,y=h?i:i+a*g,E=Er(t,n,u,y),C=Er(t,n,r,y),I=h?i-a*g:i,M=Er(t,n,u*Math.cos(g*Jp),I);return{center:E,circleTangency:C,lineTangency:M,theta:g}},NP=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:a,endAngle:l}=e,f=ZJ(a,l),h=a+f,u=Er(t,n,i,a),g=Er(t,n,i,h),y=ir(dR||(dR=lc(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),u.x,u.y,i,i,+(Math.abs(f)>180),+(a>h),g.x,g.y);if(r>0){var E=Er(t,n,r,a),C=Er(t,n,r,h);y+=ir(fR||(fR=lc(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),C.x,C.y,r,r,+(Math.abs(f)>180),+(a<=h),E.x,E.y)}else y+=ir(hR||(hR=lc(["L ",","," Z"])),t,n);return y},QJ=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,cornerRadius:a,forceCornerRadius:l,cornerIsExternal:f,startAngle:h,endAngle:u}=e,g=ui(u-h),{circleTangency:y,lineTangency:E,theta:C}=Z0({cx:t,cy:n,radius:i,angle:h,sign:g,cornerRadius:a,cornerIsExternal:f}),{circleTangency:I,lineTangency:M,theta:O}=Z0({cx:t,cy:n,radius:i,angle:u,sign:-g,cornerRadius:a,cornerIsExternal:f}),j=f?Math.abs(h-u):Math.abs(h-u)-C-O;if(j<0)return l?ir(pR||(pR=lc(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),E.x,E.y,a,a,a*2,a,a,-a*2):NP({cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:h,endAngle:u});var U=ir(mR||(mR=lc(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),E.x,E.y,a,a,+(g<0),y.x,y.y,i,i,+(j>180),+(g<0),I.x,I.y,a,a,+(g<0),M.x,M.y);if(r>0){var{circleTangency:L,lineTangency:G,theta:V}=Z0({cx:t,cy:n,radius:r,angle:h,sign:g,isExternal:!0,cornerRadius:a,cornerIsExternal:f}),{circleTangency:z,lineTangency:B,theta:J}=Z0({cx:t,cy:n,radius:r,angle:u,sign:-g,isExternal:!0,cornerRadius:a,cornerIsExternal:f}),W=f?Math.abs(h-u):Math.abs(h-u)-V-J;if(W<0&&a===0)return"".concat(U,"L").concat(t,",").concat(n,"Z");U+=ir(gR||(gR=lc(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),B.x,B.y,a,a,+(g<0),z.x,z.y,r,r,+(W>180),+(g>0),L.x,L.y,a,a,+(g<0),G.x,G.y)}else U+=ir(xR||(xR=lc(["L",",","Z"])),t,n);return U},eZ={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},_P=e=>{var t=kr(e,eZ),{cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:l,forceCornerRadius:f,cornerIsExternal:h,startAngle:u,endAngle:g,className:y}=t;if(a<i||u===g)return null;var E=on("recharts-sector",y),C=a-i,I=ta(l,C,0,!0),M;return I>0&&Math.abs(u-g)<360?M=QJ({cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:Math.min(I,C/2),forceCornerRadius:f,cornerIsExternal:h,startAngle:u,endAngle:g}):M=NP({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:u,endAngle:g}),k.createElement("path",Tb({},bi(t),{className:E,d:M}))};function tZ(e,t,n){if(e==="horizontal")return[{x:t.x,y:n.top},{x:t.x,y:n.top+n.height}];if(e==="vertical")return[{x:n.left,y:t.y},{x:n.left+n.width,y:t.y}];if(ak(t)){if(e==="centric"){var{cx:r,cy:i,innerRadius:a,outerRadius:l,angle:f}=t,h=Er(r,i,a,f),u=Er(r,i,l,f);return[{x:h.x,y:h.y},{x:u.x,y:u.y}]}return CP(t)}}var W1={},K1={},X1={},yR;function nZ(){return yR||(yR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gk();function n(r){return t.isSymbol(r)?NaN:Number(r)}e.toNumber=n})(X1)),X1}var vR;function rZ(){return vR||(vR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nZ();function n(r){return r?(r=t.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}e.toFinite=n})(K1)),K1}var bR;function iZ(){return bR||(bR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xk(),n=rZ();function r(i,a,l){l&&typeof l!="number"&&t.isIterateeCall(i,a,l)&&(a=l=void 0),i=n.toFinite(i),a===void 0?(a=i,i=0):a=n.toFinite(a),l=l===void 0?i<a?1:-1:n.toFinite(l);const f=Math.max(Math.ceil((a-i)/(l||1)),0),h=new Array(f);for(let u=0;u<f;u++)h[u]=i,i+=l;return h}e.range=r})(W1)),W1}var J1,wR;function aZ(){return wR||(wR=1,J1=iZ().range),J1}var sZ=aZ();const TP=Qa(sZ);function yl(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function oZ(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Yw(e){let t,n,r;e.length!==2?(t=yl,n=(f,h)=>yl(e(f),h),r=(f,h)=>e(f)-h):(t=e===yl||e===oZ?e:lZ,n=e,r=e);function i(f,h,u=0,g=f.length){if(u<g){if(t(h,h)!==0)return g;do{const y=u+g>>>1;n(f[y],h)<0?u=y+1:g=y}while(u<g)}return u}function a(f,h,u=0,g=f.length){if(u<g){if(t(h,h)!==0)return g;do{const y=u+g>>>1;n(f[y],h)<=0?u=y+1:g=y}while(u<g)}return u}function l(f,h,u=0,g=f.length){const y=i(f,h,u,g-1);return y>u&&r(f[y-1],h)>-r(f[y],h)?y-1:y}return{left:i,center:l,right:a}}function lZ(){return 0}function IP(e){return e===null?NaN:+e}function*cZ(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const uZ=Yw(yl),th=uZ.right;Yw(IP).center;class ER extends Map{constructor(t,n=hZ){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(SR(this,t))}has(t){return super.has(SR(this,t))}set(t,n){return super.set(dZ(this,t),n)}delete(t){return super.delete(fZ(this,t))}}function SR({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function dZ({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function fZ({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function hZ(e){return e!==null&&typeof e=="object"?e.valueOf():e}function pZ(e=yl){if(e===yl)return RP;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function RP(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const mZ=Math.sqrt(50),gZ=Math.sqrt(10),xZ=Math.sqrt(2);function Zp(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),l=a>=mZ?10:a>=gZ?5:a>=xZ?2:1;let f,h,u;return i<0?(u=Math.pow(10,-i)/l,f=Math.round(e*u),h=Math.round(t*u),f/u<e&&++f,h/u>t&&--h,u=-u):(u=Math.pow(10,i)*l,f=Math.round(e/u),h=Math.round(t/u),f*u<e&&++f,h*u>t&&--h),h<f&&.5<=n&&n<2?Zp(e,t,n*2):[f,h,u]}function Ib(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,a,l]=r?Zp(t,e,n):Zp(e,t,n);if(!(a>=i))return[];const f=a-i+1,h=new Array(f);if(r)if(l<0)for(let u=0;u<f;++u)h[u]=(a-u)/-l;else for(let u=0;u<f;++u)h[u]=(a-u)*l;else if(l<0)for(let u=0;u<f;++u)h[u]=(i+u)/-l;else for(let u=0;u<f;++u)h[u]=(i+u)*l;return h}function Rb(e,t,n){return t=+t,e=+e,n=+n,Zp(e,t,n)[2]}function Mb(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Rb(t,e,n):Rb(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function AR(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function CR(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function MP(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?RP:pZ(i);r>n;){if(r-n>600){const h=r-n+1,u=t-n+1,g=Math.log(h),y=.5*Math.exp(2*g/3),E=.5*Math.sqrt(g*y*(h-y)/h)*(u-h/2<0?-1:1),C=Math.max(n,Math.floor(t-u*y/h+E)),I=Math.min(r,Math.floor(t+(h-u)*y/h+E));MP(e,t,C,I,i)}const a=e[t];let l=n,f=r;for(lf(e,n,t),i(e[r],a)>0&&lf(e,n,r);l<f;){for(lf(e,l,f),++l,--f;i(e[l],a)<0;)++l;for(;i(e[f],a)>0;)--f}i(e[n],a)===0?lf(e,n,f):(++f,lf(e,f,r)),f<=t&&(n=f+1),t<=f&&(r=f-1)}return e}function lf(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function yZ(e,t,n){if(e=Float64Array.from(cZ(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return CR(e);if(t>=1)return AR(e);var r,i=(r-1)*t,a=Math.floor(i),l=AR(MP(e,a).subarray(0,a+1)),f=CR(e.subarray(a+1));return l+(f-l)*(i-a)}}function vZ(e,t,n=IP){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),l=+n(e[a],a,e),f=+n(e[a+1],a+1,e);return l+(f-l)*(i-a)}}function bZ(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(i);++r<i;)a[r]=e+r*n;return a}function Ma(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function wo(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Ob=Symbol("implicit");function Ww(){var e=new ER,t=[],n=[],r=Ob;function i(a){let l=e.get(a);if(l===void 0){if(r!==Ob)return r;e.set(a,l=t.push(a)-1)}return n[l%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new ER;for(const l of a)e.has(l)||e.set(l,t.push(l)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Ww(t,n).unknown(r)},Ma.apply(i,arguments),i}function Kw(){var e=Ww().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,a,l,f=!1,h=0,u=0,g=.5;delete e.unknown;function y(){var E=t().length,C=i<r,I=C?i:r,M=C?r:i;a=(M-I)/Math.max(1,E-h+u*2),f&&(a=Math.floor(a)),I+=(M-I-a*(E-h))*g,l=a*(1-h),f&&(I=Math.round(I),l=Math.round(l));var O=bZ(E).map(function(j){return I+a*j});return n(C?O.reverse():O)}return e.domain=function(E){return arguments.length?(t(E),y()):t()},e.range=function(E){return arguments.length?([r,i]=E,r=+r,i=+i,y()):[r,i]},e.rangeRound=function(E){return[r,i]=E,r=+r,i=+i,f=!0,y()},e.bandwidth=function(){return l},e.step=function(){return a},e.round=function(E){return arguments.length?(f=!!E,y()):f},e.padding=function(E){return arguments.length?(h=Math.min(1,u=+E),y()):h},e.paddingInner=function(E){return arguments.length?(h=Math.min(1,E),y()):h},e.paddingOuter=function(E){return arguments.length?(u=+E,y()):u},e.align=function(E){return arguments.length?(g=Math.max(0,Math.min(1,E)),y()):g},e.copy=function(){return Kw(t(),[r,i]).round(f).paddingInner(h).paddingOuter(u).align(g)},Ma.apply(y(),arguments)}function OP(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return OP(t())},e}function wZ(){return OP(Kw.apply(null,arguments).paddingInner(1))}function Xw(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function DP(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function nh(){}var Lf=.7,Qp=1/Lf,ju="\\s*([+-]?\\d+)\\s*",Bf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ys="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",EZ=/^#([0-9a-f]{3,8})$/,SZ=new RegExp(`^rgb\\(${ju},${ju},${ju}\\)$`),AZ=new RegExp(`^rgb\\(${ys},${ys},${ys}\\)$`),CZ=new RegExp(`^rgba\\(${ju},${ju},${ju},${Bf}\\)$`),NZ=new RegExp(`^rgba\\(${ys},${ys},${ys},${Bf}\\)$`),_Z=new RegExp(`^hsl\\(${Bf},${ys},${ys}\\)$`),TZ=new RegExp(`^hsla\\(${Bf},${ys},${ys},${Bf}\\)$`),NR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Xw(nh,Uf,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:_R,formatHex:_R,formatHex8:IZ,formatHsl:RZ,formatRgb:TR,toString:TR});function _R(){return this.rgb().formatHex()}function IZ(){return this.rgb().formatHex8()}function RZ(){return kP(this).formatHsl()}function TR(){return this.rgb().formatRgb()}function Uf(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=EZ.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?IR(t):n===3?new Mi(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Q0(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Q0(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=SZ.exec(e))?new Mi(t[1],t[2],t[3],1):(t=AZ.exec(e))?new Mi(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=CZ.exec(e))?Q0(t[1],t[2],t[3],t[4]):(t=NZ.exec(e))?Q0(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=_Z.exec(e))?OR(t[1],t[2]/100,t[3]/100,1):(t=TZ.exec(e))?OR(t[1],t[2]/100,t[3]/100,t[4]):NR.hasOwnProperty(e)?IR(NR[e]):e==="transparent"?new Mi(NaN,NaN,NaN,0):null}function IR(e){return new Mi(e>>16&255,e>>8&255,e&255,1)}function Q0(e,t,n,r){return r<=0&&(e=t=n=NaN),new Mi(e,t,n,r)}function MZ(e){return e instanceof nh||(e=Uf(e)),e?(e=e.rgb(),new Mi(e.r,e.g,e.b,e.opacity)):new Mi}function Db(e,t,n,r){return arguments.length===1?MZ(e):new Mi(e,t,n,r??1)}function Mi(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Xw(Mi,Db,DP(nh,{brighter(e){return e=e==null?Qp:Math.pow(Qp,e),new Mi(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Lf:Math.pow(Lf,e),new Mi(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Mi(hc(this.r),hc(this.g),hc(this.b),em(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:RR,formatHex:RR,formatHex8:OZ,formatRgb:MR,toString:MR}));function RR(){return`#${cc(this.r)}${cc(this.g)}${cc(this.b)}`}function OZ(){return`#${cc(this.r)}${cc(this.g)}${cc(this.b)}${cc((isNaN(this.opacity)?1:this.opacity)*255)}`}function MR(){const e=em(this.opacity);return`${e===1?"rgb(":"rgba("}${hc(this.r)}, ${hc(this.g)}, ${hc(this.b)}${e===1?")":`, ${e})`}`}function em(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function hc(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function cc(e){return e=hc(e),(e<16?"0":"")+e.toString(16)}function OR(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Wa(e,t,n,r)}function kP(e){if(e instanceof Wa)return new Wa(e.h,e.s,e.l,e.opacity);if(e instanceof nh||(e=Uf(e)),!e)return new Wa;if(e instanceof Wa)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),l=NaN,f=a-i,h=(a+i)/2;return f?(t===a?l=(n-r)/f+(n<r)*6:n===a?l=(r-t)/f+2:l=(t-n)/f+4,f/=h<.5?a+i:2-a-i,l*=60):f=h>0&&h<1?0:l,new Wa(l,f,h,e.opacity)}function DZ(e,t,n,r){return arguments.length===1?kP(e):new Wa(e,t,n,r??1)}function Wa(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Xw(Wa,DZ,DP(nh,{brighter(e){return e=e==null?Qp:Math.pow(Qp,e),new Wa(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Lf:Math.pow(Lf,e),new Wa(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Mi(Z1(e>=240?e-240:e+120,i,r),Z1(e,i,r),Z1(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Wa(DR(this.h),ep(this.s),ep(this.l),em(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=em(this.opacity);return`${e===1?"hsl(":"hsla("}${DR(this.h)}, ${ep(this.s)*100}%, ${ep(this.l)*100}%${e===1?")":`, ${e})`}`}}));function DR(e){return e=(e||0)%360,e<0?e+360:e}function ep(e){return Math.max(0,Math.min(1,e||0))}function Z1(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Jw=e=>()=>e;function kZ(e,t){return function(n){return e+n*t}}function PZ(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function jZ(e){return(e=+e)==1?PP:function(t,n){return n-t?PZ(t,n,e):Jw(isNaN(t)?n:t)}}function PP(e,t){var n=t-e;return n?kZ(e,n):Jw(isNaN(e)?t:e)}const kR=(function e(t){var n=jZ(t);function r(i,a){var l=n((i=Db(i)).r,(a=Db(a)).r),f=n(i.g,a.g),h=n(i.b,a.b),u=PP(i.opacity,a.opacity);return function(g){return i.r=l(g),i.g=f(g),i.b=h(g),i.opacity=u(g),i+""}}return r.gamma=e,r})(1);function LZ(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function BZ(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function UZ(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),l;for(l=0;l<r;++l)i[l]=ed(e[l],t[l]);for(;l<n;++l)a[l]=t[l];return function(f){for(l=0;l<r;++l)a[l]=i[l](f);return a}}function FZ(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function tm(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function HZ(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=ed(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var kb=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Q1=new RegExp(kb.source,"g");function zZ(e){return function(){return e}}function GZ(e){return function(t){return e(t)+""}}function VZ(e,t){var n=kb.lastIndex=Q1.lastIndex=0,r,i,a,l=-1,f=[],h=[];for(e=e+"",t=t+"";(r=kb.exec(e))&&(i=Q1.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),f[l]?f[l]+=a:f[++l]=a),(r=r[0])===(i=i[0])?f[l]?f[l]+=i:f[++l]=i:(f[++l]=null,h.push({i:l,x:tm(r,i)})),n=Q1.lastIndex;return n<t.length&&(a=t.slice(n),f[l]?f[l]+=a:f[++l]=a),f.length<2?h[0]?GZ(h[0].x):zZ(t):(t=h.length,function(u){for(var g=0,y;g<t;++g)f[(y=h[g]).i]=y.x(u);return f.join("")})}function ed(e,t){var n=typeof t,r;return t==null||n==="boolean"?Jw(t):(n==="number"?tm:n==="string"?(r=Uf(t))?(t=r,kR):VZ:t instanceof Uf?kR:t instanceof Date?FZ:BZ(t)?LZ:Array.isArray(t)?UZ:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?HZ:tm)(e,t)}function Zw(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function qZ(e,t){t===void 0&&(t=e,e=ed);for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(l){var f=Math.max(0,Math.min(r-1,Math.floor(l*=r)));return a[f](l-f)}}function $Z(e){return function(){return e}}function nm(e){return+e}var PR=[0,1];function yi(e){return e}function Pb(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:$Z(isNaN(t)?NaN:.5)}function YZ(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function WZ(e,t,n){var r=e[0],i=e[1],a=t[0],l=t[1];return i<r?(r=Pb(i,r),a=n(l,a)):(r=Pb(r,i),a=n(a,l)),function(f){return a(r(f))}}function KZ(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),l=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<r;)i[l]=Pb(e[l],e[l+1]),a[l]=n(t[l],t[l+1]);return function(f){var h=th(e,f,1,r)-1;return a[h](i[h](f))}}function rh(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function lg(){var e=PR,t=PR,n=ed,r,i,a,l=yi,f,h,u;function g(){var E=Math.min(e.length,t.length);return l!==yi&&(l=YZ(e[0],e[E-1])),f=E>2?KZ:WZ,h=u=null,y}function y(E){return E==null||isNaN(E=+E)?a:(h||(h=f(e.map(r),t,n)))(r(l(E)))}return y.invert=function(E){return l(i((u||(u=f(t,e.map(r),tm)))(E)))},y.domain=function(E){return arguments.length?(e=Array.from(E,nm),g()):e.slice()},y.range=function(E){return arguments.length?(t=Array.from(E),g()):t.slice()},y.rangeRound=function(E){return t=Array.from(E),n=Zw,g()},y.clamp=function(E){return arguments.length?(l=E?!0:yi,g()):l!==yi},y.interpolate=function(E){return arguments.length?(n=E,g()):n},y.unknown=function(E){return arguments.length?(a=E,y):a},function(E,C){return r=E,i=C,g()}}function Qw(){return lg()(yi,yi)}function XZ(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function rm(e,t){if(!isFinite(e)||e===0)return null;var n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function zu(e){return e=rm(Math.abs(e)),e?e[1]:NaN}function JZ(e,t){return function(n,r){for(var i=n.length,a=[],l=0,f=e[0],h=0;i>0&&f>0&&(h+f+1>r&&(f=Math.max(1,r-h)),a.push(n.substring(i-=f,i+f)),!((h+=f+1)>r));)f=e[l=(l+1)%e.length];return a.reverse().join(t)}}function ZZ(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var QZ=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ff(e){if(!(t=QZ.exec(e)))throw new Error("invalid format: "+e);var t;return new eE({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Ff.prototype=eE.prototype;function eE(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}eE.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function eQ(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var im;function tQ(e,t){var n=rm(e,t);if(!n)return im=void 0,e.toPrecision(t);var r=n[0],i=n[1],a=i-(im=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return a===l?r:a>l?r+new Array(a-l+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+rm(e,Math.max(0,t+a-1))[0]}function jR(e,t){var n=rm(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const LR={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:XZ,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>jR(e*100,t),r:jR,s:tQ,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function BR(e){return e}var UR=Array.prototype.map,FR=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function nQ(e){var t=e.grouping===void 0||e.thousands===void 0?BR:JZ(UR.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?BR:ZZ(UR.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",f=e.minus===void 0?"":e.minus+"",h=e.nan===void 0?"NaN":e.nan+"";function u(y,E){y=Ff(y);var C=y.fill,I=y.align,M=y.sign,O=y.symbol,j=y.zero,U=y.width,L=y.comma,G=y.precision,V=y.trim,z=y.type;z==="n"?(L=!0,z="g"):LR[z]||(G===void 0&&(G=12),V=!0,z="g"),(j||C==="0"&&I==="=")&&(j=!0,C="0",I="=");var B=(E&&E.prefix!==void 0?E.prefix:"")+(O==="$"?n:O==="#"&&/[boxX]/.test(z)?"0"+z.toLowerCase():""),J=(O==="$"?r:/[%p]/.test(z)?l:"")+(E&&E.suffix!==void 0?E.suffix:""),W=LR[z],Z=/[defgprs%]/.test(z);G=G===void 0?6:/[gprs]/.test(z)?Math.max(1,Math.min(21,G)):Math.max(0,Math.min(20,G));function te(Y){var pe=B,Te=J,le,de,ge;if(z==="c")Te=W(Y)+Te,Y="";else{Y=+Y;var De=Y<0||1/Y<0;if(Y=isNaN(Y)?h:W(Math.abs(Y),G),V&&(Y=eQ(Y)),De&&+Y==0&&M!=="+"&&(De=!1),pe=(De?M==="("?M:f:M==="-"||M==="("?"":M)+pe,Te=(z==="s"&&!isNaN(Y)&&im!==void 0?FR[8+im/3]:"")+Te+(De&&M==="("?")":""),Z){for(le=-1,de=Y.length;++le<de;)if(ge=Y.charCodeAt(le),48>ge||ge>57){Te=(ge===46?i+Y.slice(le+1):Y.slice(le))+Te,Y=Y.slice(0,le);break}}}L&&!j&&(Y=t(Y,1/0));var we=pe.length+Y.length+Te.length,$e=we<U?new Array(U-we+1).join(C):"";switch(L&&j&&(Y=t($e+Y,$e.length?U-Te.length:1/0),$e=""),I){case"<":Y=pe+Y+Te+$e;break;case"=":Y=pe+$e+Y+Te;break;case"^":Y=$e.slice(0,we=$e.length>>1)+pe+Y+Te+$e.slice(we);break;default:Y=$e+pe+Y+Te;break}return a(Y)}return te.toString=function(){return y+""},te}function g(y,E){var C=Math.max(-8,Math.min(8,Math.floor(zu(E)/3)))*3,I=Math.pow(10,-C),M=u((y=Ff(y),y.type="f",y),{suffix:FR[8+C/3]});return function(O){return M(I*O)}}return{format:u,formatPrefix:g}}var tp,tE,jP;rQ({thousands:",",grouping:[3],currency:["$",""]});function rQ(e){return tp=nQ(e),tE=tp.format,jP=tp.formatPrefix,tp}function iQ(e){return Math.max(0,-zu(Math.abs(e)))}function aQ(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(zu(t)/3)))*3-zu(Math.abs(e)))}function sQ(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,zu(t)-zu(e))+1}function LP(e,t,n,r){var i=Mb(e,t,n),a;switch(r=Ff(r??",f"),r.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=aQ(i,l))&&(r.precision=a),jP(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=sQ(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=iQ(i))&&(r.precision=a-(r.type==="%")*2);break}}return tE(r)}function Al(e){var t=e.domain;return e.ticks=function(n){var r=t();return Ib(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return LP(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,l=r[i],f=r[a],h,u,g=10;for(f<l&&(u=l,l=f,f=u,u=i,i=a,a=u);g-- >0;){if(u=Rb(l,f,n),u===h)return r[i]=l,r[a]=f,t(r);if(u>0)l=Math.floor(l/u)*u,f=Math.ceil(f/u)*u;else if(u<0)l=Math.ceil(l*u)/u,f=Math.floor(f*u)/u;else break;h=u}return e},e}function BP(){var e=Qw();return e.copy=function(){return rh(e,BP())},Ma.apply(e,arguments),Al(e)}function UP(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,nm),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return UP(e).unknown(t)},e=arguments.length?Array.from(e,nm):[0,1],Al(n)}function FP(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],a=e[r],l;return a<i&&(l=n,n=r,r=l,l=i,i=a,a=l),e[n]=t.floor(i),e[r]=t.ceil(a),e}function HR(e){return Math.log(e)}function zR(e){return Math.exp(e)}function oQ(e){return-Math.log(-e)}function lQ(e){return-Math.exp(-e)}function cQ(e){return isFinite(e)?+("1e"+e):e<0?0:e}function uQ(e){return e===10?cQ:e===Math.E?Math.exp:t=>Math.pow(e,t)}function dQ(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function GR(e){return(t,n)=>-e(-t,n)}function nE(e){const t=e(HR,zR),n=t.domain;let r=10,i,a;function l(){return i=dQ(r),a=uQ(r),n()[0]<0?(i=GR(i),a=GR(a),e(oQ,lQ)):e(HR,zR),t}return t.base=function(f){return arguments.length?(r=+f,l()):r},t.domain=function(f){return arguments.length?(n(f),l()):n()},t.ticks=f=>{const h=n();let u=h[0],g=h[h.length-1];const y=g<u;y&&([u,g]=[g,u]);let E=i(u),C=i(g),I,M;const O=f==null?10:+f;let j=[];if(!(r%1)&&C-E<O){if(E=Math.floor(E),C=Math.ceil(C),u>0){for(;E<=C;++E)for(I=1;I<r;++I)if(M=E<0?I/a(-E):I*a(E),!(M<u)){if(M>g)break;j.push(M)}}else for(;E<=C;++E)for(I=r-1;I>=1;--I)if(M=E>0?I/a(-E):I*a(E),!(M<u)){if(M>g)break;j.push(M)}j.length*2<O&&(j=Ib(u,g,O))}else j=Ib(E,C,Math.min(C-E,O)).map(a);return y?j.reverse():j},t.tickFormat=(f,h)=>{if(f==null&&(f=10),h==null&&(h=r===10?"s":","),typeof h!="function"&&(!(r%1)&&(h=Ff(h)).precision==null&&(h.trim=!0),h=tE(h)),f===1/0)return h;const u=Math.max(1,r*f/t.ticks().length);return g=>{let y=g/a(Math.round(i(g)));return y*r<r-.5&&(y*=r),y<=u?h(g):""}},t.nice=()=>n(FP(n(),{floor:f=>a(Math.floor(i(f))),ceil:f=>a(Math.ceil(i(f)))})),t}function HP(){const e=nE(lg()).domain([1,10]);return e.copy=()=>rh(e,HP()).base(e.base()),Ma.apply(e,arguments),e}function VR(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function qR(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function rE(e){var t=1,n=e(VR(t),qR(t));return n.constant=function(r){return arguments.length?e(VR(t=+r),qR(t)):t},Al(n)}function zP(){var e=rE(lg());return e.copy=function(){return rh(e,zP()).constant(e.constant())},Ma.apply(e,arguments)}function $R(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function fQ(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function hQ(e){return e<0?-e*e:e*e}function iE(e){var t=e(yi,yi),n=1;function r(){return n===1?e(yi,yi):n===.5?e(fQ,hQ):e($R(n),$R(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Al(t)}function aE(){var e=iE(lg());return e.copy=function(){return rh(e,aE()).exponent(e.exponent())},Ma.apply(e,arguments),e}function pQ(){return aE.apply(null,arguments).exponent(.5)}function YR(e){return Math.sign(e)*e*e}function mQ(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function GP(){var e=Qw(),t=[0,1],n=!1,r;function i(a){var l=mQ(e(a));return isNaN(l)?r:n?Math.round(l):l}return i.invert=function(a){return e.invert(YR(a))},i.domain=function(a){return arguments.length?(e.domain(a),i):e.domain()},i.range=function(a){return arguments.length?(e.range((t=Array.from(a,nm)).map(YR)),i):t.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(e.clamp(a),i):e.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return GP(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},Ma.apply(i,arguments),Al(i)}function VP(){var e=[],t=[],n=[],r;function i(){var l=0,f=Math.max(1,t.length);for(n=new Array(f-1);++l<f;)n[l-1]=vZ(e,l/f);return a}function a(l){return l==null||isNaN(l=+l)?r:t[th(n,l)]}return a.invertExtent=function(l){var f=t.indexOf(l);return f<0?[NaN,NaN]:[f>0?n[f-1]:e[0],f<n.length?n[f]:e[e.length-1]]},a.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let f of l)f!=null&&!isNaN(f=+f)&&e.push(f);return e.sort(yl),i()},a.range=function(l){return arguments.length?(t=Array.from(l),i()):t.slice()},a.unknown=function(l){return arguments.length?(r=l,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return VP().domain(e).range(t).unknown(r)},Ma.apply(a,arguments)}function qP(){var e=0,t=1,n=1,r=[.5],i=[0,1],a;function l(h){return h!=null&&h<=h?i[th(r,h,0,n)]:a}function f(){var h=-1;for(r=new Array(n);++h<n;)r[h]=((h+1)*t-(h-n)*e)/(n+1);return l}return l.domain=function(h){return arguments.length?([e,t]=h,e=+e,t=+t,f()):[e,t]},l.range=function(h){return arguments.length?(n=(i=Array.from(h)).length-1,f()):i.slice()},l.invertExtent=function(h){var u=i.indexOf(h);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=n?[r[n-1],t]:[r[u-1],r[u]]},l.unknown=function(h){return arguments.length&&(a=h),l},l.thresholds=function(){return r.slice()},l.copy=function(){return qP().domain([e,t]).range(i).unknown(a)},Ma.apply(Al(l),arguments)}function $P(){var e=[.5],t=[0,1],n,r=1;function i(a){return a!=null&&a<=a?t[th(e,a,0,r)]:n}return i.domain=function(a){return arguments.length?(e=Array.from(a),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(a){return arguments.length?(t=Array.from(a),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var l=t.indexOf(a);return[e[l-1],e[l]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return $P().domain(e).range(t).unknown(n)},Ma.apply(i,arguments)}const ev=new Date,tv=new Date;function Pr(e,t,n,r){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const l=i(a),f=i.ceil(a);return a-l<f-a?l:f},i.offset=(a,l)=>(t(a=new Date(+a),l==null?1:Math.floor(l)),a),i.range=(a,l,f)=>{const h=[];if(a=i.ceil(a),f=f==null?1:Math.floor(f),!(a<l)||!(f>0))return h;let u;do h.push(u=new Date(+a)),t(a,f),e(a);while(u<a&&a<l);return h},i.filter=a=>Pr(l=>{if(l>=l)for(;e(l),!a(l);)l.setTime(l-1)},(l,f)=>{if(l>=l)if(f<0)for(;++f<=0;)for(;t(l,-1),!a(l););else for(;--f>=0;)for(;t(l,1),!a(l););}),n&&(i.count=(a,l)=>(ev.setTime(+a),tv.setTime(+l),e(ev),e(tv),Math.floor(n(ev,tv))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?l=>r(l)%a===0:l=>i.count(0,l)%a===0):i)),i}const am=Pr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);am.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Pr(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):am);am.range;const Qs=1e3,Aa=Qs*60,eo=Aa*60,uo=eo*24,sE=uo*7,WR=uo*30,nv=uo*365,uc=Pr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Qs)},(e,t)=>(t-e)/Qs,e=>e.getUTCSeconds());uc.range;const oE=Pr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Qs)},(e,t)=>{e.setTime(+e+t*Aa)},(e,t)=>(t-e)/Aa,e=>e.getMinutes());oE.range;const lE=Pr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Aa)},(e,t)=>(t-e)/Aa,e=>e.getUTCMinutes());lE.range;const cE=Pr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Qs-e.getMinutes()*Aa)},(e,t)=>{e.setTime(+e+t*eo)},(e,t)=>(t-e)/eo,e=>e.getHours());cE.range;const uE=Pr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*eo)},(e,t)=>(t-e)/eo,e=>e.getUTCHours());uE.range;const ih=Pr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Aa)/uo,e=>e.getDate()-1);ih.range;const cg=Pr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/uo,e=>e.getUTCDate()-1);cg.range;const YP=Pr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/uo,e=>Math.floor(e/uo));YP.range;function Nc(e){return Pr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Aa)/sE)}const ug=Nc(0),sm=Nc(1),gQ=Nc(2),xQ=Nc(3),Gu=Nc(4),yQ=Nc(5),vQ=Nc(6);ug.range;sm.range;gQ.range;xQ.range;Gu.range;yQ.range;vQ.range;function _c(e){return Pr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/sE)}const dg=_c(0),om=_c(1),bQ=_c(2),wQ=_c(3),Vu=_c(4),EQ=_c(5),SQ=_c(6);dg.range;om.range;bQ.range;wQ.range;Vu.range;EQ.range;SQ.range;const dE=Pr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());dE.range;const fE=Pr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());fE.range;const fo=Pr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());fo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Pr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});fo.range;const ho=Pr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ho.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Pr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});ho.range;function WP(e,t,n,r,i,a){const l=[[uc,1,Qs],[uc,5,5*Qs],[uc,15,15*Qs],[uc,30,30*Qs],[a,1,Aa],[a,5,5*Aa],[a,15,15*Aa],[a,30,30*Aa],[i,1,eo],[i,3,3*eo],[i,6,6*eo],[i,12,12*eo],[r,1,uo],[r,2,2*uo],[n,1,sE],[t,1,WR],[t,3,3*WR],[e,1,nv]];function f(u,g,y){const E=g<u;E&&([u,g]=[g,u]);const C=y&&typeof y.range=="function"?y:h(u,g,y),I=C?C.range(u,+g+1):[];return E?I.reverse():I}function h(u,g,y){const E=Math.abs(g-u)/y,C=Yw(([,,O])=>O).right(l,E);if(C===l.length)return e.every(Mb(u/nv,g/nv,y));if(C===0)return am.every(Math.max(Mb(u,g,y),1));const[I,M]=l[E/l[C-1][2]<l[C][2]/E?C-1:C];return I.every(M)}return[f,h]}const[AQ,CQ]=WP(ho,fE,dg,YP,uE,lE),[NQ,_Q]=WP(fo,dE,ug,ih,cE,oE);function rv(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function iv(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function cf(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function TQ(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,l=e.shortDays,f=e.months,h=e.shortMonths,u=uf(i),g=df(i),y=uf(a),E=df(a),C=uf(l),I=df(l),M=uf(f),O=df(f),j=uf(h),U=df(h),L={a:ge,A:De,b:we,B:$e,c:null,d:eM,e:eM,f:JQ,g:oee,G:cee,H:WQ,I:KQ,j:XQ,L:KP,m:ZQ,M:QQ,p:ne,q:re,Q:rM,s:iM,S:eee,u:tee,U:nee,V:ree,w:iee,W:aee,x:null,X:null,y:see,Y:lee,Z:uee,"%":nM},G={a:he,A:se,b:ke,B:ie,c:null,d:tM,e:tM,f:pee,g:Aee,G:Nee,H:dee,I:fee,j:hee,L:JP,m:mee,M:gee,p:ue,q:qe,Q:rM,s:iM,S:xee,u:yee,U:vee,V:bee,w:wee,W:Eee,x:null,X:null,y:See,Y:Cee,Z:_ee,"%":nM},V={a:Z,A:te,b:Y,B:pe,c:Te,d:ZR,e:ZR,f:VQ,g:JR,G:XR,H:QR,I:QR,j:FQ,L:GQ,m:UQ,M:HQ,p:W,q:BQ,Q:$Q,s:YQ,S:zQ,u:DQ,U:kQ,V:PQ,w:OQ,W:jQ,x:le,X:de,y:JR,Y:XR,Z:LQ,"%":qQ};L.x=z(n,L),L.X=z(r,L),L.c=z(t,L),G.x=z(n,G),G.X=z(r,G),G.c=z(t,G);function z(me,Je){return function(Qe){var Ue=[],ft=-1,Et=0,jt=me.length,gn,nn,Ft;for(Qe instanceof Date||(Qe=new Date(+Qe));++ft<jt;)me.charCodeAt(ft)===37&&(Ue.push(me.slice(Et,ft)),(nn=KR[gn=me.charAt(++ft)])!=null?gn=me.charAt(++ft):nn=gn==="e"?" ":"0",(Ft=Je[gn])&&(gn=Ft(Qe,nn)),Ue.push(gn),Et=ft+1);return Ue.push(me.slice(Et,ft)),Ue.join("")}}function B(me,Je){return function(Qe){var Ue=cf(1900,void 0,1),ft=J(Ue,me,Qe+="",0),Et,jt;if(ft!=Qe.length)return null;if("Q"in Ue)return new Date(Ue.Q);if("s"in Ue)return new Date(Ue.s*1e3+("L"in Ue?Ue.L:0));if(Je&&!("Z"in Ue)&&(Ue.Z=0),"p"in Ue&&(Ue.H=Ue.H%12+Ue.p*12),Ue.m===void 0&&(Ue.m="q"in Ue?Ue.q:0),"V"in Ue){if(Ue.V<1||Ue.V>53)return null;"w"in Ue||(Ue.w=1),"Z"in Ue?(Et=iv(cf(Ue.y,0,1)),jt=Et.getUTCDay(),Et=jt>4||jt===0?om.ceil(Et):om(Et),Et=cg.offset(Et,(Ue.V-1)*7),Ue.y=Et.getUTCFullYear(),Ue.m=Et.getUTCMonth(),Ue.d=Et.getUTCDate()+(Ue.w+6)%7):(Et=rv(cf(Ue.y,0,1)),jt=Et.getDay(),Et=jt>4||jt===0?sm.ceil(Et):sm(Et),Et=ih.offset(Et,(Ue.V-1)*7),Ue.y=Et.getFullYear(),Ue.m=Et.getMonth(),Ue.d=Et.getDate()+(Ue.w+6)%7)}else("W"in Ue||"U"in Ue)&&("w"in Ue||(Ue.w="u"in Ue?Ue.u%7:"W"in Ue?1:0),jt="Z"in Ue?iv(cf(Ue.y,0,1)).getUTCDay():rv(cf(Ue.y,0,1)).getDay(),Ue.m=0,Ue.d="W"in Ue?(Ue.w+6)%7+Ue.W*7-(jt+5)%7:Ue.w+Ue.U*7-(jt+6)%7);return"Z"in Ue?(Ue.H+=Ue.Z/100|0,Ue.M+=Ue.Z%100,iv(Ue)):rv(Ue)}}function J(me,Je,Qe,Ue){for(var ft=0,Et=Je.length,jt=Qe.length,gn,nn;ft<Et;){if(Ue>=jt)return-1;if(gn=Je.charCodeAt(ft++),gn===37){if(gn=Je.charAt(ft++),nn=V[gn in KR?Je.charAt(ft++):gn],!nn||(Ue=nn(me,Qe,Ue))<0)return-1}else if(gn!=Qe.charCodeAt(Ue++))return-1}return Ue}function W(me,Je,Qe){var Ue=u.exec(Je.slice(Qe));return Ue?(me.p=g.get(Ue[0].toLowerCase()),Qe+Ue[0].length):-1}function Z(me,Je,Qe){var Ue=C.exec(Je.slice(Qe));return Ue?(me.w=I.get(Ue[0].toLowerCase()),Qe+Ue[0].length):-1}function te(me,Je,Qe){var Ue=y.exec(Je.slice(Qe));return Ue?(me.w=E.get(Ue[0].toLowerCase()),Qe+Ue[0].length):-1}function Y(me,Je,Qe){var Ue=j.exec(Je.slice(Qe));return Ue?(me.m=U.get(Ue[0].toLowerCase()),Qe+Ue[0].length):-1}function pe(me,Je,Qe){var Ue=M.exec(Je.slice(Qe));return Ue?(me.m=O.get(Ue[0].toLowerCase()),Qe+Ue[0].length):-1}function Te(me,Je,Qe){return J(me,t,Je,Qe)}function le(me,Je,Qe){return J(me,n,Je,Qe)}function de(me,Je,Qe){return J(me,r,Je,Qe)}function ge(me){return l[me.getDay()]}function De(me){return a[me.getDay()]}function we(me){return h[me.getMonth()]}function $e(me){return f[me.getMonth()]}function ne(me){return i[+(me.getHours()>=12)]}function re(me){return 1+~~(me.getMonth()/3)}function he(me){return l[me.getUTCDay()]}function se(me){return a[me.getUTCDay()]}function ke(me){return h[me.getUTCMonth()]}function ie(me){return f[me.getUTCMonth()]}function ue(me){return i[+(me.getUTCHours()>=12)]}function qe(me){return 1+~~(me.getUTCMonth()/3)}return{format:function(me){var Je=z(me+="",L);return Je.toString=function(){return me},Je},parse:function(me){var Je=B(me+="",!1);return Je.toString=function(){return me},Je},utcFormat:function(me){var Je=z(me+="",G);return Je.toString=function(){return me},Je},utcParse:function(me){var Je=B(me+="",!0);return Je.toString=function(){return me},Je}}}var KR={"-":"",_:" ",0:"0"},Wr=/^\s*\d+/,IQ=/^%/,RQ=/[\\^$*+?|[\]().{}]/g;function tn(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function MQ(e){return e.replace(RQ,"\\$&")}function uf(e){return new RegExp("^(?:"+e.map(MQ).join("|")+")","i")}function df(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function OQ(e,t,n){var r=Wr.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function DQ(e,t,n){var r=Wr.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function kQ(e,t,n){var r=Wr.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function PQ(e,t,n){var r=Wr.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function jQ(e,t,n){var r=Wr.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function XR(e,t,n){var r=Wr.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function JR(e,t,n){var r=Wr.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function LQ(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function BQ(e,t,n){var r=Wr.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function UQ(e,t,n){var r=Wr.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function ZR(e,t,n){var r=Wr.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function FQ(e,t,n){var r=Wr.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function QR(e,t,n){var r=Wr.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function HQ(e,t,n){var r=Wr.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function zQ(e,t,n){var r=Wr.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function GQ(e,t,n){var r=Wr.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function VQ(e,t,n){var r=Wr.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function qQ(e,t,n){var r=IQ.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function $Q(e,t,n){var r=Wr.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function YQ(e,t,n){var r=Wr.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function eM(e,t){return tn(e.getDate(),t,2)}function WQ(e,t){return tn(e.getHours(),t,2)}function KQ(e,t){return tn(e.getHours()%12||12,t,2)}function XQ(e,t){return tn(1+ih.count(fo(e),e),t,3)}function KP(e,t){return tn(e.getMilliseconds(),t,3)}function JQ(e,t){return KP(e,t)+"000"}function ZQ(e,t){return tn(e.getMonth()+1,t,2)}function QQ(e,t){return tn(e.getMinutes(),t,2)}function eee(e,t){return tn(e.getSeconds(),t,2)}function tee(e){var t=e.getDay();return t===0?7:t}function nee(e,t){return tn(ug.count(fo(e)-1,e),t,2)}function XP(e){var t=e.getDay();return t>=4||t===0?Gu(e):Gu.ceil(e)}function ree(e,t){return e=XP(e),tn(Gu.count(fo(e),e)+(fo(e).getDay()===4),t,2)}function iee(e){return e.getDay()}function aee(e,t){return tn(sm.count(fo(e)-1,e),t,2)}function see(e,t){return tn(e.getFullYear()%100,t,2)}function oee(e,t){return e=XP(e),tn(e.getFullYear()%100,t,2)}function lee(e,t){return tn(e.getFullYear()%1e4,t,4)}function cee(e,t){var n=e.getDay();return e=n>=4||n===0?Gu(e):Gu.ceil(e),tn(e.getFullYear()%1e4,t,4)}function uee(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+tn(t/60|0,"0",2)+tn(t%60,"0",2)}function tM(e,t){return tn(e.getUTCDate(),t,2)}function dee(e,t){return tn(e.getUTCHours(),t,2)}function fee(e,t){return tn(e.getUTCHours()%12||12,t,2)}function hee(e,t){return tn(1+cg.count(ho(e),e),t,3)}function JP(e,t){return tn(e.getUTCMilliseconds(),t,3)}function pee(e,t){return JP(e,t)+"000"}function mee(e,t){return tn(e.getUTCMonth()+1,t,2)}function gee(e,t){return tn(e.getUTCMinutes(),t,2)}function xee(e,t){return tn(e.getUTCSeconds(),t,2)}function yee(e){var t=e.getUTCDay();return t===0?7:t}function vee(e,t){return tn(dg.count(ho(e)-1,e),t,2)}function ZP(e){var t=e.getUTCDay();return t>=4||t===0?Vu(e):Vu.ceil(e)}function bee(e,t){return e=ZP(e),tn(Vu.count(ho(e),e)+(ho(e).getUTCDay()===4),t,2)}function wee(e){return e.getUTCDay()}function Eee(e,t){return tn(om.count(ho(e)-1,e),t,2)}function See(e,t){return tn(e.getUTCFullYear()%100,t,2)}function Aee(e,t){return e=ZP(e),tn(e.getUTCFullYear()%100,t,2)}function Cee(e,t){return tn(e.getUTCFullYear()%1e4,t,4)}function Nee(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Vu(e):Vu.ceil(e),tn(e.getUTCFullYear()%1e4,t,4)}function _ee(){return"+0000"}function nM(){return"%"}function rM(e){return+e}function iM(e){return Math.floor(+e/1e3)}var mu,QP,e4;Tee({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Tee(e){return mu=TQ(e),QP=mu.format,mu.parse,e4=mu.utcFormat,mu.utcParse,mu}function Iee(e){return new Date(e)}function Ree(e){return e instanceof Date?+e:+new Date(+e)}function hE(e,t,n,r,i,a,l,f,h,u){var g=Qw(),y=g.invert,E=g.domain,C=u(".%L"),I=u(":%S"),M=u("%I:%M"),O=u("%I %p"),j=u("%a %d"),U=u("%b %d"),L=u("%B"),G=u("%Y");function V(z){return(h(z)<z?C:f(z)<z?I:l(z)<z?M:a(z)<z?O:r(z)<z?i(z)<z?j:U:n(z)<z?L:G)(z)}return g.invert=function(z){return new Date(y(z))},g.domain=function(z){return arguments.length?E(Array.from(z,Ree)):E().map(Iee)},g.ticks=function(z){var B=E();return e(B[0],B[B.length-1],z??10)},g.tickFormat=function(z,B){return B==null?V:u(B)},g.nice=function(z){var B=E();return(!z||typeof z.range!="function")&&(z=t(B[0],B[B.length-1],z??10)),z?E(FP(B,z)):g},g.copy=function(){return rh(g,hE(e,t,n,r,i,a,l,f,h,u))},g}function Mee(){return Ma.apply(hE(NQ,_Q,fo,dE,ug,ih,cE,oE,uc,QP).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Oee(){return Ma.apply(hE(AQ,CQ,ho,fE,dg,cg,uE,lE,uc,e4).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function fg(){var e=0,t=1,n,r,i,a,l=yi,f=!1,h;function u(y){return y==null||isNaN(y=+y)?h:l(i===0?.5:(y=(a(y)-n)*i,f?Math.max(0,Math.min(1,y)):y))}u.domain=function(y){return arguments.length?([e,t]=y,n=a(e=+e),r=a(t=+t),i=n===r?0:1/(r-n),u):[e,t]},u.clamp=function(y){return arguments.length?(f=!!y,u):f},u.interpolator=function(y){return arguments.length?(l=y,u):l};function g(y){return function(E){var C,I;return arguments.length?([C,I]=E,l=y(C,I),u):[l(0),l(1)]}}return u.range=g(ed),u.rangeRound=g(Zw),u.unknown=function(y){return arguments.length?(h=y,u):h},function(y){return a=y,n=y(e),r=y(t),i=n===r?0:1/(r-n),u}}function Cl(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function t4(){var e=Al(fg()(yi));return e.copy=function(){return Cl(e,t4())},wo.apply(e,arguments)}function n4(){var e=nE(fg()).domain([1,10]);return e.copy=function(){return Cl(e,n4()).base(e.base())},wo.apply(e,arguments)}function r4(){var e=rE(fg());return e.copy=function(){return Cl(e,r4()).constant(e.constant())},wo.apply(e,arguments)}function pE(){var e=iE(fg());return e.copy=function(){return Cl(e,pE()).exponent(e.exponent())},wo.apply(e,arguments)}function Dee(){return pE.apply(null,arguments).exponent(.5)}function i4(){var e=[],t=yi;function n(r){if(r!=null&&!isNaN(r=+r))return t((th(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let i of r)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(yl),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,i)=>t(i/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>yZ(e,a/r))},n.copy=function(){return i4(t).domain(e)},wo.apply(n,arguments)}function hg(){var e=0,t=.5,n=1,r=1,i,a,l,f,h,u=yi,g,y=!1,E;function C(M){return isNaN(M=+M)?E:(M=.5+((M=+g(M))-a)*(r*M<r*a?f:h),u(y?Math.max(0,Math.min(1,M)):M))}C.domain=function(M){return arguments.length?([e,t,n]=M,i=g(e=+e),a=g(t=+t),l=g(n=+n),f=i===a?0:.5/(a-i),h=a===l?0:.5/(l-a),r=a<i?-1:1,C):[e,t,n]},C.clamp=function(M){return arguments.length?(y=!!M,C):y},C.interpolator=function(M){return arguments.length?(u=M,C):u};function I(M){return function(O){var j,U,L;return arguments.length?([j,U,L]=O,u=qZ(M,[j,U,L]),C):[u(0),u(.5),u(1)]}}return C.range=I(ed),C.rangeRound=I(Zw),C.unknown=function(M){return arguments.length?(E=M,C):E},function(M){return g=M,i=M(e),a=M(t),l=M(n),f=i===a?0:.5/(a-i),h=a===l?0:.5/(l-a),r=a<i?-1:1,C}}function a4(){var e=Al(hg()(yi));return e.copy=function(){return Cl(e,a4())},wo.apply(e,arguments)}function s4(){var e=nE(hg()).domain([.1,1,10]);return e.copy=function(){return Cl(e,s4()).base(e.base())},wo.apply(e,arguments)}function o4(){var e=rE(hg());return e.copy=function(){return Cl(e,o4()).constant(e.constant())},wo.apply(e,arguments)}function mE(){var e=iE(hg());return e.copy=function(){return Cl(e,mE()).exponent(e.exponent())},wo.apply(e,arguments)}function kee(){return mE.apply(null,arguments).exponent(.5)}const gf=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Kw,scaleDiverging:a4,scaleDivergingLog:s4,scaleDivergingPow:mE,scaleDivergingSqrt:kee,scaleDivergingSymlog:o4,scaleIdentity:UP,scaleImplicit:Ob,scaleLinear:BP,scaleLog:HP,scaleOrdinal:Ww,scalePoint:wZ,scalePow:aE,scaleQuantile:VP,scaleQuantize:qP,scaleRadial:GP,scaleSequential:t4,scaleSequentialLog:n4,scaleSequentialPow:pE,scaleSequentialQuantile:i4,scaleSequentialSqrt:Dee,scaleSequentialSymlog:r4,scaleSqrt:pQ,scaleSymlog:zP,scaleThreshold:$P,scaleTime:Mee,scaleUtc:Oee,tickFormat:LP},Symbol.toStringTag,{value:"Module"}));var Nl=e=>e.chartData,gE=Ne([Nl],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),xE=(e,t,n,r)=>r?gE(e):Nl(e);function vl(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(Ar(t)&&Ar(n))return!0}return!1}function aM(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function l4(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,r]=e,i,a;if(Ar(n))i=n;else if(typeof n=="function")return;if(Ar(r))a=r;else if(typeof r=="function")return;var l=[i,a];if(vl(l))return l}}function Pee(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var r=e(t,n);if(vl(r))return aM(r,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[i,a]=e,l,f;if(i==="auto")t!=null&&(l=Math.min(...t));else if(lt(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t==null?void 0:t[0]))}catch{}else if(typeof i=="string"&&mI.test(i)){var h=mI.exec(i);if(h==null||h[1]==null||t==null)l=void 0;else{var u=+h[1];l=t[0]-u}}else l=t==null?void 0:t[0];if(a==="auto")t!=null&&(f=Math.max(...t));else if(lt(a))f=a;else if(typeof a=="function")try{t!=null&&(f=a(t==null?void 0:t[1]))}catch{}else if(typeof a=="string"&&gI.test(a)){var g=gI.exec(a);if(g==null||g[1]==null||t==null)f=void 0;else{var y=+g[1];f=t[1]+y}}else f=t==null?void 0:t[1];var E=[l,f];if(vl(E))return t==null?E:aM(E,t,n)}}}var td=1e9,jee={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},vE,Vn=!0,Ra="[DecimalError] ",pc=Ra+"Invalid argument: ",yE=Ra+"Exponent out of range: ",nd=Math.floor,ic=Math.pow,Lee=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Zi,qr=1e7,Ln=7,c4=9007199254740991,lm=nd(c4/Ln),nt={};nt.absoluteValue=nt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};nt.comparedTo=nt.cmp=function(e){var t,n,r,i,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(r=a.d.length,i=e.d.length,t=0,n=r<i?r:i;t<n;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};nt.decimalPlaces=nt.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*Ln;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};nt.dividedBy=nt.div=function(e){return io(this,new this.constructor(e))};nt.dividedToIntegerBy=nt.idiv=function(e){var t=this,n=t.constructor;return Tn(io(t,new n(e),0,1),n.precision)};nt.equals=nt.eq=function(e){return!this.cmp(e)};nt.exponent=function(){return Sr(this)};nt.greaterThan=nt.gt=function(e){return this.cmp(e)>0};nt.greaterThanOrEqualTo=nt.gte=function(e){return this.cmp(e)>=0};nt.isInteger=nt.isint=function(){return this.e>this.d.length-2};nt.isNegative=nt.isneg=function(){return this.s<0};nt.isPositive=nt.ispos=function(){return this.s>0};nt.isZero=function(){return this.s===0};nt.lessThan=nt.lt=function(e){return this.cmp(e)<0};nt.lessThanOrEqualTo=nt.lte=function(e){return this.cmp(e)<1};nt.logarithm=nt.log=function(e){var t,n=this,r=n.constructor,i=r.precision,a=i+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(Zi))throw Error(Ra+"NaN");if(n.s<1)throw Error(Ra+(n.s?"NaN":"-Infinity"));return n.eq(Zi)?new r(0):(Vn=!1,t=io(Hf(n,a),Hf(e,a),a),Vn=!0,Tn(t,i))};nt.minus=nt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?f4(t,e):u4(t,(e.s=-e.s,e))};nt.modulo=nt.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(e=new r(e),!e.s)throw Error(Ra+"NaN");return n.s?(Vn=!1,t=io(n,e,0,1).times(e),Vn=!0,n.minus(t)):Tn(new r(n),i)};nt.naturalExponential=nt.exp=function(){return d4(this)};nt.naturalLogarithm=nt.ln=function(){return Hf(this)};nt.negated=nt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};nt.plus=nt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?u4(t,e):f4(t,(e.s=-e.s,e))};nt.precision=nt.sd=function(e){var t,n,r,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(pc+e);if(t=Sr(i)+1,r=i.d.length-1,n=r*Ln+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};nt.squareRoot=nt.sqrt=function(){var e,t,n,r,i,a,l,f=this,h=f.constructor;if(f.s<1){if(!f.s)return new h(0);throw Error(Ra+"NaN")}for(e=Sr(f),Vn=!1,i=Math.sqrt(+f),i==0||i==1/0?(t=xs(f.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=nd((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new h(t)):r=new h(i.toString()),n=h.precision,i=l=n+3;;)if(a=r,r=a.plus(io(f,a,l+2)).times(.5),xs(a.d).slice(0,l)===(t=xs(r.d)).slice(0,l)){if(t=t.slice(l-3,l+1),i==l&&t=="4999"){if(Tn(a,n+1,0),a.times(a).eq(f)){r=a;break}}else if(t!="9999")break;l+=4}return Vn=!0,Tn(r,n)};nt.times=nt.mul=function(e){var t,n,r,i,a,l,f,h,u,g=this,y=g.constructor,E=g.d,C=(e=new y(e)).d;if(!g.s||!e.s)return new y(0);for(e.s*=g.s,n=g.e+e.e,h=E.length,u=C.length,h<u&&(a=E,E=C,C=a,l=h,h=u,u=l),a=[],l=h+u,r=l;r--;)a.push(0);for(r=u;--r>=0;){for(t=0,i=h+r;i>r;)f=a[i]+C[r]*E[i-r-1]+t,a[i--]=f%qr|0,t=f/qr|0;a[i]=(a[i]+t)%qr|0}for(;!a[--l];)a.pop();return t?++n:a.shift(),e.d=a,e.e=n,Vn?Tn(e,y.precision):e};nt.toDecimalPlaces=nt.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(Es(e,0,td),t===void 0?t=r.rounding:Es(t,0,8),Tn(n,e+Sr(n)+1,t))};nt.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=bc(r,!0):(Es(e,0,td),t===void 0?t=i.rounding:Es(t,0,8),r=Tn(new i(r),e+1,t),n=bc(r,!0,e+1)),n};nt.toFixed=function(e,t){var n,r,i=this,a=i.constructor;return e===void 0?bc(i):(Es(e,0,td),t===void 0?t=a.rounding:Es(t,0,8),r=Tn(new a(i),e+Sr(i)+1,t),n=bc(r.abs(),!1,e+Sr(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};nt.toInteger=nt.toint=function(){var e=this,t=e.constructor;return Tn(new t(e),Sr(e)+1,t.rounding)};nt.toNumber=function(){return+this};nt.toPower=nt.pow=function(e){var t,n,r,i,a,l,f=this,h=f.constructor,u=12,g=+(e=new h(e));if(!e.s)return new h(Zi);if(f=new h(f),!f.s){if(e.s<1)throw Error(Ra+"Infinity");return f}if(f.eq(Zi))return f;if(r=h.precision,e.eq(Zi))return Tn(f,r);if(t=e.e,n=e.d.length-1,l=t>=n,a=f.s,l){if((n=g<0?-g:g)<=c4){for(i=new h(Zi),t=Math.ceil(r/Ln+4),Vn=!1;n%2&&(i=i.times(f),oM(i.d,t)),n=nd(n/2),n!==0;)f=f.times(f),oM(f.d,t);return Vn=!0,e.s<0?new h(Zi).div(i):Tn(i,r)}}else if(a<0)throw Error(Ra+"NaN");return a=a<0&&e.d[Math.max(t,n)]&1?-1:1,f.s=1,Vn=!1,i=e.times(Hf(f,r+u)),Vn=!0,i=d4(i),i.s=a,i};nt.toPrecision=function(e,t){var n,r,i=this,a=i.constructor;return e===void 0?(n=Sr(i),r=bc(i,n<=a.toExpNeg||n>=a.toExpPos)):(Es(e,1,td),t===void 0?t=a.rounding:Es(t,0,8),i=Tn(new a(i),e,t),n=Sr(i),r=bc(i,e<=n||n<=a.toExpNeg,e)),r};nt.toSignificantDigits=nt.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(Es(e,1,td),t===void 0?t=r.rounding:Es(t,0,8)),Tn(new r(n),e,t)};nt.toString=nt.valueOf=nt.val=nt.toJSON=nt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Sr(e),n=e.constructor;return bc(e,t<=n.toExpNeg||t>=n.toExpPos)};function u4(e,t){var n,r,i,a,l,f,h,u,g=e.constructor,y=g.precision;if(!e.s||!t.s)return t.s||(t=new g(e)),Vn?Tn(t,y):t;if(h=e.d,u=t.d,l=e.e,i=t.e,h=h.slice(),a=l-i,a){for(a<0?(r=h,a=-a,f=u.length):(r=u,i=l,f=h.length),l=Math.ceil(y/Ln),f=l>f?l+1:f+1,a>f&&(a=f,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(f=h.length,a=u.length,f-a<0&&(a=f,r=u,u=h,h=r),n=0;a;)n=(h[--a]=h[a]+u[a]+n)/qr|0,h[a]%=qr;for(n&&(h.unshift(n),++i),f=h.length;h[--f]==0;)h.pop();return t.d=h,t.e=i,Vn?Tn(t,y):t}function Es(e,t,n){if(e!==~~e||e<t||e>n)throw Error(pc+e)}function xs(e){var t,n,r,i=e.length-1,a="",l=e[0];if(i>0){for(a+=l,t=1;t<i;t++)r=e[t]+"",n=Ln-r.length,n&&(a+=dl(n)),a+=r;l=e[t],r=l+"",n=Ln-r.length,n&&(a+=dl(n))}else if(l===0)return"0";for(;l%10===0;)l/=10;return a+l}var io=(function(){function e(r,i){var a,l=0,f=r.length;for(r=r.slice();f--;)a=r[f]*i+l,r[f]=a%qr|0,l=a/qr|0;return l&&r.unshift(l),r}function t(r,i,a,l){var f,h;if(a!=l)h=a>l?1:-1;else for(f=h=0;f<a;f++)if(r[f]!=i[f]){h=r[f]>i[f]?1:-1;break}return h}function n(r,i,a){for(var l=0;a--;)r[a]-=l,l=r[a]<i[a]?1:0,r[a]=l*qr+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,l){var f,h,u,g,y,E,C,I,M,O,j,U,L,G,V,z,B,J,W=r.constructor,Z=r.s==i.s?1:-1,te=r.d,Y=i.d;if(!r.s)return new W(r);if(!i.s)throw Error(Ra+"Division by zero");for(h=r.e-i.e,B=Y.length,V=te.length,C=new W(Z),I=C.d=[],u=0;Y[u]==(te[u]||0);)++u;if(Y[u]>(te[u]||0)&&--h,a==null?U=a=W.precision:l?U=a+(Sr(r)-Sr(i))+1:U=a,U<0)return new W(0);if(U=U/Ln+2|0,u=0,B==1)for(g=0,Y=Y[0],U++;(u<V||g)&&U--;u++)L=g*qr+(te[u]||0),I[u]=L/Y|0,g=L%Y|0;else{for(g=qr/(Y[0]+1)|0,g>1&&(Y=e(Y,g),te=e(te,g),B=Y.length,V=te.length),G=B,M=te.slice(0,B),O=M.length;O<B;)M[O++]=0;J=Y.slice(),J.unshift(0),z=Y[0],Y[1]>=qr/2&&++z;do g=0,f=t(Y,M,B,O),f<0?(j=M[0],B!=O&&(j=j*qr+(M[1]||0)),g=j/z|0,g>1?(g>=qr&&(g=qr-1),y=e(Y,g),E=y.length,O=M.length,f=t(y,M,E,O),f==1&&(g--,n(y,B<E?J:Y,E))):(g==0&&(f=g=1),y=Y.slice()),E=y.length,E<O&&y.unshift(0),n(M,y,O),f==-1&&(O=M.length,f=t(Y,M,B,O),f<1&&(g++,n(M,B<O?J:Y,O))),O=M.length):f===0&&(g++,M=[0]),I[u++]=g,f&&M[0]?M[O++]=te[G]||0:(M=[te[G]],O=1);while((G++<V||M[0]!==void 0)&&U--)}return I[0]||I.shift(),C.e=h,Tn(C,l?a+Sr(C)+1:a)}})();function d4(e,t){var n,r,i,a,l,f,h=0,u=0,g=e.constructor,y=g.precision;if(Sr(e)>16)throw Error(yE+Sr(e));if(!e.s)return new g(Zi);for(Vn=!1,f=y,l=new g(.03125);e.abs().gte(.1);)e=e.times(l),u+=5;for(r=Math.log(ic(2,u))/Math.LN10*2+5|0,f+=r,n=i=a=new g(Zi),g.precision=f;;){if(i=Tn(i.times(e),f),n=n.times(++h),l=a.plus(io(i,n,f)),xs(l.d).slice(0,f)===xs(a.d).slice(0,f)){for(;u--;)a=Tn(a.times(a),f);return g.precision=y,t==null?(Vn=!0,Tn(a,y)):a}a=l}}function Sr(e){for(var t=e.e*Ln,n=e.d[0];n>=10;n/=10)t++;return t}function av(e,t,n){if(t>e.LN10.sd())throw Vn=!0,n&&(e.precision=n),Error(Ra+"LN10 precision limit exceeded");return Tn(new e(e.LN10),t)}function dl(e){for(var t="";e--;)t+="0";return t}function Hf(e,t){var n,r,i,a,l,f,h,u,g,y=1,E=10,C=e,I=C.d,M=C.constructor,O=M.precision;if(C.s<1)throw Error(Ra+(C.s?"NaN":"-Infinity"));if(C.eq(Zi))return new M(0);if(t==null?(Vn=!1,u=O):u=t,C.eq(10))return t==null&&(Vn=!0),av(M,u);if(u+=E,M.precision=u,n=xs(I),r=n.charAt(0),a=Sr(C),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)C=C.times(e),n=xs(C.d),r=n.charAt(0),y++;a=Sr(C),r>1?(C=new M("0."+n),a++):C=new M(r+"."+n.slice(1))}else return h=av(M,u+2,O).times(a+""),C=Hf(new M(r+"."+n.slice(1)),u-E).plus(h),M.precision=O,t==null?(Vn=!0,Tn(C,O)):C;for(f=l=C=io(C.minus(Zi),C.plus(Zi),u),g=Tn(C.times(C),u),i=3;;){if(l=Tn(l.times(g),u),h=f.plus(io(l,new M(i),u)),xs(h.d).slice(0,u)===xs(f.d).slice(0,u))return f=f.times(2),a!==0&&(f=f.plus(av(M,u+2,O).times(a+""))),f=io(f,new M(y),u),M.precision=O,t==null?(Vn=!0,Tn(f,O)):f;f=h,i+=2}}function sM(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(r,i),t){if(i-=r,n=n-r-1,e.e=nd(n/Ln),e.d=[],r=(n+1)%Ln,n<0&&(r+=Ln),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=Ln;r<i;)e.d.push(+t.slice(r,r+=Ln));t=t.slice(r),r=Ln-t.length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),Vn&&(e.e>lm||e.e<-lm))throw Error(yE+n)}else e.s=0,e.e=0,e.d=[0];return e}function Tn(e,t,n){var r,i,a,l,f,h,u,g,y=e.d;for(l=1,a=y[0];a>=10;a/=10)l++;if(r=t-l,r<0)r+=Ln,i=t,u=y[g=0];else{if(g=Math.ceil((r+1)/Ln),a=y.length,g>=a)return e;for(u=a=y[g],l=1;a>=10;a/=10)l++;r%=Ln,i=r-Ln+l}if(n!==void 0&&(a=ic(10,l-i-1),f=u/a%10|0,h=t<0||y[g+1]!==void 0||u%a,h=n<4?(f||h)&&(n==0||n==(e.s<0?3:2)):f>5||f==5&&(n==4||h||n==6&&(r>0?i>0?u/ic(10,l-i):0:y[g-1])%10&1||n==(e.s<0?8:7))),t<1||!y[0])return h?(a=Sr(e),y.length=1,t=t-a-1,y[0]=ic(10,(Ln-t%Ln)%Ln),e.e=nd(-t/Ln)||0):(y.length=1,y[0]=e.e=e.s=0),e;if(r==0?(y.length=g,a=1,g--):(y.length=g+1,a=ic(10,Ln-r),y[g]=i>0?(u/ic(10,l-i)%ic(10,i)|0)*a:0),h)for(;;)if(g==0){(y[0]+=a)==qr&&(y[0]=1,++e.e);break}else{if(y[g]+=a,y[g]!=qr)break;y[g--]=0,a=1}for(r=y.length;y[--r]===0;)y.pop();if(Vn&&(e.e>lm||e.e<-lm))throw Error(yE+Sr(e));return e}function f4(e,t){var n,r,i,a,l,f,h,u,g,y,E=e.constructor,C=E.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new E(e),Vn?Tn(t,C):t;if(h=e.d,y=t.d,r=t.e,u=e.e,h=h.slice(),l=u-r,l){for(g=l<0,g?(n=h,l=-l,f=y.length):(n=y,r=u,f=h.length),i=Math.max(Math.ceil(C/Ln),f)+2,l>i&&(l=i,n.length=1),n.reverse(),i=l;i--;)n.push(0);n.reverse()}else{for(i=h.length,f=y.length,g=i<f,g&&(f=i),i=0;i<f;i++)if(h[i]!=y[i]){g=h[i]<y[i];break}l=0}for(g&&(n=h,h=y,y=n,t.s=-t.s),f=h.length,i=y.length-f;i>0;--i)h[f++]=0;for(i=y.length;i>l;){if(h[--i]<y[i]){for(a=i;a&&h[--a]===0;)h[a]=qr-1;--h[a],h[i]+=qr}h[i]-=y[i]}for(;h[--f]===0;)h.pop();for(;h[0]===0;h.shift())--r;return h[0]?(t.d=h,t.e=r,Vn?Tn(t,C):t):new E(0)}function bc(e,t,n){var r,i=Sr(e),a=xs(e.d),l=a.length;return t?(n&&(r=n-l)>0?a=a.charAt(0)+"."+a.slice(1)+dl(r):l>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+dl(-i-1)+a,n&&(r=n-l)>0&&(a+=dl(r))):i>=l?(a+=dl(i+1-l),n&&(r=n-i-1)>0&&(a=a+"."+dl(r))):((r=i+1)<l&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-l)>0&&(i+1===l&&(a+="."),a+=dl(r))),e.s<0?"-"+a:a}function oM(e,t){if(e.length>t)return e.length=t,!0}function h4(e){var t,n,r;function i(a){var l=this;if(!(l instanceof i))return new i(a);if(l.constructor=i,a instanceof i){l.s=a.s,l.e=a.e,l.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(pc+a);if(a>0)l.s=1;else if(a<0)a=-a,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(a===~~a&&a<1e7){l.e=0,l.d=[a];return}return sM(l,a.toString())}else if(typeof a!="string")throw Error(pc+a);if(a.charCodeAt(0)===45?(a=a.slice(1),l.s=-1):l.s=1,Lee.test(a))sM(l,a);else throw Error(pc+a)}if(i.prototype=nt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=h4,i.config=i.set=Bee,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function Bee(e){if(!e||typeof e!="object")throw Error(Ra+"Object expected");var t,n,r,i=["precision",1,td,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((r=e[n=i[t]])!==void 0)if(nd(r)===r&&r>=i[t+1]&&r<=i[t+2])this[n]=r;else throw Error(pc+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(pc+n+": "+r);return this}var vE=h4(jee);Zi=new vE(1);const mn=vE;var Uee=e=>e,p4={},m4=e=>e===p4,lM=e=>function t(){return arguments.length===0||arguments.length===1&&m4(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},g4=(e,t)=>e===1?t:lM(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=r.filter(l=>l!==p4).length;return a>=e?t(...r):g4(e-a,lM(function(){for(var l=arguments.length,f=new Array(l),h=0;h<l;h++)f[h]=arguments[h];var u=r.map(g=>m4(g)?f.shift():g);return t(...u,...f)}))}),Fee=e=>g4(e.length,e),jb=(e,t)=>{for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},Hee=Fee((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(n=>t[n]).map(e)),zee=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return Uee;var i=n.reverse(),a=i[0],l=i.slice(1);return function(){return l.reduce((f,h)=>h(f),a(...arguments))}};function x4(e){var t;return e===0?t=1:t=Math.floor(new mn(e).abs().log(10).toNumber())+1,t}function y4(e,t,n){for(var r=new mn(e),i=0,a=[];r.lt(t)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}var v4=e=>{var[t,n]=e,[r,i]=[t,n];return t>n&&([r,i]=[n,t]),[r,i]},b4=(e,t,n)=>{if(e.lte(0))return new mn(0);var r=x4(e.toNumber()),i=new mn(10).pow(r),a=e.div(i),l=r!==1?.05:.1,f=new mn(Math.ceil(a.div(l).toNumber())).add(n).mul(l),h=f.mul(i);return t?new mn(h.toNumber()):new mn(Math.ceil(h.toNumber()))},Gee=(e,t,n)=>{var r=new mn(1),i=new mn(e);if(!i.isint()&&n){var a=Math.abs(e);a<1?(r=new mn(10).pow(x4(e)-1),i=new mn(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new mn(Math.floor(e)))}else e===0?i=new mn(Math.floor((t-1)/2)):n||(i=new mn(Math.floor(e)));var l=Math.floor((t-1)/2),f=zee(Hee(h=>i.add(new mn(h-l).mul(r)).toNumber()),jb);return f(0,t)},w4=function(t,n,r,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(r-1)))return{step:new mn(0),tickMin:new mn(0),tickMax:new mn(0)};var l=b4(new mn(n).sub(t).div(r-1),i,a),f;t<=0&&n>=0?f=new mn(0):(f=new mn(t).add(n).div(2),f=f.sub(new mn(f).mod(l)));var h=Math.ceil(f.sub(t).div(l).toNumber()),u=Math.ceil(new mn(n).sub(f).div(l).toNumber()),g=h+u+1;return g>r?w4(t,n,r,i,a+1):(g<r&&(u=n>0?u+(r-g):u,h=n>0?h:h+(r-g)),{step:l,tickMin:f.sub(new mn(h).mul(l)),tickMax:f.add(new mn(u).mul(l))})},Vee=function(t){var[n,r]=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=Math.max(i,2),[f,h]=v4([n,r]);if(f===-1/0||h===1/0){var u=h===1/0?[f,...jb(0,i-1).map(()=>1/0)]:[...jb(0,i-1).map(()=>-1/0),h];return n>r?u.reverse():u}if(f===h)return Gee(f,i,a);var{step:g,tickMin:y,tickMax:E}=w4(f,h,l,a,0),C=y4(y,E.add(new mn(.1).mul(g)),g);return n>r?C.reverse():C},qee=function(t,n){var[r,i]=t,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[l,f]=v4([r,i]);if(l===-1/0||f===1/0)return[r,i];if(l===f)return[l];var h=Math.max(n,2),u=b4(new mn(f).sub(l).div(h-1),a,0),g=[...y4(new mn(l),new mn(f),u),f];return a===!1&&(g=g.map(y=>Math.round(y))),r>i?g.reverse():g},$ee=e=>e.rootProps.barCategoryGap,ah=e=>e.rootProps.stackOffset,E4=e=>e.rootProps.reverseStackOrder,bE=e=>e.options.chartName,wE=e=>e.rootProps.syncId,S4=e=>e.rootProps.syncMethod,EE=e=>e.options.eventEmitter,ii={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Js={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Xi={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},pg=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},Yee={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Js.angleAxisId,includeHidden:!1,name:void 0,reversed:Js.reversed,scale:Js.scale,tick:Js.tick,tickCount:void 0,ticks:void 0,type:Js.type,unit:void 0},Wee={allowDataOverflow:Xi.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Xi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Xi.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Xi.scale,tick:Xi.tick,tickCount:Xi.tickCount,ticks:void 0,type:Xi.type,unit:void 0},Kee={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Js.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Js.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Js.scale,tick:Js.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},Xee={allowDataOverflow:Xi.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Xi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Xi.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Xi.scale,tick:Xi.tick,tickCount:Xi.tickCount,ticks:void 0,type:"category",unit:void 0},SE=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?Kee:Yee,AE=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?Xee:Wee,mg=e=>e.polarOptions,CE=Ne([vo,bo,Yr],AP),A4=Ne([mg,CE],(e,t)=>{if(e!=null)return ta(e.innerRadius,t,0)}),C4=Ne([mg,CE],(e,t)=>{if(e!=null)return ta(e.outerRadius,t,t*.8)}),Jee=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},N4=Ne([mg],Jee);Ne([SE,N4],pg);var _4=Ne([CE,A4,C4],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});Ne([AE,_4],pg);var T4=Ne([En,mg,A4,C4,vo,bo],(e,t,n,r,i,a)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||r==null)){var{cx:l,cy:f,startAngle:h,endAngle:u}=t;return{cx:ta(l,i,i/2),cy:ta(f,a,a/2),innerRadius:n,outerRadius:r,startAngle:h,endAngle:u,clockWise:!1}}}),$n=(e,t)=>t,sh=(e,t,n)=>n;function I4(e){return e==null?void 0:e.id}function R4(e,t,n){var{chartData:r=[]}=t,{allowDuplicatedCategory:i,dataKey:a}=n,l=new Map;return e.forEach(f=>{var h,u=(h=f.data)!==null&&h!==void 0?h:r;if(!(u==null||u.length===0)){var g=I4(f);u.forEach((y,E)=>{var C=a==null||i?E:String(Bn(y,a,null)),I=Bn(y,f.dataKey,0),M;l.has(C)?M=l.get(C):M={},Object.assign(M,{[g]:I}),l.set(C,M)})}}),Array.from(l.values())}function NE(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var gg=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function xg(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function Zee(e,t){if(e.length===t.length){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return!1}var jr=e=>{var t=En(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},rd=e=>e.tooltip.settings.axisId;function cM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function cm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cM(Object(n),!0).forEach(function(r){Qee(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Qee(e,t,n){return(t=ete(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ete(e){var t=tte(e,"string");return typeof t=="symbol"?t:t+""}function tte(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Lb=[0,"auto"],Gr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},M4=(e,t)=>e.cartesianAxis.xAxis[t],Eo=(e,t)=>{var n=M4(e,t);return n??Gr},Vr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Lb,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Zf},O4=(e,t)=>e.cartesianAxis.yAxis[t],So=(e,t)=>{var n=O4(e,t);return n??Vr},nte={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},_E=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??nte},Wn=(e,t,n)=>{switch(t){case"xAxis":return Eo(e,n);case"yAxis":return So(e,n);case"zAxis":return _E(e,n);case"angleAxis":return SE(e,n);case"radiusAxis":return AE(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},rte=(e,t,n)=>{switch(t){case"xAxis":return Eo(e,n);case"yAxis":return So(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},oh=(e,t,n)=>{switch(t){case"xAxis":return Eo(e,n);case"yAxis":return So(e,n);case"angleAxis":return SE(e,n);case"radiusAxis":return AE(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},D4=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function TE(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var k4=e=>e.graphicalItems.cartesianItems,ite=Ne([$n,sh],TE),IE=(e,t,n)=>e.filter(n).filter(r=>(t==null?void 0:t.includeHidden)===!0?!0:!r.hide),lh=Ne([k4,Wn,ite],IE,{memoizeOptions:{resultEqualityCheck:xg}}),P4=Ne([lh],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(NE)),j4=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),ate=Ne([lh],j4),RE=e=>e.map(t=>t.data).filter(Boolean).flat(1),ste=Ne([lh],RE,{memoizeOptions:{resultEqualityCheck:xg}}),ME=(e,t)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=t;return e.length>0?e:n.slice(r,i+1)},OE=Ne([ste,xE],ME),DE=(e,t,n)=>(t==null?void 0:t.dataKey)!=null?e.map(r=>({value:Bn(r,t.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>e.map(i=>({value:Bn(i,r)}))):e.map(r=>({value:r})),yg=Ne([OE,Wn,lh],DE);function L4(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function pp(e){if(bs(e)||e instanceof Date){var t=Number(e);if(Ar(t))return t}}function uM(e){if(Array.isArray(e)){var t=[pp(e[0]),pp(e[1])];return vl(t)?t:void 0}var n=pp(e);if(n!=null)return[n,n]}function po(e){return e.map(pp).filter(rY)}function ote(e,t,n){return!n||typeof t!="number"||vs(t)?[]:n.length?po(n.flatMap(r=>{var i=Bn(e,r.dataKey),a,l;if(Array.isArray(i)?[a,l]=i:a=l=i,!(!Ar(a)||!Ar(l)))return[t-a,t+l]})):[]}var Lr=e=>{var t=jr(e),n=rd(e);return oh(e,t,n)},ch=Ne([Lr],e=>e==null?void 0:e.dataKey),lte=Ne([P4,xE,Lr],R4),B4=(e,t,n,r)=>{var i={},a=t.reduce((l,f)=>{if(f.stackId==null)return l;var h=l[f.stackId];return h==null&&(h=[]),h.push(f),l[f.stackId]=h,l},i);return Object.fromEntries(Object.entries(a).map(l=>{var[f,h]=l,u=r?[...h].reverse():h,g=u.map(I4);return[f,{stackedData:RK(e,g,n),graphicalItems:u}]}))},cte=Ne([lte,P4,ah,E4],B4),U4=(e,t,n,r)=>{var{dataStartIndex:i,dataEndIndex:a}=t;if(r==null&&n!=="zAxis"){var l=DK(e,i,a);if(!(l!=null&&l[0]===0&&l[1]===0))return l}},ute=Ne([Wn],e=>e.allowDataOverflow),kE=e=>{var t;if(e==null||!("domain"in e))return Lb;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var n=po(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:Lb},PE=Ne([Wn],kE),jE=Ne([PE,ute],l4),dte=Ne([cte,Nl,$n,jE],U4,{memoizeOptions:{resultEqualityCheck:gg}}),vg=e=>e.errorBars,fte=(e,t,n)=>e.flatMap(r=>t[r.id]).filter(Boolean).filter(r=>L4(n,r)),um=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var a=i.flat(),l=Math.min(...a),f=Math.max(...a);return[l,f]}},LE=(e,t,n,r,i)=>{var a,l;if(n.length>0&&e.forEach(f=>{n.forEach(h=>{var u,g,y=(u=r[h.id])===null||u===void 0?void 0:u.filter(j=>L4(i,j)),E=Bn(f,(g=t.dataKey)!==null&&g!==void 0?g:h.dataKey),C=ote(f,E,y);if(C.length>=2){var I=Math.min(...C),M=Math.max(...C);(a==null||I<a)&&(a=I),(l==null||M>l)&&(l=M)}var O=uM(E);O!=null&&(a=a==null?O[0]:Math.min(a,O[0]),l=l==null?O[1]:Math.max(l,O[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(f=>{var h=uM(Bn(f,t.dataKey));h!=null&&(a=a==null?h[0]:Math.min(a,h[0]),l=l==null?h[1]:Math.max(l,h[1]))}),Ar(a)&&Ar(l))return[a,l]},hte=Ne([OE,Wn,ate,vg,$n],LE,{memoizeOptions:{resultEqualityCheck:gg}});function pte(e){var{value:t}=e;if(bs(t)||t instanceof Date)return t}var mte=(e,t,n)=>{var r=e.map(pte).filter(i=>i!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&nk(r))?TP(0,e.length):t.allowDuplicatedCategory?r:Array.from(new Set(r))},F4=e=>e.referenceElements.dots,id=(e,t,n)=>e.filter(r=>r.ifOverflow==="extendDomain").filter(r=>t==="xAxis"?r.xAxisId===n:r.yAxisId===n),gte=Ne([F4,$n,sh],id),H4=e=>e.referenceElements.areas,xte=Ne([H4,$n,sh],id),z4=e=>e.referenceElements.lines,yte=Ne([z4,$n,sh],id),G4=(e,t)=>{if(e!=null){var n=po(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},vte=Ne(gte,$n,G4),V4=(e,t)=>{if(e!=null){var n=po(e.flatMap(r=>[t==="xAxis"?r.x1:r.y1,t==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},bte=Ne([xte,$n],V4);function wte(e){var t;if(e.x!=null)return po([e.x]);var n=(t=e.segment)===null||t===void 0?void 0:t.map(r=>r.x);return n==null||n.length===0?[]:po(n)}function Ete(e){var t;if(e.y!=null)return po([e.y]);var n=(t=e.segment)===null||t===void 0?void 0:t.map(r=>r.y);return n==null||n.length===0?[]:po(n)}var q4=(e,t)=>{if(e!=null){var n=e.flatMap(r=>t==="xAxis"?wte(r):Ete(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},Ste=Ne([yte,$n],q4),Ate=Ne(vte,Ste,bte,(e,t,n)=>um(e,n,t)),BE=(e,t,n,r,i,a,l,f)=>{if(n!=null)return n;var h=l==="vertical"&&f==="xAxis"||l==="horizontal"&&f==="yAxis",u=h?um(r,a,i):um(a,i);return Pee(t,u,e.allowDataOverflow)},Cte=Ne([Wn,PE,jE,dte,hte,Ate,En,$n],BE,{memoizeOptions:{resultEqualityCheck:gg}}),Nte=[0,1],UE=(e,t,n,r,i,a,l)=>{if(!((e==null||n==null||n.length===0)&&l===void 0)){var{dataKey:f,type:h}=e,u=Sl(t,a);if(u&&f==null){var g;return TP(0,(g=n==null?void 0:n.length)!==null&&g!==void 0?g:0)}return h==="category"?mte(r,e,u):i==="expand"?Nte:l}},FE=Ne([Wn,En,OE,yg,ah,$n,Cte],UE),$4=(e,t,n,r,i)=>{if(e!=null){var{scale:a,type:l}=e;if(a==="auto")return t==="radial"&&i==="radiusAxis"?"band":t==="radial"&&i==="angleAxis"?"linear":l==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":l==="category"?"band":"linear";if(typeof a=="string"){var f="scale".concat(Wf(a));return f in gf?f:"point"}}},ad=Ne([Wn,En,D4,bE,$n],$4);function _te(e){if(e!=null){if(e in gf)return gf[e]();var t="scale".concat(Wf(e));if(t in gf)return gf[t]()}}function HE(e,t,n,r){if(!(n==null||r==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(r);var i=_te(t);if(i!=null){var a=i.domain(n).range(r);return NK(a),a}}}var zE=(e,t,n)=>{var r=kE(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&vl(e))return Vee(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&vl(e))return qee(e,t.tickCount,t.allowDecimals)}},GE=Ne([FE,oh,ad],zE),VE=(e,t,n,r)=>{if(r!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&vl(t)&&Array.isArray(n)&&n.length>0){var i=t[0],a=n[0],l=t[1],f=n[n.length-1];return[Math.min(i,a),Math.max(l,f)]}return t},Tte=Ne([Wn,FE,GE,$n],VE),Ite=Ne(yg,Wn,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,r=Array.from(po(e.map(y=>y.value))).sort((y,E)=>y-E),i=r[0],a=r[r.length-1];if(i==null||a==null)return 1/0;var l=a-i;if(l===0)return 1/0;for(var f=0;f<r.length-1;f++){var h=r[f],u=r[f+1];if(!(h==null||u==null)){var g=u-h;n=Math.min(n,g)}}return n/l}}),Y4=Ne(Ite,En,$ee,Yr,(e,t,n,r,i)=>i,(e,t,n,r,i)=>{if(!Ar(e))return 0;var a=t==="vertical"?r.height:r.width;if(i==="gap")return e*a/2;if(i==="no-gap"){var l=ta(n,e*a),f=e*a/2;return f-l-(f-l)/a*l}return 0}),Rte=(e,t,n)=>{var r=Eo(e,t);return r==null||typeof r.padding!="string"?0:Y4(e,"xAxis",t,n,r.padding)},Mte=(e,t,n)=>{var r=So(e,t);return r==null||typeof r.padding!="string"?0:Y4(e,"yAxis",t,n,r.padding)},Ote=Ne(Eo,Rte,(e,t)=>{var n,r;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((n=i.left)!==null&&n!==void 0?n:0)+t,right:((r=i.right)!==null&&r!==void 0?r:0)+t}}),Dte=Ne(So,Mte,(e,t)=>{var n,r;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((n=i.top)!==null&&n!==void 0?n:0)+t,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+t}}),kte=Ne([Yr,Ote,Qm,Zm,(e,t,n)=>n],(e,t,n,r,i)=>{var{padding:a}=r;return i?[a.left,n.width-a.right]:[e.left+t.left,e.left+e.width-t.right]}),Pte=Ne([Yr,En,Dte,Qm,Zm,(e,t,n)=>n],(e,t,n,r,i,a)=>{var{padding:l}=i;return a?[r.height-l.bottom,l.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),uh=(e,t,n,r)=>{var i;switch(t){case"xAxis":return kte(e,n,r);case"yAxis":return Pte(e,n,r);case"zAxis":return(i=_E(e,n))===null||i===void 0?void 0:i.range;case"angleAxis":return N4(e);case"radiusAxis":return _4(e,n);default:return}},W4=Ne([Wn,uh],pg),bg=Ne([Wn,ad,Tte,W4],HE);Ne([lh,vg,$n],fte);function K4(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var wg=(e,t)=>t,Eg=(e,t,n)=>n,jte=Ne(Xm,wg,Eg,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(K4)),Lte=Ne(Jm,wg,Eg,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(K4)),X4=(e,t)=>({width:e.width,height:t.height}),Bte=(e,t)=>{var n=typeof t.width=="number"?t.width:Zf;return{width:n,height:e.height}},Ute=Ne(Yr,Eo,X4),Fte=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},Hte=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},zte=Ne(bo,Yr,jte,wg,Eg,(e,t,n,r,i)=>{var a={},l;return n.forEach(f=>{var h=X4(t,f);l==null&&(l=Fte(t,r,e));var u=r==="top"&&!i||r==="bottom"&&i;a[f.id]=l-Number(u)*h.height,l+=(u?-1:1)*h.height}),a}),Gte=Ne(vo,Yr,Lte,wg,Eg,(e,t,n,r,i)=>{var a={},l;return n.forEach(f=>{var h=Bte(t,f);l==null&&(l=Hte(t,r,e));var u=r==="left"&&!i||r==="right"&&i;a[f.id]=l-Number(u)*h.width,l+=(u?-1:1)*h.width}),a}),Vte=(e,t)=>{var n=Eo(e,t);if(n!=null)return zte(e,n.orientation,n.mirror)},qte=Ne([Yr,Eo,Vte,(e,t)=>t],(e,t,n,r)=>{if(t!=null){var i=n==null?void 0:n[r];return i==null?{x:e.left,y:0}:{x:e.left,y:i}}}),$te=(e,t)=>{var n=So(e,t);if(n!=null)return Gte(e,n.orientation,n.mirror)},Yte=Ne([Yr,So,$te,(e,t)=>t],(e,t,n,r)=>{if(t!=null){var i=n==null?void 0:n[r];return i==null?{x:0,y:e.top}:{x:i,y:e.top}}}),Wte=Ne(Yr,So,(e,t)=>{var n=typeof t.width=="number"?t.width:Zf;return{width:n,height:e.height}}),J4=(e,t,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:a,dataKey:l}=n,f=Sl(e,r),h=t.map(u=>u.value);if(l&&f&&a==="category"&&i&&nk(h))return h}},qE=Ne([En,yg,Wn,$n],J4),Z4=(e,t,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:a}=n,l=Sl(e,r);if(l&&(i==="number"||a!=="auto"))return t.map(f=>f.value)}},$E=Ne([En,yg,oh,$n],Z4),dM=Ne([En,rte,ad,bg,qE,$E,uh,GE,$n],(e,t,n,r,i,a,l,f,h)=>{if(t!=null){var u=Sl(e,h);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:h,categoricalDomain:a,duplicateDomain:i,isCategorical:u,niceTicks:f,range:l,realScaleType:n,scale:r}}}),Kte=(e,t,n,r,i,a,l,f,h)=>{if(!(t==null||r==null)){var u=Sl(e,h),{type:g,ticks:y,tickCount:E}=t,C=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,I=g==="category"&&r.bandwidth?r.bandwidth()/C:0;I=h==="angleAxis"&&a!=null&&a.length>=2?ui(a[0]-a[1])*2*I:I;var M=y||i;if(M){var O=M.map((j,U)=>{var L=l?l.indexOf(j):j;return{index:U,coordinate:r(L)+I,value:j,offset:I}});return O.filter(j=>Ar(j.coordinate))}return u&&f?f.map((j,U)=>({coordinate:r(j)+I,value:j,index:U,offset:I})).filter(j=>Ar(j.coordinate)):r.ticks?r.ticks(E).map(j=>({coordinate:r(j)+I,value:j,offset:I})):r.domain().map((j,U)=>({coordinate:r(j)+I,value:l?l[j]:j,index:U,offset:I}))}},Q4=Ne([En,oh,ad,bg,GE,uh,qE,$E,$n],Kte),Xte=(e,t,n,r,i,a,l)=>{if(!(t==null||n==null||r==null||r[0]===r[1])){var f=Sl(e,l),{tickCount:h}=t,u=0;return u=l==="angleAxis"&&(r==null?void 0:r.length)>=2?ui(r[0]-r[1])*2*u:u,f&&a?a.map((g,y)=>({coordinate:n(g)+u,value:g,index:y,offset:u})):n.ticks?n.ticks(h).map(g=>({coordinate:n(g)+u,value:g,offset:u})):n.domain().map((g,y)=>({coordinate:n(g)+u,value:i?i[g]:g,index:y,offset:u}))}},e8=Ne([En,oh,bg,uh,qE,$E,$n],Xte),t8=Ne(Wn,bg,(e,t)=>{if(!(e==null||t==null))return cm(cm({},e),{},{scale:t})}),Jte=Ne([Wn,ad,FE,W4],HE);Ne((e,t,n)=>_E(e,n),Jte,(e,t)=>{if(!(e==null||t==null))return cm(cm({},e),{},{scale:t})});var Zte=Ne([En,Xm,Jm],(e,t,n)=>{switch(e){case"horizontal":return t.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),n8=e=>e.options.defaultTooltipEventType,r8=e=>e.options.validateTooltipEventTypes;function i8(e,t,n){if(e==null)return t;var r=e?"axis":"item";return n==null?t:n.includes(r)?r:t}function YE(e,t){var n=n8(e),r=r8(e);return i8(t,n,r)}function Qte(e){return st(t=>YE(t,e))}var a8=(e,t)=>{var n,r=Number(t);if(!(vs(r)||t==null))return r>=0?e==null||(n=e[r])===null||n===void 0?void 0:n.value:void 0},ene=e=>e.tooltip.settings,ml={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},tne={itemInteraction:{click:ml,hover:ml},axisInteraction:{click:ml,hover:ml},keyboardInteraction:ml,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},s8=Di({name:"tooltip",initialState:tne,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Gn()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:n,next:r}=t.payload,i=Ja(e).tooltipItemPayloads.indexOf(n);i>-1&&(e.tooltipItemPayloads[i]=r)},prepare:Gn()},removeTooltipEntrySettings:{reducer(e,t){var n=Ja(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},prepare:Gn()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:nne,replaceTooltipEntrySettings:rne,removeTooltipEntrySettings:ine,setTooltipSettingsState:ane,setActiveMouseOverItemIndex:o8,mouseLeaveItem:sne,mouseLeaveChart:l8,setActiveClickItemIndex:one,setMouseOverAxisIndex:c8,setMouseClickAxisIndex:lne,setSyncInteraction:Bb,setKeyboardInteraction:Ub}=s8.actions,cne=s8.reducer;function fM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function np(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fM(Object(n),!0).forEach(function(r){une(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function une(e,t,n){return(t=dne(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dne(e){var t=fne(e,"string");return typeof t=="symbol"?t:t+""}function fne(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hne(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function pne(e){return e.index!=null}var u8=(e,t,n,r)=>{if(t==null)return ml;var i=hne(e,t,n);if(i==null)return ml;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var a=e.settings.active===!0;if(pne(i)){if(a)return np(np({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return np(np({},ml),{},{coordinate:i.coordinate})};function mne(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var n=Number(e);return Number.isFinite(n)?n:void 0}function gne(e,t){var n=mne(e),r=t[0],i=t[1];if(n===void 0)return!1;var a=Math.min(r,i),l=Math.max(r,i);return n>=a&&n<=l}function xne(e,t,n){if(n==null||t==null)return!0;var r=Bn(e,t);return r==null||!vl(n)?!0:gne(r,n)}var WE=(e,t,n,r)=>{var i=e==null?void 0:e.index;if(i==null)return null;var a=Number(i);if(!Ar(a))return i;var l=0,f=1/0;t.length>0&&(f=t.length-1);var h=Math.max(l,Math.min(a,f)),u=t[h];return u==null||xne(u,n,r)?String(h):null},d8=(e,t,n,r,i,a,l,f)=>{if(!(a==null||f==null)){var h=l[0],u=h==null?void 0:f(h.positions,a);if(u!=null)return u;var g=i==null?void 0:i[Number(a)];if(g)switch(n){case"horizontal":return{x:g.coordinate,y:(r.top+t)/2};default:return{x:(r.left+e)/2,y:g.coordinate}}}},f8=(e,t,n,r)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;if(n==="hover"?i=e.itemInteraction.hover.graphicalItemId:i=e.itemInteraction.click.graphicalItemId,i==null&&r!=null){var a=e.tooltipItemPayloads[0];return a!=null?[a]:[]}return e.tooltipItemPayloads.filter(l=>{var f;return((f=l.settings)===null||f===void 0?void 0:f.graphicalItemId)===i})},dh=e=>e.options.tooltipPayloadSearcher,sd=e=>e.tooltip;function hM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function pM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hM(Object(n),!0).forEach(function(r){yne(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function yne(e,t,n){return(t=vne(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vne(e){var t=bne(e,"string");return typeof t=="symbol"?t:t+""}function bne(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wne(e,t){return e??t}var h8=(e,t,n,r,i,a,l)=>{if(!(t==null||a==null)){var{chartData:f,computedData:h,dataStartIndex:u,dataEndIndex:g}=n,y=[];return e.reduce((E,C)=>{var I,{dataDefinedOnItem:M,settings:O}=C,j=wne(M,f),U=Array.isArray(j)?Kk(j,u,g):j,L=(I=O==null?void 0:O.dataKey)!==null&&I!==void 0?I:r,G=O==null?void 0:O.nameKey,V;if(r&&Array.isArray(U)&&!Array.isArray(U[0])&&l==="axis"?V=rk(U,r,i):V=a(U,t,h,G),Array.isArray(V))V.forEach(B=>{var J=pM(pM({},O),{},{name:B.name,unit:B.unit,color:void 0,fill:void 0});E.push(xI({tooltipEntrySettings:J,dataKey:B.dataKey,payload:B.payload,value:Bn(B.payload,B.dataKey),name:B.name}))});else{var z;E.push(xI({tooltipEntrySettings:O,dataKey:L,payload:V,value:Bn(V,L),name:(z=Bn(V,G))!==null&&z!==void 0?z:O==null?void 0:O.name}))}return E},y)}},KE=Ne([Lr,En,D4,bE,jr],$4),Ene=Ne([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),Sne=Ne([jr,rd],TE),od=Ne([Ene,Lr,Sne],IE,{memoizeOptions:{resultEqualityCheck:xg}}),Ane=Ne([od],e=>e.filter(NE)),Cne=Ne([od],RE,{memoizeOptions:{resultEqualityCheck:xg}}),ld=Ne([Cne,Nl],ME),Nne=Ne([Ane,Nl,Lr],R4),XE=Ne([ld,Lr,od],DE),p8=Ne([Lr],kE),_ne=Ne([Lr],e=>e.allowDataOverflow),m8=Ne([p8,_ne],l4),Tne=Ne([od],e=>e.filter(NE)),Ine=Ne([Nne,Tne,ah,E4],B4),Rne=Ne([Ine,Nl,jr,m8],U4),Mne=Ne([od],j4),One=Ne([ld,Lr,Mne,vg,jr],LE,{memoizeOptions:{resultEqualityCheck:gg}}),Dne=Ne([F4,jr,rd],id),kne=Ne([Dne,jr],G4),Pne=Ne([H4,jr,rd],id),jne=Ne([Pne,jr],V4),Lne=Ne([z4,jr,rd],id),Bne=Ne([Lne,jr],q4),Une=Ne([kne,Bne,jne],um),Fne=Ne([Lr,p8,m8,Rne,One,Une,En,jr],BE),fh=Ne([Lr,En,ld,XE,ah,jr,Fne],UE),Hne=Ne([fh,Lr,KE],zE),zne=Ne([Lr,fh,Hne,jr],VE),g8=e=>{var t=jr(e),n=rd(e),r=!1;return uh(e,t,n,r)},x8=Ne([Lr,g8],pg),y8=Ne([Lr,KE,zne,x8],HE),Gne=Ne([En,XE,Lr,jr],J4),Vne=Ne([En,XE,Lr,jr],Z4),qne=(e,t,n,r,i,a,l,f)=>{if(t){var{type:h}=t,u=Sl(e,f);if(r){var g=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,y=h==="category"&&r.bandwidth?r.bandwidth()/g:0;return y=f==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?ui(i[0]-i[1])*2*y:y,u&&l?l.map((E,C)=>({coordinate:r(E)+y,value:E,index:C,offset:y})):r.domain().map((E,C)=>({coordinate:r(E)+y,value:a?a[E]:E,index:C,offset:y}))}}},Ao=Ne([En,Lr,KE,y8,g8,Gne,Vne,jr],qne),JE=Ne([n8,r8,ene],(e,t,n)=>i8(n.shared,e,t)),v8=e=>e.tooltip.settings.trigger,ZE=e=>e.tooltip.settings.defaultIndex,hh=Ne([sd,JE,v8,ZE],u8),qu=Ne([hh,ld,ch,fh],WE),b8=Ne([Ao,qu],a8),w8=Ne([hh],e=>{if(e)return e.dataKey}),$ne=Ne([hh],e=>{if(e)return e.graphicalItemId}),E8=Ne([sd,JE,v8,ZE],f8),Yne=Ne([vo,bo,En,Yr,Ao,ZE,E8,dh],d8),Wne=Ne([hh,Yne],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),Kne=Ne([hh],e=>{var t;return(t=e==null?void 0:e.active)!==null&&t!==void 0?t:!1}),Xne=Ne([E8,qu,Nl,ch,b8,dh,JE],h8),Jne=Ne([Xne],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function mM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function gM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mM(Object(n),!0).forEach(function(r){Zne(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Zne(e,t,n){return(t=Qne(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qne(e){var t=ere(e,"string");return typeof t=="symbol"?t:t+""}function ere(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tre=()=>st(Lr),nre=()=>{var e=tre(),t=st(Ao),n=st(y8);return zp(!e||!n?void 0:gM(gM({},e),{},{scale:n}),t)};function xM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function gu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xM(Object(n),!0).forEach(function(r){rre(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function rre(e,t,n){return(t=ire(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ire(e){var t=are(e,"string");return typeof t=="symbol"?t:t+""}function are(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sre=(e,t,n,r)=>{var i=t.find(a=>a&&a.index===n);if(i){if(e==="horizontal")return{x:i.coordinate,y:r.chartY};if(e==="vertical")return{x:r.chartX,y:i.coordinate}}return{x:0,y:0}},ore=(e,t,n,r)=>{var i=t.find(u=>u&&u.index===n);if(i){if(e==="centric"){var a=i.coordinate,{radius:l}=r;return gu(gu(gu({},r),Er(r.cx,r.cy,l,a)),{},{angle:a,radius:l})}var f=i.coordinate,{angle:h}=r;return gu(gu(gu({},r),Er(r.cx,r.cy,f,h)),{},{angle:h,radius:f})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function lre(e,t){var{chartX:n,chartY:r}=e;return n>=t.left&&n<=t.left+t.width&&r>=t.top&&r<=t.top+t.height}var S8=(e,t,n,r,i)=>{var a,l=(a=t==null?void 0:t.length)!==null&&a!==void 0?a:0;if(l<=1||e==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var f=0;f<l;f++){var h,u,g,y,E,C=f>0?(h=n[f-1])===null||h===void 0?void 0:h.coordinate:(u=n[l-1])===null||u===void 0?void 0:u.coordinate,I=(g=n[f])===null||g===void 0?void 0:g.coordinate,M=f>=l-1?(y=n[0])===null||y===void 0?void 0:y.coordinate:(E=n[f+1])===null||E===void 0?void 0:E.coordinate,O=void 0;if(!(C==null||I==null||M==null))if(ui(I-C)!==ui(M-I)){var j=[];if(ui(M-I)===ui(i[1]-i[0])){O=M;var U=I+i[1]-i[0];j[0]=Math.min(U,(U+C)/2),j[1]=Math.max(U,(U+C)/2)}else{O=C;var L=M+i[1]-i[0];j[0]=Math.min(I,(L+I)/2),j[1]=Math.max(I,(L+I)/2)}var G=[Math.min(I,(O+I)/2),Math.max(I,(O+I)/2)];if(e>G[0]&&e<=G[1]||e>=j[0]&&e<=j[1]){var V;return(V=n[f])===null||V===void 0?void 0:V.index}}else{var z=Math.min(C,M),B=Math.max(C,M);if(e>(z+I)/2&&e<=(B+I)/2){var J;return(J=n[f])===null||J===void 0?void 0:J.index}}}else if(t)for(var W=0;W<l;W++){var Z=t[W];if(Z!=null){var te=t[W+1],Y=t[W-1];if(W===0&&te!=null&&e<=(Z.coordinate+te.coordinate)/2||W===l-1&&Y!=null&&e>(Z.coordinate+Y.coordinate)/2||W>0&&W<l-1&&Y!=null&&te!=null&&e>(Z.coordinate+Y.coordinate)/2&&e<=(Z.coordinate+te.coordinate)/2)return Z.index}}return-1},cre=()=>st(bE),QE=(e,t)=>t,A8=(e,t,n)=>n,eS=(e,t,n,r)=>r,ure=Ne(Ao,e=>Um(e,t=>t.coordinate)),tS=Ne([sd,QE,A8,eS],u8),nS=Ne([tS,ld,ch,fh],WE),dre=(e,t,n)=>{if(t!=null){var r=sd(e);return t==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},C8=Ne([sd,QE,A8,eS],f8),dm=Ne([vo,bo,En,Yr,Ao,eS,C8,dh],d8),fre=Ne([tS,dm],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),N8=Ne([Ao,nS],a8),hre=Ne([C8,nS,Nl,ch,N8,dh,QE],h8),pre=Ne([tS,nS],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),mre=(e,t,n,r,i,a,l)=>{if(!(!e||!n||!r||!i)&&lre(e,l)){var f=kK(e,t),h=S8(f,a,i,n,r),u=sre(t,i,h,e);return{activeIndex:String(h),activeCoordinate:u}}},gre=(e,t,n,r,i,a,l)=>{if(!(!e||!r||!i||!a||!n)){var f=JJ(e,n);if(f){var h=PK(f,t),u=S8(h,l,a,r,i),g=ore(t,a,u,f);return{activeIndex:String(u),activeCoordinate:g}}}},xre=(e,t,n,r,i,a,l,f)=>{if(!(!e||!t||!r||!i||!a))return t==="horizontal"||t==="vertical"?mre(e,t,r,i,a,l,f):gre(e,t,n,r,i,a,l)},yre=Ne(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,n)=>n,(e,t,n)=>{if(t!=null){var r=e[t];if(r!=null)return n?r.panoramaElement:r.element}}),vre=Ne(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(r=>parseInt(r,10)).concat(Object.values(ii)),n=Array.from(new Set(t));return n.sort((r,i)=>r-i)},{memoizeOptions:{resultEqualityCheck:Zee}});function yM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function vM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yM(Object(n),!0).forEach(function(r){bre(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bre(e,t,n){return(t=wre(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wre(e){var t=Ere(e,"string");return typeof t=="symbol"?t:t+""}function Ere(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Sre={},Are={zIndexMap:Object.values(ii).reduce((e,t)=>vM(vM({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),Sre)},Cre=new Set(Object.values(ii));function Nre(e){return Cre.has(e)}var _8=Di({name:"zIndex",initialState:Are,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]?e.zIndexMap[n].consumers+=1:e.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Gn()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(e.zIndexMap[n].consumers-=1,e.zIndexMap[n].consumers<=0&&!Nre(n)&&delete e.zIndexMap[n])},prepare:Gn()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:n,element:r,isPanorama:i}=t.payload;e.zIndexMap[n]?i?e.zIndexMap[n].panoramaElement=r:e.zIndexMap[n].element=r:e.zIndexMap[n]={consumers:0,element:i?void 0:r,panoramaElement:i?r:void 0}},prepare:Gn()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(t.payload.isPanorama?e.zIndexMap[n].panoramaElement=void 0:e.zIndexMap[n].element=void 0)},prepare:Gn()}}}),{registerZIndexPortal:_re,unregisterZIndexPortal:Tre,registerZIndexPortalElement:Ire,unregisterZIndexPortalElement:Rre}=_8.actions,Mre=_8.reducer;function ns(e){var{zIndex:t,children:n}=e,r=fX(),i=r&&t!==void 0&&t!==0,a=ki(),l=Mn();k.useLayoutEffect(()=>i?(l(_re({zIndex:t})),()=>{l(Tre({zIndex:t}))}):Kf,[l,t,i]);var f=st(h=>yre(h,t,a));return i?f?lw.createPortal(n,f):null:n}function Fb(){return Fb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fb.apply(null,arguments)}function bM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function rp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bM(Object(n),!0).forEach(function(r){Ore(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ore(e,t,n){return(t=Dre(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dre(e){var t=kre(e,"string");return typeof t=="symbol"?t:t+""}function kre(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pre(e){var{cursor:t,cursorComp:n,cursorProps:r}=e;return k.isValidElement(t)?k.cloneElement(t,r):k.createElement(n,r)}function jre(e){var t,{coordinate:n,payload:r,index:i,offset:a,tooltipAxisBandSize:l,layout:f,cursor:h,tooltipEventType:u,chartName:g}=e,y=n,E=r,C=i;if(!h||!y||g!=="ScatterChart"&&u!=="axis")return null;var I,M,O;if(g==="ScatterChart")I=y,M=dJ,O=ii.cursorLine;else if(g==="BarChart")I=fJ(f,y,a,l),M=SP,O=ii.cursorRectangle;else if(f==="radial"&&ak(y)){var{cx:j,cy:U,radius:L,startAngle:G,endAngle:V}=CP(y);I={cx:j,cy:U,startAngle:G,endAngle:V,innerRadius:L,outerRadius:L},M=_P,O=ii.cursorLine}else I={points:tZ(f,y,a)},M=$w,O=ii.cursorLine;var z=typeof h=="object"&&"className"in h?h.className:void 0,B=rp(rp(rp(rp({stroke:"#ccc",pointerEvents:"none"},a),I),Bu(h)),{},{payload:E,payloadIndex:C,className:on("recharts-tooltip-cursor",z)});return k.createElement(ns,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:O},k.createElement(Pre,{cursor:h,cursorComp:M,cursorProps:B}))}function Lre(e){var t=nre(),n=sP(),r=Qf(),i=cre();return t==null||n==null||r==null||i==null?null:k.createElement(jre,Fb({},e,{offset:n,layout:r,tooltipAxisBandSize:t,chartName:i}))}var T8=k.createContext(null),Bre=()=>k.useContext(T8),sv={exports:{}},wM;function Ure(){return wM||(wM=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(h,u,g){this.fn=h,this.context=u,this.once=g||!1}function a(h,u,g,y,E){if(typeof g!="function")throw new TypeError("The listener must be a function");var C=new i(g,y||h,E),I=n?n+u:u;return h._events[I]?h._events[I].fn?h._events[I]=[h._events[I],C]:h._events[I].push(C):(h._events[I]=C,h._eventsCount++),h}function l(h,u){--h._eventsCount===0?h._events=new r:delete h._events[u]}function f(){this._events=new r,this._eventsCount=0}f.prototype.eventNames=function(){var u=[],g,y;if(this._eventsCount===0)return u;for(y in g=this._events)t.call(g,y)&&u.push(n?y.slice(1):y);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(g)):u},f.prototype.listeners=function(u){var g=n?n+u:u,y=this._events[g];if(!y)return[];if(y.fn)return[y.fn];for(var E=0,C=y.length,I=new Array(C);E<C;E++)I[E]=y[E].fn;return I},f.prototype.listenerCount=function(u){var g=n?n+u:u,y=this._events[g];return y?y.fn?1:y.length:0},f.prototype.emit=function(u,g,y,E,C,I){var M=n?n+u:u;if(!this._events[M])return!1;var O=this._events[M],j=arguments.length,U,L;if(O.fn){switch(O.once&&this.removeListener(u,O.fn,void 0,!0),j){case 1:return O.fn.call(O.context),!0;case 2:return O.fn.call(O.context,g),!0;case 3:return O.fn.call(O.context,g,y),!0;case 4:return O.fn.call(O.context,g,y,E),!0;case 5:return O.fn.call(O.context,g,y,E,C),!0;case 6:return O.fn.call(O.context,g,y,E,C,I),!0}for(L=1,U=new Array(j-1);L<j;L++)U[L-1]=arguments[L];O.fn.apply(O.context,U)}else{var G=O.length,V;for(L=0;L<G;L++)switch(O[L].once&&this.removeListener(u,O[L].fn,void 0,!0),j){case 1:O[L].fn.call(O[L].context);break;case 2:O[L].fn.call(O[L].context,g);break;case 3:O[L].fn.call(O[L].context,g,y);break;case 4:O[L].fn.call(O[L].context,g,y,E);break;default:if(!U)for(V=1,U=new Array(j-1);V<j;V++)U[V-1]=arguments[V];O[L].fn.apply(O[L].context,U)}}return!0},f.prototype.on=function(u,g,y){return a(this,u,g,y,!1)},f.prototype.once=function(u,g,y){return a(this,u,g,y,!0)},f.prototype.removeListener=function(u,g,y,E){var C=n?n+u:u;if(!this._events[C])return this;if(!g)return l(this,C),this;var I=this._events[C];if(I.fn)I.fn===g&&(!E||I.once)&&(!y||I.context===y)&&l(this,C);else{for(var M=0,O=[],j=I.length;M<j;M++)(I[M].fn!==g||E&&!I[M].once||y&&I[M].context!==y)&&O.push(I[M]);O.length?this._events[C]=O.length===1?O[0]:O:l(this,C)}return this},f.prototype.removeAllListeners=function(u){var g;return u?(g=n?n+u:u,this._events[g]&&l(this,g)):(this._events=new r,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=n,f.EventEmitter=f,e.exports=f})(sv)),sv.exports}var Fre=Ure();const Hre=Qa(Fre);var zf=new Hre,Hb="recharts.syncEvent.tooltip",EM="recharts.syncEvent.brush";function I8(e,t){if(t){var n=Number.parseInt(t,10);if(!vs(n))return e==null?void 0:e[n]}}var zre={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},R8=Di({name:"options",initialState:zre,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Gre=R8.reducer,{createEventEmitter:Vre}=R8.actions;function qre(e){return e.tooltip.syncInteraction}var $re={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},M8=Di({name:"chartData",initialState:$re,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:r}=t.payload;n!=null&&(e.dataStartIndex=n),r!=null&&(e.dataEndIndex=r)}}}),{setChartData:SM,setDataStartEndIndexes:Yre,setComputedData:wfe}=M8.actions,Wre=M8.reducer,Kre=["x","y"];function AM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function xu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AM(Object(n),!0).forEach(function(r){Xre(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Xre(e,t,n){return(t=Jre(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jre(e){var t=Zre(e,"string");return typeof t=="symbol"?t:t+""}function Zre(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qre(e,t){if(e==null)return{};var n,r,i=eie(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function eie(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function tie(){var e=st(wE),t=st(EE),n=Mn(),r=st(S4),i=st(Ao),a=Qf(),l=eg(),f=st(h=>h.rootProps.className);k.useEffect(()=>{if(e==null)return Kf;var h=(u,g,y)=>{if(t!==y&&e===u){if(r==="index"){var E;if(l&&g!==null&&g!==void 0&&(E=g.payload)!==null&&E!==void 0&&E.coordinate&&g.payload.sourceViewBox){var C=g.payload.coordinate,{x:I,y:M}=C,O=Qre(C,Kre),{x:j,y:U,width:L,height:G}=g.payload.sourceViewBox,V=xu(xu({},O),{},{x:l.x+(L?(I-j)/L:0)*l.width,y:l.y+(G?(M-U)/G:0)*l.height});n(xu(xu({},g),{},{payload:xu(xu({},g.payload),{},{coordinate:V})}))}else n(g);return}if(i!=null){var z;if(typeof r=="function"){var B={activeTooltipIndex:g.payload.index==null?void 0:Number(g.payload.index),isTooltipActive:g.payload.active,activeIndex:g.payload.index==null?void 0:Number(g.payload.index),activeLabel:g.payload.label,activeDataKey:g.payload.dataKey,activeCoordinate:g.payload.coordinate},J=r(i,B);z=i[J]}else r==="value"&&(z=i.find(de=>String(de.value)===g.payload.label));var{coordinate:W}=g.payload;if(z==null||g.payload.active===!1||W==null||l==null){n(Bb({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:Z,y:te}=W,Y=Math.min(Z,l.x+l.width),pe=Math.min(te,l.y+l.height),Te={x:a==="horizontal"?z.coordinate:Y,y:a==="horizontal"?pe:z.coordinate},le=Bb({active:g.payload.active,coordinate:Te,dataKey:g.payload.dataKey,index:String(z.index),label:g.payload.label,sourceViewBox:g.payload.sourceViewBox,graphicalItemId:g.payload.graphicalItemId});n(le)}}};return zf.on(Hb,h),()=>{zf.off(Hb,h)}},[f,n,t,e,r,i,a,l])}function nie(){var e=st(wE),t=st(EE),n=Mn();k.useEffect(()=>{if(e==null)return Kf;var r=(i,a,l)=>{t!==l&&e===i&&n(Yre(a))};return zf.on(EM,r),()=>{zf.off(EM,r)}},[n,t,e])}function rie(){var e=Mn();k.useEffect(()=>{e(Vre())},[e]),tie(),nie()}function iie(e,t,n,r,i,a){var l=st(C=>dre(C,e,t)),f=st(EE),h=st(wE),u=st(S4),g=st(qre),y=g==null?void 0:g.active,E=eg();k.useEffect(()=>{if(!y&&h!=null&&f!=null){var C=Bb({active:a,coordinate:n,dataKey:l,index:i,label:typeof r=="number"?String(r):r,sourceViewBox:E,graphicalItemId:void 0});zf.emit(Hb,h,C,f)}},[y,n,l,i,r,f,h,u,a,E])}function CM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function NM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CM(Object(n),!0).forEach(function(r){aie(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function aie(e,t,n){return(t=sie(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sie(e){var t=oie(e,"string");return typeof t=="symbol"?t:t+""}function oie(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lie(e){return e.dataKey}function cie(e,t){return k.isValidElement(e)?k.cloneElement(e,t):typeof e=="function"?k.createElement(e,t):k.createElement(VX,t)}var _M=[],uie={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function TM(e){var t,n,r=kr(e,uie),{active:i,allowEscapeViewBox:a,animationDuration:l,animationEasing:f,content:h,filterNull:u,isAnimationActive:g,offset:y,payloadUniqBy:E,position:C,reverseDirection:I,useTranslate3d:M,wrapperStyle:O,cursor:j,shared:U,trigger:L,defaultIndex:G,portal:V,axisId:z}=r,B=Mn(),J=typeof G=="number"?String(G):G;k.useEffect(()=>{B(ane({shared:U,trigger:L,axisId:z,active:i,defaultIndex:J}))},[B,U,L,z,i,J]);var W=eg(),Z=yP(),te=Qte(U),{activeIndex:Y,isActive:pe}=(t=st(ue=>pre(ue,te,L,J)))!==null&&t!==void 0?t:{},Te=st(ue=>hre(ue,te,L,J)),le=st(ue=>N8(ue,te,L,J)),de=st(ue=>fre(ue,te,L,J)),ge=Te,De=Bre(),we=(n=i??pe)!==null&&n!==void 0?n:!1,[$e,ne]=vk([ge,we]),re=te==="axis"?le:void 0;iie(te,L,de,re,Y,we);var he=V??De;if(he==null||W==null||te==null)return null;var se=ge??_M;we||(se=_M),u&&se.length&&(se=pk(se.filter(ue=>ue.value!=null&&(ue.hide!==!0||r.includeHidden)),E,lie));var ke=se.length>0,ie=k.createElement(JX,{allowEscapeViewBox:a,animationDuration:l,animationEasing:f,isAnimationActive:g,active:we,coordinate:de,hasPayload:ke,offset:y,position:C,reverseDirection:I,useTranslate3d:M,viewBox:W,wrapperStyle:O,lastBoundingBox:$e,innerRef:ne,hasPortalFromProps:!!V},cie(h,NM(NM({},r),{},{payload:se,label:re,active:we,activeIndex:Y,coordinate:de,accessibilityLayer:Z})));return k.createElement(k.Fragment,null,lw.createPortal(ie,he),we&&k.createElement(Lre,{cursor:j,tooltipEventType:te,coordinate:de,payload:se,index:Y}))}var Sg=e=>null;Sg.displayName="Cell";function die(e,t,n){return(t=fie(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fie(e){var t=hie(e,"string");return typeof t=="symbol"?t:t+""}function hie(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class pie{constructor(t){die(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function IM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function mie(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?IM(Object(n),!0).forEach(function(r){gie(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function gie(e,t,n){return(t=xie(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xie(e){var t=yie(e,"string");return typeof t=="symbol"?t:t+""}function yie(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vie={cacheSize:2e3,enableCache:!0},O8=mie({},vie),RM=new pie(O8.cacheSize),bie={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},MM="recharts_measurement_span";function wie(e,t){var n=t.fontSize||"",r=t.fontFamily||"",i=t.fontWeight||"",a=t.fontStyle||"",l=t.letterSpacing||"",f=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(a,"|").concat(l,"|").concat(f)}var OM=(e,t)=>{try{var n=document.getElementById(MM);n||(n=document.createElement("span"),n.setAttribute("id",MM),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,bie,t),n.textContent="".concat(e);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},bf=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||ag.isSsr)return{width:0,height:0};if(!O8.enableCache)return OM(t,n);var r=wie(t,n),i=RM.get(r);if(i)return i;var a=OM(t,n);return RM.set(r,a),a},D8;function Eie(e,t,n){return(t=Sie(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sie(e){var t=Aie(e,"string");return typeof t=="symbol"?t:t+""}function Aie(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var DM=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,kM=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Cie=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Nie=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,_ie={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Tie=["cm","mm","pt","pc","in","Q","px"];function Iie(e){return Tie.includes(e)}var Iu="NaN";function Rie(e,t){return e*_ie[t]}class ri{static parse(t){var n,[,r,i]=(n=Nie.exec(t))!==null&&n!==void 0?n:[];return r==null?ri.NaN:new ri(parseFloat(r),i??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,vs(t)&&(this.unit=""),n!==""&&!Cie.test(n)&&(this.num=NaN,this.unit=""),Iie(n)&&(this.num=Rie(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new ri(NaN,""):new ri(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new ri(NaN,""):new ri(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ri(NaN,""):new ri(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ri(NaN,""):new ri(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return vs(this.num)}}D8=ri;Eie(ri,"NaN",new D8(NaN,""));function k8(e){if(e==null||e.includes(Iu))return Iu;for(var t=e;t.includes("*")||t.includes("/");){var n,[,r,i,a]=(n=DM.exec(t))!==null&&n!==void 0?n:[],l=ri.parse(r??""),f=ri.parse(a??""),h=i==="*"?l.multiply(f):l.divide(f);if(h.isNaN())return Iu;t=t.replace(DM,h.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,g,y,E]=(u=kM.exec(t))!==null&&u!==void 0?u:[],C=ri.parse(g??""),I=ri.parse(E??""),M=y==="+"?C.add(I):C.subtract(I);if(M.isNaN())return Iu;t=t.replace(kM,M.toString())}return t}var PM=/\(([^()]*)\)/;function Mie(e){for(var t=e,n;(n=PM.exec(t))!=null;){var[,r]=n;t=t.replace(PM,k8(r))}return t}function Oie(e){var t=e.replace(/\s+/g,"");return t=Mie(t),t=k8(t),t}function Die(e){try{return Oie(e)}catch{return Iu}}function ov(e){var t=Die(e.slice(5,-1));return t===Iu?"":t}var kie=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],Pie=["dx","dy","angle","className","breakAll"];function zb(){return zb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zb.apply(null,arguments)}function jM(e,t){if(e==null)return{};var n,r,i=jie(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function jie(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var P8=/[ \f\n\r\t\v\u2028\u2029]+/,j8=e=>{var{children:t,breakAll:n,style:r}=e;try{var i=[];Dr(t)||(n?i=t.toString().split(""):i=t.toString().split(P8));var a=i.map(f=>({word:f,width:bf(f,r).width})),l=n?0:bf("",r).width;return{wordsWithComputedWidth:a,spaceWidth:l}}catch{return null}};function Lie(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var L8=(e,t,n,r)=>e.reduce((i,a)=>{var{word:l,width:f}=a,h=i[i.length-1];if(h&&f!=null&&(t==null||r||h.width+f+n<Number(t)))h.words.push(l),h.width+=f+n;else{var u={words:[l],width:f};i.push(u)}return i},[]),B8=e=>e.reduce((t,n)=>t.width>n.width?t:n),Bie="",LM=(e,t,n,r,i,a,l,f)=>{var h=e.slice(0,t),u=j8({breakAll:n,style:r,children:h+Bie});if(!u)return[!1,[]];var g=L8(u.wordsWithComputedWidth,a,l,f),y=g.length>i||B8(g).width>Number(a);return[y,g]},Uie=(e,t,n,r,i)=>{var{maxLines:a,children:l,style:f,breakAll:h}=e,u=lt(a),g=String(l),y=L8(t,r,n,i);if(!u||i)return y;var E=y.length>a||B8(y).width>Number(r);if(!E)return y;for(var C=0,I=g.length-1,M=0,O;C<=I&&M<=g.length-1;){var j=Math.floor((C+I)/2),U=j-1,[L,G]=LM(g,U,h,f,a,r,n,i),[V]=LM(g,j,h,f,a,r,n,i);if(!L&&!V&&(C=j+1),L&&V&&(I=j-1),!L&&V){O=G;break}M++}return O||y},BM=e=>{var t=Dr(e)?[]:e.toString().split(P8);return[{words:t,width:void 0}]},Fie=e=>{var{width:t,scaleToFit:n,children:r,style:i,breakAll:a,maxLines:l}=e;if((t||n)&&!ag.isSsr){var f,h,u=j8({breakAll:a,children:r,style:i});if(u){var{wordsWithComputedWidth:g,spaceWidth:y}=u;f=g,h=y}else return BM(r);return Uie({breakAll:a,children:r,maxLines:l,style:i},f,h,t,!!n)}return BM(r)},U8="#808080",Hie={angle:0,breakAll:!1,capHeight:"0.71em",fill:U8,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},Ag=k.forwardRef((e,t)=>{var n=kr(e,Hie),{x:r,y:i,lineHeight:a,capHeight:l,fill:f,scaleToFit:h,textAnchor:u,verticalAnchor:g}=n,y=jM(n,kie),E=k.useMemo(()=>Fie({breakAll:y.breakAll,children:y.children,maxLines:y.maxLines,scaleToFit:h,style:y.style,width:y.width}),[y.breakAll,y.children,y.maxLines,h,y.style,y.width]),{dx:C,dy:I,angle:M,className:O,breakAll:j}=y,U=jM(y,Pie);if(!bs(r)||!bs(i)||E.length===0)return null;var L=Number(r)+(lt(C)?C:0),G=Number(i)+(lt(I)?I:0);if(!Ar(L)||!Ar(G))return null;var V;switch(g){case"start":V=ov("calc(".concat(l,")"));break;case"middle":V=ov("calc(".concat((E.length-1)/2," * -").concat(a," + (").concat(l," / 2))"));break;default:V=ov("calc(".concat(E.length-1," * -").concat(a,")"));break}var z=[];if(h){var B=E[0].width,{width:J}=y;z.push("scale(".concat(lt(J)&&lt(B)?J/B:1,")"))}return M&&z.push("rotate(".concat(M,", ").concat(L,", ").concat(G,")")),z.length&&(U.transform=z.join(" ")),k.createElement("text",zb({},bi(U),{ref:t,x:L,y:G,className:on("recharts-text",O),textAnchor:u,fill:f.includes("url")?U8:f}),E.map((W,Z)=>{var te=W.words.join(j?"":" ");return k.createElement("tspan",{x:L,dy:Z===0?V:a,key:"".concat(te,"-").concat(Z)},te)}))});Ag.displayName="Text";var zie=["labelRef"],Gie=["content"];function UM(e,t){if(e==null)return{};var n,r,i=Vie(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Vie(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function FM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function fr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?FM(Object(n),!0).forEach(function(r){qie(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qie(e,t,n){return(t=$ie(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $ie(e){var t=Yie(e,"string");return typeof t=="symbol"?t:t+""}function Yie(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zs(){return Zs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zs.apply(null,arguments)}var F8=k.createContext(null),Wie=e=>{var{x:t,y:n,upperWidth:r,lowerWidth:i,width:a,height:l,children:f}=e,h=k.useMemo(()=>({x:t,y:n,upperWidth:r,lowerWidth:i,width:a,height:l}),[t,n,r,i,a,l]);return k.createElement(F8.Provider,{value:h},f)},H8=()=>{var e=k.useContext(F8),t=eg();return e||aP(t)},Kie=k.createContext(null),Xie=()=>{var e=k.useContext(Kie),t=st(T4);return e||t},Jie=e=>{var{value:t,formatter:n}=e,r=Dr(e.children)?t:e.children;return typeof n=="function"?n(r):r},rS=e=>e!=null&&typeof e=="function",Zie=(e,t)=>{var n=ui(t-e),r=Math.min(Math.abs(t-e),360);return n*r},Qie=(e,t,n,r,i)=>{var{offset:a,className:l}=e,{cx:f,cy:h,innerRadius:u,outerRadius:g,startAngle:y,endAngle:E,clockWise:C}=i,I=(u+g)/2,M=Zie(y,E),O=M>=0?1:-1,j,U;switch(t){case"insideStart":j=y+O*a,U=C;break;case"insideEnd":j=E-O*a,U=!C;break;case"end":j=E+O*a,U=C;break;default:throw new Error("Unsupported position ".concat(t))}U=M<=0?U:!U;var L=Er(f,h,I,j),G=Er(f,h,I,j+(U?1:-1)*359),V="M".concat(L.x,",").concat(L.y,`
    A`).concat(I,",").concat(I,",0,1,").concat(U?0:1,`,
    `).concat(G.x,",").concat(G.y),z=Dr(e.id)?If("recharts-radial-line-"):e.id;return k.createElement("text",Zs({},r,{dominantBaseline:"central",className:on("recharts-radial-bar-label",l)}),k.createElement("defs",null,k.createElement("path",{id:z,d:V})),k.createElement("textPath",{xlinkHref:"#".concat(z)},n))},eae=(e,t,n)=>{var{cx:r,cy:i,innerRadius:a,outerRadius:l,startAngle:f,endAngle:h}=e,u=(f+h)/2;if(n==="outside"){var{x:g,y}=Er(r,i,l+t,u);return{x:g,y,textAnchor:g>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var E=(a+l)/2,{x:C,y:I}=Er(r,i,E,u);return{x:C,y:I,textAnchor:"middle",verticalAnchor:"middle"}},Gb=e=>"cx"in e&&lt(e.cx),tae=(e,t)=>{var{parentViewBox:n,offset:r,position:i}=e,a;n!=null&&!Gb(n)&&(a=n);var{x:l,y:f,upperWidth:h,lowerWidth:u,height:g}=t,y=l,E=l+(h-u)/2,C=(y+E)/2,I=(h+u)/2,M=y+h/2,O=g>=0?1:-1,j=O*r,U=O>0?"end":"start",L=O>0?"start":"end",G=h>=0?1:-1,V=G*r,z=G>0?"end":"start",B=G>0?"start":"end";if(i==="top"){var J={x:y+h/2,y:f-j,textAnchor:"middle",verticalAnchor:U};return fr(fr({},J),a?{height:Math.max(f-a.y,0),width:h}:{})}if(i==="bottom"){var W={x:E+u/2,y:f+g+j,textAnchor:"middle",verticalAnchor:L};return fr(fr({},W),a?{height:Math.max(a.y+a.height-(f+g),0),width:u}:{})}if(i==="left"){var Z={x:C-V,y:f+g/2,textAnchor:z,verticalAnchor:"middle"};return fr(fr({},Z),a?{width:Math.max(Z.x-a.x,0),height:g}:{})}if(i==="right"){var te={x:C+I+V,y:f+g/2,textAnchor:B,verticalAnchor:"middle"};return fr(fr({},te),a?{width:Math.max(a.x+a.width-te.x,0),height:g}:{})}var Y=a?{width:I,height:g}:{};return i==="insideLeft"?fr({x:C+V,y:f+g/2,textAnchor:B,verticalAnchor:"middle"},Y):i==="insideRight"?fr({x:C+I-V,y:f+g/2,textAnchor:z,verticalAnchor:"middle"},Y):i==="insideTop"?fr({x:y+h/2,y:f+j,textAnchor:"middle",verticalAnchor:L},Y):i==="insideBottom"?fr({x:E+u/2,y:f+g-j,textAnchor:"middle",verticalAnchor:U},Y):i==="insideTopLeft"?fr({x:y+V,y:f+j,textAnchor:B,verticalAnchor:L},Y):i==="insideTopRight"?fr({x:y+h-V,y:f+j,textAnchor:z,verticalAnchor:L},Y):i==="insideBottomLeft"?fr({x:E+V,y:f+g-j,textAnchor:B,verticalAnchor:U},Y):i==="insideBottomRight"?fr({x:E+u-V,y:f+g-j,textAnchor:z,verticalAnchor:U},Y):i&&typeof i=="object"&&(lt(i.x)||lo(i.x))&&(lt(i.y)||lo(i.y))?fr({x:l+ta(i.x,I),y:f+ta(i.y,g),textAnchor:"end",verticalAnchor:"end"},Y):fr({x:M,y:f+g/2,textAnchor:"middle",verticalAnchor:"middle"},Y)},nae={angle:0,offset:5,zIndex:ii.label,position:"middle",textBreakAll:!1};function fl(e){var t=kr(e,nae),{viewBox:n,position:r,value:i,children:a,content:l,className:f="",textBreakAll:h,labelRef:u}=t,g=Xie(),y=H8(),E=r==="center"?y:g??y,C,I,M;if(n==null?C=E:Gb(n)?C=n:C=aP(n),!C||Dr(i)&&Dr(a)&&!k.isValidElement(l)&&typeof l!="function")return null;var O=fr(fr({},t),{},{viewBox:C});if(k.isValidElement(l)){var{labelRef:j}=O,U=UM(O,zie);return k.cloneElement(l,U)}if(typeof l=="function"){var{content:L}=O,G=UM(O,Gie);if(I=k.createElement(l,G),k.isValidElement(I))return I}else I=Jie(t);var V=bi(t);if(Gb(C)){if(r==="insideStart"||r==="insideEnd"||r==="end")return Qie(t,r,I,V,C);M=eae(C,t.offset,t.position)}else M=tae(t,C);return k.createElement(ns,{zIndex:t.zIndex},k.createElement(Ag,Zs({ref:u,className:on("recharts-label",f)},V,M,{textAnchor:Lie(V.textAnchor)?V.textAnchor:M.textAnchor,breakAll:h}),I))}fl.displayName="Label";var rae=(e,t,n)=>{if(!e)return null;var r={viewBox:t,labelRef:n};return e===!0?k.createElement(fl,Zs({key:"label-implicit"},r)):bs(e)?k.createElement(fl,Zs({key:"label-implicit",value:e},r)):k.isValidElement(e)?e.type===fl?k.cloneElement(e,fr({key:"label-implicit"},r)):k.createElement(fl,Zs({key:"label-implicit",content:e},r)):rS(e)?k.createElement(fl,Zs({key:"label-implicit",content:e},r)):e&&typeof e=="object"?k.createElement(fl,Zs({},e,{key:"label-implicit"},r)):null};function iae(e){var{label:t,labelRef:n}=e,r=H8();return rae(t,r,n)||null}var lv={},cv={},HM;function aae(){return HM||(HM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(cv)),cv}var uv={},zM;function sae(){return zM||(zM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})(uv)),uv}var GM;function oae(){return GM||(GM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=aae(),n=sae(),r=Ow();function i(a){if(r.isArrayLike(a))return t.last(n.toArray(a))}e.last=i})(lv)),lv}var dv,VM;function lae(){return VM||(VM=1,dv=oae().last),dv}var cae=lae();const uae=Qa(cae);var dae=["valueAccessor"],fae=["dataKey","clockWise","id","textBreakAll","zIndex"];function fm(){return fm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fm.apply(null,arguments)}function qM(e,t){if(e==null)return{};var n,r,i=hae(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function hae(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var pae=e=>Array.isArray(e.value)?uae(e.value):e.value,z8=k.createContext(void 0),mae=z8.Provider,G8=k.createContext(void 0),gae=G8.Provider;function xae(){return k.useContext(z8)}function yae(){return k.useContext(G8)}function mp(e){var{valueAccessor:t=pae}=e,n=qM(e,dae),{dataKey:r,clockWise:i,id:a,textBreakAll:l,zIndex:f}=n,h=qM(n,fae),u=xae(),g=yae(),y=u||g;return!y||!y.length?null:k.createElement(ns,{zIndex:f??ii.label},k.createElement(Oi,{className:"recharts-label-list"},y.map((E,C)=>{var I,M=Dr(r)?t(E,C):Bn(E&&E.payload,r),O=Dr(a)?{}:{id:"".concat(a,"-").concat(C)};return k.createElement(fl,fm({key:"label-".concat(C)},bi(E),h,O,{fill:(I=n.fill)!==null&&I!==void 0?I:E.fill,parentViewBox:E.parentViewBox,value:M,textBreakAll:l,viewBox:E.viewBox,index:C,zIndex:0}))})))}mp.displayName="LabelList";function V8(e){var{label:t}=e;return t?t===!0?k.createElement(mp,{key:"labelList-implicit"}):k.isValidElement(t)||rS(t)?k.createElement(mp,{key:"labelList-implicit",content:t}):typeof t=="object"?k.createElement(mp,fm({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function Vb(){return Vb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vb.apply(null,arguments)}var q8=e=>{var{cx:t,cy:n,r,className:i}=e,a=on("recharts-dot",i);return lt(t)&&lt(n)&&lt(r)?k.createElement("circle",Vb({},Ta(e),Rw(e),{className:a,cx:t,cy:n,r})):null},$8=e=>e.graphicalItems.polarItems,vae=Ne([$n,sh],TE),Cg=Ne([$8,Wn,vae],IE),bae=Ne([Cg],RE),Ng=Ne([bae,gE],ME),wae=Ne([Ng,Wn,Cg],DE);Ne([Ng,Wn,Cg],(e,t,n)=>n.length>0?e.flatMap(r=>n.flatMap(i=>{var a,l=Bn(r,(a=t.dataKey)!==null&&a!==void 0?a:i.dataKey);return{value:l,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(r=>({value:Bn(r,t.dataKey),errorDomain:[]})):e.map(r=>({value:r,errorDomain:[]})));var $M=()=>{},Eae=Ne([Ng,Wn,Cg,vg,$n],LE),Sae=Ne([Wn,PE,jE,$M,Eae,$M,En,$n],BE),Y8=Ne([Wn,En,Ng,wae,ah,$n,Sae],UE),Aae=Ne([Y8,Wn,ad],zE);Ne([Wn,Y8,Aae,$n],VE);var Cae={radiusAxis:{},angleAxis:{}},W8=Di({name:"polarAxis",initialState:Cae,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:Efe,removeRadiusAxis:Sfe,addAngleAxis:Afe,removeAngleAxis:Cfe}=W8.actions,Nae=W8.reducer;function YM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function WM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?YM(Object(n),!0).forEach(function(r){_ae(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _ae(e,t,n){return(t=Tae(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tae(e){var t=Iae(e,"string");return typeof t=="symbol"?t:t+""}function Iae(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Rae=(e,t)=>t,iS=Ne([$8,Rae],(e,t)=>e.filter(n=>n.type==="pie").find(n=>n.id===t)),Mae=[],aS=(e,t,n)=>(n==null?void 0:n.length)===0?Mae:n,K8=Ne([gE,iS,aS],(e,t,n)=>{var{chartData:r}=e;if(t!=null){var i;if((t==null?void 0:t.data)!=null&&t.data.length>0?i=t.data:i=r,(!i||!i.length)&&n!=null&&(i=n.map(a=>WM(WM({},t.presentationProps),a.props))),i!=null)return i}}),Oae=Ne([K8,iS,aS],(e,t,n)=>{if(!(e==null||t==null))return e.map((r,i)=>{var a,l=Bn(r,t.nameKey,t.name),f;return n!=null&&(a=n[i])!==null&&a!==void 0&&(a=a.props)!==null&&a!==void 0&&a.fill?f=n[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?f=r.fill:f=t.fill,{value:Km(l,t.dataKey),color:f,payload:r,type:t.legendType}})}),Dae=Ne([K8,iS,aS,Yr],(e,t,n,r)=>{if(!(t==null||e==null))return Fse({offset:r,pieSettings:t,displayedData:e,cells:n})}),fv={exports:{}},wn={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KM;function kae(){if(KM)return wn;KM=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),E=Symbol.for("react.view_transition"),C=Symbol.for("react.client.reference");function I(M){if(typeof M=="object"&&M!==null){var O=M.$$typeof;switch(O){case e:switch(M=M.type,M){case n:case i:case r:case h:case u:case E:return M;default:switch(M=M&&M.$$typeof,M){case l:case f:case y:case g:return M;case a:return M;default:return O}}case t:return O}}}return wn.ContextConsumer=a,wn.ContextProvider=l,wn.Element=e,wn.ForwardRef=f,wn.Fragment=n,wn.Lazy=y,wn.Memo=g,wn.Portal=t,wn.Profiler=i,wn.StrictMode=r,wn.Suspense=h,wn.SuspenseList=u,wn.isContextConsumer=function(M){return I(M)===a},wn.isContextProvider=function(M){return I(M)===l},wn.isElement=function(M){return typeof M=="object"&&M!==null&&M.$$typeof===e},wn.isForwardRef=function(M){return I(M)===f},wn.isFragment=function(M){return I(M)===n},wn.isLazy=function(M){return I(M)===y},wn.isMemo=function(M){return I(M)===g},wn.isPortal=function(M){return I(M)===t},wn.isProfiler=function(M){return I(M)===i},wn.isStrictMode=function(M){return I(M)===r},wn.isSuspense=function(M){return I(M)===h},wn.isSuspenseList=function(M){return I(M)===u},wn.isValidElementType=function(M){return typeof M=="string"||typeof M=="function"||M===n||M===i||M===r||M===h||M===u||typeof M=="object"&&M!==null&&(M.$$typeof===y||M.$$typeof===g||M.$$typeof===l||M.$$typeof===a||M.$$typeof===f||M.$$typeof===C||M.getModuleId!==void 0)},wn.typeOf=I,wn}var XM;function Pae(){return XM||(XM=1,fv.exports=kae()),fv.exports}var jae=Pae(),JM=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",ZM=null,hv=null,X8=e=>{if(e===ZM&&Array.isArray(hv))return hv;var t=[];return k.Children.forEach(e,n=>{Dr(n)||(jae.isFragment(n)?t=t.concat(X8(n.props.children)):t.push(n))}),hv=t,ZM=e,t};function J8(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(i=>JM(i)):r=[JM(t)],X8(e).forEach(i=>{var a=gc(i,"type.displayName")||gc(i,"type.name");a&&r.indexOf(a)!==-1&&n.push(i)}),n}var Z8=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,pv={},QM;function Lae(){return QM||(QM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){var i;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const a=n[Symbol.toStringTag];return a==null||!((i=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&i.writable)?!1:n.toString()===`[object ${a}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}e.isPlainObject=t})(pv)),pv}var mv,eO;function Bae(){return eO||(eO=1,mv=Lae().isPlainObject),mv}var Uae=Bae();const Fae=Qa(Uae);var tO,nO,rO,iO,aO;function sO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function oO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sO(Object(n),!0).forEach(function(r){Hae(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Hae(e,t,n){return(t=zae(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zae(e){var t=Gae(e,"string");return typeof t=="symbol"?t:t+""}function Gae(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hm(){return hm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hm.apply(null,arguments)}function ff(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var lO=(e,t,n,r,i)=>{var a=n-r,l;return l=ir(tO||(tO=ff(["M ",",",""])),e,t),l+=ir(nO||(nO=ff(["L ",",",""])),e+n,t),l+=ir(rO||(rO=ff(["L ",",",""])),e+n-a/2,t+i),l+=ir(iO||(iO=ff(["L ",",",""])),e+n-a/2-r,t+i),l+=ir(aO||(aO=ff(["L ",","," Z"])),e,t),l},Vae={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},qae=e=>{var t=kr(e,Vae),{x:n,y:r,upperWidth:i,lowerWidth:a,height:l,className:f}=t,{animationEasing:h,animationDuration:u,animationBegin:g,isUpdateAnimationActive:y}=t,E=k.useRef(null),[C,I]=k.useState(-1),M=k.useRef(i),O=k.useRef(a),j=k.useRef(l),U=k.useRef(n),L=k.useRef(r),G=og(e,"trapezoid-");if(k.useEffect(()=>{if(E.current&&E.current.getTotalLength)try{var Te=E.current.getTotalLength();Te&&I(Te)}catch{}},[]),n!==+n||r!==+r||i!==+i||a!==+a||l!==+l||i===0&&a===0||l===0)return null;var V=on("recharts-trapezoid",f);if(!y)return k.createElement("g",null,k.createElement("path",hm({},bi(t),{className:V,d:lO(n,r,i,a,l)})));var z=M.current,B=O.current,J=j.current,W=U.current,Z=L.current,te="0px ".concat(C===-1?1:C,"px"),Y="".concat(C,"px 0px"),pe=vP(["strokeDasharray"],u,h);return k.createElement(sg,{animationId:G,key:G,canBegin:C>0,duration:u,easing:h,isActive:y,begin:g},Te=>{var le=li(z,i,Te),de=li(B,a,Te),ge=li(J,l,Te),De=li(W,n,Te),we=li(Z,r,Te);E.current&&(M.current=le,O.current=de,j.current=ge,U.current=De,L.current=we);var $e=Te>0?{transition:pe,strokeDasharray:Y}:{strokeDasharray:te};return k.createElement("path",hm({},bi(t),{className:V,d:lO(De,we,le,de,ge),ref:E,style:oO(oO({},$e),t.style)}))})},$ae=["option","shapeType","activeClassName"];function Yae(e,t){if(e==null)return{};var n,r,i=Wae(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Wae(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function cO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function pm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cO(Object(n),!0).forEach(function(r){Kae(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Kae(e,t,n){return(t=Xae(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xae(e){var t=Jae(e,"string");return typeof t=="symbol"?t:t+""}function Jae(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zae(e,t){return pm(pm({},t),e)}function Qae(e,t){return e==="symbols"}function uO(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return k.createElement(SP,n);case"trapezoid":return k.createElement(qae,n);case"sector":return k.createElement(_P,n);case"symbols":if(Qae(t))return k.createElement(Iw,n);break;case"curve":return k.createElement($w,n);default:return null}}function ese(e){return k.isValidElement(e)?e.props:e}function Q8(e){var{option:t,shapeType:n,activeClassName:r="recharts-active-shape"}=e,i=Yae(e,$ae),a;if(k.isValidElement(t))a=k.cloneElement(t,pm(pm({},i),ese(t)));else if(typeof t=="function")a=t(i,i.index);else if(Fae(t)&&typeof t!="boolean"){var l=Zae(t,i);a=k.createElement(uO,{shapeType:n,elementProps:l})}else{var f=i;a=k.createElement(uO,{shapeType:n,elementProps:f})}return i.isActive?k.createElement(Oi,{className:r},a):a}var tse=(e,t,n)=>{var r=Mn();return(i,a)=>l=>{e==null||e(i,a,l),r(o8({activeIndex:String(a),activeDataKey:t,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}},nse=e=>{var t=Mn();return(n,r)=>i=>{e==null||e(n,r,i),t(sne())}},rse=(e,t,n)=>{var r=Mn();return(i,a)=>l=>{e==null||e(i,a,l),r(one({activeIndex:String(a),activeDataKey:t,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}};function ej(e){var{tooltipEntrySettings:t}=e,n=Mn(),r=ki(),i=k.useRef(null);return k.useLayoutEffect(()=>{r||(i.current===null?n(nne(t)):i.current!==t&&n(rne({prev:i.current,next:t})),i.current=t)},[t,n,r]),k.useLayoutEffect(()=>()=>{i.current&&(n(ine(i.current)),i.current=null)},[n]),null}function ise(e){var{legendPayload:t}=e,n=Mn(),r=ki(),i=k.useRef(null);return k.useLayoutEffect(()=>{r||(i.current===null?n(pP(t)):i.current!==t&&n(mP({prev:i.current,next:t})),i.current=t)},[n,r,t]),k.useLayoutEffect(()=>()=>{i.current&&(n(gP(i.current)),i.current=null)},[n]),null}function ase(e){var{legendPayload:t}=e,n=Mn(),r=st(En),i=k.useRef(null);return k.useLayoutEffect(()=>{r!=="centric"&&r!=="radial"||(i.current===null?n(pP(t)):i.current!==t&&n(mP({prev:i.current,next:t})),i.current=t)},[n,r,t]),k.useLayoutEffect(()=>()=>{i.current&&(n(gP(i.current)),i.current=null)},[n]),null}var gv,sse=()=>{var[e]=k.useState(()=>If("uid-"));return e},ose=(gv=R5.useId)!==null&&gv!==void 0?gv:sse;function lse(e,t){var n=ose();return t||(e?"".concat(e,"-").concat(n):n)}var cse=k.createContext(void 0),tj=e=>{var{id:t,type:n,children:r}=e,i=lse("recharts-".concat(n),t);return k.createElement(cse.Provider,{value:i},r(i))},use={cartesianItems:[],polarItems:[]},nj=Di({name:"graphicalItems",initialState:use,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Gn()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:n,next:r}=t.payload,i=Ja(e).cartesianItems.indexOf(n);i>-1&&(e.cartesianItems[i]=r)},prepare:Gn()},removeCartesianGraphicalItem:{reducer(e,t){var n=Ja(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},prepare:Gn()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Gn()},removePolarGraphicalItem:{reducer(e,t){var n=Ja(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)},prepare:Gn()}}}),{addCartesianGraphicalItem:dse,replaceCartesianGraphicalItem:fse,removeCartesianGraphicalItem:hse,addPolarGraphicalItem:pse,removePolarGraphicalItem:mse}=nj.actions,gse=nj.reducer,xse=e=>{var t=Mn(),n=k.useRef(null);return k.useLayoutEffect(()=>{n.current===null?t(dse(e)):n.current!==e&&t(fse({prev:n.current,next:e})),n.current=e},[t,e]),k.useLayoutEffect(()=>()=>{n.current&&(t(hse(n.current)),n.current=null)},[t]),null},yse=k.memo(xse);function vse(e){var t=Mn();return k.useLayoutEffect(()=>(t(pse(e)),()=>{t(mse(e))}),[t,e]),null}var bse=["key"],wse=["onMouseEnter","onClick","onMouseLeave"],Ese=["id"],Sse=["id"];function dO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ar(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dO(Object(n),!0).forEach(function(r){Ase(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ase(e,t,n){return(t=Cse(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cse(e){var t=Nse(e,"string");return typeof t=="symbol"?t:t+""}function Nse(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bl(){return bl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bl.apply(null,arguments)}function _g(e,t){if(e==null)return{};var n,r,i=_se(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function _se(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Tse(e){var t=k.useMemo(()=>J8(e.children,Sg),[e.children]),n=st(r=>Oae(r,e.id,t));return n==null?null:k.createElement(ase,{legendPayload:n})}var Ise=k.memo(e=>{var{dataKey:t,nameKey:n,sectors:r,stroke:i,strokeWidth:a,fill:l,name:f,hide:h,tooltipType:u,id:g}=e,y={dataDefinedOnItem:r.map(E=>E.tooltipPayload),positions:r.map(E=>E.tooltipPosition),settings:{stroke:i,strokeWidth:a,fill:l,dataKey:t,nameKey:n,name:Km(f,t),hide:h,type:u,color:l,unit:"",graphicalItemId:g}};return k.createElement(ej,{tooltipEntrySettings:y})}),Rse=(e,t)=>e>t?"start":e<t?"end":"middle",Mse=(e,t,n)=>ta(typeof t=="function"?t(e):t,n,n*.8),Ose=(e,t,n)=>{var{top:r,left:i,width:a,height:l}=t,f=AP(a,l),h=i+ta(e.cx,a,a/2),u=r+ta(e.cy,l,l/2),g=ta(e.innerRadius,f,0),y=Mse(n,e.outerRadius,f),E=e.maxRadius||Math.sqrt(a*a+l*l)/2;return{cx:h,cy:u,innerRadius:g,outerRadius:y,maxRadius:E}},Dse=(e,t)=>{var n=ui(t-e),r=Math.min(Math.abs(t-e),360);return n*r};function kse(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var Pse=(e,t)=>{if(k.isValidElement(e))return k.cloneElement(e,t);if(typeof e=="function")return e(t);var n=on("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:r}=t,i=_g(t,bse);return k.createElement($w,bl({},i,{type:"linear",className:n}))},jse=(e,t,n)=>{if(k.isValidElement(e))return k.cloneElement(e,t);var r=n;if(typeof e=="function"&&(r=e(t),k.isValidElement(r)))return r;var i=on("recharts-pie-label-text",kse(e));return k.createElement(Ag,bl({},t,{alignmentBaseline:"middle",className:i}),r)};function Lse(e){var{sectors:t,props:n,showLabels:r}=e,{label:i,labelLine:a,dataKey:l}=n;if(!r||!i||!t)return null;var f=Ta(n),h=Bu(i),u=Bu(a),g=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,y=t.map((E,C)=>{var I=(E.startAngle+E.endAngle)/2,M=Er(E.cx,E.cy,E.outerRadius+g,I),O=ar(ar(ar(ar({},f),E),{},{stroke:"none"},h),{},{index:C,textAnchor:Rse(M.x,E.cx)},M),j=ar(ar(ar(ar({},f),E),{},{fill:"none",stroke:E.fill},u),{},{index:C,points:[Er(E.cx,E.cy,E.outerRadius,I),M],key:"line"});return k.createElement(ns,{zIndex:ii.label,key:"label-".concat(E.startAngle,"-").concat(E.endAngle,"-").concat(E.midAngle,"-").concat(C)},k.createElement(Oi,null,a&&Pse(a,j),jse(i,O,Bn(E,l))))});return k.createElement(Oi,{className:"recharts-pie-labels"},y)}function Bse(e){var{sectors:t,props:n,showLabels:r}=e,{label:i}=n;return typeof i=="object"&&i!=null&&"position"in i?k.createElement(V8,{label:i}):k.createElement(Lse,{sectors:t,props:n,showLabels:r})}function Use(e){var{sectors:t,activeShape:n,inactiveShape:r,allOtherPieProps:i,shape:a,id:l}=e,f=st(qu),h=st(w8),u=st($ne),{onMouseEnter:g,onClick:y,onMouseLeave:E}=i,C=_g(i,wse),I=tse(g,i.dataKey,l),M=nse(E),O=rse(y,i.dataKey,l);return t==null||t.length===0?null:k.createElement(k.Fragment,null,t.map((j,U)=>{if((j==null?void 0:j.startAngle)===0&&(j==null?void 0:j.endAngle)===0&&t.length!==1)return null;var L=u==null||u===l,G=String(U)===f&&(h==null||i.dataKey===h)&&L,V=f?r:null,z=n&&G?n:V,B=ar(ar({},j),{},{stroke:j.stroke,tabIndex:-1,[Qk]:U,[eP]:l});return k.createElement(Oi,bl({key:"sector-".concat(j==null?void 0:j.startAngle,"-").concat(j==null?void 0:j.endAngle,"-").concat(j.midAngle,"-").concat(U),tabIndex:-1,className:"recharts-pie-sector"},Mw(C,j,U),{onMouseEnter:I(j,U),onMouseLeave:M(j,U),onClick:O(j,U)}),k.createElement(Q8,bl({option:a??z,index:U,shapeType:"sector",isActive:G},B)))}))}function Fse(e){var t,{pieSettings:n,displayedData:r,cells:i,offset:a}=e,{cornerRadius:l,startAngle:f,endAngle:h,dataKey:u,nameKey:g,tooltipType:y}=n,E=Math.abs(n.minAngle),C=Dse(f,h),I=Math.abs(C),M=r.length<=1?0:(t=n.paddingAngle)!==null&&t!==void 0?t:0,O=r.filter(z=>Bn(z,u,0)!==0).length,j=(I>=360?O:O-1)*M,U=I-O*E-j,L=r.reduce((z,B)=>{var J=Bn(B,u,0);return z+(lt(J)?J:0)},0),G;if(L>0){var V;G=r.map((z,B)=>{var J=Bn(z,u,0),W=Bn(z,g,B),Z=Ose(n,a,z),te=(lt(J)?J:0)/L,Y,pe=ar(ar({},z),i&&i[B]&&i[B].props);B?Y=V.endAngle+ui(C)*M*(J!==0?1:0):Y=f;var Te=Y+ui(C)*((J!==0?E:0)+te*U),le=(Y+Te)/2,de=(Z.innerRadius+Z.outerRadius)/2,ge=[{name:W,value:J,payload:pe,dataKey:u,type:y,graphicalItemId:n.id}],De=Er(Z.cx,Z.cy,de,le);return V=ar(ar(ar(ar({},n.presentationProps),{},{percent:te,cornerRadius:typeof l=="string"?parseFloat(l):l,name:W,tooltipPayload:ge,midAngle:le,middleRadius:de,tooltipPosition:De},pe),Z),{},{value:J,dataKey:u,startAngle:Y,endAngle:Te,payload:pe,paddingAngle:ui(C)*M}),V})}return G}function Hse(e){var{showLabels:t,sectors:n,children:r}=e,i=k.useMemo(()=>!t||!n?[]:n.map(a=>({value:a.value,payload:a.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:a.cx,cy:a.cy,innerRadius:a.innerRadius,outerRadius:a.outerRadius,startAngle:a.startAngle,endAngle:a.endAngle,clockWise:!1},fill:a.fill})),[n,t]);return k.createElement(gae,{value:t?i:void 0},r)}function zse(e){var{props:t,previousSectorsRef:n,id:r}=e,{sectors:i,isAnimationActive:a,animationBegin:l,animationDuration:f,animationEasing:h,activeShape:u,inactiveShape:g,onAnimationStart:y,onAnimationEnd:E}=t,C=og(t,"recharts-pie-"),I=n.current,[M,O]=k.useState(!1),j=k.useCallback(()=>{typeof E=="function"&&E(),O(!1)},[E]),U=k.useCallback(()=>{typeof y=="function"&&y(),O(!0)},[y]);return k.createElement(Hse,{showLabels:!M,sectors:i},k.createElement(sg,{animationId:C,begin:l,duration:f,isActive:a,easing:h,onAnimationStart:U,onAnimationEnd:j,key:C},L=>{var G=[],V=i&&i[0],z=V==null?void 0:V.startAngle;return i==null||i.forEach((B,J)=>{var W=I&&I[J],Z=J>0?gc(B,"paddingAngle",0):0;if(W){var te=li(W.endAngle-W.startAngle,B.endAngle-B.startAngle,L),Y=ar(ar({},B),{},{startAngle:z+Z,endAngle:z+te+Z});G.push(Y),z=Y.endAngle}else{var{endAngle:pe,startAngle:Te}=B,le=li(0,pe-Te,L),de=ar(ar({},B),{},{startAngle:z+Z,endAngle:z+le+Z});G.push(de),z=de.endAngle}}),n.current=G,k.createElement(Oi,null,k.createElement(Use,{sectors:G,activeShape:u,inactiveShape:g,allOtherPieProps:t,shape:t.shape,id:r}))}),k.createElement(Bse,{showLabels:!M,sectors:i,props:t}),t.children)}var Gse={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:ii.area};function Vse(e){var{id:t}=e,n=_g(e,Ese),{hide:r,className:i,rootTabIndex:a}=e,l=k.useMemo(()=>J8(e.children,Sg),[e.children]),f=st(g=>Dae(g,t,l)),h=k.useRef(null),u=on("recharts-pie",i);return r||f==null?(h.current=null,k.createElement(Oi,{tabIndex:a,className:u})):k.createElement(ns,{zIndex:e.zIndex},k.createElement(Ise,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:f,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:t}),k.createElement(Oi,{tabIndex:a,className:u},k.createElement(zse,{props:ar(ar({},n),{},{sectors:f}),previousSectorsRef:h,id:t})))}function rj(e){var t=kr(e,Gse),{id:n}=t,r=_g(t,Sse),i=Ta(r);return k.createElement(tj,{id:n,type:"pie"},a=>k.createElement(k.Fragment,null,k.createElement(vse,{type:"pie",id:a,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i,maxRadius:t.maxRadius}),k.createElement(Tse,bl({},r,{id:a})),k.createElement(Vse,bl({},r,{id:a}))))}rj.displayName="Pie";var qse=["points"];function fO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function xv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fO(Object(n),!0).forEach(function(r){$se(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $se(e,t,n){return(t=Yse(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yse(e){var t=Wse(e,"string");return typeof t=="symbol"?t:t+""}function Wse(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mm(){return mm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mm.apply(null,arguments)}function Kse(e,t){if(e==null)return{};var n,r,i=Xse(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Xse(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Jse(e){var{option:t,dotProps:n,className:r}=e;if(k.isValidElement(t))return k.cloneElement(t,n);if(typeof t=="function")return t(n);var i=on(r,typeof t!="boolean"?t.className:""),a=n??{},{points:l}=a,f=Kse(a,qse);return k.createElement(q8,mm({},f,{className:i}))}function Zse(e,t){return e==null?!1:t?!0:e.length===1}function Qse(e){var{points:t,dot:n,className:r,dotClassName:i,dataKey:a,baseProps:l,needClip:f,clipPathId:h,zIndex:u=ii.scatter}=e;if(!Zse(t,n))return null;var g=Z8(n),y=u$(n),E=t.map((I,M)=>{var O,j,U=xv(xv(xv({r:3},l),y),{},{index:M,cx:(O=I.x)!==null&&O!==void 0?O:void 0,cy:(j=I.y)!==null&&j!==void 0?j:void 0,dataKey:a,value:I.value,payload:I.payload,points:t});return k.createElement(Jse,{key:"dot-".concat(M),option:n,dotProps:U,className:i})}),C={};return f&&h!=null&&(C.clipPath="url(#clipPath-".concat(g?"":"dots-").concat(h,")")),k.createElement(ns,{zIndex:u},k.createElement(Oi,mm({className:r},C),E))}function hO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function pO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hO(Object(n),!0).forEach(function(r){eoe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function eoe(e,t,n){return(t=toe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function toe(e){var t=noe(e,"string");return typeof t=="symbol"?t:t+""}function noe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var roe={xAxis:{},yAxis:{},zAxis:{}},ij=Di({name:"cartesianAxis",initialState:roe,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Gn()},replaceXAxis:{reducer(e,t){var{prev:n,next:r}=t.payload;e.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete e.xAxis[n.id],e.xAxis[r.id]=r)},prepare:Gn()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Gn()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Gn()},replaceYAxis:{reducer(e,t){var{prev:n,next:r}=t.payload;e.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete e.yAxis[n.id],e.yAxis[r.id]=r)},prepare:Gn()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Gn()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Gn()},replaceZAxis:{reducer(e,t){var{prev:n,next:r}=t.payload;e.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete e.zAxis[n.id],e.zAxis[r.id]=r)},prepare:Gn()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Gn()},updateYAxisWidth(e,t){var{id:n,width:r}=t.payload,i=e.yAxis[n];if(i){var a=i.widthHistory||[];if(a.length===3&&a[0]===a[2]&&r===a[1]&&r!==i.width&&Math.abs(r-a[0])<=1)return;var l=[...a,r].slice(-3);e.yAxis[n]=pO(pO({},e.yAxis[n]),{},{width:r,widthHistory:l})}}}}),{addXAxis:ioe,replaceXAxis:aoe,removeXAxis:soe,addYAxis:ooe,replaceYAxis:loe,removeYAxis:coe,addZAxis:Nfe,replaceZAxis:_fe,removeZAxis:Tfe,updateYAxisWidth:uoe}=ij.actions,doe=ij.reducer,foe=Ne([Yr],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),hoe=Ne([foe,vo,bo],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),sS=()=>st(hoe),poe=()=>st(Jne);function mO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function yv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mO(Object(n),!0).forEach(function(r){moe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function moe(e,t,n){return(t=goe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function goe(e){var t=xoe(e,"string");return typeof t=="symbol"?t:t+""}function xoe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yoe=e=>{var{point:t,childIndex:n,mainColor:r,activeDot:i,dataKey:a,clipPath:l}=e;if(i===!1||t.x==null||t.y==null)return null;var f={index:n,dataKey:a,cx:t.x,cy:t.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},h=yv(yv(yv({},f),Bu(i)),Rw(i)),u;return k.isValidElement(i)?u=k.cloneElement(i,h):typeof i=="function"?u=i(h):u=k.createElement(q8,h),k.createElement(Oi,{className:"recharts-active-dot",clipPath:l},u)};function voe(e){var{points:t,mainColor:n,activeDot:r,itemDataKey:i,clipPath:a,zIndex:l=ii.activeDot}=e,f=st(qu),h=poe();if(t==null||h==null)return null;var u=t.find(g=>h.includes(g.payload));return Dr(u)?null:k.createElement(ns,{zIndex:l},k.createElement(yoe,{point:u,childIndex:Number(f),mainColor:n,dataKey:i,activeDot:r,clipPath:a}))}var aj=e=>{var{chartData:t}=e,n=Mn(),r=ki();return k.useEffect(()=>r?()=>{}:(n(SM(t)),()=>{n(SM(void 0))}),[t,n,r]),null},gO={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},sj=Di({name:"brush",initialState:gO,reducers:{setBrushSettings(e,t){return t.payload==null?gO:t.payload}}}),{setBrushSettings:Ife}=sj.actions,boe=sj.reducer;function woe(e,t,n){return(t=Eoe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Eoe(e){var t=Soe(e,"string");return typeof t=="symbol"?t:t+""}function Soe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class oS{static create(t){return new oS(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(r)switch(r){case"start":return this.scale(t);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(t)+a}default:return this.scale(t)}if(n){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}isInRange(t){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?t>=r&&t<=i:t>=i&&t<=r}}woe(oS,"EPS",1e-4);function Aoe(e){return(e%180+180)%180}var Coe=function(t){var{width:n,height:r}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=Aoe(i),l=a*Math.PI/180,f=Math.atan(r/n),h=l>f&&l<Math.PI-f?r/Math.sin(l):n/Math.cos(l);return Math.abs(h)},Noe={dots:[],areas:[],lines:[]},oj=Di({name:"referenceElements",initialState:Noe,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=Ja(e).dots.findIndex(r=>r===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=Ja(e).areas.findIndex(r=>r===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=Ja(e).lines.findIndex(r=>r===t.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot:Rfe,removeDot:Mfe,addArea:Ofe,removeArea:Dfe,addLine:kfe,removeLine:Pfe}=oj.actions,_oe=oj.reducer,Toe=k.createContext(void 0),Ioe=e=>{var{children:t}=e,[n]=k.useState("".concat(If("recharts"),"-clip")),r=sS();if(r==null)return null;var{x:i,y:a,width:l,height:f}=r;return k.createElement(Toe.Provider,{value:n},k.createElement("defs",null,k.createElement("clipPath",{id:n},k.createElement("rect",{x:i,y:a,height:f,width:l}))),t)};function lj(e,t){if(t<1)return[];if(t===1)return e;for(var n=[],r=0;r<e.length;r+=t){var i=e[r];i!==void 0&&n.push(i)}return n}function Roe(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return Coe(r,n)}function Moe(e,t,n){var r=n==="width",{x:i,y:a,width:l,height:f}=e;return t===1?{start:r?i:a,end:r?i+l:a+f}:{start:r?i+l:a+f,end:r?i:a}}function Gf(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var a=n();return e*(t-e*a/2-r)>=0&&e*(t+e*a/2-i)<=0}function Ooe(e,t){return lj(e,t+1)}function Doe(e,t,n,r,i){for(var a=(r||[]).slice(),{start:l,end:f}=t,h=0,u=1,g=l,y=function(){var I=r==null?void 0:r[h];if(I===void 0)return{v:lj(r,u)};var M=h,O,j=()=>(O===void 0&&(O=n(I,M)),O),U=I.coordinate,L=h===0||Gf(e,U,j,g,f);L||(h=0,g=l,u+=1),L&&(g=U+e*(j()/2+i),h+=u)},E;u<=a.length;)if(E=y(),E)return E.v;return[]}function koe(e,t,n,r,i){var a=(r||[]).slice(),l=a.length;if(l===0)return[];for(var{start:f,end:h}=t,u=1;u<=l;u++){for(var g=(l-1)%u,y=f,E=!0,C=function(){var U=r[I],L=I,G,V=()=>(G===void 0&&(G=n(U,L)),G),z=U.coordinate,B=I===g||Gf(e,z,V,y,h);if(!B)return E=!1,1;B&&(y=z+e*(V()/2+i))},I=g;I<l&&!C();I+=u);if(E){for(var M=[],O=g;O<l;O+=u)M.push(r[O]);return M}}return[]}function xO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function si(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xO(Object(n),!0).forEach(function(r){Poe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Poe(e,t,n){return(t=joe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function joe(e){var t=Loe(e,"string");return typeof t=="symbol"?t:t+""}function Loe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Boe(e,t,n,r,i){for(var a=(r||[]).slice(),l=a.length,{start:f}=t,{end:h}=t,u=function(E){var C=a[E],I,M=()=>(I===void 0&&(I=n(C,E)),I);if(E===l-1){var O=e*(C.coordinate+e*M()/2-h);a[E]=C=si(si({},C),{},{tickCoord:O>0?C.coordinate-O*e:C.coordinate})}else a[E]=C=si(si({},C),{},{tickCoord:C.coordinate});if(C.tickCoord!=null){var j=Gf(e,C.tickCoord,M,f,h);j&&(h=C.tickCoord-e*(M()/2+i),a[E]=si(si({},C),{},{isShow:!0}))}},g=l-1;g>=0;g--)u(g);return a}function Uoe(e,t,n,r,i,a){var l=(r||[]).slice(),f=l.length,{start:h,end:u}=t;if(a){var g=r[f-1],y=n(g,f-1),E=e*(g.coordinate+e*y/2-u);if(l[f-1]=g=si(si({},g),{},{tickCoord:E>0?g.coordinate-E*e:g.coordinate}),g.tickCoord!=null){var C=Gf(e,g.tickCoord,()=>y,h,u);C&&(u=g.tickCoord-e*(y/2+i),l[f-1]=si(si({},g),{},{isShow:!0}))}}for(var I=a?f-1:f,M=function(U){var L=l[U],G,V=()=>(G===void 0&&(G=n(L,U)),G);if(U===0){var z=e*(L.coordinate-e*V()/2-h);l[U]=L=si(si({},L),{},{tickCoord:z<0?L.coordinate-z*e:L.coordinate})}else l[U]=L=si(si({},L),{},{tickCoord:L.coordinate});if(L.tickCoord!=null){var B=Gf(e,L.tickCoord,V,h,u);B&&(h=L.tickCoord+e*(V()/2+i),l[U]=si(si({},L),{},{isShow:!0}))}},O=0;O<I;O++)M(O);return l}function lS(e,t,n){var{tick:r,ticks:i,viewBox:a,minTickGap:l,orientation:f,interval:h,tickFormatter:u,unit:g,angle:y}=e;if(!i||!i.length||!r)return[];if(lt(h)||ag.isSsr){var E;return(E=Ooe(i,lt(h)?h:0))!==null&&E!==void 0?E:[]}var C=[],I=f==="top"||f==="bottom"?"width":"height",M=g&&I==="width"?bf(g,{fontSize:t,letterSpacing:n}):{width:0,height:0},O=(L,G)=>{var V=typeof u=="function"?u(L.value,G):L.value;return I==="width"?Roe(bf(V,{fontSize:t,letterSpacing:n}),M,y):bf(V,{fontSize:t,letterSpacing:n})[I]},j=i.length>=2?ui(i[1].coordinate-i[0].coordinate):1,U=Moe(a,j,I);return h==="equidistantPreserveStart"?Doe(j,U,O,i,l):h==="equidistantPreserveEnd"?koe(j,U,O,i,l):(h==="preserveStart"||h==="preserveStartEnd"?C=Uoe(j,U,O,i,l,h==="preserveStartEnd"):C=Boe(j,U,O,i,l),C.filter(L=>L.isShow))}var Foe=e=>{var{ticks:t,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:a=0}=e,l=0;if(t){Array.from(t).forEach(g=>{if(g){var y=g.getBoundingClientRect();y.width>l&&(l=y.width)}});var f=n?n.getBoundingClientRect().width:0,h=i+a,u=l+h+f+(n?r:0);return Math.round(u)}return 0},Hoe=["axisLine","width","height","className","hide","ticks","axisType"];function zoe(e,t){if(e==null)return{};var n,r,i=Goe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Goe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function wc(){return wc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wc.apply(null,arguments)}function yO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function wr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yO(Object(n),!0).forEach(function(r){Voe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Voe(e,t,n){return(t=qoe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qoe(e){var t=$oe(e,"string");return typeof t=="symbol"?t:t+""}function $oe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ao={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:ii.axis};function Yoe(e){var{x:t,y:n,width:r,height:i,orientation:a,mirror:l,axisLine:f,otherSvgProps:h}=e;if(!f)return null;var u=wr(wr(wr({},h),Ta(f)),{},{fill:"none"});if(a==="top"||a==="bottom"){var g=+(a==="top"&&!l||a==="bottom"&&l);u=wr(wr({},u),{},{x1:t,y1:n+g*i,x2:t+r,y2:n+g*i})}else{var y=+(a==="left"&&!l||a==="right"&&l);u=wr(wr({},u),{},{x1:t+y*r,y1:n,x2:t+y*r,y2:n+i})}return k.createElement("line",wc({},u,{className:on("recharts-cartesian-axis-line",gc(f,"className"))}))}function Woe(e,t,n,r,i,a,l,f,h){var u,g,y,E,C,I,M=f?-1:1,O=e.tickSize||l,j=lt(e.tickCoord)?e.tickCoord:e.coordinate;switch(a){case"top":u=g=e.coordinate,E=n+ +!f*i,y=E-M*O,I=y-M*h,C=j;break;case"left":y=E=e.coordinate,g=t+ +!f*r,u=g-M*O,C=u-M*h,I=j;break;case"right":y=E=e.coordinate,g=t+ +f*r,u=g+M*O,C=u+M*h,I=j;break;default:u=g=e.coordinate,E=n+ +f*i,y=E+M*O,I=y+M*h,C=j;break}return{line:{x1:u,y1:y,x2:g,y2:E},tick:{x:C,y:I}}}function Koe(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function Xoe(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function Joe(e){var{option:t,tickProps:n,value:r}=e,i,a=on(n.className,"recharts-cartesian-axis-tick-value");if(k.isValidElement(t))i=k.cloneElement(t,wr(wr({},n),{},{className:a}));else if(typeof t=="function")i=t(wr(wr({},n),{},{className:a}));else{var l="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(l=on(l,t==null?void 0:t.className)),i=k.createElement(Ag,wc({},n,{className:l}),r)}return i}var Zoe=k.forwardRef((e,t)=>{var{ticks:n=[],tick:r,tickLine:i,stroke:a,tickFormatter:l,unit:f,padding:h,tickTextProps:u,orientation:g,mirror:y,x:E,y:C,width:I,height:M,tickSize:O,tickMargin:j,fontSize:U,letterSpacing:L,getTicksConfig:G,events:V,axisType:z}=e,B=lS(wr(wr({},G),{},{ticks:n}),U,L),J=Koe(g,y),W=Xoe(g,y),Z=Ta(G),te=Bu(r),Y={};typeof i=="object"&&(Y=i);var pe=wr(wr({},Z),{},{fill:"none"},Y),Te=B.map(ge=>wr({entry:ge},Woe(ge,E,C,I,M,g,O,y,j))),le=Te.map(ge=>{var{entry:De,line:we}=ge;return k.createElement(Oi,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(De.value,"-").concat(De.coordinate,"-").concat(De.tickCoord)},i&&k.createElement("line",wc({},pe,we,{className:on("recharts-cartesian-axis-tick-line",gc(i,"className"))})))}),de=Te.map((ge,De)=>{var{entry:we,tick:$e}=ge,ne=wr(wr(wr(wr({textAnchor:J,verticalAnchor:W},Z),{},{stroke:"none",fill:a},te),$e),{},{index:De,payload:we,visibleTicksCount:B.length,tickFormatter:l,padding:h},u);return k.createElement(Oi,wc({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(we.value,"-").concat(we.coordinate,"-").concat(we.tickCoord)},Mw(V,we,De)),r&&k.createElement(Joe,{option:r,tickProps:ne,value:"".concat(typeof l=="function"?l(we.value,De):we.value).concat(f||"")}))});return k.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(z,"-ticks")},de.length>0&&k.createElement(ns,{zIndex:ii.label},k.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(z,"-tick-labels"),ref:t},de)),le.length>0&&k.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(z,"-tick-lines")},le))}),Qoe=k.forwardRef((e,t)=>{var{axisLine:n,width:r,height:i,className:a,hide:l,ticks:f,axisType:h}=e,u=zoe(e,Hoe),[g,y]=k.useState(""),[E,C]=k.useState(""),I=k.useRef(null);k.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var O;return Foe({ticks:I.current,label:(O=e.labelRef)===null||O===void 0?void 0:O.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var M=k.useCallback(O=>{if(O){var j=O.getElementsByClassName("recharts-cartesian-axis-tick-value");I.current=j;var U=j[0];if(U){var L=window.getComputedStyle(U),G=L.fontSize,V=L.letterSpacing;(G!==g||V!==E)&&(y(G),C(V))}}},[g,E]);return l||r!=null&&r<=0||i!=null&&i<=0?null:k.createElement(ns,{zIndex:e.zIndex},k.createElement(Oi,{className:on("recharts-cartesian-axis",a)},k.createElement(Yoe,{x:e.x,y:e.y,width:r,height:i,orientation:e.orientation,mirror:e.mirror,axisLine:n,otherSvgProps:Ta(e)}),k.createElement(Zoe,{ref:M,axisType:h,events:u,fontSize:g,getTicksConfig:e,height:e.height,letterSpacing:E,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:f,unit:e.unit,width:e.width,x:e.x,y:e.y}),k.createElement(Wie,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},k.createElement(iae,{label:e.label,labelRef:e.labelRef}),e.children)))}),cS=k.forwardRef((e,t)=>{var n=kr(e,ao);return k.createElement(Qoe,wc({},n,{ref:t}))});cS.displayName="CartesianAxis";var ele=["x1","y1","x2","y2","key"],tle=["offset"],nle=["xAxisId","yAxisId"],rle=["xAxisId","yAxisId"];function vO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function oi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vO(Object(n),!0).forEach(function(r){ile(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ile(e,t,n){return(t=ale(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ale(e){var t=sle(e,"string");return typeof t=="symbol"?t:t+""}function sle(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dc(){return dc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dc.apply(null,arguments)}function gm(e,t){if(e==null)return{};var n,r,i=ole(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function ole(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var lle=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:n,x:r,y:i,width:a,height:l,ry:f}=e;return k.createElement("rect",{x:r,y:i,ry:f,width:a,height:l,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function cj(e){var{option:t,lineItemProps:n}=e,r;if(k.isValidElement(t))r=k.cloneElement(t,n);else if(typeof t=="function")r=t(n);else{var i,{x1:a,y1:l,x2:f,y2:h,key:u}=n,g=gm(n,ele),y=(i=Ta(g))!==null&&i!==void 0?i:{},{offset:E}=y,C=gm(y,tle);r=k.createElement("line",dc({},C,{x1:a,y1:l,x2:f,y2:h,fill:"none",key:u}))}return r}function cle(e){var{x:t,width:n,horizontal:r=!0,horizontalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:l}=e,f=gm(e,nle),h=i.map((u,g)=>{var y=oi(oi({},f),{},{x1:t,y1:u,x2:t+n,y2:u,key:"line-".concat(g),index:g});return k.createElement(cj,{key:"line-".concat(g),option:r,lineItemProps:y})});return k.createElement("g",{className:"recharts-cartesian-grid-horizontal"},h)}function ule(e){var{y:t,height:n,vertical:r=!0,verticalPoints:i}=e;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:l}=e,f=gm(e,rle),h=i.map((u,g)=>{var y=oi(oi({},f),{},{x1:u,y1:t,x2:u,y2:t+n,key:"line-".concat(g),index:g});return k.createElement(cj,{option:r,lineItemProps:y,key:"line-".concat(g)})});return k.createElement("g",{className:"recharts-cartesian-grid-vertical"},h)}function dle(e){var{horizontalFill:t,fillOpacity:n,x:r,y:i,width:a,height:l,horizontalPoints:f,horizontal:h=!0}=e;if(!h||!t||!t.length||f==null)return null;var u=f.map(y=>Math.round(y+i-i)).sort((y,E)=>y-E);i!==u[0]&&u.unshift(0);var g=u.map((y,E)=>{var C=!u[E+1],I=C?i+l-y:u[E+1]-y;if(I<=0)return null;var M=E%t.length;return k.createElement("rect",{key:"react-".concat(E),y,x:r,height:I,width:a,stroke:"none",fill:t[M],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return k.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},g)}function fle(e){var{vertical:t=!0,verticalFill:n,fillOpacity:r,x:i,y:a,width:l,height:f,verticalPoints:h}=e;if(!t||!n||!n.length)return null;var u=h.map(y=>Math.round(y+i-i)).sort((y,E)=>y-E);i!==u[0]&&u.unshift(0);var g=u.map((y,E)=>{var C=!u[E+1],I=C?i+l-y:u[E+1]-y;if(I<=0)return null;var M=E%n.length;return k.createElement("rect",{key:"react-".concat(E),x:y,y:a,width:I,height:f,stroke:"none",fill:n[M],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return k.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},g)}var hle=(e,t)=>{var{xAxis:n,width:r,height:i,offset:a}=e;return Xk(lS(oi(oi(oi({},ao),n),{},{ticks:Jk(n),viewBox:{x:0,y:0,width:r,height:i}})),a.left,a.left+a.width,t)},ple=(e,t)=>{var{yAxis:n,width:r,height:i,offset:a}=e;return Xk(lS(oi(oi(oi({},ao),n),{},{ticks:Jk(n),viewBox:{x:0,y:0,width:r,height:i}})),a.top,a.top+a.height,t)},mle={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:ii.grid};function uj(e){var t=zw(),n=Gw(),r=sP(),i=oi(oi({},kr(e,mle)),{},{x:lt(e.x)?e.x:r.left,y:lt(e.y)?e.y:r.top,width:lt(e.width)?e.width:r.width,height:lt(e.height)?e.height:r.height}),{xAxisId:a,yAxisId:l,x:f,y:h,width:u,height:g,syncWithTicks:y,horizontalValues:E,verticalValues:C}=i,I=ki(),M=st(W=>dM(W,"xAxis",a,I)),O=st(W=>dM(W,"yAxis",l,I));if(!ws(u)||!ws(g)||!lt(f)||!lt(h))return null;var j=i.verticalCoordinatesGenerator||hle,U=i.horizontalCoordinatesGenerator||ple,{horizontalPoints:L,verticalPoints:G}=i;if((!L||!L.length)&&typeof U=="function"){var V=E&&E.length,z=U({yAxis:O?oi(oi({},O),{},{ticks:V?E:O.ticks}):void 0,width:t??u,height:n??g,offset:r},V?!0:y);Gp(Array.isArray(z),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof z,"]")),Array.isArray(z)&&(L=z)}if((!G||!G.length)&&typeof j=="function"){var B=C&&C.length,J=j({xAxis:M?oi(oi({},M),{},{ticks:B?C:M.ticks}):void 0,width:t??u,height:n??g,offset:r},B?!0:y);Gp(Array.isArray(J),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof J,"]")),Array.isArray(J)&&(G=J)}return k.createElement(ns,{zIndex:i.zIndex},k.createElement("g",{className:"recharts-cartesian-grid"},k.createElement(lle,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),k.createElement(dle,dc({},i,{horizontalPoints:L})),k.createElement(fle,dc({},i,{verticalPoints:G})),k.createElement(cle,dc({},i,{offset:r,horizontalPoints:L,xAxis:M,yAxis:O})),k.createElement(ule,dc({},i,{offset:r,verticalPoints:G,xAxis:M,yAxis:O}))))}uj.displayName="CartesianGrid";var gle={},dj=Di({name:"errorBars",initialState:gle,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]||(e[n]=[]),e[n].push(r)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:r,next:i}=t.payload;e[n]&&(e[n]=e[n].map(a=>a.dataKey===r.dataKey&&a.direction===r.direction?i:a))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]&&(e[n]=e[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:jfe,replaceErrorBar:Lfe,removeErrorBar:Bfe}=dj.actions,xle=dj.reducer,yle=["children"];function vle(e,t){if(e==null)return{};var n,r,i=ble(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function ble(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var wle={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Ele=k.createContext(wle);function Sle(e){var{children:t}=e,n=vle(e,yle);return k.createElement(Ele.Provider,{value:n},t)}function fj(e,t){var n,r,i=st(u=>Eo(u,e)),a=st(u=>So(u,t)),l=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:Gr.allowDataOverflow,f=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:Vr.allowDataOverflow,h=l||f;return{needClip:h,needClipX:l,needClipY:f}}function Ale(e){var{xAxisId:t,yAxisId:n,clipPathId:r}=e,i=sS(),{needClipX:a,needClipY:l,needClip:f}=fj(t,n);if(!f||!i)return null;var{x:h,y:u,width:g,height:y}=i;return k.createElement("clipPath",{id:"clipPath-".concat(r)},k.createElement("rect",{x:a?h:h-g/2,y:l?u:u-y/2,width:a?g:g*2,height:l?y:y*2}))}var hj=(e,t,n,r)=>t8(e,"xAxis",t,r),pj=(e,t,n,r)=>e8(e,"xAxis",t,r),mj=(e,t,n,r)=>t8(e,"yAxis",n,r),gj=(e,t,n,r)=>e8(e,"yAxis",n,r),Cle=Ne([En,hj,mj,pj,gj],(e,t,n,r,i)=>Sl(e,"xAxis")?zp(t,r,!1):zp(n,i,!1)),Nle=(e,t,n,r,i)=>i;function _le(e){return e.type==="line"}var Tle=Ne([k4,Nle],(e,t)=>e.filter(_le).find(n=>n.id===t)),Ile=Ne([En,hj,mj,pj,gj,Tle,Cle,xE],(e,t,n,r,i,a,l,f)=>{var{chartData:h,dataStartIndex:u,dataEndIndex:g}=f;if(!(a==null||t==null||n==null||r==null||i==null||r.length===0||i.length===0||l==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:y,data:E}=a,C;if(E!=null&&E.length>0?C=E:C=h==null?void 0:h.slice(u,g+1),C!=null)return pce({layout:e,xAxis:t,yAxis:n,xAxisTicks:r,yAxisTicks:i,dataKey:y,bandSize:l,displayedData:C})}});function Rle(e){var t=Bu(e),n=3,r=2;if(t!=null){var{r:i,strokeWidth:a}=t,l=Number(i),f=Number(a);return(Number.isNaN(l)||l<0)&&(l=n),(Number.isNaN(f)||f<0)&&(f=r),{r:l,strokeWidth:f}}return{r:n,strokeWidth:r}}var vv={exports:{}},bv={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bO;function Mle(){if(bO)return bv;bO=1;var e=$u();function t(h,u){return h===u&&(h!==0||1/h===1/u)||h!==h&&u!==u}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=e.useRef,a=e.useEffect,l=e.useMemo,f=e.useDebugValue;return bv.useSyncExternalStoreWithSelector=function(h,u,g,y,E){var C=i(null);if(C.current===null){var I={hasValue:!1,value:null};C.current=I}else I=C.current;C=l(function(){function O(V){if(!j){if(j=!0,U=V,V=y(V),E!==void 0&&I.hasValue){var z=I.value;if(E(z,V))return L=z}return L=V}if(z=L,n(U,V))return z;var B=y(V);return E!==void 0&&E(z,B)?(U=V,z):(U=V,L=B)}var j=!1,U,L,G=g===void 0?null:g;return[function(){return O(u())},G===null?void 0:function(){return O(G())}]},[u,g,y,E]);var M=r(h,C[0],C[1]);return a(function(){I.hasValue=!0,I.value=M},[M]),f(M),M},bv}var wO;function Ole(){return wO||(wO=1,vv.exports=Mle()),vv.exports}Ole();function Dle(e){e()}function kle(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Dle(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var EO={notify(){},get:()=>[]};function Ple(e,t){let n,r=EO,i=0,a=!1;function l(M){g();const O=r.subscribe(M);let j=!1;return()=>{j||(j=!0,O(),y())}}function f(){r.notify()}function h(){I.onStateChange&&I.onStateChange()}function u(){return a}function g(){i++,n||(n=e.subscribe(h),r=kle())}function y(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=EO)}function E(){a||(a=!0,g())}function C(){a&&(a=!1,y())}const I={addNestedSub:l,notifyNestedSubs:f,handleChangeWrapper:h,isSubscribed:u,trySubscribe:E,tryUnsubscribe:C,getListeners:()=>r};return I}var jle=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Lle=jle(),Ble=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Ule=Ble(),Fle=()=>Lle||Ule?k.useLayoutEffect:k.useEffect,Hle=Fle();function SO(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function zle(e,t){if(SO(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!SO(e[n[i]],t[n[i]]))return!1;return!0}var wv=Symbol.for("react-redux-context"),Ev=typeof globalThis<"u"?globalThis:{};function Gle(){if(!k.createContext)return{};const e=Ev[wv]??(Ev[wv]=new Map);let t=e.get(k.createContext);return t||(t=k.createContext(null),e.set(k.createContext,t)),t}var Vle=Gle();function qle(e){const{children:t,context:n,serverState:r,store:i}=e,a=k.useMemo(()=>{const h=Ple(i);return{store:i,subscription:h,getServerState:r?()=>r:void 0}},[i,r]),l=k.useMemo(()=>i.getState(),[i]);Hle(()=>{const{subscription:h}=a;return h.onStateChange=h.notifyNestedSubs,h.trySubscribe(),l!==i.getState()&&h.notifyNestedSubs(),()=>{h.tryUnsubscribe(),h.onStateChange=void 0}},[a,l]);const f=n||Vle;return k.createElement(f.Provider,{value:a},t)}var $le=qle,Yle=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function Wle(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function uS(e,t){var n=new Set([...Object.keys(e),...Object.keys(t)]);for(var r of n)if(Yle.has(r)){if(e[r]==null&&t[r]==null)continue;if(!zle(e[r],t[r]))return!1}else if(!Wle(e[r],t[r]))return!1;return!0}var Kle=["id"],Xle=["type","layout","connectNulls","needClip","shape"],Jle=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Vf(){return Vf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vf.apply(null,arguments)}function AO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function gs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AO(Object(n),!0).forEach(function(r){Zle(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Zle(e,t,n){return(t=Qle(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qle(e){var t=ece(e,"string");return typeof t=="symbol"?t:t+""}function ece(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dS(e,t){if(e==null)return{};var n,r,i=tce(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function tce(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var nce=e=>{var{dataKey:t,name:n,stroke:r,legendType:i,hide:a}=e;return[{inactive:a,dataKey:t,type:i,color:r,value:Km(n,t),payload:e}]},rce=k.memo(e=>{var{dataKey:t,data:n,stroke:r,strokeWidth:i,fill:a,name:l,hide:f,unit:h,tooltipType:u,id:g}=e,y={dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:i,fill:a,dataKey:t,nameKey:void 0,name:Km(l,t),hide:f,type:u,color:r,unit:h,graphicalItemId:g}};return k.createElement(ej,{tooltipEntrySettings:y})}),xj=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function ice(e,t){for(var n=e.length%2!==0?[...e,0]:e,r=[],i=0;i<t;++i)r=[...r,...n];return r}var ace=(e,t,n)=>{var r=n.reduce((y,E)=>y+E);if(!r)return xj(t,e);for(var i=Math.floor(e/r),a=e%r,l=t-e,f=[],h=0,u=0;h<n.length;u+=n[h],++h)if(u+n[h]>a){f=[...n.slice(0,h),a-u];break}var g=f.length%2===0?[0,l]:[l];return[...ice(n,i),...f,...g].map(y=>"".concat(y,"px")).join(", ")};function sce(e){var{clipPathId:t,points:n,props:r}=e,{dot:i,dataKey:a,needClip:l}=r,{id:f}=r,h=dS(r,Kle),u=Ta(h);return k.createElement(Qse,{points:n,dot:i,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:a,baseProps:u,needClip:l,clipPathId:t})}function oce(e){var{showLabels:t,children:n,points:r}=e,i=k.useMemo(()=>r==null?void 0:r.map(a=>{var l,f,h={x:(l=a.x)!==null&&l!==void 0?l:0,y:(f=a.y)!==null&&f!==void 0?f:0,width:0,lowerWidth:0,upperWidth:0,height:0};return gs(gs({},h),{},{value:a.value,payload:a.payload,viewBox:h,parentViewBox:void 0,fill:void 0})}),[r]);return k.createElement(mae,{value:t?i:void 0},n)}function CO(e){var{clipPathId:t,pathRef:n,points:r,strokeDasharray:i,props:a}=e,{type:l,layout:f,connectNulls:h,needClip:u,shape:g}=a,y=dS(a,Xle),E=gs(gs({},bi(y)),{},{fill:"none",className:"recharts-line-curve",clipPath:u?"url(#clipPath-".concat(t,")"):void 0,points:r,type:l,layout:f,connectNulls:h,strokeDasharray:i??a.strokeDasharray});return k.createElement(k.Fragment,null,(r==null?void 0:r.length)>1&&k.createElement(Q8,Vf({shapeType:"curve",option:g},E,{pathRef:n})),k.createElement(sce,{points:r,clipPathId:t,props:a}))}function lce(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function cce(e){var{clipPathId:t,props:n,pathRef:r,previousPointsRef:i,longestAnimatedLengthRef:a}=e,{points:l,strokeDasharray:f,isAnimationActive:h,animationBegin:u,animationDuration:g,animationEasing:y,animateNewValues:E,width:C,height:I,onAnimationEnd:M,onAnimationStart:O}=n,j=i.current,U=og(l,"recharts-line-"),L=k.useRef(U),[G,V]=k.useState(!1),z=!G,B=k.useCallback(()=>{typeof M=="function"&&M(),V(!1)},[M]),J=k.useCallback(()=>{typeof O=="function"&&O(),V(!0)},[O]),W=lce(r.current),Z=k.useRef(0);L.current!==U&&(Z.current=a.current,L.current=U);var te=Z.current;return k.createElement(oce,{points:l,showLabels:z},n.children,k.createElement(sg,{animationId:U,begin:u,duration:g,isActive:h,easing:y,onAnimationEnd:B,onAnimationStart:J,key:U},Y=>{var pe=li(te,W+te,Y),Te=Math.min(pe,W),le;if(h)if(f){var de="".concat(f).split(/[,\s]+/gim).map(we=>parseFloat(we));le=ace(Te,W,de)}else le=xj(W,Te);else le=f==null?void 0:String(f);if(Y>0&&W>0&&(i.current=l,a.current=Math.max(a.current,Te)),j){var ge=j.length/l.length,De=Y===1?l:l.map((we,$e)=>{var ne=Math.floor($e*ge);if(j[ne]){var re=j[ne];return gs(gs({},we),{},{x:li(re.x,we.x,Y),y:li(re.y,we.y,Y)})}return E?gs(gs({},we),{},{x:li(C*2,we.x,Y),y:li(I/2,we.y,Y)}):gs(gs({},we),{},{x:we.x,y:we.y})});return i.current=De,k.createElement(CO,{props:n,points:De,clipPathId:t,pathRef:r,strokeDasharray:le})}return k.createElement(CO,{props:n,points:l,clipPathId:t,pathRef:r,strokeDasharray:le})}),k.createElement(V8,{label:n.label}))}function uce(e){var{clipPathId:t,props:n}=e,r=k.useRef(null),i=k.useRef(0),a=k.useRef(null);return k.createElement(cce,{props:n,clipPathId:t,previousPointsRef:r,longestAnimatedLengthRef:i,pathRef:a})}var dce=(e,t)=>{var n,r;return{x:(n=e.x)!==null&&n!==void 0?n:void 0,y:(r=e.y)!==null&&r!==void 0?r:void 0,value:e.value,errorVal:Bn(e.payload,t)}};class fce extends k.Component{render(){var{hide:t,dot:n,points:r,className:i,xAxisId:a,yAxisId:l,top:f,left:h,width:u,height:g,id:y,needClip:E,zIndex:C}=this.props;if(t)return null;var I=on("recharts-line",i),M=y,{r:O,strokeWidth:j}=Rle(n),U=Z8(n),L=O*2+j,G=E?"url(#clipPath-".concat(U?"":"dots-").concat(M,")"):void 0;return k.createElement(ns,{zIndex:C},k.createElement(Oi,{className:I},E&&k.createElement("defs",null,k.createElement(Ale,{clipPathId:M,xAxisId:a,yAxisId:l}),!U&&k.createElement("clipPath",{id:"clipPath-dots-".concat(M)},k.createElement("rect",{x:h-L/2,y:f-L/2,width:u+L,height:g+L}))),k.createElement(Sle,{xAxisId:a,yAxisId:l,data:r,dataPointFormatter:dce,errorBarOffset:0},k.createElement(uce,{props:this.props,clipPathId:M}))),k.createElement(voe,{activeDot:this.props.activeDot,points:r,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:G}))}}var yj={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:ii.line,type:"linear"};function hce(e){var t=kr(e,yj),{activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:a,animationEasing:l,connectNulls:f,dot:h,hide:u,isAnimationActive:g,label:y,legendType:E,xAxisId:C,yAxisId:I,id:M}=t,O=dS(t,Jle),{needClip:j}=fj(C,I),U=sS(),L=Qf(),G=ki(),V=st(Z=>Ile(Z,C,I,G,M));if(L!=="horizontal"&&L!=="vertical"||V==null||U==null)return null;var{height:z,width:B,x:J,y:W}=U;return k.createElement(fce,Vf({},O,{id:M,connectNulls:f,dot:h,activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:a,animationEasing:l,isAnimationActive:g,hide:u,label:y,legendType:E,xAxisId:C,yAxisId:I,points:V,layout:L,height:z,width:B,left:J,top:W,needClip:j}))}function pce(e){var{layout:t,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:a,dataKey:l,bandSize:f,displayedData:h}=e;return h.map((u,g)=>{var y=Bn(u,l);if(t==="horizontal"){var E=pI({axis:n,ticks:i,bandSize:f,entry:u,index:g}),C=Dr(y)?null:r.scale(y);return{x:E,y:C,value:y,payload:u}}var I=Dr(y)?null:n.scale(y),M=pI({axis:r,ticks:a,bandSize:f,entry:u,index:g});return I==null||M==null?null:{x:I,y:M,value:y,payload:u}}).filter(Boolean)}function mce(e){var t=kr(e,yj),n=ki();return k.createElement(tj,{id:t.id,type:"line"},r=>k.createElement(k.Fragment,null,k.createElement(ise,{legendPayload:nce(t)}),k.createElement(rce,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:r}),k.createElement(yse,{type:"line",id:r,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:n}),k.createElement(hce,Vf({},t,{id:r}))))}var vj=k.memo(mce,uS);vj.displayName="Line";var gce=["domain","range"],xce=["domain","range"];function NO(e,t){if(e==null)return{};var n,r,i=yce(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function yce(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function _O(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function bj(e,t){if(e===t)return!0;var{domain:n,range:r}=e,i=NO(e,gce),{domain:a,range:l}=t,f=NO(t,xce);return!_O(n,a)||!_O(r,l)?!1:uS(i,f)}var vce=["dangerouslySetInnerHTML","ticks","scale"],bce=["id","scale"];function qb(){return qb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qb.apply(null,arguments)}function TO(e,t){if(e==null)return{};var n,r,i=wce(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function wce(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Ece(e){var t=Mn(),n=k.useRef(null);return k.useLayoutEffect(()=>{n.current===null?t(ioe(e)):n.current!==e&&t(aoe({prev:n.current,next:e})),n.current=e},[e,t]),k.useLayoutEffect(()=>()=>{n.current&&(t(soe(n.current)),n.current=null)},[t]),null}var Sce=e=>{var{xAxisId:t,className:n}=e,r=st(tP),i=ki(),a="xAxis",l=st(j=>Q4(j,a,t,i)),f=st(j=>Ute(j,t)),h=st(j=>qte(j,t)),u=st(j=>M4(j,t));if(f==null||h==null||u==null)return null;var{dangerouslySetInnerHTML:g,ticks:y,scale:E}=e,C=TO(e,vce),{id:I,scale:M}=u,O=TO(u,bce);return k.createElement(cS,qb({},C,O,{x:h.x,y:h.y,width:f.width,height:f.height,className:on("recharts-".concat(a," ").concat(a),n),viewBox:r,ticks:l,axisType:a}))},Ace={allowDataOverflow:Gr.allowDataOverflow,allowDecimals:Gr.allowDecimals,allowDuplicatedCategory:Gr.allowDuplicatedCategory,angle:Gr.angle,axisLine:ao.axisLine,height:Gr.height,hide:!1,includeHidden:Gr.includeHidden,interval:Gr.interval,minTickGap:Gr.minTickGap,mirror:Gr.mirror,orientation:Gr.orientation,padding:Gr.padding,reversed:Gr.reversed,scale:Gr.scale,tick:Gr.tick,tickCount:Gr.tickCount,tickLine:ao.tickLine,tickSize:ao.tickSize,type:Gr.type,xAxisId:0},Cce=e=>{var t=kr(e,Ace);return k.createElement(k.Fragment,null,k.createElement(Ece,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),k.createElement(Sce,t))},wj=k.memo(Cce,bj);wj.displayName="XAxis";var Nce=["dangerouslySetInnerHTML","ticks","scale"],_ce=["id","scale"];function $b(){return $b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$b.apply(null,arguments)}function IO(e,t){if(e==null)return{};var n,r,i=Tce(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Tce(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Ice(e){var t=Mn(),n=k.useRef(null);return k.useLayoutEffect(()=>{n.current===null?t(ooe(e)):n.current!==e&&t(loe({prev:n.current,next:e})),n.current=e},[e,t]),k.useLayoutEffect(()=>()=>{n.current&&(t(coe(n.current)),n.current=null)},[t]),null}var Rce=e=>{var{yAxisId:t,className:n,width:r,label:i}=e,a=k.useRef(null),l=k.useRef(null),f=st(tP),h=ki(),u=Mn(),g="yAxis",y=st(z=>Wte(z,t)),E=st(z=>Yte(z,t)),C=st(z=>Q4(z,g,t,h)),I=st(z=>O4(z,t));if(k.useLayoutEffect(()=>{if(!(r!=="auto"||!y||rS(i)||k.isValidElement(i)||I==null)){var z=a.current;if(z){var B=z.getCalculatedWidth();Math.round(y.width)!==Math.round(B)&&u(uoe({id:t,width:B}))}}},[C,y,u,i,t,r,I]),y==null||E==null||I==null)return null;var{dangerouslySetInnerHTML:M,ticks:O,scale:j}=e,U=IO(e,Nce),{id:L,scale:G}=I,V=IO(I,_ce);return k.createElement(cS,$b({},U,V,{ref:a,labelRef:l,x:E.x,y:E.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:y.width,height:y.height,className:on("recharts-".concat(g," ").concat(g),n),viewBox:f,ticks:C,axisType:g}))},Mce={allowDataOverflow:Vr.allowDataOverflow,allowDecimals:Vr.allowDecimals,allowDuplicatedCategory:Vr.allowDuplicatedCategory,angle:Vr.angle,axisLine:ao.axisLine,hide:!1,includeHidden:Vr.includeHidden,interval:Vr.interval,minTickGap:Vr.minTickGap,mirror:Vr.mirror,orientation:Vr.orientation,padding:Vr.padding,reversed:Vr.reversed,scale:Vr.scale,tick:Vr.tick,tickCount:Vr.tickCount,tickLine:ao.tickLine,tickSize:ao.tickSize,type:Vr.type,width:Vr.width,yAxisId:0},Oce=e=>{var t=kr(e,Mce);return k.createElement(k.Fragment,null,k.createElement(Ice,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),k.createElement(Rce,t))},Ej=k.memo(Oce,bj);Ej.displayName="YAxis";var Dce=(e,t)=>t,fS=Ne([Dce,En,T4,jr,x8,Ao,ure,Yr],xre),hS=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,r=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/r)}},Sj=Ia("mouseClick"),Aj=Jf();Aj.startListening({actionCreator:Sj,effect:(e,t)=>{var n=e.payload,r=fS(t.getState(),hS(n));(r==null?void 0:r.activeIndex)!=null&&t.dispatch(lne({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var Yb=Ia("mouseMove"),Cj=Jf(),ip=null;Cj.startListening({actionCreator:Yb,effect:(e,t)=>{var n=e.payload;ip!==null&&cancelAnimationFrame(ip);var r=hS(n);ip=requestAnimationFrame(()=>{var i=t.getState(),a=YE(i,i.tooltip.settings.shared);if(a==="axis"){var l=fS(i,r);(l==null?void 0:l.activeIndex)!=null?t.dispatch(c8({activeIndex:l.activeIndex,activeDataKey:void 0,activeCoordinate:l.activeCoordinate})):t.dispatch(l8())}ip=null})}});function kce(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var RO={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},Nj=Di({name:"rootProps",initialState:RO,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:RO.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),Pce=Nj.reducer,{updateOptions:jce}=Nj.actions,_j=Di({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:Lce}=_j.actions,Bce=_j.reducer,Tj=Ia("keyDown"),Ij=Ia("focus"),pS=Jf();pS.startListening({actionCreator:Tj,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,a=e.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var l=WE(i,ld(n),ch(n),fh(n)),f=l==null?-1:Number(l);if(!(!Number.isFinite(f)||f<0)){var h=Ao(n);if(a==="Enter"){var u=dm(n,"axis","hover",String(i.index));t.dispatch(Ub({active:!i.active,activeIndex:i.index,activeCoordinate:u}));return}var g=Zte(n),y=g==="left-to-right"?1:-1,E=a==="ArrowRight"?1:-1,C=f+E*y;if(!(h==null||C>=h.length||C<0)){var I=dm(n,"axis","hover",String(C));t.dispatch(Ub({active:!0,activeIndex:C.toString(),activeCoordinate:I}))}}}}}});pS.startListening({actionCreator:Ij,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var a="0",l=dm(n,"axis","hover",String(a));t.dispatch(Ub({active:!0,activeIndex:a,activeCoordinate:l}))}}}});var wa=Ia("externalEvent"),Rj=Jf(),Sv=new Map;Rj.startListening({actionCreator:wa,effect:(e,t)=>{var{handler:n,reactEvent:r}=e.payload;if(n!=null){r.persist();var i=r.type,a=Sv.get(i);a!==void 0&&cancelAnimationFrame(a);var l=requestAnimationFrame(()=>{try{var f=t.getState(),h={activeCoordinate:Wne(f),activeDataKey:w8(f),activeIndex:qu(f),activeLabel:b8(f),activeTooltipIndex:qu(f),isTooltipActive:Kne(f)};n(h,r)}finally{Sv.delete(i)}});Sv.set(i,l)}}});var Uce=Ne([sd],e=>e.tooltipItemPayloads),Fce=Ne([Uce,dh,(e,t)=>t,(e,t,n)=>n],(e,t,n,r)=>{var i=e.find(f=>f.settings.graphicalItemId===r);if(i!=null){var{positions:a}=i;if(a!=null){var l=t(a,n);return l}}}),Mj=Ia("touchMove"),Oj=Jf();Oj.startListening({actionCreator:Mj,effect:(e,t)=>{var n=e.payload;if(!(n.touches==null||n.touches.length===0)){var r=t.getState(),i=YE(r,r.tooltip.settings.shared);if(i==="axis"){var a=n.touches[0];if(a==null)return;var l=fS(r,hS({clientX:a.clientX,clientY:a.clientY,currentTarget:n.currentTarget}));(l==null?void 0:l.activeIndex)!=null&&t.dispatch(c8({activeIndex:l.activeIndex,activeDataKey:void 0,activeCoordinate:l.activeCoordinate}))}else if(i==="item"){var f,h=n.touches[0];if(document.elementFromPoint==null||h==null)return;var u=document.elementFromPoint(h.clientX,h.clientY);if(!u||!u.getAttribute)return;var g=u.getAttribute(Qk),y=(f=u.getAttribute(eP))!==null&&f!==void 0?f:void 0,E=od(r).find(M=>M.id===y);if(g==null||E==null||y==null)return;var{dataKey:C}=E,I=Fce(r,g,y);t.dispatch(o8({activeDataKey:C,activeIndex:g,activeCoordinate:I,activeGraphicalItemId:y}))}}}});var Hce=wk({brush:boe,cartesianAxis:doe,chartData:Wre,errorBars:xle,graphicalItems:gse,layout:wK,legend:NX,options:Gre,polarAxis:Nae,polarOptions:Bce,referenceElements:_oe,rootProps:Pce,tooltip:cne,zIndex:Mre}),zce=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return $W({reducer:Hce,preloadedState:t,middleware:r=>{var i;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((i="es6")!==null&&i!==void 0?i:"")}).concat([Aj.middleware,Cj.middleware,pS.middleware,Rj.middleware,Oj.middleware])},enhancers:r=>{var i=r;return typeof r=="function"&&(i=r()),i.concat(jk({type:"raf"}))},devTools:{serialize:{replacer:kce},name:"recharts-".concat(n)}})};function Dj(e){var{preloadedState:t,children:n,reduxStoreName:r}=e,i=ki(),a=k.useRef(null);if(i)return n;a.current==null&&(a.current=zce(t,r));var l=kw;return k.createElement($le,{context:l,store:a.current},n)}function Gce(e){var{layout:t,margin:n}=e,r=Mn(),i=ki();return k.useEffect(()=>{i||(r(yK(t)),r(xK(n)))},[r,i,t,n]),null}var kj=k.memo(Gce,uS);function Pj(e){var t=Mn();return k.useEffect(()=>{t(jce(e))},[t,e]),null}function MO(e){var{zIndex:t,isPanorama:n}=e,r=k.useRef(null),i=Mn();return k.useLayoutEffect(()=>(r.current&&i(Ire({zIndex:t,element:r.current,isPanorama:n})),()=>{i(Rre({zIndex:t,isPanorama:n}))}),[i,t,n]),k.createElement("g",{tabIndex:-1,ref:r})}function OO(e){var{children:t,isPanorama:n}=e,r=st(vre);if(!r||r.length===0)return t;var i=r.filter(l=>l<0),a=r.filter(l=>l>0);return k.createElement(k.Fragment,null,i.map(l=>k.createElement(MO,{key:l,zIndex:l,isPanorama:n})),t,a.map(l=>k.createElement(MO,{key:l,zIndex:l,isPanorama:n})))}var Vce=["children"];function qce(e,t){if(e==null)return{};var n,r,i=$ce(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function $ce(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function xm(){return xm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xm.apply(null,arguments)}var Yce={width:"100%",height:"100%",display:"block"},Wce=k.forwardRef((e,t)=>{var n=zw(),r=Gw(),i=yP();if(!ws(n)||!ws(r))return null;var{children:a,otherAttributes:l,title:f,desc:h}=e,u,g;return l!=null&&(typeof l.tabIndex=="number"?u=l.tabIndex:u=i?0:void 0,typeof l.role=="string"?g=l.role:g=i?"application":void 0),k.createElement(Ew,xm({},l,{title:f,desc:h,role:g,tabIndex:u,width:n,height:r,style:Yce,ref:t}),a)}),Kce=e=>{var{children:t}=e,n=st(Qm);if(!n)return null;var{width:r,height:i,y:a,x:l}=n;return k.createElement(Ew,{width:r,height:i,x:l,y:a},t)},DO=k.forwardRef((e,t)=>{var{children:n}=e,r=qce(e,Vce),i=ki();return i?k.createElement(Kce,null,k.createElement(OO,{isPanorama:!0},n)):k.createElement(Wce,xm({ref:t},r),k.createElement(OO,{isPanorama:!1},n))});function Xce(){var e=Mn(),[t,n]=k.useState(null),r=st(jK);return k.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),a=i.width/t.offsetWidth;Ar(a)&&a!==r&&e(bK(a))}},[t,e,r]),n}function kO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Jce(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kO(Object(n),!0).forEach(function(r){Zce(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Zce(e,t,n){return(t=Qce(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qce(e){var t=eue(e,"string");return typeof t=="symbol"?t:t+""}function eue(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ec(){return Ec=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ec.apply(null,arguments)}var tue=()=>(rie(),null);function ym(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var nue=k.forwardRef((e,t)=>{var n,r,i=k.useRef(null),[a,l]=k.useState({containerWidth:ym((n=e.style)===null||n===void 0?void 0:n.width),containerHeight:ym((r=e.style)===null||r===void 0?void 0:r.height)}),f=k.useCallback((u,g)=>{l(y=>{var E=Math.round(u),C=Math.round(g);return y.containerWidth===E&&y.containerHeight===C?y:{containerWidth:E,containerHeight:C}})},[]),h=k.useCallback(u=>{if(typeof t=="function"&&t(u),u!=null&&typeof ResizeObserver<"u"){var{width:g,height:y}=u.getBoundingClientRect();f(g,y);var E=I=>{var{width:M,height:O}=I[0].contentRect;f(M,O)},C=new ResizeObserver(E);C.observe(u),i.current=C}},[t,f]);return k.useEffect(()=>()=>{var u=i.current;u!=null&&u.disconnect()},[f]),k.createElement(k.Fragment,null,k.createElement(tg,{width:a.containerWidth,height:a.containerHeight}),k.createElement("div",Ec({ref:h},e)))}),rue=k.forwardRef((e,t)=>{var{width:n,height:r}=e,[i,a]=k.useState({containerWidth:ym(n),containerHeight:ym(r)}),l=k.useCallback((h,u)=>{a(g=>{var y=Math.round(h),E=Math.round(u);return g.containerWidth===y&&g.containerHeight===E?g:{containerWidth:y,containerHeight:E}})},[]),f=k.useCallback(h=>{if(typeof t=="function"&&t(h),h!=null){var{width:u,height:g}=h.getBoundingClientRect();l(u,g)}},[t,l]);return k.createElement(k.Fragment,null,k.createElement(tg,{width:i.containerWidth,height:i.containerHeight}),k.createElement("div",Ec({ref:f},e)))}),iue=k.forwardRef((e,t)=>{var{width:n,height:r}=e;return k.createElement(k.Fragment,null,k.createElement(tg,{width:n,height:r}),k.createElement("div",Ec({ref:t},e)))}),aue=k.forwardRef((e,t)=>{var{width:n,height:r}=e;return lo(n)||lo(r)?k.createElement(rue,Ec({},e,{ref:t})):k.createElement(iue,Ec({},e,{ref:t}))});function sue(e){return e===!0?nue:aue}var oue=k.forwardRef((e,t)=>{var{children:n,className:r,height:i,onClick:a,onContextMenu:l,onDoubleClick:f,onMouseDown:h,onMouseEnter:u,onMouseLeave:g,onMouseMove:y,onMouseUp:E,onTouchEnd:C,onTouchMove:I,onTouchStart:M,style:O,width:j,responsive:U,dispatchTouchEvents:L=!0}=e,G=k.useRef(null),V=Mn(),[z,B]=k.useState(null),[J,W]=k.useState(null),Z=Xce(),te=Hw(),Y=(te==null?void 0:te.width)>0?te.width:j,pe=(te==null?void 0:te.height)>0?te.height:i,Te=k.useCallback(me=>{Z(me),typeof t=="function"&&t(me),B(me),W(me),me!=null&&(G.current=me)},[Z,t,B,W]),le=k.useCallback(me=>{V(Sj(me)),V(wa({handler:a,reactEvent:me}))},[V,a]),de=k.useCallback(me=>{V(Yb(me)),V(wa({handler:u,reactEvent:me}))},[V,u]),ge=k.useCallback(me=>{V(l8()),V(wa({handler:g,reactEvent:me}))},[V,g]),De=k.useCallback(me=>{V(Yb(me)),V(wa({handler:y,reactEvent:me}))},[V,y]),we=k.useCallback(()=>{V(Ij())},[V]),$e=k.useCallback(me=>{V(Tj(me.key))},[V]),ne=k.useCallback(me=>{V(wa({handler:l,reactEvent:me}))},[V,l]),re=k.useCallback(me=>{V(wa({handler:f,reactEvent:me}))},[V,f]),he=k.useCallback(me=>{V(wa({handler:h,reactEvent:me}))},[V,h]),se=k.useCallback(me=>{V(wa({handler:E,reactEvent:me}))},[V,E]),ke=k.useCallback(me=>{V(wa({handler:M,reactEvent:me}))},[V,M]),ie=k.useCallback(me=>{L&&V(Mj(me)),V(wa({handler:I,reactEvent:me}))},[V,L,I]),ue=k.useCallback(me=>{V(wa({handler:C,reactEvent:me}))},[V,C]),qe=sue(U);return k.createElement(T8.Provider,{value:z},k.createElement(BD.Provider,{value:J},k.createElement(qe,{width:Y??(O==null?void 0:O.width),height:pe??(O==null?void 0:O.height),className:on("recharts-wrapper",r),style:Jce({position:"relative",cursor:"default",width:Y,height:pe},O),onClick:le,onContextMenu:ne,onDoubleClick:re,onFocus:we,onKeyDown:$e,onMouseDown:he,onMouseEnter:de,onMouseLeave:ge,onMouseMove:De,onMouseUp:se,onTouchEnd:ue,onTouchMove:ie,onTouchStart:ke,ref:Te},k.createElement(tue,null),n)))}),lue=["width","height","responsive","children","className","style","compact","title","desc"];function cue(e,t){if(e==null)return{};var n,r,i=uue(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function uue(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var jj=k.forwardRef((e,t)=>{var{width:n,height:r,responsive:i,children:a,className:l,style:f,compact:h,title:u,desc:g}=e,y=cue(e,lue),E=Ta(y);return h?k.createElement(k.Fragment,null,k.createElement(tg,{width:n,height:r}),k.createElement(DO,{otherAttributes:E,title:u,desc:g},a)):k.createElement(oue,{className:l,style:f,width:n,height:r,responsive:i??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},k.createElement(DO,{otherAttributes:E,title:u,desc:g,ref:t},k.createElement(Ioe,null,a)))});function Wb(){return Wb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wb.apply(null,arguments)}var due={top:5,right:5,bottom:5,left:5},fue={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:due,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},hue=k.forwardRef(function(t,n){var r,i=kr(t.categoricalChartProps,fue),{chartName:a,defaultTooltipEventType:l,validateTooltipEventTypes:f,tooltipPayloadSearcher:h,categoricalChartProps:u}=t,g={chartName:a,defaultTooltipEventType:l,validateTooltipEventTypes:f,tooltipPayloadSearcher:h,eventEmitter:void 0};return k.createElement(Dj,{preloadedState:{options:g},reduxStoreName:(r=u.id)!==null&&r!==void 0?r:a},k.createElement(aj,{chartData:u.data}),k.createElement(kj,{layout:i.layout,margin:i.margin}),k.createElement(Pj,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),k.createElement(jj,Wb({},i,{ref:n})))}),pue=["axis"],mue=k.forwardRef((e,t)=>k.createElement(hue,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:pue,tooltipPayloadSearcher:I8,categoricalChartProps:e,ref:t}));function gue(e){var t=Mn();return k.useEffect(()=>{t(Lce(e))},[t,e]),null}var xue=["layout"];function Kb(){return Kb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kb.apply(null,arguments)}function yue(e,t){if(e==null)return{};var n,r,i=vue(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function vue(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var bue={top:5,right:5,bottom:5,left:5},Lj={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:bue,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},wue=k.forwardRef(function(t,n){var r,i=kr(t.categoricalChartProps,Lj),{layout:a}=i,l=yue(i,xue),{chartName:f,defaultTooltipEventType:h,validateTooltipEventTypes:u,tooltipPayloadSearcher:g}=t,y={chartName:f,defaultTooltipEventType:h,validateTooltipEventTypes:u,tooltipPayloadSearcher:g,eventEmitter:void 0};return k.createElement(Dj,{preloadedState:{options:y},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:f},k.createElement(aj,{chartData:i.data}),k.createElement(kj,{layout:a,margin:i.margin}),k.createElement(Pj,{baseValue:void 0,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),k.createElement(gue,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),k.createElement(jj,Kb({},l,{ref:n})))});function PO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function jO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?PO(Object(n),!0).forEach(function(r){Eue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Eue(e,t,n){return(t=Sue(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sue(e){var t=Aue(e,"string");return typeof t=="symbol"?t:t+""}function Aue(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Cue=["item"],Nue=jO(jO({},Lj),{},{layout:"centric",startAngle:0,endAngle:360}),_ue=k.forwardRef((e,t)=>{var n=kr(e,Nue);return k.createElement(wue,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Cue,tooltipPayloadSearcher:I8,categoricalChartProps:n,ref:t})});const ap=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e),Tue=()=>{var G;const{currentUser:e,subscriptions:t,plans:n,sales:r,users:i,attendance:a,metrics:l}=Un();if(!e)return null;const f=[Oe.SUPER_ADMIN,Oe.BRANCH_ADMIN,Oe.MANAGER].includes(e.role),h=e.role===Oe.TRAINER,u=(e==null?void 0:e.role)===Oe.SUPER_ADMIN?t:t.filter(V=>V.branchId===(e==null?void 0:e.branchId)),g=(e==null?void 0:e.role)===Oe.SUPER_ADMIN?r:r.filter(V=>V.branchId===(e==null?void 0:e.branchId));if(h)return p.jsxs("div",{className:"space-y-6 md:space-y-8 animate-[fadeIn_0.5s_ease-out]",children:[p.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl md:text-3xl font-black text-slate-900 tracking-tight uppercase",children:"Coach Dashboard"}),p.jsxs("p",{className:"text-slate-500 font-medium text-sm",children:["Welcome back, ",e.name.split(" ")[0]]})]}),p.jsxs("div",{className:"bg-indigo-50 text-indigo-600 px-4 py-2 rounded-2xl border border-indigo-100 flex items-center gap-2",children:[p.jsx("span",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-pulse"}),p.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"On Shift"})]})]}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[p.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] border shadow-sm space-y-4",children:[p.jsx("div",{className:"bg-blue-50 w-12 h-12 rounded-2xl flex items-center justify-center text-blue-600",children:p.jsx("i",{className:"fas fa-users text-xl"})}),p.jsxs("div",{children:[p.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Assigned Clients"}),p.jsx("p",{className:"text-3xl font-black text-slate-900",children:t.filter(V=>V.trainerId===e.id&&V.status==="ACTIVE").length})]}),p.jsx("p",{className:"text-[10px] text-slate-400 font-medium uppercase tracking-tight",children:"Active personal training"})]}),p.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] border shadow-sm space-y-4",children:[p.jsx("div",{className:"bg-emerald-50 w-12 h-12 rounded-2xl flex items-center justify-center text-emerald-600",children:p.jsx("i",{className:"fas fa-calendar-day text-xl"})}),p.jsxs("div",{children:[p.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Today's Sessions"}),p.jsx("p",{className:"text-3xl font-black text-slate-900",children:"4"})]}),p.jsx("p",{className:"text-[10px] text-slate-400 font-medium uppercase tracking-tight",children:"Next: 2:00 PM - Yoga"})]}),p.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] border shadow-sm space-y-4",children:[p.jsx("div",{className:"bg-amber-50 w-12 h-12 rounded-2xl flex items-center justify-center text-amber-600",children:p.jsx("i",{className:"fas fa-star text-xl"})}),p.jsxs("div",{children:[p.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"My Rating"}),p.jsxs("p",{className:"text-3xl font-black text-slate-900",children:["4.9 ",p.jsx("span",{className:"text-sm text-slate-400",children:"/ 5"})]})]}),p.jsx("p",{className:"text-[10px] text-slate-400 font-medium uppercase tracking-tight",children:"Based on member feedback"})]})]})]});if(!f){const V=t.find(Z=>Z.memberId===e.id&&Z.status===Na.ACTIVE),z=V?n.find(Z=>Z.id===V.planId):null,B=a.filter(Z=>Z.userId===e.id).sort((Z,te)=>te.date.localeCompare(Z.date)),W=l.filter(Z=>Z.memberId===e.id).sort((Z,te)=>te.date.localeCompare(Z.date))[0];return p.jsxs("div",{className:"space-y-6 md:space-y-8 animate-[fadeIn_0.5s_ease-out]",children:[p.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[p.jsxs("div",{children:[p.jsxs("h2",{className:"text-2xl md:text-3xl font-black text-slate-900 tracking-tight uppercase",children:["Welcome, ",e.name.split(" ")[0]]}),p.jsx("p",{className:"text-slate-500 font-medium text-sm",children:"Your personal training dashboard"})]}),V&&p.jsxs("div",{className:"bg-emerald-50 text-emerald-600 px-4 py-2 rounded-2xl border border-emerald-100 flex items-center gap-2",children:[p.jsx("span",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),p.jsxs("span",{className:"text-[10px] font-black uppercase tracking-widest",children:[z==null?void 0:z.name," Active"]})]})]}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[p.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] border shadow-sm space-y-4",children:[p.jsx("div",{className:"bg-blue-50 w-12 h-12 rounded-2xl flex items-center justify-center text-blue-600",children:p.jsx("i",{className:"fas fa-calendar-check text-xl"})}),p.jsxs("div",{children:[p.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Check-ins this month"}),p.jsx("p",{className:"text-3xl font-black text-slate-900",children:B.length})]}),p.jsxs("p",{className:"text-[10px] text-slate-400 font-medium uppercase tracking-tight",children:["Last visit: ",((G=B[0])==null?void 0:G.date)||"Never"]})]}),p.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] border shadow-sm space-y-4",children:[p.jsx("div",{className:"bg-indigo-50 w-12 h-12 rounded-2xl flex items-center justify-center text-indigo-600",children:p.jsx("i",{className:"fas fa-weight-scale text-xl"})}),p.jsxs("div",{children:[p.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Current Weight"}),p.jsxs("p",{className:"text-3xl font-black text-slate-900",children:[(W==null?void 0:W.weight)||"--"," ",p.jsx("span",{className:"text-sm",children:"kg"})]})]}),p.jsxs("p",{className:"text-[10px] text-slate-400 font-medium uppercase tracking-tight",children:["Updated: ",(W==null?void 0:W.date)||"N/A"]})]}),p.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] border shadow-sm space-y-4",children:[p.jsx("div",{className:"bg-amber-50 w-12 h-12 rounded-2xl flex items-center justify-center text-amber-600",children:p.jsx("i",{className:"fas fa-clock text-xl"})}),p.jsxs("div",{children:[p.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Plan Validity"}),p.jsx("p",{className:"text-lg font-black text-slate-900 truncate",children:(V==null?void 0:V.endDate)||"No Active Plan"})]}),p.jsx("p",{className:"text-[10px] text-slate-400 font-medium uppercase tracking-tight",children:V?"Renews automatically":"Purchase plan to start"})]})]}),p.jsxs("div",{className:"bg-slate-900 p-8 md:p-12 rounded-[3rem] text-white shadow-2xl relative overflow-hidden",children:[p.jsxs("div",{className:"relative z-10 max-w-xl",children:[p.jsx("h3",{className:"text-2xl font-black uppercase tracking-tighter mb-4",children:"Daily Goal Status"}),p.jsx("p",{className:"text-slate-400 text-sm font-medium mb-8",children:"You're on a 3-day streak! Consistency is the key to massive transformation. Keep showing up."}),p.jsx("div",{className:"w-full bg-white/10 h-3 rounded-full overflow-hidden mb-4",children:p.jsx("div",{className:"bg-blue-500 h-full w-[75%] rounded-full shadow-[0_0_15px_rgba(59,130,246,0.5)]"})}),p.jsxs("div",{className:"flex justify-between text-[10px] font-black uppercase tracking-widest opacity-60",children:[p.jsx("span",{children:"Progress: 12/16 sessions"}),p.jsx("span",{children:"75% Completed"})]})]}),p.jsx("i",{className:"fas fa-dumbbell absolute -bottom-12 -right-12 text-[200px] text-white/5 rotate-12"})]})]})}const y=u.filter(V=>V.status===Na.ACTIVE).length,E=g.reduce((V,z)=>V+z.amount,0),C=g.filter(V=>V.date===new Date().toISOString().split("T")[0]).reduce((V,z)=>V+z.amount,0),I=[{name:"Gym",value:u.filter(V=>{var z;return((z=n.find(B=>B.id===V.planId))==null?void 0:z.type)===gt.GYM}).length||0},{name:"PT",value:u.filter(V=>{var z;return((z=n.find(B=>B.id===V.planId))==null?void 0:z.type)===gt.PT}).length||0},{name:"Group",value:u.filter(V=>{var z;return((z=n.find(B=>B.id===V.planId))==null?void 0:z.type)===gt.GROUP}).length||0}].filter(V=>V.value>0);I.length===0&&I.push({name:"No Data",value:1});const M=["#3b82f6","#ef4444","#10b981","#f59e0b"],O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],j=new Date().getMonth(),U=O.slice(0,j+1).map((V,z)=>{let B=14e4+z*5e3;const J=g.filter(W=>new Date(W.date).getMonth()===z).reduce((W,Z)=>W+Z.amount,0);return{month:V,revenue:J>0?J:B}}),L=[...g].sort((V,z)=>z.id.localeCompare(V.id)).slice(0,5);return p.jsxs("div",{className:"space-y-6 md:space-y-8 animate-[fadeIn_0.5s_ease-out]",children:[p.jsxs("div",{className:"grid grid-cols-1 xs:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6",children:[p.jsx(sp,{title:"Members",value:u.length,icon:"fa-users",color:"blue"}),p.jsx(sp,{title:"Active",value:y,icon:"fa-check-circle",color:"green"}),p.jsx(sp,{title:"Total",value:ap(E).replace("",""),icon:"fa-indian-rupee-sign",color:"amber"}),p.jsx(sp,{title:"Today",value:ap(C).replace("",""),icon:"fa-bolt",color:"indigo"})]}),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 md:gap-8",children:[p.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-[2rem] shadow-sm border border-gray-100 min-w-0",children:[p.jsxs("h3",{className:"text-sm md:text-base font-black mb-6 flex items-center gap-2 uppercase tracking-tight",children:[p.jsx("i",{className:"fas fa-chart-line text-blue-500"})," Performance Trends"]}),p.jsx("div",{className:"h-64 md:h-80 w-full min-w-0",children:p.jsx(CI,{width:"100%",height:"100%",children:p.jsxs(mue,{data:U,children:[p.jsx(uj,{strokeDasharray:"3 3",vertical:!1,stroke:"#f1f5f9"}),p.jsx(wj,{dataKey:"month",stroke:"#94a3b8",fontSize:10,axisLine:!1,tickLine:!1}),p.jsx(Ej,{tickFormatter:V=>`${V/1e3}k`,stroke:"#94a3b8",fontSize:10,axisLine:!1,tickLine:!1}),p.jsx(TM,{contentStyle:{borderRadius:"16px",border:"none",boxShadow:"0 10px 15px -3px rgb(0 0 0 / 0.1)"},formatter:V=>ap(Number(V))}),p.jsx(vj,{type:"monotone",dataKey:"revenue",stroke:"#3b82f6",strokeWidth:4,dot:{r:4,fill:"#3b82f6",strokeWidth:2,stroke:"#fff"}})]})})})]}),p.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-[2rem] shadow-sm border border-gray-100 min-w-0",children:[p.jsxs("h3",{className:"text-sm md:text-base font-black mb-6 flex items-center gap-2 uppercase tracking-tight",children:[p.jsx("i",{className:"fas fa-chart-pie text-indigo-500"})," Subscription Mix"]}),p.jsx("div",{className:"h-64 md:h-80 w-full flex items-center justify-center min-w-0",children:p.jsx(CI,{width:"100%",height:"100%",children:p.jsxs(_ue,{children:[p.jsx(rj,{data:I,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:8,dataKey:"value",children:I.map((V,z)=>p.jsx(Sg,{fill:M[z%M.length],strokeWidth:0},`cell-${z}`))}),p.jsx(TM,{}),p.jsx(xP,{iconType:"circle",wrapperStyle:{paddingTop:"10px",fontSize:"11px"}})]})})})]})]}),p.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-[2.5rem] shadow-sm border border-gray-100",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsx("h3",{className:"text-base md:text-lg font-black uppercase tracking-tight",children:"Recent Sales"}),p.jsx("div",{className:"flex bg-green-50 text-green-500 px-3 py-1 rounded-full text-[8px] font-black uppercase tracking-widest animate-pulse",children:"Real-Time"})]}),L.length===0?p.jsx("div",{className:"py-12 text-center text-gray-400 italic text-sm",children:"No sales yet."}):p.jsx("div",{className:"overflow-x-auto -mx-2 px-2 scrollbar-hide",children:p.jsxs("table",{className:"w-full text-left min-w-[500px] md:min-w-0",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"text-gray-400 uppercase text-[9px] font-black tracking-widest border-b pb-4",children:[p.jsx("th",{className:"pb-4 px-2",children:"Athlete"}),p.jsx("th",{className:"pb-4 px-2",children:"Plan Details"}),p.jsx("th",{className:"pb-4 px-2",children:"Value"}),p.jsx("th",{className:"pb-4 px-2",children:"Timestamp"})]})}),p.jsx("tbody",{className:"divide-y divide-gray-50",children:L.map(V=>{const z=i.find(J=>J.id===V.memberId),B=n.find(J=>J.id===V.planId);return p.jsxs("tr",{className:"text-sm hover:bg-gray-50 transition-colors group",children:[p.jsx("td",{className:"py-4 px-2",children:p.jsx("div",{className:"font-bold text-gray-900 group-hover:text-blue-600 transition-colors",children:z==null?void 0:z.name})}),p.jsx("td",{className:"py-4 px-2",children:p.jsx("span",{className:"text-gray-500 text-xs font-medium",children:(B==null?void 0:B.name)||"Retail Item"})}),p.jsx("td",{className:"py-4 px-2",children:p.jsx("span",{className:"font-black text-green-600",children:ap(V.amount)})}),p.jsx("td",{className:"py-4 px-2 text-gray-400 text-xs whitespace-nowrap",children:V.date})]},V.id)})})]})})]}),p.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
      `})]})},sp=({title:e,value:t,icon:n,color:r})=>{const i={blue:"bg-blue-50 text-blue-600",green:"bg-green-50 text-green-600",amber:"bg-amber-50 text-amber-600",indigo:"bg-indigo-50 text-indigo-600"};return p.jsxs("div",{className:"bg-white p-6 rounded-[2rem] shadow-sm border border-gray-100 hover:shadow-xl transition-all group flex items-start justify-between min-w-0",children:[p.jsxs("div",{className:"min-w-0",children:[p.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1 truncate",children:e}),p.jsx("p",{className:"text-2xl font-black text-gray-900 truncate tracking-tight",children:t})]}),p.jsx("div",{className:`${i[r]} w-10 h-10 md:w-12 md:h-12 rounded-xl md:rounded-2xl flex items-center justify-center shrink-0 shadow-sm`,children:p.jsx("i",{className:`fas ${n} text-sm md:text-lg`})})]})};var Iue=Object.defineProperty,Rue=(e,t,n)=>t in e?Iue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zn=(e,t,n)=>Rue(e,typeof t!="symbol"?t+"":t,n);const vm={x:0,y:0,width:0,height:0,unit:"px"},yu=(e,t,n)=>Math.min(Math.max(e,t),n),Mue=(...e)=>e.filter(t=>t&&typeof t=="string").join(" "),LO=(e,t)=>e===t||e.width===t.width&&e.height===t.height&&e.x===t.x&&e.y===t.y&&e.unit===t.unit;function Oue(e,t,n,r){const i=ps(e,n,r);return e.width&&(i.height=i.width/t),e.height&&(i.width=i.height*t),i.y+i.height>r&&(i.height=r-i.y,i.width=i.height*t),i.x+i.width>n&&(i.width=n-i.x,i.height=i.width/t),e.unit==="%"?hl(i,n,r):i}function Due(e,t,n){const r=ps(e,t,n);return r.x=(t-r.width)/2,r.y=(n-r.height)/2,e.unit==="%"?hl(r,t,n):r}function hl(e,t,n){return e.unit==="%"?{...vm,...e,unit:"%"}:{unit:"%",x:e.x?e.x/t*100:0,y:e.y?e.y/n*100:0,width:e.width?e.width/t*100:0,height:e.height?e.height/n*100:0}}function ps(e,t,n){return e.unit?e.unit==="px"?{...vm,...e,unit:"px"}:{unit:"px",x:e.x?e.x*t/100:0,y:e.y?e.y*n/100:0,width:e.width?e.width*t/100:0,height:e.height?e.height*n/100:0}:{...vm,...e,unit:"px"}}function BO(e,t,n,r,i,a=0,l=0,f=r,h=i){const u={...e};let g=Math.min(a,r),y=Math.min(l,i),E=Math.min(f,r),C=Math.min(h,i);t&&(t>1?(g=l?l*t:g,y=g/t,E=f*t):(y=a?a/t:y,g=y*t,C=h/t)),u.y<0&&(u.height=Math.max(u.height+u.y,y),u.y=0),u.x<0&&(u.width=Math.max(u.width+u.x,g),u.x=0);const I=r-(u.x+u.width);I<0&&(u.x=Math.min(u.x,r-g),u.width+=I);const M=i-(u.y+u.height);if(M<0&&(u.y=Math.min(u.y,i-y),u.height+=M),u.width<g&&((n==="sw"||n=="nw")&&(u.x-=g-u.width),u.width=g),u.height<y&&((n==="nw"||n=="ne")&&(u.y-=y-u.height),u.height=y),u.width>E&&((n==="sw"||n=="nw")&&(u.x-=E-u.width),u.width=E),u.height>C&&((n==="nw"||n=="ne")&&(u.y-=C-u.height),u.height=C),t){const O=u.width/u.height;if(O<t){const j=Math.max(u.width/t,y);(n==="nw"||n=="ne")&&(u.y-=j-u.height),u.height=j}else if(O>t){const j=Math.max(u.height*t,g);(n==="sw"||n=="nw")&&(u.x-=j-u.width),u.width=j}}return u}function kue(e,t,n,r){const i={...e};return t==="ArrowLeft"?r==="nw"?(i.x-=n,i.y-=n,i.width+=n,i.height+=n):r==="w"?(i.x-=n,i.width+=n):r==="sw"?(i.x-=n,i.width+=n,i.height+=n):r==="ne"?(i.y+=n,i.width-=n,i.height-=n):r==="e"?i.width-=n:r==="se"&&(i.width-=n,i.height-=n):t==="ArrowRight"&&(r==="nw"?(i.x+=n,i.y+=n,i.width-=n,i.height-=n):r==="w"?(i.x+=n,i.width-=n):r==="sw"?(i.x+=n,i.width-=n,i.height-=n):r==="ne"?(i.y-=n,i.width+=n,i.height+=n):r==="e"?i.width+=n:r==="se"&&(i.width+=n,i.height+=n)),t==="ArrowUp"?r==="nw"?(i.x-=n,i.y-=n,i.width+=n,i.height+=n):r==="n"?(i.y-=n,i.height+=n):r==="ne"?(i.y-=n,i.width+=n,i.height+=n):r==="sw"?(i.x+=n,i.width-=n,i.height-=n):r==="s"?i.height-=n:r==="se"&&(i.width-=n,i.height-=n):t==="ArrowDown"&&(r==="nw"?(i.x+=n,i.y+=n,i.width-=n,i.height-=n):r==="n"?(i.y+=n,i.height-=n):r==="ne"?(i.y+=n,i.width-=n,i.height-=n):r==="sw"?(i.x-=n,i.width+=n,i.height+=n):r==="s"?i.height+=n:r==="se"&&(i.width+=n,i.height+=n)),i}const vu={capture:!0,passive:!1};let Pue=0;const cl=class za extends k.PureComponent{constructor(){super(...arguments),zn(this,"docMoveBound",!1),zn(this,"mouseDownOnCrop",!1),zn(this,"dragStarted",!1),zn(this,"evData",{startClientX:0,startClientY:0,startCropX:0,startCropY:0,clientX:0,clientY:0,isResize:!0}),zn(this,"componentRef",k.createRef()),zn(this,"mediaRef",k.createRef()),zn(this,"resizeObserver"),zn(this,"initChangeCalled",!1),zn(this,"instanceId",`rc-${Pue++}`),zn(this,"state",{cropIsActive:!1,newCropIsBeingDrawn:!1}),zn(this,"onCropPointerDown",t=>{const{crop:n,disabled:r}=this.props,i=this.getBox();if(!n)return;const a=ps(n,i.width,i.height);if(r)return;t.cancelable&&t.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const l=t.target.dataset.ord,f=!!l;let h=t.clientX,u=t.clientY,g=a.x,y=a.y;if(l){const E=t.clientX-i.x,C=t.clientY-i.y;let I=0,M=0;l==="ne"||l=="e"?(I=E-(a.x+a.width),M=C-a.y,g=a.x,y=a.y+a.height):l==="se"||l==="s"?(I=E-(a.x+a.width),M=C-(a.y+a.height),g=a.x,y=a.y):l==="sw"||l=="w"?(I=E-a.x,M=C-(a.y+a.height),g=a.x+a.width,y=a.y):(l==="nw"||l=="n")&&(I=E-a.x,M=C-a.y,g=a.x+a.width,y=a.y+a.height),h=g+i.x+I,u=y+i.y+M}this.evData={startClientX:h,startClientY:u,startCropX:g,startCropY:y,clientX:t.clientX,clientY:t.clientY,isResize:f,ord:l},this.mouseDownOnCrop=!0,this.setState({cropIsActive:!0})}),zn(this,"onComponentPointerDown",t=>{const{crop:n,disabled:r,locked:i,keepSelection:a,onChange:l}=this.props,f=this.getBox();if(r||i||a&&n)return;t.cancelable&&t.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const h=t.clientX-f.x,u=t.clientY-f.y,g={unit:"px",x:h,y:u,width:0,height:0};this.evData={startClientX:t.clientX,startClientY:t.clientY,startCropX:h,startCropY:u,clientX:t.clientX,clientY:t.clientY,isResize:!0},this.mouseDownOnCrop=!0,l(ps(g,f.width,f.height),hl(g,f.width,f.height)),this.setState({cropIsActive:!0,newCropIsBeingDrawn:!0})}),zn(this,"onDocPointerMove",t=>{const{crop:n,disabled:r,onChange:i,onDragStart:a}=this.props,l=this.getBox();if(r||!n||!this.mouseDownOnCrop)return;t.cancelable&&t.preventDefault(),this.dragStarted||(this.dragStarted=!0,a&&a(t));const{evData:f}=this;f.clientX=t.clientX,f.clientY=t.clientY;let h;f.isResize?h=this.resizeCrop():h=this.dragCrop(),LO(n,h)||i(ps(h,l.width,l.height),hl(h,l.width,l.height))}),zn(this,"onComponentKeyDown",t=>{const{crop:n,disabled:r,onChange:i,onComplete:a}=this.props;if(r)return;const l=t.key;let f=!1;if(!n)return;const h=this.getBox(),u=this.makePixelCrop(h),g=(navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)?za.nudgeStepLarge:t.shiftKey?za.nudgeStepMedium:za.nudgeStep;if(l==="ArrowLeft"?(u.x-=g,f=!0):l==="ArrowRight"?(u.x+=g,f=!0):l==="ArrowUp"?(u.y-=g,f=!0):l==="ArrowDown"&&(u.y+=g,f=!0),f){t.cancelable&&t.preventDefault(),u.x=yu(u.x,0,h.width-u.width),u.y=yu(u.y,0,h.height-u.height);const y=ps(u,h.width,h.height),E=hl(u,h.width,h.height);i(y,E),a&&a(y,E)}}),zn(this,"onHandlerKeyDown",(t,n)=>{const{aspect:r=0,crop:i,disabled:a,minWidth:l=0,minHeight:f=0,maxWidth:h,maxHeight:u,onChange:g,onComplete:y}=this.props,E=this.getBox();if(a||!i)return;if(t.key==="ArrowUp"||t.key==="ArrowDown"||t.key==="ArrowLeft"||t.key==="ArrowRight")t.stopPropagation(),t.preventDefault();else return;const C=(navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)?za.nudgeStepLarge:t.shiftKey?za.nudgeStepMedium:za.nudgeStep,I=ps(i,E.width,E.height),M=kue(I,t.key,C,n),O=BO(M,r,n,E.width,E.height,l,f,h,u);if(!LO(i,O)){const j=hl(O,E.width,E.height);g(O,j),y&&y(O,j)}}),zn(this,"onDocPointerDone",t=>{const{crop:n,disabled:r,onComplete:i,onDragEnd:a}=this.props,l=this.getBox();this.unbindDocMove(),!(r||!n)&&this.mouseDownOnCrop&&(this.mouseDownOnCrop=!1,this.dragStarted=!1,a&&a(t),i&&i(ps(n,l.width,l.height),hl(n,l.width,l.height)),this.setState({cropIsActive:!1,newCropIsBeingDrawn:!1}))}),zn(this,"onDragFocus",()=>{var t;(t=this.componentRef.current)==null||t.scrollTo(0,0)})}get document(){return document}getBox(){const t=this.mediaRef.current;if(!t)return{x:0,y:0,width:0,height:0};const{x:n,y:r,width:i,height:a}=t.getBoundingClientRect();return{x:n,y:r,width:i,height:a}}componentDidUpdate(t){const{crop:n,onComplete:r}=this.props;if(r&&!t.crop&&n){const{width:i,height:a}=this.getBox();i&&a&&r(ps(n,i,a),hl(n,i,a))}}componentWillUnmount(){this.resizeObserver&&this.resizeObserver.disconnect(),this.unbindDocMove()}bindDocMove(){this.docMoveBound||(this.document.addEventListener("pointermove",this.onDocPointerMove,vu),this.document.addEventListener("pointerup",this.onDocPointerDone,vu),this.document.addEventListener("pointercancel",this.onDocPointerDone,vu),this.docMoveBound=!0)}unbindDocMove(){this.docMoveBound&&(this.document.removeEventListener("pointermove",this.onDocPointerMove,vu),this.document.removeEventListener("pointerup",this.onDocPointerDone,vu),this.document.removeEventListener("pointercancel",this.onDocPointerDone,vu),this.docMoveBound=!1)}getCropStyle(){const{crop:t}=this.props;if(t)return{top:`${t.y}${t.unit}`,left:`${t.x}${t.unit}`,width:`${t.width}${t.unit}`,height:`${t.height}${t.unit}`}}dragCrop(){const{evData:t}=this,n=this.getBox(),r=this.makePixelCrop(n),i=t.clientX-t.startClientX,a=t.clientY-t.startClientY;return r.x=yu(t.startCropX+i,0,n.width-r.width),r.y=yu(t.startCropY+a,0,n.height-r.height),r}getPointRegion(t,n,r,i){const{evData:a}=this,l=a.clientX-t.x,f=a.clientY-t.y;let h;i&&n?h=n==="nw"||n==="n"||n==="ne":h=f<a.startCropY;let u;return r&&n?u=n==="nw"||n==="w"||n==="sw":u=l<a.startCropX,u?h?"nw":"sw":h?"ne":"se"}resolveMinDimensions(t,n,r=0,i=0){const a=Math.min(r,t.width),l=Math.min(i,t.height);return!n||!a&&!l?[a,l]:n>1?a?[a,a/n]:[l*n,l]:l?[l*n,l]:[a,a/n]}resizeCrop(){const{evData:t}=this,{aspect:n=0,maxWidth:r,maxHeight:i}=this.props,a=this.getBox(),[l,f]=this.resolveMinDimensions(a,n,this.props.minWidth,this.props.minHeight);let h=this.makePixelCrop(a);const u=this.getPointRegion(a,t.ord,l,f),g=t.ord||u;let y=t.clientX-t.startClientX,E=t.clientY-t.startClientY;(l&&g==="nw"||g==="w"||g==="sw")&&(y=Math.min(y,-l)),(f&&g==="nw"||g==="n"||g==="ne")&&(E=Math.min(E,-f));const C={unit:"px",x:0,y:0,width:0,height:0};u==="ne"?(C.x=t.startCropX,C.width=y,n?(C.height=C.width/n,C.y=t.startCropY-C.height):(C.height=Math.abs(E),C.y=t.startCropY-C.height)):u==="se"?(C.x=t.startCropX,C.y=t.startCropY,C.width=y,n?C.height=C.width/n:C.height=E):u==="sw"?(C.x=t.startCropX+y,C.y=t.startCropY,C.width=Math.abs(y),n?C.height=C.width/n:C.height=E):u==="nw"&&(C.x=t.startCropX+y,C.width=Math.abs(y),n?(C.height=C.width/n,C.y=t.startCropY-C.height):(C.height=Math.abs(E),C.y=t.startCropY+E));const I=BO(C,n,u,a.width,a.height,l,f,r,i);return n||za.xyOrds.indexOf(g)>-1?h=I:za.xOrds.indexOf(g)>-1?(h.x=I.x,h.width=I.width):za.yOrds.indexOf(g)>-1&&(h.y=I.y,h.height=I.height),h.x=yu(h.x,0,a.width-h.width),h.y=yu(h.y,0,a.height-h.height),h}renderCropSelection(){const{ariaLabels:t=za.defaultProps.ariaLabels,disabled:n,locked:r,renderSelectionAddon:i,ruleOfThirds:a,crop:l}=this.props,f=this.getCropStyle();if(l)return yt.createElement("div",{style:f,className:"ReactCrop__crop-selection",onPointerDown:this.onCropPointerDown,"aria-label":t.cropArea,tabIndex:0,onKeyDown:this.onComponentKeyDown,role:"group"},!n&&!r&&yt.createElement("div",{className:"ReactCrop__drag-elements",onFocus:this.onDragFocus},yt.createElement("div",{className:"ReactCrop__drag-bar ord-n","data-ord":"n"}),yt.createElement("div",{className:"ReactCrop__drag-bar ord-e","data-ord":"e"}),yt.createElement("div",{className:"ReactCrop__drag-bar ord-s","data-ord":"s"}),yt.createElement("div",{className:"ReactCrop__drag-bar ord-w","data-ord":"w"}),yt.createElement("div",{className:"ReactCrop__drag-handle ord-nw","data-ord":"nw",tabIndex:0,"aria-label":t.nwDragHandle,onKeyDown:h=>this.onHandlerKeyDown(h,"nw"),role:"button"}),yt.createElement("div",{className:"ReactCrop__drag-handle ord-n","data-ord":"n",tabIndex:0,"aria-label":t.nDragHandle,onKeyDown:h=>this.onHandlerKeyDown(h,"n"),role:"button"}),yt.createElement("div",{className:"ReactCrop__drag-handle ord-ne","data-ord":"ne",tabIndex:0,"aria-label":t.neDragHandle,onKeyDown:h=>this.onHandlerKeyDown(h,"ne"),role:"button"}),yt.createElement("div",{className:"ReactCrop__drag-handle ord-e","data-ord":"e",tabIndex:0,"aria-label":t.eDragHandle,onKeyDown:h=>this.onHandlerKeyDown(h,"e"),role:"button"}),yt.createElement("div",{className:"ReactCrop__drag-handle ord-se","data-ord":"se",tabIndex:0,"aria-label":t.seDragHandle,onKeyDown:h=>this.onHandlerKeyDown(h,"se"),role:"button"}),yt.createElement("div",{className:"ReactCrop__drag-handle ord-s","data-ord":"s",tabIndex:0,"aria-label":t.sDragHandle,onKeyDown:h=>this.onHandlerKeyDown(h,"s"),role:"button"}),yt.createElement("div",{className:"ReactCrop__drag-handle ord-sw","data-ord":"sw",tabIndex:0,"aria-label":t.swDragHandle,onKeyDown:h=>this.onHandlerKeyDown(h,"sw"),role:"button"}),yt.createElement("div",{className:"ReactCrop__drag-handle ord-w","data-ord":"w",tabIndex:0,"aria-label":t.wDragHandle,onKeyDown:h=>this.onHandlerKeyDown(h,"w"),role:"button"})),i&&yt.createElement("div",{className:"ReactCrop__selection-addon",onPointerDown:h=>h.stopPropagation()},i(this.state)),a&&yt.createElement(yt.Fragment,null,yt.createElement("div",{className:"ReactCrop__rule-of-thirds-hz"}),yt.createElement("div",{className:"ReactCrop__rule-of-thirds-vt"})))}makePixelCrop(t){const n={...vm,...this.props.crop||{}};return ps(n,t.width,t.height)}render(){const{aspect:t,children:n,circularCrop:r,className:i,crop:a,disabled:l,locked:f,style:h,ruleOfThirds:u}=this.props,{cropIsActive:g,newCropIsBeingDrawn:y}=this.state,E=a?this.renderCropSelection():null,C=Mue("ReactCrop",i,g&&"ReactCrop--active",l&&"ReactCrop--disabled",f&&"ReactCrop--locked",y&&"ReactCrop--new-crop",a&&t&&"ReactCrop--fixed-aspect",a&&r&&"ReactCrop--circular-crop",a&&u&&"ReactCrop--rule-of-thirds",!this.dragStarted&&a&&!a.width&&!a.height&&"ReactCrop--invisible-crop",r&&"ReactCrop--no-animate");return yt.createElement("div",{ref:this.componentRef,className:C,style:h},yt.createElement("div",{ref:this.mediaRef,className:"ReactCrop__child-wrapper",onPointerDown:this.onComponentPointerDown},n),a?yt.createElement("svg",{className:"ReactCrop__crop-mask",width:"100%",height:"100%"},yt.createElement("defs",null,yt.createElement("mask",{id:`hole-${this.instanceId}`},yt.createElement("rect",{width:"100%",height:"100%",fill:"white"}),r?yt.createElement("ellipse",{cx:`${a.x+a.width/2}${a.unit}`,cy:`${a.y+a.height/2}${a.unit}`,rx:`${a.width/2}${a.unit}`,ry:`${a.height/2}${a.unit}`,fill:"black"}):yt.createElement("rect",{x:`${a.x}${a.unit}`,y:`${a.y}${a.unit}`,width:`${a.width}${a.unit}`,height:`${a.height}${a.unit}`,fill:"black"}))),yt.createElement("rect",{fill:"black",fillOpacity:.5,width:"100%",height:"100%",mask:`url(#hole-${this.instanceId})`})):void 0,E)}};zn(cl,"xOrds",["e","w"]),zn(cl,"yOrds",["n","s"]),zn(cl,"xyOrds",["nw","ne","se","sw"]),zn(cl,"nudgeStep",1),zn(cl,"nudgeStepMedium",10),zn(cl,"nudgeStepLarge",100),zn(cl,"defaultProps",{ariaLabels:{cropArea:"Use the arrow keys to move the crop selection area",nwDragHandle:"Use the arrow keys to move the north west drag handle to change the crop selection area",nDragHandle:"Use the up and down arrow keys to move the north drag handle to change the crop selection area",neDragHandle:"Use the arrow keys to move the north east drag handle to change the crop selection area",eDragHandle:"Use the up and down arrow keys to move the east drag handle to change the crop selection area",seDragHandle:"Use the arrow keys to move the south east drag handle to change the crop selection area",sDragHandle:"Use the up and down arrow keys to move the south drag handle to change the crop selection area",swDragHandle:"Use the arrow keys to move the south west drag handle to change the crop selection area",wDragHandle:"Use the up and down arrow keys to move the west drag handle to change the crop selection area"}});let jue=cl;function Lue(e,t,n){return Due(Oue({unit:"%",width:90},n,e,t),e,t)}const Xb=({isOpen:e,onClose:t,onUpload:n,title:r="Upload Profile Picture"})=>{const[i,a]=k.useState(""),[l,f]=k.useState(),[h,u]=k.useState(),[g,y]=k.useState(!1),E=k.useRef(null),C=k.useRef(null),I=L=>{if(L.target.files&&L.target.files.length>0){const G=L.target.files[0];if(!G.type.startsWith("image/")){alert("Please select an image file");return}if(G.size>5*1024*1024){alert("File size must be less than 5MB");return}const V=new FileReader;V.addEventListener("load",()=>{var z;a(((z=V.result)==null?void 0:z.toString())||""),f(void 0)}),V.readAsDataURL(G)}},M=k.useCallback(L=>{const{width:G,height:V}=L.currentTarget,z=Lue(G,V,1);f(z)},[]),O=async(L,G)=>{const V=document.createElement("canvas"),z=L.naturalWidth/L.width,B=L.naturalHeight/L.height;V.width=G.width,V.height=G.height;const J=V.getContext("2d");if(!J)throw new Error("No 2d context");return J.drawImage(L,G.x*z,G.y*B,G.width*z,G.height*B,0,0,G.width,G.height),new Promise((W,Z)=>{V.toBlob(te=>{if(!te){Z(new Error("Canvas is empty"));return}W(te)},"image/jpeg",.9)})},j=async()=>{if(!E.current||!h){alert("Please select and crop an image first");return}y(!0);try{const L=await O(E.current,h),G=`avatar-${Date.now()}.jpg`,{data:V,error:z}=await Ve.storage.from("avatars").upload(G,L,{contentType:"image/jpeg",upsert:!0});if(z)throw z;const{data:{publicUrl:B}}=Ve.storage.from("avatars").getPublicUrl(G);n(B),U()}catch(L){console.error("Upload error:",L),alert("Failed to upload image. Please try again.")}finally{y(!1)}},U=()=>{a(""),f(void 0),u(void 0),C.current&&(C.current.value=""),t()};return e?p.jsxs("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:[p.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-md p-6 shadow-2xl animate-[slideUp_0.3s_ease-out]",children:[p.jsx("h3",{className:"text-xl font-bold mb-4 tracking-tight uppercase",children:r}),i?p.jsxs("div",{className:"space-y-4",children:[p.jsx("div",{className:"max-h-64 overflow-auto",children:p.jsx(jue,{crop:l,onChange:(L,G)=>f(G),onComplete:L=>u(L),aspect:1,circularCrop:!0,children:p.jsx("img",{ref:E,alt:"Crop me",src:i,onLoad:M,className:"max-w-full"})})}),p.jsx("p",{className:"text-xs text-gray-500 text-center",children:"Drag to adjust. The image will be cropped to a square."})]}):p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-2xl p-8 text-center hover:border-blue-500 transition-colors cursor-pointer",onClick:()=>{var L;return(L=C.current)==null?void 0:L.click()},children:[p.jsx("div",{className:"w-16 h-16 bg-blue-50 rounded-full flex items-center justify-center mx-auto mb-4",children:p.jsx("i",{className:"fas fa-cloud-upload-alt text-2xl text-blue-500"})}),p.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Click to select an image"}),p.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"JPG, PNG up to 5MB"})]}),p.jsx("input",{ref:C,type:"file",accept:"image/*",className:"hidden",onChange:I})]}),p.jsxs("div",{className:"flex gap-3 mt-6",children:[p.jsx("button",{type:"button",onClick:U,className:"flex-1 py-3 bg-gray-100 text-gray-600 rounded-xl font-bold text-sm hover:bg-gray-200 transition-colors",children:"Cancel"}),i&&p.jsx("button",{type:"button",onClick:j,disabled:g||!h,className:"flex-1 py-3 bg-blue-600 text-white rounded-xl font-bold text-sm hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:g?p.jsxs(p.Fragment,{children:[p.jsx("i",{className:"fas fa-spinner fa-spin"}),"Uploading..."]}):p.jsxs(p.Fragment,{children:[p.jsx("i",{className:"fas fa-check"}),"Upload"]})})]})]}),p.jsx("style",{children:`
        @keyframes slideUp {
          from { transform: translateY(20px); opacity: 0; }
          to { transform: translateY(0); opacity: 1; }
        }
      `})]}):null},Bue=()=>new Promise(e=>{if(window.Razorpay){console.log("Razorpay SDK already loaded"),e(!0);return}console.log("Loading Razorpay SDK...");const t=document.createElement("script");t.src="https://checkout.razorpay.com/v1/checkout.js",t.onload=()=>{console.log("Razorpay SDK loaded successfully"),e(!0)},t.onerror=n=>{console.error("Failed to load Razorpay SDK:",n),e(!1)},document.body.appendChild(t)}),Uue=async(e,t,n,r)=>{if(console.log("Initializing payment with key:",t.substring(0,10)+"..."),!await Bue()){r(new Error("Failed to load Razorpay SDK"));return}if(!t){r(new Error("Razorpay API key is not configured"));return}console.log("Razorpay window object:",window.Razorpay?"Available":"Not available");const a={key:t,amount:e.amount*100,currency:e.currency||"INR",name:e.name,description:e.description,handler:l=>{n(l)},prefill:{name:e.customerName,email:e.customerEmail,contact:e.customerPhone},notes:e.notes||{},theme:{color:"#3b82f6"}};try{const l=new window.Razorpay(a);l.on("payment.failed",f=>{r(f.error||new Error("Payment failed"))}),l.open()}catch(l){r(l)}},Fue=(e,t="INR")=>new Intl.NumberFormat("en-IN",{style:"currency",currency:t}).format(e),Bj=({isOpen:e,onClose:t,amount:n,description:r,customerName:i,customerEmail:a,customerPhone:l,branchId:f,onSuccess:h,onError:u})=>{const{branches:g,currentUser:y}=Un(),[E,C]=k.useState(!1),[I,M]=k.useState(null),O=f||(y==null?void 0:y.branchId),j=g.find(G=>G.id===O),U=(j==null?void 0:j.paymentApiKey)||void 0||"";console.log("PaymentModal Debug:",{effectiveBranchId:O,currentUserBranchId:y==null?void 0:y.branchId,branchFound:!!j,paymentApiKey:j!=null&&j.paymentApiKey?"Set (hidden)":"Not set",envKey:"Not set",finalKey:U?"Set (hidden)":"Not set"});const L=async()=>{if(!U){M("Razorpay is not configured for this branch. Please contact admin.");return}C(!0),M(null),console.log("Initializing Razorpay payment:",{amount:n,key:U.substring(0,10)+"...",branch:j==null?void 0:j.name});try{await Uue({amount:n,currency:"INR",name:(j==null?void 0:j.name)||"IronFlow Gym",description:r,customerName:i,customerEmail:a,customerPhone:l,notes:{branch_id:(j==null?void 0:j.id)||"",branch_name:(j==null?void 0:j.name)||"",processed_by:(y==null?void 0:y.name)||""}},U,G=>{console.log("Razorpay payment success:",G),C(!1),h(G.razorpay_payment_id),t()},G=>{console.error("Razorpay payment error:",G),C(!1);const V=(G==null?void 0:G.description)||(G==null?void 0:G.message)||"Payment failed";M(V),u&&u(G)})}catch(G){console.error("Razorpay initialization error:",G),C(!1),M((G==null?void 0:G.message)||"Failed to initialize payment"),u&&u(G)}};return e?p.jsxs("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:[p.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-md p-8 shadow-2xl animate-[slideUp_0.3s_ease-out]",children:[p.jsxs("div",{className:"text-center mb-6",children:[p.jsx("div",{className:"w-16 h-16 bg-blue-50 rounded-full flex items-center justify-center mx-auto mb-4",children:p.jsx("i",{className:"fas fa-credit-card text-2xl text-blue-600"})}),p.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Complete Payment"}),p.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Secure payment powered by Razorpay"})]}),p.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6 mb-6",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("span",{className:"text-sm text-gray-600",children:"Amount to Pay"}),p.jsx("span",{className:"text-2xl font-black text-gray-900",children:Fue(n)})]}),p.jsx("div",{className:"text-xs text-gray-400 text-center",children:r})]}),I&&p.jsx("div",{className:"bg-red-50 border border-red-100 rounded-xl p-4 mb-6",children:p.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[p.jsx("i",{className:"fas fa-exclamation-circle"}),p.jsx("span",{className:"text-sm font-medium",children:I})]})}),!U&&p.jsx("div",{className:"bg-amber-50 border border-amber-100 rounded-xl p-4 mb-6",children:p.jsxs("div",{className:"flex items-start gap-2 text-amber-700",children:[p.jsx("i",{className:"fas fa-exclamation-triangle mt-0.5"}),p.jsxs("div",{className:"text-sm",children:[p.jsx("p",{className:"font-medium",children:"Razorpay not configured"}),p.jsx("p",{className:"text-xs mt-1 text-amber-600",children:"Add VITE_RAZORPAY_KEY_ID to your .env file or set it in Branch settings."})]})]})}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("button",{onClick:L,disabled:E||!U,className:"w-full py-4 bg-blue-600 text-white rounded-2xl font-bold text-sm uppercase tracking-wider hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:E?p.jsxs(p.Fragment,{children:[p.jsx("i",{className:"fas fa-spinner fa-spin"}),"Processing..."]}):p.jsxs(p.Fragment,{children:[p.jsx("i",{className:"fas fa-lock"}),"Pay Securely"]})}),p.jsx("button",{onClick:t,disabled:E,className:"w-full py-3 text-gray-500 font-bold text-xs uppercase tracking-wider hover:text-gray-700 transition-colors",children:"Cancel"})]}),p.jsxs("div",{className:"mt-6 flex items-center justify-center gap-4 text-gray-400",children:[p.jsx("i",{className:"fas fa-shield-alt text-lg"}),p.jsx("span",{className:"text-xs",children:"PCI DSS Compliant & Secure"})]})]}),p.jsx("style",{children:`
        @keyframes slideUp {
          from { transform: translateY(20px); opacity: 0; }
          to { transform: translateY(0); opacity: 1; }
        }
      `})]}):null},Hue=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e),zue=()=>{var ke;const{users:e,subscriptions:t,plans:n,currentUser:r,enrollMember:i,attendance:a,updateUser:l,verifyTransactionCode:f,showToast:h}=Un(),[u,g]=k.useState(""),[y,E]=k.useState(!1),[C,I]=k.useState(null),[M,O]=k.useState(null),[j,U]=k.useState(!1),[L,G]=k.useState({name:"",email:"",planId:((ke=n[0])==null?void 0:ke.id)||"",emergencyContact:"",address:"",avatar:"",startDate:new Date().toISOString().split("T")[0],discount:0,paymentMethod:"ONLINE",transactionCode:""}),[V,z]=k.useState({name:"",email:"",emergencyContact:"",address:"",avatar:""}),[B,J]=k.useState(!1),[W,Z]=k.useState(!1),[te,Y]=k.useState(!1),[pe,Te]=k.useState(null),de=e.filter(ie=>ie.role===Oe.MEMBER&&((r==null?void 0:r.role)===Oe.SUPER_ADMIN||ie.branchId===(r==null?void 0:r.branchId))).filter(ie=>{var ue;return ie.name.toLowerCase().includes(u.toLowerCase())||((ue=ie.memberId)==null?void 0:ue.toLowerCase().includes(u.toLowerCase()))}),ge=async ie=>{if(ie.preventDefault(),L.paymentMethod==="ONLINE"){const ue=n.find(me=>me.id===L.planId);if(!ue){h("Please select a valid plan","error");return}const qe=Math.max(0,ue.price-Number(L.discount));Te({userData:{name:L.name,email:L.email,emergencyContact:L.emergencyContact,address:L.address,phone:L.emergencyContact,avatar:L.avatar},planId:L.planId,discount:Number(L.discount),amount:qe,planName:ue.name,branchId:r==null?void 0:r.branchId}),Y(!0);return}if(L.paymentMethod==="CASH"||L.paymentMethod==="CARD"){if(!L.transactionCode){h("PIN Verification Required for Cash/Card","error");return}U(!0);const ue=await f(L.transactionCode);if(U(!1),!ue){h("Invalid or Expired Transaction PIN","error");return}}De()},De=ie=>{var ue;i({name:L.name,email:L.email,emergencyContact:L.emergencyContact,address:L.address,avatar:L.avatar},L.planId,void 0,void 0,Number(L.discount),L.paymentMethod,L.startDate),ie&&h(`Payment successful! ID: ${ie}`,"success"),E(!1),Y(!1),Te(null),G({name:"",email:"",planId:((ue=n[0])==null?void 0:ue.id)||"",emergencyContact:"",address:"",avatar:"",startDate:new Date().toISOString().split("T")[0],discount:0,paymentMethod:"ONLINE",transactionCode:""})},we=ie=>{De(ie)},$e=ie=>{ie.preventDefault(),M&&(l(M.id,V),I(null),O(null))},ne=ie=>{O(ie),I("logs")},re=ie=>{O(ie),z({name:ie.name,email:ie.email,emergencyContact:ie.emergencyContact||"",address:ie.address||"",avatar:ie.avatar||""}),I("manage")},he=ie=>{z({...V,avatar:ie}),h("Profile picture updated","success")},se=ie=>{G({...L,avatar:ie}),J(!1),h("Profile picture added","success")};return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Member Directory"}),p.jsx("p",{className:"text-gray-500",children:"Manage athletes from across India"})]}),p.jsxs("button",{onClick:()=>E(!0),className:"bg-blue-600 text-white px-6 py-2 rounded-xl font-bold hover:bg-blue-700 transition-colors flex items-center gap-2 shadow-lg shadow-blue-200",children:[p.jsx("i",{className:"fas fa-plus"})," ADD NEW MEMBER"]})]}),p.jsx("div",{className:"bg-white p-4 rounded-2xl border shadow-sm flex flex-col md:flex-row items-center gap-4",children:p.jsxs("div",{className:"flex-1 relative w-full",children:[p.jsx("input",{type:"text",placeholder:"Search by name or ID...",className:"w-full pl-10 pr-4 py-3 bg-gray-50 border border-gray-100 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none",value:u,onChange:ie=>g(ie.target.value)}),p.jsx("i",{className:"fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"})]})}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:de.map(ie=>{const ue=t.find(Je=>Je.memberId===ie.id),qe=n.find(Je=>Je.id===(ue==null?void 0:ue.planId)),me=(ue==null?void 0:ue.status)===Na.ACTIVE;return p.jsxs("div",{className:"bg-white rounded-2xl border p-6 hover:shadow-xl transition-all group relative overflow-hidden",children:[p.jsxs("div",{className:"flex items-start justify-between mb-4",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsxs("div",{className:"relative",children:[p.jsx("img",{src:ie.avatar,alt:"",className:"w-16 h-16 rounded-2xl object-cover border-2 border-white shadow-md"}),me&&p.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-green-500 border-2 border-white rounded-full"})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"font-bold text-lg text-gray-900",children:ie.name}),p.jsx("p",{className:"text-xs font-mono text-gray-400 tracking-tighter uppercase",children:ie.memberId})]})]}),p.jsx("div",{className:`px-2 py-1 rounded-md text-[10px] font-bold uppercase tracking-wider ${me?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:me?"Active":"Expired"})]}),p.jsxs("div",{className:"space-y-3 pt-4 border-t border-gray-50",children:[p.jsxs("div",{className:"flex justify-between text-xs",children:[p.jsx("span",{className:"text-gray-400 uppercase font-bold",children:"Subscription"}),p.jsx("span",{className:"font-bold text-gray-700",children:(qe==null?void 0:qe.name)||"No Plan"})]}),p.jsxs("div",{className:"flex justify-between text-xs",children:[p.jsx("span",{className:"text-red-500 uppercase font-black text-[9px] tracking-widest",children:"Emergency"}),p.jsx("span",{className:"font-black text-slate-700",children:ie.emergencyContact||"MISSING"})]}),p.jsxs("div",{className:"flex justify-between text-xs",children:[p.jsx("span",{className:"text-gray-400 uppercase font-bold",children:"Address"}),p.jsx("span",{className:"font-medium text-gray-700 truncate max-w-[150px]",title:ie.address,children:ie.address||"N/A"})]}),p.jsxs("div",{className:"flex justify-between text-xs",children:[p.jsx("span",{className:"text-gray-400 uppercase font-bold",children:"Valid Until"}),p.jsx("span",{className:"font-medium text-gray-700",children:(ue==null?void 0:ue.endDate)||"N/A"})]})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-6",children:[p.jsx("button",{onClick:()=>ne(ie),className:"py-2 bg-gray-50 text-gray-500 rounded-lg text-xs font-bold hover:bg-gray-100 transition-colors",children:"VIEW LOGS"}),((r==null?void 0:r.role)===Oe.SUPER_ADMIN||(r==null?void 0:r.role)===Oe.BRANCH_ADMIN)&&p.jsx("button",{onClick:()=>re(ie),className:"py-2 bg-blue-50 text-blue-600 rounded-lg text-xs font-bold hover:bg-blue-100 transition-colors",children:"MANAGE"})]})]},ie.id)})}),y&&p.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:p.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-md overflow-hidden shadow-2xl animate-[slideUp_0.3s_ease-out] max-h-[90vh] overflow-y-auto scrollbar-hide",children:[p.jsxs("div",{className:"bg-blue-600 p-6 text-white flex justify-between items-center sticky top-0 z-10",children:[p.jsx("h3",{className:"text-xl font-bold uppercase tracking-tight leading-none",children:"Athlete Enrollment"}),p.jsx("button",{onClick:()=>E(!1),children:p.jsx("i",{className:"fas fa-times"})})]}),p.jsxs("form",{onSubmit:ge,className:"p-8 space-y-6",children:[p.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[p.jsx("div",{onClick:()=>Z(!0),className:"w-24 h-24 rounded-2xl bg-gray-100 border-2 border-dashed border-gray-300 flex items-center justify-center cursor-pointer hover:bg-gray-50 hover:border-blue-400 transition-all overflow-hidden",children:L.avatar?p.jsx("img",{src:L.avatar,alt:"Profile",className:"w-full h-full object-cover"}):p.jsxs("div",{className:"text-center",children:[p.jsx("i",{className:"fas fa-camera text-2xl text-gray-400"}),p.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:"Add Photo"})]})}),L.avatar&&p.jsx("button",{type:"button",onClick:()=>G({...L,avatar:""}),className:"text-xs text-red-500 font-bold hover:text-red-700",children:"Remove Photo"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Full Name"}),p.jsx("input",{required:!0,type:"text",className:"w-full p-4 bg-gray-50 border rounded-xl font-bold",placeholder:"Arjun Reddy",value:L.name,onChange:ie=>G({...L,name:ie.target.value})})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Address"}),p.jsx("textarea",{className:"w-full p-4 bg-gray-50 border rounded-xl font-bold text-sm",placeholder:"Street, City, State, PIN",value:L.address,onChange:ie=>G({...L,address:ie.target.value}),rows:2})]}),p.jsxs("div",{className:"space-y-2 p-4 bg-red-50 rounded-2xl border border-red-100",children:[p.jsxs("label",{className:"text-[10px] font-black text-red-600 uppercase tracking-widest flex items-center gap-2 mb-1",children:[p.jsx("i",{className:"fas fa-truck-medical"})," Emergency Contact Number"]}),p.jsx("input",{required:!0,type:"tel",className:"w-full p-3 bg-white border border-red-100 rounded-xl font-black text-red-700",placeholder:"+91 XXXXX XXXXX",value:L.emergencyContact,onChange:ie=>G({...L,emergencyContact:ie.target.value})})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Email Address"}),p.jsx("input",{required:!0,type:"email",className:"w-full p-4 bg-gray-50 border rounded-xl font-bold",placeholder:"athlete@ironflow.in",value:L.email,onChange:ie=>G({...L,email:ie.target.value})})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Select Initial Plan"}),p.jsx("select",{className:"w-full p-4 bg-gray-50 border rounded-xl font-bold uppercase text-xs",value:L.planId,onChange:ie=>G({...L,planId:ie.target.value}),children:n.map(ie=>p.jsxs("option",{value:ie.id,children:[ie.name," - ",Hue(ie.price)]},ie.id))})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("label",{className:"text-xs font-bold text-indigo-600 uppercase tracking-widest flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-calendar-alt"})," Membership Start Date"]}),p.jsx("input",{type:"date",required:!0,className:"w-full p-4 bg-indigo-50 border border-indigo-100 rounded-xl font-bold",value:L.startDate,onChange:ie=>G({...L,startDate:ie.target.value})}),p.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"Plan will start from this date"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Payment Method"}),p.jsxs("select",{className:"w-full p-4 bg-gray-50 border rounded-xl font-bold uppercase text-xs",value:L.paymentMethod,onChange:ie=>G({...L,paymentMethod:ie.target.value}),children:[p.jsx("option",{value:"ONLINE",children:"Online (UPI / Gateway)"}),p.jsx("option",{value:"CASH",children:"Cash"}),p.jsx("option",{value:"CARD",children:"Credit / Debit Card"})]})]}),(L.paymentMethod==="CASH"||L.paymentMethod==="CARD")&&p.jsxs("div",{className:"space-y-2",children:[p.jsxs("label",{className:"text-xs font-bold text-indigo-600 uppercase tracking-widest flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-lock"})," Transaction Authorization Code"]}),p.jsx("input",{type:"text",required:!0,disabled:j,className:"w-full p-4 bg-indigo-50 border border-indigo-100 rounded-xl font-mono text-center text-lg tracking-[0.3em] font-bold outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"XXXXXX",value:L.transactionCode,onChange:ie=>G({...L,transactionCode:ie.target.value})}),p.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"Ask Branch Admin to generate a one-time code."})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Discount Amount ()"}),p.jsx("input",{type:"number",min:"0",className:"w-full p-4 bg-gray-50 border rounded-xl font-bold",placeholder:"0",value:L.discount,onChange:ie=>G({...L,discount:Number(ie.target.value)})})]}),p.jsx("button",{type:"submit",className:"w-full py-5 bg-blue-600 text-white rounded-[1.5rem] font-black uppercase tracking-widest shadow-2xl shadow-blue-100 active:scale-95 transition-all",children:"ACTIVATE MEMBERSHIP"})]})]})}),C==="logs"&&M&&p.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:p.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-lg overflow-hidden shadow-2xl animate-[slideUp_0.3s_ease-out]",children:[p.jsxs("div",{className:"bg-slate-900 p-6 text-white flex justify-between items-center",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("img",{src:M.avatar,className:"w-10 h-10 rounded-full border border-slate-700",alt:""}),p.jsxs("div",{children:[p.jsx("h3",{className:"font-bold",children:M.name}),p.jsx("p",{className:"text-[10px] uppercase text-slate-400",children:"Attendance History"})]})]}),p.jsx("button",{onClick:()=>I(null),className:"text-slate-400 hover:text-white",children:p.jsx("i",{className:"fas fa-times"})})]}),p.jsx("div",{className:"p-8 max-h-[60vh] overflow-y-auto",children:a.filter(ie=>ie.userId===M.id).length===0?p.jsx("div",{className:"text-center py-10 text-gray-400 italic",children:"No attendance records found for this member."}):p.jsx("div",{className:"space-y-4",children:a.filter(ie=>ie.userId===M.id).reverse().map(ie=>p.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-2xl border",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"bg-blue-100 text-blue-600 w-8 h-8 rounded-full flex items-center justify-center",children:p.jsx("i",{className:"fas fa-check text-xs"})}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm font-bold text-gray-900",children:ie.date}),p.jsxs("p",{className:"text-[10px] text-gray-500 uppercase",children:["Checked In at ",ie.timeIn]})]})]}),p.jsx("span",{className:"text-[10px] font-bold bg-white px-2 py-1 rounded border text-gray-400",children:"LOGGED"})]},ie.id))})})]})}),C==="manage"&&M&&p.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:p.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-md overflow-hidden shadow-2xl animate-[slideUp_0.3s_ease-out] max-h-[90vh] overflow-y-auto scrollbar-hide",children:[p.jsxs("div",{className:"bg-indigo-600 p-6 text-white flex justify-between items-center sticky top-0 z-10",children:[p.jsx("h3",{className:"text-xl font-bold uppercase tracking-tight leading-none",children:"Manage Profile"}),p.jsx("button",{onClick:()=>I(null),children:p.jsx("i",{className:"fas fa-times"})})]}),p.jsxs("form",{onSubmit:$e,className:"p-8 space-y-6",children:[p.jsxs("div",{className:"flex flex-col items-center gap-3",children:[p.jsxs("div",{className:"relative",children:[p.jsx("img",{src:V.avatar||"https://i.pravatar.cc/150?u=default",alt:"Profile",className:"w-24 h-24 rounded-2xl object-cover border-4 border-white shadow-lg"}),p.jsx("button",{type:"button",onClick:()=>J(!0),className:"absolute -bottom-2 -right-2 w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center shadow-lg hover:bg-blue-700 transition-colors",children:p.jsx("i",{className:"fas fa-camera text-xs"})})]}),p.jsx("p",{className:"text-xs text-gray-400 font-medium",children:"Click camera to change photo"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Athlete Name"}),p.jsx("input",{required:!0,type:"text",className:"w-full p-4 bg-gray-50 border rounded-xl font-bold",value:V.name,onChange:ie=>z({...V,name:ie.target.value})})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Address"}),p.jsx("textarea",{className:"w-full p-4 bg-gray-50 border rounded-xl font-bold text-sm",value:V.address,onChange:ie=>z({...V,address:ie.target.value}),rows:2})]}),p.jsxs("div",{className:"space-y-2 p-4 bg-red-50 rounded-2xl border border-red-100",children:[p.jsxs("label",{className:"text-[10px] font-black text-red-600 uppercase tracking-widest flex items-center gap-2 mb-1",children:[p.jsx("i",{className:"fas fa-truck-medical"})," Emergency Contact Number"]}),p.jsx("input",{required:!0,type:"tel",className:"w-full p-3 bg-white border border-red-100 rounded-xl font-black text-red-700",value:V.emergencyContact,onChange:ie=>z({...V,emergencyContact:ie.target.value})})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Contact Email"}),p.jsx("input",{required:!0,type:"email",className:"w-full p-4 bg-gray-50 border rounded-xl font-bold",value:V.email,onChange:ie=>z({...V,email:ie.target.value})})]}),p.jsxs("div",{className:"p-4 bg-blue-50 rounded-2xl border border-blue-100 text-[10px] font-black uppercase text-blue-600 tracking-widest leading-relaxed",children:[p.jsx("i",{className:"fas fa-info-circle mr-2"}),"Safety contact information is visible to receptionist and managers in case of emergency."]}),p.jsx("button",{type:"submit",className:"w-full py-5 bg-indigo-600 text-white rounded-[1.5rem] font-black uppercase tracking-widest shadow-2xl shadow-indigo-100 active:scale-95 transition-all",children:"COMMIT CHANGES"})]})]})}),p.jsx(Xb,{isOpen:B,onClose:()=>J(!1),onUpload:he,title:"Update Member Photo"}),p.jsx(Xb,{isOpen:W,onClose:()=>Z(!1),onUpload:se,title:"Add Athlete Photo"}),p.jsx(Bj,{isOpen:te,onClose:()=>{Y(!1),Te(null)},amount:(pe==null?void 0:pe.amount)||0,description:`${(pe==null?void 0:pe.planName)||"Gym Membership"} - ${L.name}`,customerName:L.name,customerEmail:L.email,customerPhone:L.emergencyContact,branchId:pe==null?void 0:pe.branchId,onSuccess:we,onError:ie=>{console.error("Payment error:",ie),h("Payment failed. Please try again.","error")}}),p.jsx("style",{children:`
        @keyframes slideUp {
          from { transform: translateY(20px); opacity: 0; }
          to { transform: translateY(0); opacity: 1; }
        }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
      `})]})};var et;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(et||(et={}));var UO=new Map([[et.QR_CODE,"QR_CODE"],[et.AZTEC,"AZTEC"],[et.CODABAR,"CODABAR"],[et.CODE_39,"CODE_39"],[et.CODE_93,"CODE_93"],[et.CODE_128,"CODE_128"],[et.DATA_MATRIX,"DATA_MATRIX"],[et.MAXICODE,"MAXICODE"],[et.ITF,"ITF"],[et.EAN_13,"EAN_13"],[et.EAN_8,"EAN_8"],[et.PDF_417,"PDF_417"],[et.RSS_14,"RSS_14"],[et.RSS_EXPANDED,"RSS_EXPANDED"],[et.UPC_A,"UPC_A"],[et.UPC_E,"UPC_E"],[et.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),FO;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(FO||(FO={}));function Gue(e){return Object.values(et).includes(e)}var wl;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(wl||(wl={}));var qa=(function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[wl.SCAN_TYPE_CAMERA,wl.SCAN_TYPE_FILE],e})(),Uj=(function(){function e(t,n){this.format=t,this.formatName=n}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!UO.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,UO.get(t))},e})(),HO=(function(){function e(){}return e.createFromText=function(t){var n={text:t};return{decodedText:t,result:n}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e})(),Jb;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Jb||(Jb={}));var Fj=(function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:Jb.UNKWOWN_ERROR}},e})(),Hj=(function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,n){(this.verbose||n===!0)&&console.error(t)},e.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e})();function ms(e){return typeof e>"u"||e===null}function Vue(e,t,n){return e>n?n:e<t?t:e}var Ru=(function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e})(),pn=(function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(t){return"Last Match: ".concat(t)},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.torchOnButton=function(){return"Switch On Torch"},e.torchOffButton=function(){return"Switch Off Torch"},e.torchOnFailedMessage=function(){return"Failed to turn on torch"},e.torchOffFailedMessage=function(){return"Failed to turn off torch"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e.fileSelectionChooseImage=function(){return"Choose Image"},e.fileSelectionChooseAnother=function(){return"Choose Another"},e.fileSelectionNoImageSelected=function(){return"No image choosen"},e.anonymousCameraPrefix=function(){return"Anonymous Camera"},e.dragAndDropMessage=function(){return"Or drop an image to scan"},e.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},e.zoom=function(){return"zoom"},e.loadingImage=function(){return"Loading image..."},e.cameraScanAltText=function(){return"Camera based scan"},e.fileScanAltText=function(){return"Fule based scan"},e})(),zO=(function(){function e(){}return e.poweredBy=function(){return"Powered by "},e.reportIssues=function(){return"Report issues"},e})(),zj=(function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,n){if(typeof t!="object"){var r=typeof t;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var i=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],a=new Set(i),l=Object.keys(t),f=0,h=l;f<h.length;f++){var u=h[f];if(a.has(u))return n.logError("".concat(u," is not supported videoConstaints."),!0),!1}return!0},e})(),xf={exports:{}},que=xf.exports,GO;function $ue(){return GO||(GO=1,(function(e,t){(function(n,r){r(t)})(que,(function(n){function r(q){return q==null}var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,o){q.__proto__=o}||function(q,o){for(var d in o)o.hasOwnProperty(d)&&(q[d]=o[d])};function a(q,o){i(q,o);function d(){this.constructor=q}q.prototype=o===null?Object.create(o):(d.prototype=o.prototype,new d)}function l(q,o){var d=Object.setPrototypeOf;d?d(q,o):q.__proto__=o}function f(q,o){o===void 0&&(o=q.constructor);var d=Error.captureStackTrace;d&&d(q,o)}var h=(function(q){a(o,q);function o(d){var m=this.constructor,v=q.call(this,d)||this;return Object.defineProperty(v,"name",{value:m.name,enumerable:!1}),l(v,m.prototype),f(v),v}return o})(Error);class u extends h{constructor(o=void 0){super(o),this.message=o}getKind(){return this.constructor.kind}}u.kind="Exception";class g extends u{}g.kind="ArgumentException";class y extends u{}y.kind="IllegalArgumentException";class E{constructor(o){if(this.binarizer=o,o===null)throw new y("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(o,d){return this.binarizer.getBlackRow(o,d)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(o,d,m,v){const b=this.binarizer.getLuminanceSource().crop(o,d,m,v);return new E(this.binarizer.createBinarizer(b))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const o=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new E(this.binarizer.createBinarizer(o))}rotateCounterClockwise45(){const o=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new E(this.binarizer.createBinarizer(o))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class C extends u{static getChecksumInstance(){return new C}}C.kind="ChecksumException";class I{constructor(o){this.source=o}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class M{static arraycopy(o,d,m,v,b){for(;b--;)m[v++]=o[d++]}static currentTimeMillis(){return Date.now()}}class O extends u{}O.kind="IndexOutOfBoundsException";class j extends O{constructor(o=void 0,d=void 0){super(d),this.index=o,this.message=d}}j.kind="ArrayIndexOutOfBoundsException";class U{static fill(o,d){for(let m=0,v=o.length;m<v;m++)o[m]=d}static fillWithin(o,d,m,v){U.rangeCheck(o.length,d,m);for(let b=d;b<m;b++)o[b]=v}static rangeCheck(o,d,m){if(d>m)throw new y("fromIndex("+d+") > toIndex("+m+")");if(d<0)throw new j(d);if(m>o)throw new j(m)}static asList(...o){return o}static create(o,d,m){return Array.from({length:o}).map(b=>Array.from({length:d}).fill(m))}static createInt32Array(o,d,m){return Array.from({length:o}).map(b=>Int32Array.from({length:d}).fill(m))}static equals(o,d){if(!o||!d||!o.length||!d.length||o.length!==d.length)return!1;for(let m=0,v=o.length;m<v;m++)if(o[m]!==d[m])return!1;return!0}static hashCode(o){if(o===null)return 0;let d=1;for(const m of o)d=31*d+m;return d}static fillUint8Array(o,d){for(let m=0;m!==o.length;m++)o[m]=d}static copyOf(o,d){return o.slice(0,d)}static copyOfUint8Array(o,d){if(o.length<=d){const m=new Uint8Array(d);return m.set(o),m}return o.slice(0,d)}static copyOfRange(o,d,m){const v=m-d,b=new Int32Array(v);return M.arraycopy(o,d,b,0,v),b}static binarySearch(o,d,m){m===void 0&&(m=U.numberComparator);let v=0,b=o.length-1;for(;v<=b;){const S=b+v>>1,N=m(d,o[S]);if(N>0)v=S+1;else if(N<0)b=S-1;else return S}return-v-1}static numberComparator(o,d){return o-d}}class L{static numberOfTrailingZeros(o){let d;if(o===0)return 32;let m=31;return d=o<<16,d!==0&&(m-=16,o=d),d=o<<8,d!==0&&(m-=8,o=d),d=o<<4,d!==0&&(m-=4,o=d),d=o<<2,d!==0&&(m-=2,o=d),m-(o<<1>>>31)}static numberOfLeadingZeros(o){if(o===0)return 32;let d=1;return o>>>16||(d+=16,o<<=16),o>>>24||(d+=8,o<<=8),o>>>28||(d+=4,o<<=4),o>>>30||(d+=2,o<<=2),d-=o>>>31,d}static toHexString(o){return o.toString(16)}static toBinaryString(o){return String(parseInt(String(o),2))}static bitCount(o){return o=o-(o>>>1&1431655765),o=(o&858993459)+(o>>>2&858993459),o=o+(o>>>4)&252645135,o=o+(o>>>8),o=o+(o>>>16),o&63}static truncDivision(o,d){return Math.trunc(o/d)}static parseInt(o,d=void 0){return parseInt(o,d)}}L.MIN_VALUE_32_BITS=-2147483648,L.MAX_VALUE=Number.MAX_SAFE_INTEGER;class G{constructor(o,d){o===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=o,d==null?this.bits=G.makeArray(o):this.bits=d)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(o){if(o>this.bits.length*32){const d=G.makeArray(o);M.arraycopy(this.bits,0,d,0,this.bits.length),this.bits=d}}get(o){return(this.bits[Math.floor(o/32)]&1<<(o&31))!==0}set(o){this.bits[Math.floor(o/32)]|=1<<(o&31)}flip(o){this.bits[Math.floor(o/32)]^=1<<(o&31)}getNextSet(o){const d=this.size;if(o>=d)return d;const m=this.bits;let v=Math.floor(o/32),b=m[v];b&=~((1<<(o&31))-1);const S=m.length;for(;b===0;){if(++v===S)return d;b=m[v]}const N=v*32+L.numberOfTrailingZeros(b);return N>d?d:N}getNextUnset(o){const d=this.size;if(o>=d)return d;const m=this.bits;let v=Math.floor(o/32),b=~m[v];b&=~((1<<(o&31))-1);const S=m.length;for(;b===0;){if(++v===S)return d;b=~m[v]}const N=v*32+L.numberOfTrailingZeros(b);return N>d?d:N}setBulk(o,d){this.bits[Math.floor(o/32)]=d}setRange(o,d){if(d<o||o<0||d>this.size)throw new y;if(d===o)return;d--;const m=Math.floor(o/32),v=Math.floor(d/32),b=this.bits;for(let S=m;S<=v;S++){const N=S>m?0:o&31,P=(2<<(S<v?31:d&31))-(1<<N);b[S]|=P}}clear(){const o=this.bits.length,d=this.bits;for(let m=0;m<o;m++)d[m]=0}isRange(o,d,m){if(d<o||o<0||d>this.size)throw new y;if(d===o)return!0;d--;const v=Math.floor(o/32),b=Math.floor(d/32),S=this.bits;for(let N=v;N<=b;N++){const R=N>v?0:o&31,F=(2<<(N<b?31:d&31))-(1<<R)&4294967295;if((S[N]&F)!==(m?F:0))return!1}return!0}appendBit(o){this.ensureCapacity(this.size+1),o&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(o,d){if(d<0||d>32)throw new y("Num bits must be between 0 and 32");this.ensureCapacity(this.size+d);for(let m=d;m>0;m--)this.appendBit((o>>m-1&1)===1)}appendBitArray(o){const d=o.size;this.ensureCapacity(this.size+d);for(let m=0;m<d;m++)this.appendBit(o.get(m))}xor(o){if(this.size!==o.size)throw new y("Sizes don't match");const d=this.bits;for(let m=0,v=d.length;m<v;m++)d[m]^=o.bits[m]}toBytes(o,d,m,v){for(let b=0;b<v;b++){let S=0;for(let N=0;N<8;N++)this.get(o)&&(S|=1<<7-N),o++;d[m+b]=S}}getBitArray(){return this.bits}reverse(){const o=new Int32Array(this.bits.length),d=Math.floor((this.size-1)/32),m=d+1,v=this.bits;for(let b=0;b<m;b++){let S=v[b];S=S>>1&1431655765|(S&1431655765)<<1,S=S>>2&858993459|(S&858993459)<<2,S=S>>4&252645135|(S&252645135)<<4,S=S>>8&16711935|(S&16711935)<<8,S=S>>16&65535|(S&65535)<<16,o[d-b]=S}if(this.size!==m*32){const b=m*32-this.size;let S=o[0]>>>b;for(let N=1;N<m;N++){const R=o[N];S|=R<<32-b,o[N-1]=S,S=R>>>b}o[m-1]=S}this.bits=o}static makeArray(o){return new Int32Array(Math.floor((o+31)/32))}equals(o){if(!(o instanceof G))return!1;const d=o;return this.size===d.size&&U.equals(this.bits,d.bits)}hashCode(){return 31*this.size+U.hashCode(this.bits)}toString(){let o="";for(let d=0,m=this.size;d<m;d++)(d&7)===0&&(o+=" "),o+=this.get(d)?"X":".";return o}clone(){return new G(this.size,this.bits.slice())}}var V;(function(q){q[q.OTHER=0]="OTHER",q[q.PURE_BARCODE=1]="PURE_BARCODE",q[q.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",q[q.TRY_HARDER=3]="TRY_HARDER",q[q.CHARACTER_SET=4]="CHARACTER_SET",q[q.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",q[q.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",q[q.ASSUME_GS1=7]="ASSUME_GS1",q[q.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",q[q.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",q[q.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(V||(V={}));var z=V;class B extends u{static getFormatInstance(){return new B}}B.kind="FormatException";var J;(function(q){q[q.Cp437=0]="Cp437",q[q.ISO8859_1=1]="ISO8859_1",q[q.ISO8859_2=2]="ISO8859_2",q[q.ISO8859_3=3]="ISO8859_3",q[q.ISO8859_4=4]="ISO8859_4",q[q.ISO8859_5=5]="ISO8859_5",q[q.ISO8859_6=6]="ISO8859_6",q[q.ISO8859_7=7]="ISO8859_7",q[q.ISO8859_8=8]="ISO8859_8",q[q.ISO8859_9=9]="ISO8859_9",q[q.ISO8859_10=10]="ISO8859_10",q[q.ISO8859_11=11]="ISO8859_11",q[q.ISO8859_13=12]="ISO8859_13",q[q.ISO8859_14=13]="ISO8859_14",q[q.ISO8859_15=14]="ISO8859_15",q[q.ISO8859_16=15]="ISO8859_16",q[q.SJIS=16]="SJIS",q[q.Cp1250=17]="Cp1250",q[q.Cp1251=18]="Cp1251",q[q.Cp1252=19]="Cp1252",q[q.Cp1256=20]="Cp1256",q[q.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",q[q.UTF8=22]="UTF8",q[q.ASCII=23]="ASCII",q[q.Big5=24]="Big5",q[q.GB18030=25]="GB18030",q[q.EUC_KR=26]="EUC_KR"})(J||(J={}));class W{constructor(o,d,m,...v){this.valueIdentifier=o,this.name=m,typeof d=="number"?this.values=Int32Array.from([d]):this.values=d,this.otherEncodingNames=v,W.VALUE_IDENTIFIER_TO_ECI.set(o,this),W.NAME_TO_ECI.set(m,this);const b=this.values;for(let S=0,N=b.length;S!==N;S++){const R=b[S];W.VALUES_TO_ECI.set(R,this)}for(const S of v)W.NAME_TO_ECI.set(S,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(o){if(o<0||o>=900)throw new B("incorect value");const d=W.VALUES_TO_ECI.get(o);if(d===void 0)throw new B("incorect value");return d}static getCharacterSetECIByName(o){const d=W.NAME_TO_ECI.get(o);if(d===void 0)throw new B("incorect value");return d}equals(o){if(!(o instanceof W))return!1;const d=o;return this.getName()===d.getName()}}W.VALUE_IDENTIFIER_TO_ECI=new Map,W.VALUES_TO_ECI=new Map,W.NAME_TO_ECI=new Map,W.Cp437=new W(J.Cp437,Int32Array.from([0,2]),"Cp437"),W.ISO8859_1=new W(J.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),W.ISO8859_2=new W(J.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),W.ISO8859_3=new W(J.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),W.ISO8859_4=new W(J.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),W.ISO8859_5=new W(J.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),W.ISO8859_6=new W(J.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),W.ISO8859_7=new W(J.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),W.ISO8859_8=new W(J.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),W.ISO8859_9=new W(J.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),W.ISO8859_10=new W(J.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),W.ISO8859_11=new W(J.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),W.ISO8859_13=new W(J.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),W.ISO8859_14=new W(J.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),W.ISO8859_15=new W(J.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),W.ISO8859_16=new W(J.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),W.SJIS=new W(J.SJIS,20,"SJIS","Shift_JIS"),W.Cp1250=new W(J.Cp1250,21,"Cp1250","windows-1250"),W.Cp1251=new W(J.Cp1251,22,"Cp1251","windows-1251"),W.Cp1252=new W(J.Cp1252,23,"Cp1252","windows-1252"),W.Cp1256=new W(J.Cp1256,24,"Cp1256","windows-1256"),W.UnicodeBigUnmarked=new W(J.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),W.UTF8=new W(J.UTF8,26,"UTF8","UTF-8"),W.ASCII=new W(J.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),W.Big5=new W(J.Big5,28,"Big5"),W.GB18030=new W(J.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),W.EUC_KR=new W(J.EUC_KR,30,"EUC_KR","EUC-KR");class Z extends u{}Z.kind="UnsupportedOperationException";class te{static decode(o,d){const m=this.encodingName(d);return this.customDecoder?this.customDecoder(o,m):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(m)?this.decodeFallback(o,m):new TextDecoder(m).decode(o)}static shouldDecodeOnFallback(o){return!te.isBrowser()&&o==="ISO-8859-1"}static encode(o,d){const m=this.encodingName(d);return this.customEncoder?this.customEncoder(o,m):typeof TextEncoder>"u"?this.encodeFallback(o):new TextEncoder().encode(o)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(o){return typeof o=="string"?o:o.getName()}static encodingCharacterSet(o){return o instanceof W?o:W.getCharacterSetECIByName(o)}static decodeFallback(o,d){const m=this.encodingCharacterSet(d);if(te.isDecodeFallbackSupported(m)){let v="";for(let b=0,S=o.length;b<S;b++){let N=o[b].toString(16);N.length<2&&(N="0"+N),v+="%"+N}return decodeURIComponent(v)}if(m.equals(W.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(o.buffer));throw new Z(`Encoding ${this.encodingName(d)} not supported by fallback.`)}static isDecodeFallbackSupported(o){return o.equals(W.UTF8)||o.equals(W.ISO8859_1)||o.equals(W.ASCII)}static encodeFallback(o){const m=btoa(unescape(encodeURIComponent(o))).split(""),v=[];for(let b=0;b<m.length;b++)v.push(m[b].charCodeAt(0));return new Uint8Array(v)}}class Y{static castAsNonUtf8Char(o,d=null){const m=d?d.getName():this.ISO88591;return te.decode(new Uint8Array([o]),m)}static guessEncoding(o,d){if(d!=null&&d.get(z.CHARACTER_SET)!==void 0)return d.get(z.CHARACTER_SET).toString();const m=o.length;let v=!0,b=!0,S=!0,N=0,R=0,P=0,F=0,$=0,K=0,ee=0,oe=0,ce=0,be=0,_e=0;const Ge=o.length>3&&o[0]===239&&o[1]===187&&o[2]===191;for(let He=0;He<m&&(v||b||S);He++){const Fe=o[He]&255;S&&(N>0?(Fe&128)===0?S=!1:N--:(Fe&128)!==0&&((Fe&64)===0?S=!1:(N++,(Fe&32)===0?R++:(N++,(Fe&16)===0?P++:(N++,(Fe&8)===0?F++:S=!1))))),v&&(Fe>127&&Fe<160?v=!1:Fe>159&&(Fe<192||Fe===215||Fe===247)&&_e++),b&&($>0?Fe<64||Fe===127||Fe>252?b=!1:$--:Fe===128||Fe===160||Fe>239?b=!1:Fe>160&&Fe<224?(K++,oe=0,ee++,ee>ce&&(ce=ee)):Fe>127?($++,ee=0,oe++,oe>be&&(be=oe)):(ee=0,oe=0))}return S&&N>0&&(S=!1),b&&$>0&&(b=!1),S&&(Ge||R+P+F>0)?Y.UTF8:b&&(Y.ASSUME_SHIFT_JIS||ce>=3||be>=3)?Y.SHIFT_JIS:v&&b?ce===2&&K===2||_e*10>=m?Y.SHIFT_JIS:Y.ISO88591:v?Y.ISO88591:b?Y.SHIFT_JIS:S?Y.UTF8:Y.PLATFORM_DEFAULT_ENCODING}static format(o,...d){let m=-1;function v(S,N,R,P,F,$){if(S==="%%")return"%";if(d[++m]===void 0)return;S=P?parseInt(P.substr(1)):void 0;let K=F?parseInt(F.substr(1)):void 0,ee;switch($){case"s":ee=d[m];break;case"c":ee=d[m][0];break;case"f":ee=parseFloat(d[m]).toFixed(S);break;case"p":ee=parseFloat(d[m]).toPrecision(S);break;case"e":ee=parseFloat(d[m]).toExponential(S);break;case"x":ee=parseInt(d[m]).toString(K||16);break;case"d":ee=parseFloat(parseInt(d[m],K||10).toPrecision(S)).toFixed(0);break}ee=typeof ee=="object"?JSON.stringify(ee):(+ee).toString(K);let oe=parseInt(R),ce=R&&R[0]+""=="0"?"0":" ";for(;ee.length<oe;)ee=N!==void 0?ee+ce:ce+ee;return ee}let b=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return o.replace(b,v)}static getBytes(o,d){return te.encode(o,d)}static getCharCode(o,d=0){return o.charCodeAt(d)}static getCharAt(o){return String.fromCharCode(o)}}Y.SHIFT_JIS=W.SJIS.getName(),Y.GB2312="GB2312",Y.ISO88591=W.ISO8859_1.getName(),Y.EUC_JP="EUC_JP",Y.UTF8=W.UTF8.getName(),Y.PLATFORM_DEFAULT_ENCODING=Y.UTF8,Y.ASSUME_SHIFT_JIS=!1;class pe{constructor(o=""){this.value=o}enableDecoding(o){return this.encoding=o,this}append(o){return typeof o=="string"?this.value+=o.toString():this.encoding?this.value+=Y.castAsNonUtf8Char(o,this.encoding):this.value+=String.fromCharCode(o),this}appendChars(o,d,m){for(let v=d;d<d+m;v++)this.append(o[v]);return this}length(){return this.value.length}charAt(o){return this.value.charAt(o)}deleteCharAt(o){this.value=this.value.substr(0,o)+this.value.substring(o+1)}setCharAt(o,d){this.value=this.value.substr(0,o)+d+this.value.substr(o+1)}substring(o,d){return this.value.substring(o,d)}setLengthToZero(){this.value=""}toString(){return this.value}insert(o,d){this.value=this.value.substr(0,o)+d+this.value.substr(o+d.length)}}class Te{constructor(o,d,m,v){if(this.width=o,this.height=d,this.rowSize=m,this.bits=v,d==null&&(d=o),this.height=d,o<1||d<1)throw new y("Both dimensions must be greater than 0");m==null&&(m=Math.floor((o+31)/32)),this.rowSize=m,v==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(o){const d=o.length,m=o[0].length,v=new Te(m,d);for(let b=0;b<d;b++){const S=o[b];for(let N=0;N<m;N++)S[N]&&v.set(N,b)}return v}static parseFromString(o,d,m){if(o===null)throw new y("stringRepresentation cannot be null");const v=new Array(o.length);let b=0,S=0,N=-1,R=0,P=0;for(;P<o.length;)if(o.charAt(P)===`
`||o.charAt(P)==="\r"){if(b>S){if(N===-1)N=b-S;else if(b-S!==N)throw new y("row lengths do not match");S=b,R++}P++}else if(o.substring(P,P+d.length)===d)P+=d.length,v[b]=!0,b++;else if(o.substring(P,P+m.length)===m)P+=m.length,v[b]=!1,b++;else throw new y("illegal character encountered: "+o.substring(P));if(b>S){if(N===-1)N=b-S;else if(b-S!==N)throw new y("row lengths do not match");R++}const F=new Te(N,R);for(let $=0;$<b;$++)v[$]&&F.set(Math.floor($%N),Math.floor($/N));return F}get(o,d){const m=d*this.rowSize+Math.floor(o/32);return(this.bits[m]>>>(o&31)&1)!==0}set(o,d){const m=d*this.rowSize+Math.floor(o/32);this.bits[m]|=1<<(o&31)&4294967295}unset(o,d){const m=d*this.rowSize+Math.floor(o/32);this.bits[m]&=~(1<<(o&31)&4294967295)}flip(o,d){const m=d*this.rowSize+Math.floor(o/32);this.bits[m]^=1<<(o&31)&4294967295}xor(o){if(this.width!==o.getWidth()||this.height!==o.getHeight()||this.rowSize!==o.getRowSize())throw new y("input matrix dimensions do not match");const d=new G(Math.floor(this.width/32)+1),m=this.rowSize,v=this.bits;for(let b=0,S=this.height;b<S;b++){const N=b*m,R=o.getRow(b,d).getBitArray();for(let P=0;P<m;P++)v[N+P]^=R[P]}}clear(){const o=this.bits,d=o.length;for(let m=0;m<d;m++)o[m]=0}setRegion(o,d,m,v){if(d<0||o<0)throw new y("Left and top must be nonnegative");if(v<1||m<1)throw new y("Height and width must be at least 1");const b=o+m,S=d+v;if(S>this.height||b>this.width)throw new y("The region must fit inside the matrix");const N=this.rowSize,R=this.bits;for(let P=d;P<S;P++){const F=P*N;for(let $=o;$<b;$++)R[F+Math.floor($/32)]|=1<<($&31)&4294967295}}getRow(o,d){d==null||d.getSize()<this.width?d=new G(this.width):d.clear();const m=this.rowSize,v=this.bits,b=o*m;for(let S=0;S<m;S++)d.setBulk(S*32,v[b+S]);return d}setRow(o,d){M.arraycopy(d.getBitArray(),0,this.bits,o*this.rowSize,this.rowSize)}rotate180(){const o=this.getWidth(),d=this.getHeight();let m=new G(o),v=new G(o);for(let b=0,S=Math.floor((d+1)/2);b<S;b++)m=this.getRow(b,m),v=this.getRow(d-1-b,v),m.reverse(),v.reverse(),this.setRow(b,v),this.setRow(d-1-b,m)}getEnclosingRectangle(){const o=this.width,d=this.height,m=this.rowSize,v=this.bits;let b=o,S=d,N=-1,R=-1;for(let P=0;P<d;P++)for(let F=0;F<m;F++){const $=v[P*m+F];if($!==0){if(P<S&&(S=P),P>R&&(R=P),F*32<b){let K=0;for(;($<<31-K&4294967295)===0;)K++;F*32+K<b&&(b=F*32+K)}if(F*32+31>N){let K=31;for(;!($>>>K);)K--;F*32+K>N&&(N=F*32+K)}}}return N<b||R<S?null:Int32Array.from([b,S,N-b+1,R-S+1])}getTopLeftOnBit(){const o=this.rowSize,d=this.bits;let m=0;for(;m<d.length&&d[m]===0;)m++;if(m===d.length)return null;const v=m/o;let b=m%o*32;const S=d[m];let N=0;for(;(S<<31-N&4294967295)===0;)N++;return b+=N,Int32Array.from([b,v])}getBottomRightOnBit(){const o=this.rowSize,d=this.bits;let m=d.length-1;for(;m>=0&&d[m]===0;)m--;if(m<0)return null;const v=Math.floor(m/o);let b=Math.floor(m%o)*32;const S=d[m];let N=31;for(;!(S>>>N);)N--;return b+=N,Int32Array.from([b,v])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(o){if(!(o instanceof Te))return!1;const d=o;return this.width===d.width&&this.height===d.height&&this.rowSize===d.rowSize&&U.equals(this.bits,d.bits)}hashCode(){let o=this.width;return o=31*o+this.width,o=31*o+this.height,o=31*o+this.rowSize,o=31*o+U.hashCode(this.bits),o}toString(o="X ",d="  ",m=`
`){return this.buildToString(o,d,m)}buildToString(o,d,m){let v=new pe;for(let b=0,S=this.height;b<S;b++){for(let N=0,R=this.width;N<R;N++)v.append(this.get(N,b)?o:d);v.append(m)}return v.toString()}clone(){return new Te(this.width,this.height,this.rowSize,this.bits.slice())}}class le extends u{static getNotFoundInstance(){return new le}}le.kind="NotFoundException";class de extends I{constructor(o){super(o),this.luminances=de.EMPTY,this.buckets=new Int32Array(de.LUMINANCE_BUCKETS)}getBlackRow(o,d){const m=this.getLuminanceSource(),v=m.getWidth();d==null||d.getSize()<v?d=new G(v):d.clear(),this.initArrays(v);const b=m.getRow(o,this.luminances),S=this.buckets;for(let R=0;R<v;R++)S[(b[R]&255)>>de.LUMINANCE_SHIFT]++;const N=de.estimateBlackPoint(S);if(v<3)for(let R=0;R<v;R++)(b[R]&255)<N&&d.set(R);else{let R=b[0]&255,P=b[1]&255;for(let F=1;F<v-1;F++){const $=b[F+1]&255;(P*4-R-$)/2<N&&d.set(F),R=P,P=$}}return d}getBlackMatrix(){const o=this.getLuminanceSource(),d=o.getWidth(),m=o.getHeight(),v=new Te(d,m);this.initArrays(d);const b=this.buckets;for(let R=1;R<5;R++){const P=Math.floor(m*R/5),F=o.getRow(P,this.luminances),$=Math.floor(d*4/5);for(let K=Math.floor(d/5);K<$;K++){const ee=F[K]&255;b[ee>>de.LUMINANCE_SHIFT]++}}const S=de.estimateBlackPoint(b),N=o.getMatrix();for(let R=0;R<m;R++){const P=R*d;for(let F=0;F<d;F++)(N[P+F]&255)<S&&v.set(F,R)}return v}createBinarizer(o){return new de(o)}initArrays(o){this.luminances.length<o&&(this.luminances=new Uint8ClampedArray(o));const d=this.buckets;for(let m=0;m<de.LUMINANCE_BUCKETS;m++)d[m]=0}static estimateBlackPoint(o){const d=o.length;let m=0,v=0,b=0;for(let F=0;F<d;F++)o[F]>b&&(v=F,b=o[F]),o[F]>m&&(m=o[F]);let S=0,N=0;for(let F=0;F<d;F++){const $=F-v,K=o[F]*$*$;K>N&&(S=F,N=K)}if(v>S){const F=v;v=S,S=F}if(S-v<=d/16)throw new le;let R=S-1,P=-1;for(let F=S-1;F>v;F--){const $=F-v,K=$*$*(S-F)*(m-o[F]);K>P&&(R=F,P=K)}return R<<de.LUMINANCE_SHIFT}}de.LUMINANCE_BITS=5,de.LUMINANCE_SHIFT=8-de.LUMINANCE_BITS,de.LUMINANCE_BUCKETS=1<<de.LUMINANCE_BITS,de.EMPTY=Uint8ClampedArray.from([0]);class ge extends de{constructor(o){super(o),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const o=this.getLuminanceSource(),d=o.getWidth(),m=o.getHeight();if(d>=ge.MINIMUM_DIMENSION&&m>=ge.MINIMUM_DIMENSION){const v=o.getMatrix();let b=d>>ge.BLOCK_SIZE_POWER;(d&ge.BLOCK_SIZE_MASK)!==0&&b++;let S=m>>ge.BLOCK_SIZE_POWER;(m&ge.BLOCK_SIZE_MASK)!==0&&S++;const N=ge.calculateBlackPoints(v,b,S,d,m),R=new Te(d,m);ge.calculateThresholdForBlock(v,b,S,d,m,N,R),this.matrix=R}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(o){return new ge(o)}static calculateThresholdForBlock(o,d,m,v,b,S,N){const R=b-ge.BLOCK_SIZE,P=v-ge.BLOCK_SIZE;for(let F=0;F<m;F++){let $=F<<ge.BLOCK_SIZE_POWER;$>R&&($=R);const K=ge.cap(F,2,m-3);for(let ee=0;ee<d;ee++){let oe=ee<<ge.BLOCK_SIZE_POWER;oe>P&&(oe=P);const ce=ge.cap(ee,2,d-3);let be=0;for(let Ge=-2;Ge<=2;Ge++){const He=S[K+Ge];be+=He[ce-2]+He[ce-1]+He[ce]+He[ce+1]+He[ce+2]}const _e=be/25;ge.thresholdBlock(o,oe,$,_e,v,N)}}}static cap(o,d,m){return o<d?d:o>m?m:o}static thresholdBlock(o,d,m,v,b,S){for(let N=0,R=m*b+d;N<ge.BLOCK_SIZE;N++,R+=b)for(let P=0;P<ge.BLOCK_SIZE;P++)(o[R+P]&255)<=v&&S.set(d+P,m+N)}static calculateBlackPoints(o,d,m,v,b){const S=b-ge.BLOCK_SIZE,N=v-ge.BLOCK_SIZE,R=new Array(m);for(let P=0;P<m;P++){R[P]=new Int32Array(d);let F=P<<ge.BLOCK_SIZE_POWER;F>S&&(F=S);for(let $=0;$<d;$++){let K=$<<ge.BLOCK_SIZE_POWER;K>N&&(K=N);let ee=0,oe=255,ce=0;for(let _e=0,Ge=F*v+K;_e<ge.BLOCK_SIZE;_e++,Ge+=v){for(let He=0;He<ge.BLOCK_SIZE;He++){const Fe=o[Ge+He]&255;ee+=Fe,Fe<oe&&(oe=Fe),Fe>ce&&(ce=Fe)}if(ce-oe>ge.MIN_DYNAMIC_RANGE)for(_e++,Ge+=v;_e<ge.BLOCK_SIZE;_e++,Ge+=v)for(let He=0;He<ge.BLOCK_SIZE;He++)ee+=o[Ge+He]&255}let be=ee>>ge.BLOCK_SIZE_POWER*2;if(ce-oe<=ge.MIN_DYNAMIC_RANGE&&(be=oe/2,P>0&&$>0)){const _e=(R[P-1][$]+2*R[P][$-1]+R[P-1][$-1])/4;oe<_e&&(be=_e)}R[P][$]=be}}return R}}ge.BLOCK_SIZE_POWER=3,ge.BLOCK_SIZE=1<<ge.BLOCK_SIZE_POWER,ge.BLOCK_SIZE_MASK=ge.BLOCK_SIZE-1,ge.MINIMUM_DIMENSION=ge.BLOCK_SIZE*5,ge.MIN_DYNAMIC_RANGE=24;class De{constructor(o,d){this.width=o,this.height=d}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(o,d,m,v){throw new Z("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Z("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Z("This luminance source does not support rotation by 45 degrees.")}toString(){const o=new Uint8ClampedArray(this.width);let d=new pe;for(let m=0;m<this.height;m++){const v=this.getRow(m,o);for(let b=0;b<this.width;b++){const S=v[b]&255;let N;S<64?N="#":S<128?N="+":S<192?N=".":N=" ",d.append(N)}d.append(`
`)}return d.toString()}}class we extends De{constructor(o){super(o.getWidth(),o.getHeight()),this.delegate=o}getRow(o,d){const m=this.delegate.getRow(o,d),v=this.getWidth();for(let b=0;b<v;b++)m[b]=255-(m[b]&255);return m}getMatrix(){const o=this.delegate.getMatrix(),d=this.getWidth()*this.getHeight(),m=new Uint8ClampedArray(d);for(let v=0;v<d;v++)m[v]=255-(o[v]&255);return m}isCropSupported(){return this.delegate.isCropSupported()}crop(o,d,m,v){return new we(this.delegate.crop(o,d,m,v))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new we(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new we(this.delegate.rotateCounterClockwise45())}}class $e extends De{constructor(o){super(o.width,o.height),this.canvas=o,this.tempCanvasElement=null,this.buffer=$e.makeBufferFromCanvasImageData(o)}static makeBufferFromCanvasImageData(o){const d=o.getContext("2d").getImageData(0,0,o.width,o.height);return $e.toGrayscaleBuffer(d.data,o.width,o.height)}static toGrayscaleBuffer(o,d,m){const v=new Uint8ClampedArray(d*m);for(let b=0,S=0,N=o.length;b<N;b+=4,S++){let R;if(o[b+3]===0)R=255;else{const F=o[b],$=o[b+1],K=o[b+2];R=306*F+601*$+117*K+512>>10}v[S]=R}return v}getRow(o,d){if(o<0||o>=this.getHeight())throw new y("Requested row is outside the image: "+o);const m=this.getWidth(),v=o*m;return d===null?d=this.buffer.slice(v,v+m):(d.length<m&&(d=new Uint8ClampedArray(m)),d.set(this.buffer.slice(v,v+m))),d}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(o,d,m,v){return super.crop(o,d,m,v),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const o=this.canvas.ownerDocument.createElement("canvas");o.width=this.canvas.width,o.height=this.canvas.height,this.tempCanvasElement=o}return this.tempCanvasElement}rotate(o){const d=this.getTempCanvasElement(),m=d.getContext("2d"),v=o*$e.DEGREE_TO_RADIANS,b=this.canvas.width,S=this.canvas.height,N=Math.ceil(Math.abs(Math.cos(v))*b+Math.abs(Math.sin(v))*S),R=Math.ceil(Math.abs(Math.sin(v))*b+Math.abs(Math.cos(v))*S);return d.width=N,d.height=R,m.translate(N/2,R/2),m.rotate(v),m.drawImage(this.canvas,b/-2,S/-2),this.buffer=$e.makeBufferFromCanvasImageData(d),this}invert(){return new we(this)}}$e.DEGREE_TO_RADIANS=Math.PI/180;class ne{constructor(o,d,m){this.deviceId=o,this.label=d,this.kind="videoinput",this.groupId=m||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var re=(globalThis||I0||self||window||void 0)&&(globalThis||I0||self||window||void 0).__awaiter||function(q,o,d,m){function v(b){return b instanceof d?b:new d(function(S){S(b)})}return new(d||(d=Promise))(function(b,S){function N(F){try{P(m.next(F))}catch($){S($)}}function R(F){try{P(m.throw(F))}catch($){S($)}}function P(F){F.done?b(F.value):v(F.value).then(N,R)}P((m=m.apply(q,o||[])).next())})};class he{constructor(o,d=500,m){this.reader=o,this.timeBetweenScansMillis=d,this._hints=m,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(o){this._timeBetweenDecodingAttempts=o<0?0:o}set hints(o){this._hints=o||null}get hints(){return this._hints}listVideoInputDevices(){return re(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const o=yield navigator.mediaDevices.enumerateDevices(),d=[];for(const m of o){const v=m.kind==="video"?"videoinput":m.kind;if(v!=="videoinput")continue;const b=m.deviceId||m.id,S=m.label||`Video device ${d.length+1}`,N=m.groupId,R={deviceId:b,label:S,kind:v,groupId:N};d.push(R)}return d})}getVideoInputDevices(){return re(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(d=>new ne(d.deviceId,d.label))})}findDeviceById(o){return re(this,void 0,void 0,function*(){const d=yield this.listVideoInputDevices();return d?d.find(m=>m.deviceId===o):null})}decodeFromInputVideoDevice(o,d){return re(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(o,d)})}decodeOnceFromVideoDevice(o,d){return re(this,void 0,void 0,function*(){this.reset();let m;o?m={deviceId:{exact:o}}:m={facingMode:"environment"};const v={video:m};return yield this.decodeOnceFromConstraints(v,d)})}decodeOnceFromConstraints(o,d){return re(this,void 0,void 0,function*(){const m=yield navigator.mediaDevices.getUserMedia(o);return yield this.decodeOnceFromStream(m,d)})}decodeOnceFromStream(o,d){return re(this,void 0,void 0,function*(){this.reset();const m=yield this.attachStreamToVideo(o,d);return yield this.decodeOnce(m)})}decodeFromInputVideoDeviceContinuously(o,d,m){return re(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(o,d,m)})}decodeFromVideoDevice(o,d,m){return re(this,void 0,void 0,function*(){let v;o?v={deviceId:{exact:o}}:v={facingMode:"environment"};const b={video:v};return yield this.decodeFromConstraints(b,d,m)})}decodeFromConstraints(o,d,m){return re(this,void 0,void 0,function*(){const v=yield navigator.mediaDevices.getUserMedia(o);return yield this.decodeFromStream(v,d,m)})}decodeFromStream(o,d,m){return re(this,void 0,void 0,function*(){this.reset();const v=yield this.attachStreamToVideo(o,d);return yield this.decodeContinuously(v,m)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(o,d){return re(this,void 0,void 0,function*(){const m=this.prepareVideoElement(d);return this.addVideoSource(m,o),this.videoElement=m,this.stream=o,yield this.playVideoOnLoadAsync(m),m})}playVideoOnLoadAsync(o){return new Promise((d,m)=>this.playVideoOnLoad(o,()=>d()))}playVideoOnLoad(o,d){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(o),o.addEventListener("ended",this.videoEndedListener),o.addEventListener("canplay",this.videoCanPlayListener),o.addEventListener("playing",d),this.tryPlayVideo(o)}isVideoPlaying(o){return o.currentTime>0&&!o.paused&&!o.ended&&o.readyState>2}tryPlayVideo(o){return re(this,void 0,void 0,function*(){if(this.isVideoPlaying(o)){console.warn("Trying to play video that is already playing.");return}try{yield o.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(o,d){const m=document.getElementById(o);if(!m)throw new g(`element with id '${o}' not found`);if(m.nodeName.toLowerCase()!==d.toLowerCase())throw new g(`element with id '${o}' must be an ${d} element`);return m}decodeFromImage(o,d){if(!o&&!d)throw new g("either imageElement with a src set or an url must be provided");return d&&!o?this.decodeFromImageUrl(d):this.decodeFromImageElement(o)}decodeFromVideo(o,d){if(!o&&!d)throw new g("Either an element with a src set or an URL must be provided");return d&&!o?this.decodeFromVideoUrl(d):this.decodeFromVideoElement(o)}decodeFromVideoContinuously(o,d,m){if(o===void 0&&d===void 0)throw new g("Either an element with a src set or an URL must be provided");return d&&!o?this.decodeFromVideoUrlContinuously(d,m):this.decodeFromVideoElementContinuously(o,m)}decodeFromImageElement(o){if(!o)throw new g("An image element must be provided.");this.reset();const d=this.prepareImageElement(o);this.imageElement=d;let m;return this.isImageLoaded(d)?m=this.decodeOnce(d,!1,!0):m=this._decodeOnLoadImage(d),m}decodeFromVideoElement(o){const d=this._decodeFromVideoElementSetup(o);return this._decodeOnLoadVideo(d)}decodeFromVideoElementContinuously(o,d){const m=this._decodeFromVideoElementSetup(o);return this._decodeOnLoadVideoContinuously(m,d)}_decodeFromVideoElementSetup(o){if(!o)throw new g("A video element must be provided.");this.reset();const d=this.prepareVideoElement(o);return this.videoElement=d,d}decodeFromImageUrl(o){if(!o)throw new g("An URL must be provided.");this.reset();const d=this.prepareImageElement();this.imageElement=d;const m=this._decodeOnLoadImage(d);return d.src=o,m}decodeFromVideoUrl(o){if(!o)throw new g("An URL must be provided.");this.reset();const d=this.prepareVideoElement(),m=this.decodeFromVideoElement(d);return d.src=o,m}decodeFromVideoUrlContinuously(o,d){if(!o)throw new g("An URL must be provided.");this.reset();const m=this.prepareVideoElement(),v=this.decodeFromVideoElementContinuously(m,d);return m.src=o,v}_decodeOnLoadImage(o){return new Promise((d,m)=>{this.imageLoadedListener=()=>this.decodeOnce(o,!1,!0).then(d,m),o.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(o){return re(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(o),yield this.decodeOnce(o)})}_decodeOnLoadVideoContinuously(o,d){return re(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(o),this.decodeContinuously(o,d)})}isImageLoaded(o){return!(!o.complete||o.naturalWidth===0)}prepareImageElement(o){let d;return typeof o>"u"&&(d=document.createElement("img"),d.width=200,d.height=200),typeof o=="string"&&(d=this.getMediaElement(o,"img")),o instanceof HTMLImageElement&&(d=o),d}prepareVideoElement(o){let d;return!o&&typeof document<"u"&&(d=document.createElement("video"),d.width=200,d.height=200),typeof o=="string"&&(d=this.getMediaElement(o,"video")),o instanceof HTMLVideoElement&&(d=o),d.setAttribute("autoplay","true"),d.setAttribute("muted","true"),d.setAttribute("playsinline","true"),d}decodeOnce(o,d=!0,m=!0){this._stopAsyncDecode=!1;const v=(b,S)=>{if(this._stopAsyncDecode){S(new le("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const N=this.decode(o);b(N)}catch(N){const R=d&&N instanceof le,F=(N instanceof C||N instanceof B)&&m;if(R||F)return setTimeout(v,this._timeBetweenDecodingAttempts,b,S);S(N)}};return new Promise((b,S)=>v(b,S))}decodeContinuously(o,d){this._stopContinuousDecode=!1;const m=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const v=this.decode(o);d(v,null),setTimeout(m,this.timeBetweenScansMillis)}catch(v){d(null,v);const b=v instanceof C||v instanceof B,S=v instanceof le;(b||S)&&setTimeout(m,this._timeBetweenDecodingAttempts)}};m()}decode(o){const d=this.createBinaryBitmap(o);return this.decodeBitmap(d)}_isHTMLVideoElement(o){return o.videoWidth!==0}drawFrameOnCanvas(o,d,m){d||(d={sx:0,sy:0,sWidth:o.videoWidth,sHeight:o.videoHeight,dx:0,dy:0,dWidth:o.videoWidth,dHeight:o.videoHeight}),m||(m=this.captureCanvasContext),m.drawImage(o,d.sx,d.sy,d.sWidth,d.sHeight,d.dx,d.dy,d.dWidth,d.dHeight)}drawImageOnCanvas(o,d,m=this.captureCanvasContext){d||(d={sx:0,sy:0,sWidth:o.naturalWidth,sHeight:o.naturalHeight,dx:0,dy:0,dWidth:o.naturalWidth,dHeight:o.naturalHeight}),m||(m=this.captureCanvasContext),m.drawImage(o,d.sx,d.sy,d.sWidth,d.sHeight,d.dx,d.dy,d.dWidth,d.dHeight)}createBinaryBitmap(o){this.getCaptureCanvasContext(o),this._isHTMLVideoElement(o)?this.drawFrameOnCanvas(o):this.drawImageOnCanvas(o);const d=this.getCaptureCanvas(o),m=new $e(d),v=new ge(m);return new E(v)}getCaptureCanvasContext(o){if(!this.captureCanvasContext){const m=this.getCaptureCanvas(o).getContext("2d");this.captureCanvasContext=m}return this.captureCanvasContext}getCaptureCanvas(o){if(!this.captureCanvas){const d=this.createCaptureCanvas(o);this.captureCanvas=d}return this.captureCanvas}decodeBitmap(o){return this.reader.decode(o,this._hints)}createCaptureCanvas(o){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const d=document.createElement("canvas");let m,v;return typeof o<"u"&&(o instanceof HTMLVideoElement?(m=o.videoWidth,v=o.videoHeight):o instanceof HTMLImageElement&&(m=o.naturalWidth||o.width,v=o.naturalHeight||o.height)),d.style.width=m+"px",d.style.height=v+"px",d.width=m,d.height=v,d}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(o=>o.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(o,d){try{o.srcObject=d}catch{o.src=URL.createObjectURL(d)}}cleanVideoSource(o){try{o.srcObject=null}catch{o.src=""}this.videoElement.removeAttribute("src")}}class se{constructor(o,d,m=d==null?0:8*d.length,v,b,S=M.currentTimeMillis()){this.text=o,this.rawBytes=d,this.numBits=m,this.resultPoints=v,this.format=b,this.timestamp=S,this.text=o,this.rawBytes=d,m==null?this.numBits=d==null?0:8*d.length:this.numBits=m,this.resultPoints=v,this.format=b,this.resultMetadata=null,S==null?this.timestamp=M.currentTimeMillis():this.timestamp=S}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(o,d){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(o,d)}putAllMetadata(o){o!==null&&(this.resultMetadata===null?this.resultMetadata=o:this.resultMetadata=new Map(o))}addResultPoints(o){const d=this.resultPoints;if(d===null)this.resultPoints=o;else if(o!==null&&o.length>0){const m=new Array(d.length+o.length);M.arraycopy(d,0,m,0,d.length),M.arraycopy(o,0,m,d.length,o.length),this.resultPoints=m}}getTimestamp(){return this.timestamp}toString(){return this.text}}var ke;(function(q){q[q.AZTEC=0]="AZTEC",q[q.CODABAR=1]="CODABAR",q[q.CODE_39=2]="CODE_39",q[q.CODE_93=3]="CODE_93",q[q.CODE_128=4]="CODE_128",q[q.DATA_MATRIX=5]="DATA_MATRIX",q[q.EAN_8=6]="EAN_8",q[q.EAN_13=7]="EAN_13",q[q.ITF=8]="ITF",q[q.MAXICODE=9]="MAXICODE",q[q.PDF_417=10]="PDF_417",q[q.QR_CODE=11]="QR_CODE",q[q.RSS_14=12]="RSS_14",q[q.RSS_EXPANDED=13]="RSS_EXPANDED",q[q.UPC_A=14]="UPC_A",q[q.UPC_E=15]="UPC_E",q[q.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ke||(ke={}));var ie=ke,ue;(function(q){q[q.OTHER=0]="OTHER",q[q.ORIENTATION=1]="ORIENTATION",q[q.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",q[q.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",q[q.ISSUE_NUMBER=4]="ISSUE_NUMBER",q[q.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",q[q.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",q[q.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",q[q.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",q[q.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",q[q.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(ue||(ue={}));var qe=ue;class me{constructor(o,d,m,v,b=-1,S=-1){this.rawBytes=o,this.text=d,this.byteSegments=m,this.ecLevel=v,this.structuredAppendSequenceNumber=b,this.structuredAppendParity=S,this.numBits=o==null?0:8*o.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(o){this.numBits=o}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(o){this.errorsCorrected=o}getErasures(){return this.erasures}setErasures(o){this.erasures=o}getOther(){return this.other}setOther(o){this.other=o}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Je{exp(o){return this.expTable[o]}log(o){if(o===0)throw new y;return this.logTable[o]}static addOrSubtract(o,d){return o^d}}class Qe{constructor(o,d){if(d.length===0)throw new y;this.field=o;const m=d.length;if(m>1&&d[0]===0){let v=1;for(;v<m&&d[v]===0;)v++;v===m?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(m-v),M.arraycopy(d,v,this.coefficients,0,this.coefficients.length))}else this.coefficients=d}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(o){return this.coefficients[this.coefficients.length-1-o]}evaluateAt(o){if(o===0)return this.getCoefficient(0);const d=this.coefficients;let m;if(o===1){m=0;for(let S=0,N=d.length;S!==N;S++){const R=d[S];m=Je.addOrSubtract(m,R)}return m}m=d[0];const v=d.length,b=this.field;for(let S=1;S<v;S++)m=Je.addOrSubtract(b.multiply(o,m),d[S]);return m}addOrSubtract(o){if(!this.field.equals(o.field))throw new y("GenericGFPolys do not have same GenericGF field");if(this.isZero())return o;if(o.isZero())return this;let d=this.coefficients,m=o.coefficients;if(d.length>m.length){const S=d;d=m,m=S}let v=new Int32Array(m.length);const b=m.length-d.length;M.arraycopy(m,0,v,0,b);for(let S=b;S<m.length;S++)v[S]=Je.addOrSubtract(d[S-b],m[S]);return new Qe(this.field,v)}multiply(o){if(!this.field.equals(o.field))throw new y("GenericGFPolys do not have same GenericGF field");if(this.isZero()||o.isZero())return this.field.getZero();const d=this.coefficients,m=d.length,v=o.coefficients,b=v.length,S=new Int32Array(m+b-1),N=this.field;for(let R=0;R<m;R++){const P=d[R];for(let F=0;F<b;F++)S[R+F]=Je.addOrSubtract(S[R+F],N.multiply(P,v[F]))}return new Qe(N,S)}multiplyScalar(o){if(o===0)return this.field.getZero();if(o===1)return this;const d=this.coefficients.length,m=this.field,v=new Int32Array(d),b=this.coefficients;for(let S=0;S<d;S++)v[S]=m.multiply(b[S],o);return new Qe(m,v)}multiplyByMonomial(o,d){if(o<0)throw new y;if(d===0)return this.field.getZero();const m=this.coefficients,v=m.length,b=new Int32Array(v+o),S=this.field;for(let N=0;N<v;N++)b[N]=S.multiply(m[N],d);return new Qe(S,b)}divide(o){if(!this.field.equals(o.field))throw new y("GenericGFPolys do not have same GenericGF field");if(o.isZero())throw new y("Divide by 0");const d=this.field;let m=d.getZero(),v=this;const b=o.getCoefficient(o.getDegree()),S=d.inverse(b);for(;v.getDegree()>=o.getDegree()&&!v.isZero();){const N=v.getDegree()-o.getDegree(),R=d.multiply(v.getCoefficient(v.getDegree()),S),P=o.multiplyByMonomial(N,R),F=d.buildMonomial(N,R);m=m.addOrSubtract(F),v=v.addOrSubtract(P)}return[m,v]}toString(){let o="";for(let d=this.getDegree();d>=0;d--){let m=this.getCoefficient(d);if(m!==0){if(m<0?(o+=" - ",m=-m):o.length>0&&(o+=" + "),d===0||m!==1){const v=this.field.log(m);v===0?o+="1":v===1?o+="a":(o+="a^",o+=v)}d!==0&&(d===1?o+="x":(o+="x^",o+=d))}}return o}}class Ue extends u{}Ue.kind="ArithmeticException";class ft extends Je{constructor(o,d,m){super(),this.primitive=o,this.size=d,this.generatorBase=m;const v=new Int32Array(d);let b=1;for(let N=0;N<d;N++)v[N]=b,b*=2,b>=d&&(b^=o,b&=d-1);this.expTable=v;const S=new Int32Array(d);for(let N=0;N<d-1;N++)S[v[N]]=N;this.logTable=S,this.zero=new Qe(this,Int32Array.from([0])),this.one=new Qe(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(o,d){if(o<0)throw new y;if(d===0)return this.zero;const m=new Int32Array(o+1);return m[0]=d,new Qe(this,m)}inverse(o){if(o===0)throw new Ue;return this.expTable[this.size-this.logTable[o]-1]}multiply(o,d){return o===0||d===0?0:this.expTable[(this.logTable[o]+this.logTable[d])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+L.toHexString(this.primitive)+","+this.size+")"}equals(o){return o===this}}ft.AZTEC_DATA_12=new ft(4201,4096,1),ft.AZTEC_DATA_10=new ft(1033,1024,1),ft.AZTEC_DATA_6=new ft(67,64,1),ft.AZTEC_PARAM=new ft(19,16,1),ft.QR_CODE_FIELD_256=new ft(285,256,0),ft.DATA_MATRIX_FIELD_256=new ft(301,256,1),ft.AZTEC_DATA_8=ft.DATA_MATRIX_FIELD_256,ft.MAXICODE_FIELD_64=ft.AZTEC_DATA_6;class Et extends u{}Et.kind="ReedSolomonException";class jt extends u{}jt.kind="IllegalStateException";class gn{constructor(o){this.field=o}decode(o,d){const m=this.field,v=new Qe(m,o),b=new Int32Array(d);let S=!0;for(let ee=0;ee<d;ee++){const oe=v.evaluateAt(m.exp(ee+m.getGeneratorBase()));b[b.length-1-ee]=oe,oe!==0&&(S=!1)}if(S)return;const N=new Qe(m,b),R=this.runEuclideanAlgorithm(m.buildMonomial(d,1),N,d),P=R[0],F=R[1],$=this.findErrorLocations(P),K=this.findErrorMagnitudes(F,$);for(let ee=0;ee<$.length;ee++){const oe=o.length-1-m.log($[ee]);if(oe<0)throw new Et("Bad error location");o[oe]=ft.addOrSubtract(o[oe],K[ee])}}runEuclideanAlgorithm(o,d,m){if(o.getDegree()<d.getDegree()){const ee=o;o=d,d=ee}const v=this.field;let b=o,S=d,N=v.getZero(),R=v.getOne();for(;S.getDegree()>=(m/2|0);){let ee=b,oe=N;if(b=S,N=R,b.isZero())throw new Et("r_{i-1} was zero");S=ee;let ce=v.getZero();const be=b.getCoefficient(b.getDegree()),_e=v.inverse(be);for(;S.getDegree()>=b.getDegree()&&!S.isZero();){const Ge=S.getDegree()-b.getDegree(),He=v.multiply(S.getCoefficient(S.getDegree()),_e);ce=ce.addOrSubtract(v.buildMonomial(Ge,He)),S=S.addOrSubtract(b.multiplyByMonomial(Ge,He))}if(R=ce.multiply(N).addOrSubtract(oe),S.getDegree()>=b.getDegree())throw new jt("Division algorithm failed to reduce polynomial?")}const P=R.getCoefficient(0);if(P===0)throw new Et("sigmaTilde(0) was zero");const F=v.inverse(P),$=R.multiplyScalar(F),K=S.multiplyScalar(F);return[$,K]}findErrorLocations(o){const d=o.getDegree();if(d===1)return Int32Array.from([o.getCoefficient(1)]);const m=new Int32Array(d);let v=0;const b=this.field;for(let S=1;S<b.getSize()&&v<d;S++)o.evaluateAt(S)===0&&(m[v]=b.inverse(S),v++);if(v!==d)throw new Et("Error locator degree does not match number of roots");return m}findErrorMagnitudes(o,d){const m=d.length,v=new Int32Array(m),b=this.field;for(let S=0;S<m;S++){const N=b.inverse(d[S]);let R=1;for(let P=0;P<m;P++)if(S!==P){const F=b.multiply(d[P],N),$=(F&1)===0?F|1:F&-2;R=b.multiply(R,$)}v[S]=b.multiply(o.evaluateAt(N),b.inverse(R)),b.getGeneratorBase()!==0&&(v[S]=b.multiply(v[S],N))}return v}}var nn;(function(q){q[q.UPPER=0]="UPPER",q[q.LOWER=1]="LOWER",q[q.MIXED=2]="MIXED",q[q.DIGIT=3]="DIGIT",q[q.PUNCT=4]="PUNCT",q[q.BINARY=5]="BINARY"})(nn||(nn={}));class Ft{decode(o){this.ddata=o;let d=o.getBits(),m=this.extractBits(d),v=this.correctBits(m),b=Ft.convertBoolArrayToByteArray(v),S=Ft.getEncodedData(v),N=new me(b,S,null,null);return N.setNumBits(v.length),N}static highLevelDecode(o){return this.getEncodedData(o)}static getEncodedData(o){let d=o.length,m=nn.UPPER,v=nn.UPPER,b="",S=0;for(;S<d;)if(v===nn.BINARY){if(d-S<5)break;let N=Ft.readCode(o,S,5);if(S+=5,N===0){if(d-S<11)break;N=Ft.readCode(o,S,11)+31,S+=11}for(let R=0;R<N;R++){if(d-S<8){S=d;break}const P=Ft.readCode(o,S,8);b+=Y.castAsNonUtf8Char(P),S+=8}v=m}else{let N=v===nn.DIGIT?4:5;if(d-S<N)break;let R=Ft.readCode(o,S,N);S+=N;let P=Ft.getCharacter(v,R);P.startsWith("CTRL_")?(m=v,v=Ft.getTable(P.charAt(5)),P.charAt(6)==="L"&&(m=v)):(b+=P,v=m)}return b}static getTable(o){switch(o){case"L":return nn.LOWER;case"P":return nn.PUNCT;case"M":return nn.MIXED;case"D":return nn.DIGIT;case"B":return nn.BINARY;case"U":default:return nn.UPPER}}static getCharacter(o,d){switch(o){case nn.UPPER:return Ft.UPPER_TABLE[d];case nn.LOWER:return Ft.LOWER_TABLE[d];case nn.MIXED:return Ft.MIXED_TABLE[d];case nn.PUNCT:return Ft.PUNCT_TABLE[d];case nn.DIGIT:return Ft.DIGIT_TABLE[d];default:throw new jt("Bad table")}}correctBits(o){let d,m;this.ddata.getNbLayers()<=2?(m=6,d=ft.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(m=8,d=ft.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(m=10,d=ft.AZTEC_DATA_10):(m=12,d=ft.AZTEC_DATA_12);let v=this.ddata.getNbDatablocks(),b=o.length/m;if(b<v)throw new B;let S=o.length%m,N=new Int32Array(b);for(let K=0;K<b;K++,S+=m)N[K]=Ft.readCode(o,S,m);try{new gn(d).decode(N,b-v)}catch(K){throw new B(K)}let R=(1<<m)-1,P=0;for(let K=0;K<v;K++){let ee=N[K];if(ee===0||ee===R)throw new B;(ee===1||ee===R-1)&&P++}let F=new Array(v*m-P),$=0;for(let K=0;K<v;K++){let ee=N[K];if(ee===1||ee===R-1)F.fill(ee>1,$,$+m-1),$+=m-1;else for(let oe=m-1;oe>=0;--oe)F[$++]=(ee&1<<oe)!==0}return F}extractBits(o){let d=this.ddata.isCompact(),m=this.ddata.getNbLayers(),v=(d?11:14)+m*4,b=new Int32Array(v),S=new Array(this.totalBitsInLayer(m,d));if(d)for(let N=0;N<b.length;N++)b[N]=N;else{let N=v+1+2*L.truncDivision(L.truncDivision(v,2)-1,15),R=v/2,P=L.truncDivision(N,2);for(let F=0;F<R;F++){let $=F+L.truncDivision(F,15);b[R-F-1]=P-$-1,b[R+F]=P+$+1}}for(let N=0,R=0;N<m;N++){let P=(m-N)*4+(d?9:12),F=N*2,$=v-1-F;for(let K=0;K<P;K++){let ee=K*2;for(let oe=0;oe<2;oe++)S[R+ee+oe]=o.get(b[F+oe],b[F+K]),S[R+2*P+ee+oe]=o.get(b[F+K],b[$-oe]),S[R+4*P+ee+oe]=o.get(b[$-oe],b[$-K]),S[R+6*P+ee+oe]=o.get(b[$-K],b[F+oe])}R+=P*8}return S}static readCode(o,d,m){let v=0;for(let b=d;b<d+m;b++)v<<=1,o[b]&&(v|=1);return v}static readByte(o,d){let m=o.length-d;return m>=8?Ft.readCode(o,d,8):Ft.readCode(o,d,m)<<8-m}static convertBoolArrayToByteArray(o){let d=new Uint8Array((o.length+7)/8);for(let m=0;m<d.length;m++)d[m]=Ft.readByte(o,8*m);return d}totalBitsInLayer(o,d){return((d?88:112)+16*o)*o}}Ft.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Ft.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Ft.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Ft.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Ft.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Rt{constructor(){}static round(o){return o===NaN?0:o<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:o>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:o+(o<0?-.5:.5)|0}static distance(o,d,m,v){const b=o-m,S=d-v;return Math.sqrt(b*b+S*S)}static sum(o){let d=0;for(let m=0,v=o.length;m!==v;m++){const b=o[m];d+=b}return d}}class sa{static floatToIntBits(o){return o}}sa.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ze{constructor(o,d){this.x=o,this.y=d}getX(){return this.x}getY(){return this.y}equals(o){if(o instanceof Ze){const d=o;return this.x===d.x&&this.y===d.y}return!1}hashCode(){return 31*sa.floatToIntBits(this.x)+sa.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(o){const d=this.distance(o[0],o[1]),m=this.distance(o[1],o[2]),v=this.distance(o[0],o[2]);let b,S,N;if(m>=d&&m>=v?(S=o[0],b=o[1],N=o[2]):v>=m&&v>=d?(S=o[1],b=o[0],N=o[2]):(S=o[2],b=o[0],N=o[1]),this.crossProductZ(b,S,N)<0){const R=b;b=N,N=R}o[0]=b,o[1]=S,o[2]=N}static distance(o,d){return Rt.distance(o.x,o.y,d.x,d.y)}static crossProductZ(o,d,m){const v=d.x,b=d.y;return(m.x-v)*(o.y-b)-(m.y-b)*(o.x-v)}}class rs{constructor(o,d){this.bits=o,this.points=d}getBits(){return this.bits}getPoints(){return this.points}}class Ke extends rs{constructor(o,d,m,v,b){super(o,d),this.compact=m,this.nbDatablocks=v,this.nbLayers=b}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class _t{constructor(o,d,m,v){this.image=o,this.height=o.getHeight(),this.width=o.getWidth(),d==null&&(d=_t.INIT_SIZE),m==null&&(m=o.getWidth()/2|0),v==null&&(v=o.getHeight()/2|0);const b=d/2|0;if(this.leftInit=m-b,this.rightInit=m+b,this.upInit=v-b,this.downInit=v+b,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new le}detect(){let o=this.leftInit,d=this.rightInit,m=this.upInit,v=this.downInit,b=!1,S=!0,N=!1,R=!1,P=!1,F=!1,$=!1;const K=this.width,ee=this.height;for(;S;){S=!1;let oe=!0;for(;(oe||!R)&&d<K;)oe=this.containsBlackPoint(m,v,d,!1),oe?(d++,S=!0,R=!0):R||d++;if(d>=K){b=!0;break}let ce=!0;for(;(ce||!P)&&v<ee;)ce=this.containsBlackPoint(o,d,v,!0),ce?(v++,S=!0,P=!0):P||v++;if(v>=ee){b=!0;break}let be=!0;for(;(be||!F)&&o>=0;)be=this.containsBlackPoint(m,v,o,!1),be?(o--,S=!0,F=!0):F||o--;if(o<0){b=!0;break}let _e=!0;for(;(_e||!$)&&m>=0;)_e=this.containsBlackPoint(o,d,m,!0),_e?(m--,S=!0,$=!0):$||m--;if(m<0){b=!0;break}S&&(N=!0)}if(!b&&N){const oe=d-o;let ce=null;for(let He=1;ce===null&&He<oe;He++)ce=this.getBlackPointOnSegment(o,v-He,o+He,v);if(ce==null)throw new le;let be=null;for(let He=1;be===null&&He<oe;He++)be=this.getBlackPointOnSegment(o,m+He,o+He,m);if(be==null)throw new le;let _e=null;for(let He=1;_e===null&&He<oe;He++)_e=this.getBlackPointOnSegment(d,m+He,d-He,m);if(_e==null)throw new le;let Ge=null;for(let He=1;Ge===null&&He<oe;He++)Ge=this.getBlackPointOnSegment(d,v-He,d-He,v);if(Ge==null)throw new le;return this.centerEdges(Ge,ce,_e,be)}else throw new le}getBlackPointOnSegment(o,d,m,v){const b=Rt.round(Rt.distance(o,d,m,v)),S=(m-o)/b,N=(v-d)/b,R=this.image;for(let P=0;P<b;P++){const F=Rt.round(o+P*S),$=Rt.round(d+P*N);if(R.get(F,$))return new Ze(F,$)}return null}centerEdges(o,d,m,v){const b=o.getX(),S=o.getY(),N=d.getX(),R=d.getY(),P=m.getX(),F=m.getY(),$=v.getX(),K=v.getY(),ee=_t.CORR;return b<this.width/2?[new Ze($-ee,K+ee),new Ze(N+ee,R+ee),new Ze(P-ee,F-ee),new Ze(b+ee,S-ee)]:[new Ze($+ee,K+ee),new Ze(N+ee,R-ee),new Ze(P-ee,F+ee),new Ze(b-ee,S-ee)]}containsBlackPoint(o,d,m,v){const b=this.image;if(v){for(let S=o;S<=d;S++)if(b.get(S,m))return!0}else for(let S=o;S<=d;S++)if(b.get(m,S))return!0;return!1}}_t.INIT_SIZE=10,_t.CORR=1;class Br{static checkAndNudgePoints(o,d){const m=o.getWidth(),v=o.getHeight();let b=!0;for(let S=0;S<d.length&&b;S+=2){const N=Math.floor(d[S]),R=Math.floor(d[S+1]);if(N<-1||N>m||R<-1||R>v)throw new le;b=!1,N===-1?(d[S]=0,b=!0):N===m&&(d[S]=m-1,b=!0),R===-1?(d[S+1]=0,b=!0):R===v&&(d[S+1]=v-1,b=!0)}b=!0;for(let S=d.length-2;S>=0&&b;S-=2){const N=Math.floor(d[S]),R=Math.floor(d[S+1]);if(N<-1||N>m||R<-1||R>v)throw new le;b=!1,N===-1?(d[S]=0,b=!0):N===m&&(d[S]=m-1,b=!0),R===-1?(d[S+1]=0,b=!0):R===v&&(d[S+1]=v-1,b=!0)}}}class Ur{constructor(o,d,m,v,b,S,N,R,P){this.a11=o,this.a21=d,this.a31=m,this.a12=v,this.a22=b,this.a32=S,this.a13=N,this.a23=R,this.a33=P}static quadrilateralToQuadrilateral(o,d,m,v,b,S,N,R,P,F,$,K,ee,oe,ce,be){const _e=Ur.quadrilateralToSquare(o,d,m,v,b,S,N,R);return Ur.squareToQuadrilateral(P,F,$,K,ee,oe,ce,be).times(_e)}transformPoints(o){const d=o.length,m=this.a11,v=this.a12,b=this.a13,S=this.a21,N=this.a22,R=this.a23,P=this.a31,F=this.a32,$=this.a33;for(let K=0;K<d;K+=2){const ee=o[K],oe=o[K+1],ce=b*ee+R*oe+$;o[K]=(m*ee+S*oe+P)/ce,o[K+1]=(v*ee+N*oe+F)/ce}}transformPointsWithValues(o,d){const m=this.a11,v=this.a12,b=this.a13,S=this.a21,N=this.a22,R=this.a23,P=this.a31,F=this.a32,$=this.a33,K=o.length;for(let ee=0;ee<K;ee++){const oe=o[ee],ce=d[ee],be=b*oe+R*ce+$;o[ee]=(m*oe+S*ce+P)/be,d[ee]=(v*oe+N*ce+F)/be}}static squareToQuadrilateral(o,d,m,v,b,S,N,R){const P=o-m+b-N,F=d-v+S-R;if(P===0&&F===0)return new Ur(m-o,b-m,o,v-d,S-v,d,0,0,1);{const $=m-b,K=N-b,ee=v-S,oe=R-S,ce=$*oe-K*ee,be=(P*oe-K*F)/ce,_e=($*F-P*ee)/ce;return new Ur(m-o+be*m,N-o+_e*N,o,v-d+be*v,R-d+_e*R,d,be,_e,1)}}static quadrilateralToSquare(o,d,m,v,b,S,N,R){return Ur.squareToQuadrilateral(o,d,m,v,b,S,N,R).buildAdjoint()}buildAdjoint(){return new Ur(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(o){return new Ur(this.a11*o.a11+this.a21*o.a12+this.a31*o.a13,this.a11*o.a21+this.a21*o.a22+this.a31*o.a23,this.a11*o.a31+this.a21*o.a32+this.a31*o.a33,this.a12*o.a11+this.a22*o.a12+this.a32*o.a13,this.a12*o.a21+this.a22*o.a22+this.a32*o.a23,this.a12*o.a31+this.a22*o.a32+this.a32*o.a33,this.a13*o.a11+this.a23*o.a12+this.a33*o.a13,this.a13*o.a21+this.a23*o.a22+this.a33*o.a23,this.a13*o.a31+this.a23*o.a32+this.a33*o.a33)}}class _l extends Br{sampleGrid(o,d,m,v,b,S,N,R,P,F,$,K,ee,oe,ce,be,_e,Ge,He){const Fe=Ur.quadrilateralToQuadrilateral(v,b,S,N,R,P,F,$,K,ee,oe,ce,be,_e,Ge,He);return this.sampleGridWithTransform(o,d,m,Fe)}sampleGridWithTransform(o,d,m,v){if(d<=0||m<=0)throw new le;const b=new Te(d,m),S=new Float32Array(2*d);for(let N=0;N<m;N++){const R=S.length,P=N+.5;for(let F=0;F<R;F+=2)S[F]=F/2+.5,S[F+1]=P;v.transformPoints(S),Br.checkAndNudgePoints(o,S);try{for(let F=0;F<R;F+=2)o.get(Math.floor(S[F]),Math.floor(S[F+1]))&&b.set(F/2,N)}catch{throw new le}}return b}}class di{static setGridSampler(o){di.gridSampler=o}static getInstance(){return di.gridSampler}}di.gridSampler=new _l;class Cr{constructor(o,d){this.x=o,this.y=d}toResultPoint(){return new Ze(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Tl{constructor(o){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=o}detect(){return this.detectMirror(!1)}detectMirror(o){let d=this.getMatrixCenter(),m=this.getBullsEyeCorners(d);if(o){let S=m[0];m[0]=m[2],m[2]=S}this.extractParameters(m);let v=this.sampleGrid(this.image,m[this.shift%4],m[(this.shift+1)%4],m[(this.shift+2)%4],m[(this.shift+3)%4]),b=this.getMatrixCornerPoints(m);return new Ke(v,b,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(o){if(!this.isValidPoint(o[0])||!this.isValidPoint(o[1])||!this.isValidPoint(o[2])||!this.isValidPoint(o[3]))throw new le;let d=2*this.nbCenterLayers,m=new Int32Array([this.sampleLine(o[0],o[1],d),this.sampleLine(o[1],o[2],d),this.sampleLine(o[2],o[3],d),this.sampleLine(o[3],o[0],d)]);this.shift=this.getRotation(m,d);let v=0;for(let S=0;S<4;S++){let N=m[(this.shift+S)%4];this.compact?(v<<=7,v+=N>>1&127):(v<<=10,v+=(N>>2&992)+(N>>1&31))}let b=this.getCorrectedParameterData(v,this.compact);this.compact?(this.nbLayers=(b>>6)+1,this.nbDataBlocks=(b&63)+1):(this.nbLayers=(b>>11)+1,this.nbDataBlocks=(b&2047)+1)}getRotation(o,d){let m=0;o.forEach((v,b,S)=>{let N=(v>>d-2<<1)+(v&1);m=(m<<3)+N}),m=((m&1)<<11)+(m>>1);for(let v=0;v<4;v++)if(L.bitCount(m^this.EXPECTED_CORNER_BITS[v])<=2)return v;throw new le}getCorrectedParameterData(o,d){let m,v;d?(m=7,v=2):(m=10,v=4);let b=m-v,S=new Int32Array(m);for(let R=m-1;R>=0;--R)S[R]=o&15,o>>=4;try{new gn(ft.AZTEC_PARAM).decode(S,b)}catch{throw new le}let N=0;for(let R=0;R<v;R++)N=(N<<4)+S[R];return N}getBullsEyeCorners(o){let d=o,m=o,v=o,b=o,S=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let $=this.getFirstDifferent(d,S,1,-1),K=this.getFirstDifferent(m,S,1,1),ee=this.getFirstDifferent(v,S,-1,1),oe=this.getFirstDifferent(b,S,-1,-1);if(this.nbCenterLayers>2){let ce=this.distancePoint(oe,$)*this.nbCenterLayers/(this.distancePoint(b,d)*(this.nbCenterLayers+2));if(ce<.75||ce>1.25||!this.isWhiteOrBlackRectangle($,K,ee,oe))break}d=$,m=K,v=ee,b=oe,S=!S}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new le;this.compact=this.nbCenterLayers===5;let N=new Ze(d.getX()+.5,d.getY()-.5),R=new Ze(m.getX()+.5,m.getY()+.5),P=new Ze(v.getX()-.5,v.getY()+.5),F=new Ze(b.getX()-.5,b.getY()-.5);return this.expandSquare([N,R,P,F],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let o,d,m,v;try{let N=new _t(this.image).detect();o=N[0],d=N[1],m=N[2],v=N[3]}catch{let R=this.image.getWidth()/2,P=this.image.getHeight()/2;o=this.getFirstDifferent(new Cr(R+7,P-7),!1,1,-1).toResultPoint(),d=this.getFirstDifferent(new Cr(R+7,P+7),!1,1,1).toResultPoint(),m=this.getFirstDifferent(new Cr(R-7,P+7),!1,-1,1).toResultPoint(),v=this.getFirstDifferent(new Cr(R-7,P-7),!1,-1,-1).toResultPoint()}let b=Rt.round((o.getX()+v.getX()+d.getX()+m.getX())/4),S=Rt.round((o.getY()+v.getY()+d.getY()+m.getY())/4);try{let N=new _t(this.image,15,b,S).detect();o=N[0],d=N[1],m=N[2],v=N[3]}catch{o=this.getFirstDifferent(new Cr(b+7,S-7),!1,1,-1).toResultPoint(),d=this.getFirstDifferent(new Cr(b+7,S+7),!1,1,1).toResultPoint(),m=this.getFirstDifferent(new Cr(b-7,S+7),!1,-1,1).toResultPoint(),v=this.getFirstDifferent(new Cr(b-7,S-7),!1,-1,-1).toResultPoint()}return b=Rt.round((o.getX()+v.getX()+d.getX()+m.getX())/4),S=Rt.round((o.getY()+v.getY()+d.getY()+m.getY())/4),new Cr(b,S)}getMatrixCornerPoints(o){return this.expandSquare(o,2*this.nbCenterLayers,this.getDimension())}sampleGrid(o,d,m,v,b){let S=di.getInstance(),N=this.getDimension(),R=N/2-this.nbCenterLayers,P=N/2+this.nbCenterLayers;return S.sampleGrid(o,N,N,R,R,P,R,P,P,R,P,d.getX(),d.getY(),m.getX(),m.getY(),v.getX(),v.getY(),b.getX(),b.getY())}sampleLine(o,d,m){let v=0,b=this.distanceResultPoint(o,d),S=b/m,N=o.getX(),R=o.getY(),P=S*(d.getX()-o.getX())/b,F=S*(d.getY()-o.getY())/b;for(let $=0;$<m;$++)this.image.get(Rt.round(N+$*P),Rt.round(R+$*F))&&(v|=1<<m-$-1);return v}isWhiteOrBlackRectangle(o,d,m,v){let b=3;o=new Cr(o.getX()-b,o.getY()+b),d=new Cr(d.getX()-b,d.getY()-b),m=new Cr(m.getX()+b,m.getY()-b),v=new Cr(v.getX()+b,v.getY()+b);let S=this.getColor(v,o);if(S===0)return!1;let N=this.getColor(o,d);return N!==S||(N=this.getColor(d,m),N!==S)?!1:(N=this.getColor(m,v),N===S)}getColor(o,d){let m=this.distancePoint(o,d),v=(d.getX()-o.getX())/m,b=(d.getY()-o.getY())/m,S=0,N=o.getX(),R=o.getY(),P=this.image.get(o.getX(),o.getY()),F=Math.ceil(m);for(let K=0;K<F;K++)N+=v,R+=b,this.image.get(Rt.round(N),Rt.round(R))!==P&&S++;let $=S/m;return $>.1&&$<.9?0:$<=.1===P?1:-1}getFirstDifferent(o,d,m,v){let b=o.getX()+m,S=o.getY()+v;for(;this.isValid(b,S)&&this.image.get(b,S)===d;)b+=m,S+=v;for(b-=m,S-=v;this.isValid(b,S)&&this.image.get(b,S)===d;)b+=m;for(b-=m;this.isValid(b,S)&&this.image.get(b,S)===d;)S+=v;return S-=v,new Cr(b,S)}expandSquare(o,d,m){let v=m/(2*d),b=o[0].getX()-o[2].getX(),S=o[0].getY()-o[2].getY(),N=(o[0].getX()+o[2].getX())/2,R=(o[0].getY()+o[2].getY())/2,P=new Ze(N+v*b,R+v*S),F=new Ze(N-v*b,R-v*S);b=o[1].getX()-o[3].getX(),S=o[1].getY()-o[3].getY(),N=(o[1].getX()+o[3].getX())/2,R=(o[1].getY()+o[3].getY())/2;let $=new Ze(N+v*b,R+v*S),K=new Ze(N-v*b,R-v*S);return[P,$,F,K]}isValid(o,d){return o>=0&&o<this.image.getWidth()&&d>0&&d<this.image.getHeight()}isValidPoint(o){let d=Rt.round(o.getX()),m=Rt.round(o.getY());return this.isValid(d,m)}distancePoint(o,d){return Rt.distance(o.getX(),o.getY(),d.getX(),d.getY())}distanceResultPoint(o,d){return Rt.distance(o.getX(),o.getY(),d.getX(),d.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(L.truncDivision(this.nbLayers-4,8)+1)+15}}class is{decode(o,d=null){let m=null,v=new Tl(o.getBlackMatrix()),b=null,S=null;try{let F=v.detectMirror(!1);b=F.getPoints(),this.reportFoundResultPoints(d,b),S=new Ft().decode(F)}catch(F){m=F}if(S==null)try{let F=v.detectMirror(!0);b=F.getPoints(),this.reportFoundResultPoints(d,b),S=new Ft().decode(F)}catch(F){throw m??F}let N=new se(S.getText(),S.getRawBytes(),S.getNumBits(),b,ie.AZTEC,M.currentTimeMillis()),R=S.getByteSegments();R!=null&&N.putMetadata(qe.BYTE_SEGMENTS,R);let P=S.getECLevel();return P!=null&&N.putMetadata(qe.ERROR_CORRECTION_LEVEL,P),N}reportFoundResultPoints(o,d){if(o!=null){let m=o.get(z.NEED_RESULT_POINT_CALLBACK);m!=null&&d.forEach((v,b,S)=>{m.foundPossibleResultPoint(v)})}}reset(){}}class cd extends he{constructor(o=500){super(new is,o)}}class xn{decode(o,d){try{return this.doDecode(o,d)}catch{if(d&&d.get(z.TRY_HARDER)===!0&&o.isRotateSupported()){const b=o.rotateCounterClockwise(),S=this.doDecode(b,d),N=S.getResultMetadata();let R=270;N!==null&&N.get(qe.ORIENTATION)===!0&&(R=R+N.get(qe.ORIENTATION)%360),S.putMetadata(qe.ORIENTATION,R);const P=S.getResultPoints();if(P!==null){const F=b.getHeight();for(let $=0;$<P.length;$++)P[$]=new Ze(F-P[$].getY()-1,P[$].getX())}return S}else throw new le}}reset(){}doDecode(o,d){const m=o.getWidth(),v=o.getHeight();let b=new G(m);const S=d&&d.get(z.TRY_HARDER)===!0,N=Math.max(1,v>>(S?8:5));let R;S?R=v:R=15;const P=Math.trunc(v/2);for(let F=0;F<R;F++){const $=Math.trunc((F+1)/2),K=(F&1)===0,ee=P+N*(K?$:-$);if(ee<0||ee>=v)break;try{b=o.getBlackRow(ee,b)}catch{continue}for(let oe=0;oe<2;oe++){if(oe===1&&(b.reverse(),d&&d.get(z.NEED_RESULT_POINT_CALLBACK)===!0)){const ce=new Map;d.forEach((be,_e)=>ce.set(_e,be)),ce.delete(z.NEED_RESULT_POINT_CALLBACK),d=ce}try{const ce=this.decodeRow(ee,b,d);if(oe===1){ce.putMetadata(qe.ORIENTATION,180);const be=ce.getResultPoints();be!==null&&(be[0]=new Ze(m-be[0].getX()-1,be[0].getY()),be[1]=new Ze(m-be[1].getX()-1,be[1].getY()))}return ce}catch{}}}throw new le}static recordPattern(o,d,m){const v=m.length;for(let P=0;P<v;P++)m[P]=0;const b=o.getSize();if(d>=b)throw new le;let S=!o.get(d),N=0,R=d;for(;R<b;){if(o.get(R)!==S)m[N]++;else{if(++N===v)break;m[N]=1,S=!S}R++}if(!(N===v||N===v-1&&R===b))throw new le}static recordPatternInReverse(o,d,m){let v=m.length,b=o.get(d);for(;d>0&&v>=0;)o.get(--d)!==b&&(v--,b=!b);if(v>=0)throw new le;xn.recordPattern(o,d+1,m)}static patternMatchVariance(o,d,m){const v=o.length;let b=0,S=0;for(let P=0;P<v;P++)b+=o[P],S+=d[P];if(b<S)return Number.POSITIVE_INFINITY;const N=b/S;m*=N;let R=0;for(let P=0;P<v;P++){const F=o[P],$=d[P]*N,K=F>$?F-$:$-F;if(K>m)return Number.POSITIVE_INFINITY;R+=K}return R/b}}class ze extends xn{static findStartPattern(o){const d=o.getSize(),m=o.getNextSet(0);let v=0,b=Int32Array.from([0,0,0,0,0,0]),S=m,N=!1;const R=6;for(let P=m;P<d;P++)if(o.get(P)!==N)b[v]++;else{if(v===R-1){let F=ze.MAX_AVG_VARIANCE,$=-1;for(let K=ze.CODE_START_A;K<=ze.CODE_START_C;K++){const ee=xn.patternMatchVariance(b,ze.CODE_PATTERNS[K],ze.MAX_INDIVIDUAL_VARIANCE);ee<F&&(F=ee,$=K)}if($>=0&&o.isRange(Math.max(0,S-(P-S)/2),S,!1))return Int32Array.from([S,P,$]);S+=b[0]+b[1],b=b.slice(2,b.length-1),b[v-1]=0,b[v]=0,v--}else v++;b[v]=1,N=!N}throw new le}static decodeCode(o,d,m){xn.recordPattern(o,m,d);let v=ze.MAX_AVG_VARIANCE,b=-1;for(let S=0;S<ze.CODE_PATTERNS.length;S++){const N=ze.CODE_PATTERNS[S],R=this.patternMatchVariance(d,N,ze.MAX_INDIVIDUAL_VARIANCE);R<v&&(v=R,b=S)}if(b>=0)return b;throw new le}decodeRow(o,d,m){const v=m&&m.get(z.ASSUME_GS1)===!0,b=ze.findStartPattern(d),S=b[2];let N=0;const R=new Uint8Array(20);R[N++]=S;let P;switch(S){case ze.CODE_START_A:P=ze.CODE_CODE_A;break;case ze.CODE_START_B:P=ze.CODE_CODE_B;break;case ze.CODE_START_C:P=ze.CODE_CODE_C;break;default:throw new B}let F=!1,$=!1,K="",ee=b[0],oe=b[1];const ce=Int32Array.from([0,0,0,0,0,0]);let be=0,_e=0,Ge=S,He=0,Fe=!0,Dt=!1,At=!1;for(;!F;){const Ds=$;switch($=!1,be=_e,_e=ze.decodeCode(d,ce,oe),R[N++]=_e,_e!==ze.CODE_STOP&&(Fe=!0),_e!==ze.CODE_STOP&&(He++,Ge+=He*_e),ee=oe,oe+=ce.reduce((Nh,vd)=>Nh+vd,0),_e){case ze.CODE_START_A:case ze.CODE_START_B:case ze.CODE_START_C:throw new B}switch(P){case ze.CODE_CODE_A:if(_e<64)At===Dt?K+=String.fromCharCode(32+_e):K+=String.fromCharCode(32+_e+128),At=!1;else if(_e<96)At===Dt?K+=String.fromCharCode(_e-64):K+=String.fromCharCode(_e+64),At=!1;else switch(_e!==ze.CODE_STOP&&(Fe=!1),_e){case ze.CODE_FNC_1:v&&(K.length===0?K+="]C1":K+="");break;case ze.CODE_FNC_2:case ze.CODE_FNC_3:break;case ze.CODE_FNC_4_A:!Dt&&At?(Dt=!0,At=!1):Dt&&At?(Dt=!1,At=!1):At=!0;break;case ze.CODE_SHIFT:$=!0,P=ze.CODE_CODE_B;break;case ze.CODE_CODE_B:P=ze.CODE_CODE_B;break;case ze.CODE_CODE_C:P=ze.CODE_CODE_C;break;case ze.CODE_STOP:F=!0;break}break;case ze.CODE_CODE_B:if(_e<96)At===Dt?K+=String.fromCharCode(32+_e):K+=String.fromCharCode(32+_e+128),At=!1;else switch(_e!==ze.CODE_STOP&&(Fe=!1),_e){case ze.CODE_FNC_1:v&&(K.length===0?K+="]C1":K+="");break;case ze.CODE_FNC_2:case ze.CODE_FNC_3:break;case ze.CODE_FNC_4_B:!Dt&&At?(Dt=!0,At=!1):Dt&&At?(Dt=!1,At=!1):At=!0;break;case ze.CODE_SHIFT:$=!0,P=ze.CODE_CODE_A;break;case ze.CODE_CODE_A:P=ze.CODE_CODE_A;break;case ze.CODE_CODE_C:P=ze.CODE_CODE_C;break;case ze.CODE_STOP:F=!0;break}break;case ze.CODE_CODE_C:if(_e<100)_e<10&&(K+="0"),K+=_e;else switch(_e!==ze.CODE_STOP&&(Fe=!1),_e){case ze.CODE_FNC_1:v&&(K.length===0?K+="]C1":K+="");break;case ze.CODE_CODE_A:P=ze.CODE_CODE_A;break;case ze.CODE_CODE_B:P=ze.CODE_CODE_B;break;case ze.CODE_STOP:F=!0;break}break}Ds&&(P=P===ze.CODE_CODE_A?ze.CODE_CODE_B:ze.CODE_CODE_A)}const Zn=oe-ee;if(oe=d.getNextUnset(oe),!d.isRange(oe,Math.min(d.getSize(),oe+(oe-ee)/2),!1))throw new le;if(Ge-=He*be,Ge%103!==be)throw new C;const Ci=K.length;if(Ci===0)throw new le;Ci>0&&Fe&&(P===ze.CODE_CODE_C?K=K.substring(0,Ci-2):K=K.substring(0,Ci-1));const Kr=(b[1]+b[0])/2,dn=ee+Zn/2,Ir=R.length,mi=new Uint8Array(Ir);for(let Ds=0;Ds<Ir;Ds++)mi[Ds]=R[Ds];const Bo=[new Ze(Kr,o),new Ze(dn,o)];return new se(K,mi,0,Bo,ie.CODE_128,new Date().getTime())}}ze.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],ze.MAX_AVG_VARIANCE=.25,ze.MAX_INDIVIDUAL_VARIANCE=.7,ze.CODE_SHIFT=98,ze.CODE_CODE_C=99,ze.CODE_CODE_B=100,ze.CODE_CODE_A=101,ze.CODE_FNC_1=102,ze.CODE_FNC_2=97,ze.CODE_FNC_3=96,ze.CODE_FNC_4_A=101,ze.CODE_FNC_4_B=100,ze.CODE_START_A=103,ze.CODE_START_B=104,ze.CODE_START_C=105,ze.CODE_STOP=106;class ln extends xn{constructor(o=!1,d=!1){super(),this.usingCheckDigit=o,this.extendedMode=d,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(o,d,m){let v=this.counters;v.fill(0),this.decodeRowResult="";let b=ln.findAsteriskPattern(d,v),S=d.getNextSet(b[1]),N=d.getSize(),R,P;do{ln.recordPattern(d,S,v);let ce=ln.toNarrowWidePattern(v);if(ce<0)throw new le;R=ln.patternToChar(ce),this.decodeRowResult+=R,P=S;for(let be of v)S+=be;S=d.getNextSet(S)}while(R!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let F=0;for(let ce of v)F+=ce;let $=S-P-F;if(S!==N&&$*2<F)throw new le;if(this.usingCheckDigit){let ce=this.decodeRowResult.length-1,be=0;for(let _e=0;_e<ce;_e++)be+=ln.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(_e));if(this.decodeRowResult.charAt(ce)!==ln.ALPHABET_STRING.charAt(be%43))throw new C;this.decodeRowResult=this.decodeRowResult.substring(0,ce)}if(this.decodeRowResult.length===0)throw new le;let K;this.extendedMode?K=ln.decodeExtended(this.decodeRowResult):K=this.decodeRowResult;let ee=(b[1]+b[0])/2,oe=P+F/2;return new se(K,null,0,[new Ze(ee,o),new Ze(oe,o)],ie.CODE_39,new Date().getTime())}static findAsteriskPattern(o,d){let m=o.getSize(),v=o.getNextSet(0),b=0,S=v,N=!1,R=d.length;for(let P=v;P<m;P++)if(o.get(P)!==N)d[b]++;else{if(b===R-1){if(this.toNarrowWidePattern(d)===ln.ASTERISK_ENCODING&&o.isRange(Math.max(0,S-Math.floor((P-S)/2)),S,!1))return[S,P];S+=d[0]+d[1],d.copyWithin(0,2,2+b-1),d[b-1]=0,d[b]=0,b--}else b++;d[b]=1,N=!N}throw new le}static toNarrowWidePattern(o){let d=o.length,m=0,v;do{let b=2147483647;for(let R of o)R<b&&R>m&&(b=R);m=b,v=0;let S=0,N=0;for(let R=0;R<d;R++){let P=o[R];P>m&&(N|=1<<d-1-R,v++,S+=P)}if(v===3){for(let R=0;R<d&&v>0;R++){let P=o[R];if(P>m&&(v--,P*2>=S))return-1}return N}}while(v>3);return-1}static patternToChar(o){for(let d=0;d<ln.CHARACTER_ENCODINGS.length;d++)if(ln.CHARACTER_ENCODINGS[d]===o)return ln.ALPHABET_STRING.charAt(d);if(o===ln.ASTERISK_ENCODING)return"*";throw new le}static decodeExtended(o){let d=o.length,m="";for(let v=0;v<d;v++){let b=o.charAt(v);if(b==="+"||b==="$"||b==="%"||b==="/"){let S=o.charAt(v+1),N="\0";switch(b){case"+":if(S>="A"&&S<="Z")N=String.fromCharCode(S.charCodeAt(0)+32);else throw new B;break;case"$":if(S>="A"&&S<="Z")N=String.fromCharCode(S.charCodeAt(0)-64);else throw new B;break;case"%":if(S>="A"&&S<="E")N=String.fromCharCode(S.charCodeAt(0)-38);else if(S>="F"&&S<="J")N=String.fromCharCode(S.charCodeAt(0)-11);else if(S>="K"&&S<="O")N=String.fromCharCode(S.charCodeAt(0)+16);else if(S>="P"&&S<="T")N=String.fromCharCode(S.charCodeAt(0)+43);else if(S==="U")N="\0";else if(S==="V")N="@";else if(S==="W")N="`";else if(S==="X"||S==="Y"||S==="Z")N="";else throw new B;break;case"/":if(S>="A"&&S<="O")N=String.fromCharCode(S.charCodeAt(0)-32);else if(S==="Z")N=":";else throw new B;break}m+=N,v++}else m+=b}return m}}ln.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",ln.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],ln.ASTERISK_ENCODING=148;class Tt extends xn{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(o,d,m){let v=this.decodeStart(d),b=this.decodeEnd(d),S=new pe;Tt.decodeMiddle(d,v[1],b[0],S);let N=S.toString(),R=null;m!=null&&(R=m.get(z.ALLOWED_LENGTHS)),R==null&&(R=Tt.DEFAULT_ALLOWED_LENGTHS);let P=N.length,F=!1,$=0;for(let oe of R){if(P===oe){F=!0;break}oe>$&&($=oe)}if(!F&&P>$&&(F=!0),!F)throw new B;const K=[new Ze(v[1],o),new Ze(b[0],o)];return new se(N,null,0,K,ie.ITF,new Date().getTime())}static decodeMiddle(o,d,m,v){let b=new Int32Array(10),S=new Int32Array(5),N=new Int32Array(5);for(b.fill(0),S.fill(0),N.fill(0);d<m;){xn.recordPattern(o,d,b);for(let P=0;P<5;P++){let F=2*P;S[P]=b[F],N[P]=b[F+1]}let R=Tt.decodeDigit(S);v.append(R.toString()),R=this.decodeDigit(N),v.append(R.toString()),b.forEach(function(P){d+=P})}}decodeStart(o){let d=Tt.skipWhiteSpace(o),m=Tt.findGuardPattern(o,d,Tt.START_PATTERN);return this.narrowLineWidth=(m[1]-m[0])/4,this.validateQuietZone(o,m[0]),m}validateQuietZone(o,d){let m=this.narrowLineWidth*10;m=m<d?m:d;for(let v=d-1;m>0&&v>=0&&!o.get(v);v--)m--;if(m!==0)throw new le}static skipWhiteSpace(o){const d=o.getSize(),m=o.getNextSet(0);if(m===d)throw new le;return m}decodeEnd(o){o.reverse();try{let d=Tt.skipWhiteSpace(o),m;try{m=Tt.findGuardPattern(o,d,Tt.END_PATTERN_REVERSED[0])}catch(b){b instanceof le&&(m=Tt.findGuardPattern(o,d,Tt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(o,m[0]);let v=m[0];return m[0]=o.getSize()-m[1],m[1]=o.getSize()-v,m}finally{o.reverse()}}static findGuardPattern(o,d,m){let v=m.length,b=new Int32Array(v),S=o.getSize(),N=!1,R=0,P=d;b.fill(0);for(let F=d;F<S;F++)if(o.get(F)!==N)b[R]++;else{if(R===v-1){if(xn.patternMatchVariance(b,m,Tt.MAX_INDIVIDUAL_VARIANCE)<Tt.MAX_AVG_VARIANCE)return[P,F];P+=b[0]+b[1],M.arraycopy(b,2,b,0,R-1),b[R-1]=0,b[R]=0,R--}else R++;b[R]=1,N=!N}throw new le}static decodeDigit(o){let d=Tt.MAX_AVG_VARIANCE,m=-1,v=Tt.PATTERNS.length;for(let b=0;b<v;b++){let S=Tt.PATTERNS[b],N=xn.patternMatchVariance(o,S,Tt.MAX_INDIVIDUAL_VARIANCE);N<d?(d=N,m=b):N===d&&(m=-1)}if(m>=0)return m%10;throw new le}}Tt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Tt.MAX_AVG_VARIANCE=.38,Tt.MAX_INDIVIDUAL_VARIANCE=.5,Tt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Tt.START_PATTERN=Int32Array.from([1,1,1,1]),Tt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Sn extends xn{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(o){let d=!1,m,v=0,b=Int32Array.from([0,0,0]);for(;!d;){b=Int32Array.from([0,0,0]),m=Sn.findGuardPattern(o,v,!1,this.START_END_PATTERN,b);let S=m[0];v=m[1];let N=S-(v-S);N>=0&&(d=o.isRange(N,S,!1))}return m}static checkChecksum(o){return Sn.checkStandardUPCEANChecksum(o)}static checkStandardUPCEANChecksum(o){let d=o.length;if(d===0)return!1;let m=parseInt(o.charAt(d-1),10);return Sn.getStandardUPCEANChecksum(o.substring(0,d-1))===m}static getStandardUPCEANChecksum(o){let d=o.length,m=0;for(let v=d-1;v>=0;v-=2){let b=o.charAt(v).charCodeAt(0)-48;if(b<0||b>9)throw new B;m+=b}m*=3;for(let v=d-2;v>=0;v-=2){let b=o.charAt(v).charCodeAt(0)-48;if(b<0||b>9)throw new B;m+=b}return(1e3-m)%10}static decodeEnd(o,d){return Sn.findGuardPattern(o,d,!1,Sn.START_END_PATTERN,new Int32Array(Sn.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(o,d,m,v){return this.findGuardPattern(o,d,m,v,new Int32Array(v.length))}static findGuardPattern(o,d,m,v,b){let S=o.getSize();d=m?o.getNextUnset(d):o.getNextSet(d);let N=0,R=d,P=v.length,F=m;for(let $=d;$<S;$++)if(o.get($)!==F)b[N]++;else{if(N===P-1){if(xn.patternMatchVariance(b,v,Sn.MAX_INDIVIDUAL_VARIANCE)<Sn.MAX_AVG_VARIANCE)return Int32Array.from([R,$]);R+=b[0]+b[1];let K=b.slice(2,b.length-1);for(let ee=0;ee<N-1;ee++)b[ee]=K[ee];b[N-1]=0,b[N]=0,N--}else N++;b[N]=1,F=!F}throw new le}static decodeDigit(o,d,m,v){this.recordPattern(o,m,d);let b=this.MAX_AVG_VARIANCE,S=-1,N=v.length;for(let R=0;R<N;R++){let P=v[R],F=xn.patternMatchVariance(d,P,Sn.MAX_INDIVIDUAL_VARIANCE);F<b&&(b=F,S=R)}if(S>=0)return S;throw new le}}Sn.MAX_AVG_VARIANCE=.48,Sn.MAX_INDIVIDUAL_VARIANCE=.7,Sn.START_END_PATTERN=Int32Array.from([1,1,1]),Sn.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Sn.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Sn.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class As{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(o,d,m){let v=this.decodeRowStringBuffer,b=this.decodeMiddle(d,m,v),S=v.toString(),N=As.parseExtensionString(S),R=[new Ze((m[0]+m[1])/2,o),new Ze(b,o)],P=new se(S,null,0,R,ie.UPC_EAN_EXTENSION,new Date().getTime());return N!=null&&P.putAllMetadata(N),P}decodeMiddle(o,d,m){let v=this.decodeMiddleCounters;v[0]=0,v[1]=0,v[2]=0,v[3]=0;let b=o.getSize(),S=d[1],N=0;for(let P=0;P<5&&S<b;P++){let F=Sn.decodeDigit(o,v,S,Sn.L_AND_G_PATTERNS);m+=String.fromCharCode(48+F%10);for(let $ of v)S+=$;F>=10&&(N|=1<<4-P),P!==4&&(S=o.getNextSet(S),S=o.getNextUnset(S))}if(m.length!==5)throw new le;let R=this.determineCheckDigit(N);if(As.extensionChecksum(m.toString())!==R)throw new le;return S}static extensionChecksum(o){let d=o.length,m=0;for(let v=d-2;v>=0;v-=2)m+=o.charAt(v).charCodeAt(0)-48;m*=3;for(let v=d-1;v>=0;v-=2)m+=o.charAt(v).charCodeAt(0)-48;return m*=3,m%10}determineCheckDigit(o){for(let d=0;d<10;d++)if(o===this.CHECK_DIGIT_ENCODINGS[d])return d;throw new le}static parseExtensionString(o){if(o.length!==5)return null;let d=As.parseExtension5String(o);return d==null?null:new Map([[qe.SUGGESTED_PRICE,d]])}static parseExtension5String(o){let d;switch(o.charAt(0)){case"0":d="";break;case"5":d="$";break;case"9":switch(o){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}d="";break;default:d="";break}let m=parseInt(o.substring(1)),v=(m/100).toString(),b=m%100,S=b<10?"0"+b:b.toString();return d+v+"."+S}}class Il{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(o,d,m){let v=this.decodeRowStringBuffer,b=this.decodeMiddle(d,m,v),S=v.toString(),N=Il.parseExtensionString(S),R=[new Ze((m[0]+m[1])/2,o),new Ze(b,o)],P=new se(S,null,0,R,ie.UPC_EAN_EXTENSION,new Date().getTime());return N!=null&&P.putAllMetadata(N),P}decodeMiddle(o,d,m){let v=this.decodeMiddleCounters;v[0]=0,v[1]=0,v[2]=0,v[3]=0;let b=o.getSize(),S=d[1],N=0;for(let R=0;R<2&&S<b;R++){let P=Sn.decodeDigit(o,v,S,Sn.L_AND_G_PATTERNS);m+=String.fromCharCode(48+P%10);for(let F of v)S+=F;P>=10&&(N|=1<<1-R),R!==1&&(S=o.getNextSet(S),S=o.getNextUnset(S))}if(m.length!==2)throw new le;if(parseInt(m.toString())%4!==N)throw new le;return S}static parseExtensionString(o){return o.length!==2?null:new Map([[qe.ISSUE_NUMBER,parseInt(o)]])}}class Cs{static decodeRow(o,d,m){let v=Sn.findGuardPattern(d,m,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new As().decodeRow(o,d,v)}catch{return new Il().decodeRow(o,d,v)}}}Cs.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Lt extends Sn{constructor(){super(),this.decodeRowStringBuffer="",Lt.L_AND_G_PATTERNS=Lt.L_PATTERNS.map(o=>Int32Array.from(o));for(let o=10;o<20;o++){let d=Lt.L_PATTERNS[o-10],m=new Int32Array(d.length);for(let v=0;v<d.length;v++)m[v]=d[d.length-v-1];Lt.L_AND_G_PATTERNS[o]=m}}decodeRow(o,d,m){let v=Lt.findStartGuardPattern(d),b=m==null?null:m.get(z.NEED_RESULT_POINT_CALLBACK);if(b!=null){const Fe=new Ze((v[0]+v[1])/2,o);b.foundPossibleResultPoint(Fe)}let S=this.decodeMiddle(d,v,this.decodeRowStringBuffer),N=S.rowOffset,R=S.resultString;if(b!=null){const Fe=new Ze(N,o);b.foundPossibleResultPoint(Fe)}let P=this.decodeEnd(d,N);if(b!=null){const Fe=new Ze((P[0]+P[1])/2,o);b.foundPossibleResultPoint(Fe)}let F=P[1],$=F+(F-P[0]);if($>=d.getSize()||!d.isRange(F,$,!1))throw new le;let K=R.toString();if(K.length<8)throw new B;if(!Lt.checkChecksum(K))throw new C;let ee=(v[1]+v[0])/2,oe=(P[1]+P[0])/2,ce=this.getBarcodeFormat(),be=[new Ze(ee,o),new Ze(oe,o)],_e=new se(K,null,0,be,ce,new Date().getTime()),Ge=0;try{let Fe=Cs.decodeRow(o,d,P[1]);_e.putMetadata(qe.UPC_EAN_EXTENSION,Fe.getText()),_e.putAllMetadata(Fe.getResultMetadata()),_e.addResultPoints(Fe.getResultPoints()),Ge=Fe.getText().length}catch{}let He=m==null?null:m.get(z.ALLOWED_EAN_EXTENSIONS);if(He!=null){let Fe=!1;for(let Dt in He)if(Ge.toString()===Dt){Fe=!0;break}if(!Fe)throw new le}return _e}decodeEnd(o,d){return Lt.findGuardPattern(o,d,!1,Lt.START_END_PATTERN,new Int32Array(Lt.START_END_PATTERN.length).fill(0))}static checkChecksum(o){return Lt.checkStandardUPCEANChecksum(o)}static checkStandardUPCEANChecksum(o){let d=o.length;if(d===0)return!1;let m=parseInt(o.charAt(d-1),10);return Lt.getStandardUPCEANChecksum(o.substring(0,d-1))===m}static getStandardUPCEANChecksum(o){let d=o.length,m=0;for(let v=d-1;v>=0;v-=2){let b=o.charAt(v).charCodeAt(0)-48;if(b<0||b>9)throw new B;m+=b}m*=3;for(let v=d-2;v>=0;v-=2){let b=o.charAt(v).charCodeAt(0)-48;if(b<0||b>9)throw new B;m+=b}return(1e3-m)%10}}class Nr extends Lt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(o,d,m){let v=this.decodeMiddleCounters;v[0]=0,v[1]=0,v[2]=0,v[3]=0;let b=o.getSize(),S=d[1],N=0;for(let P=0;P<6&&S<b;P++){let F=Lt.decodeDigit(o,v,S,Lt.L_AND_G_PATTERNS);m+=String.fromCharCode(48+F%10);for(let $ of v)S+=$;F>=10&&(N|=1<<5-P)}m=Nr.determineFirstDigit(m,N),S=Lt.findGuardPattern(o,S,!0,Lt.MIDDLE_PATTERN,new Int32Array(Lt.MIDDLE_PATTERN.length).fill(0))[1];for(let P=0;P<6&&S<b;P++){let F=Lt.decodeDigit(o,v,S,Lt.L_PATTERNS);m+=String.fromCharCode(48+F);for(let $ of v)S+=$}return{rowOffset:S,resultString:m}}getBarcodeFormat(){return ie.EAN_13}static determineFirstDigit(o,d){for(let m=0;m<10;m++)if(d===this.FIRST_DIGIT_ENCODINGS[m])return o=String.fromCharCode(48+m)+o,o;throw new le}}Nr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class oa extends Lt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(o,d,m){const v=this.decodeMiddleCounters;v[0]=0,v[1]=0,v[2]=0,v[3]=0;let b=o.getSize(),S=d[1];for(let R=0;R<4&&S<b;R++){let P=Lt.decodeDigit(o,v,S,Lt.L_PATTERNS);m+=String.fromCharCode(48+P);for(let F of v)S+=F}S=Lt.findGuardPattern(o,S,!0,Lt.MIDDLE_PATTERN,new Int32Array(Lt.MIDDLE_PATTERN.length).fill(0))[1];for(let R=0;R<4&&S<b;R++){let P=Lt.decodeDigit(o,v,S,Lt.L_PATTERNS);m+=String.fromCharCode(48+P);for(let F of v)S+=F}return{rowOffset:S,resultString:m}}getBarcodeFormat(){return ie.EAN_8}}class Ns extends Lt{constructor(){super(...arguments),this.ean13Reader=new Nr}getBarcodeFormat(){return ie.UPC_A}decode(o,d){return this.maybeReturnResult(this.ean13Reader.decode(o))}decodeRow(o,d,m){return this.maybeReturnResult(this.ean13Reader.decodeRow(o,d,m))}decodeMiddle(o,d,m){return this.ean13Reader.decodeMiddle(o,d,m)}maybeReturnResult(o){let d=o.getText();if(d.charAt(0)==="0"){let m=new se(d.substring(1),null,null,o.getResultPoints(),ie.UPC_A);return o.getResultMetadata()!=null&&m.putAllMetadata(o.getResultMetadata()),m}else throw new le}reset(){this.ean13Reader.reset()}}class hr extends Lt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(o,d,m){const v=this.decodeMiddleCounters.map(P=>P);v[0]=0,v[1]=0,v[2]=0,v[3]=0;const b=o.getSize();let S=d[1],N=0;for(let P=0;P<6&&S<b;P++){const F=hr.decodeDigit(o,v,S,hr.L_AND_G_PATTERNS);m+=String.fromCharCode(48+F%10);for(let $ of v)S+=$;F>=10&&(N|=1<<5-P)}let R=hr.determineNumSysAndCheckDigit(m,N);return{rowOffset:S,resultString:R}}decodeEnd(o,d){return hr.findGuardPatternWithoutCounters(o,d,!0,hr.MIDDLE_END_PATTERN)}checkChecksum(o){return Lt.checkChecksum(hr.convertUPCEtoUPCA(o))}static determineNumSysAndCheckDigit(o,d){for(let m=0;m<=1;m++)for(let v=0;v<10;v++)if(d===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[m][v]){let b=String.fromCharCode(48+m),S=String.fromCharCode(48+v);return b+o+S}throw le.getNotFoundInstance()}getBarcodeFormat(){return ie.UPC_E}static convertUPCEtoUPCA(o){const d=o.slice(1,7).split("").map(b=>b.charCodeAt(0)),m=new pe;m.append(o.charAt(0));let v=d[5];switch(v){case 0:case 1:case 2:m.appendChars(d,0,2),m.append(v),m.append("0000"),m.appendChars(d,2,3);break;case 3:m.appendChars(d,0,3),m.append("00000"),m.appendChars(d,3,2);break;case 4:m.appendChars(d,0,4),m.append("00000"),m.append(d[4]);break;default:m.appendChars(d,0,5),m.append("0000"),m.append(v);break}return o.length>=8&&m.append(o.charAt(7)),m.toString()}}hr.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),hr.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Rl extends xn{constructor(o){super();let d=o==null?null:o.get(z.POSSIBLE_FORMATS),m=[];r(d)?(m.push(new Nr),m.push(new Ns),m.push(new oa),m.push(new hr)):(d.indexOf(ie.EAN_13)>-1&&m.push(new Nr),d.indexOf(ie.UPC_A)>-1&&m.push(new Ns),d.indexOf(ie.EAN_8)>-1&&m.push(new oa),d.indexOf(ie.UPC_E)>-1&&m.push(new hr)),this.readers=m}decodeRow(o,d,m){for(let v of this.readers)try{const b=v.decodeRow(o,d,m),S=b.getBarcodeFormat()===ie.EAN_13&&b.getText().charAt(0)==="0",N=m==null?null:m.get(z.POSSIBLE_FORMATS),R=N==null||N.includes(ie.UPC_A);if(S&&R){const P=b.getRawBytes(),F=new se(b.getText().substring(1),P,P?P.length:null,b.getResultPoints(),ie.UPC_A);return F.putAllMetadata(b.getResultMetadata()),F}return b}catch{}throw new le}reset(){for(let o of this.readers)o.reset()}}class sr extends xn{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(o,d){for(let m=0;m<d.length;m++)if(xn.patternMatchVariance(o,d[m],sr.MAX_INDIVIDUAL_VARIANCE)<sr.MAX_AVG_VARIANCE)return m;throw new le}static count(o){return Rt.sum(new Int32Array(o))}static increment(o,d){let m=0,v=d[0];for(let b=1;b<o.length;b++)d[b]>v&&(v=d[b],m=b);o[m]++}static decrement(o,d){let m=0,v=d[0];for(let b=1;b<o.length;b++)d[b]<v&&(v=d[b],m=b);o[m]--}static isFinderPattern(o){let d=o[0]+o[1],m=d+o[2]+o[3],v=d/m;if(v>=sr.MIN_FINDER_PATTERN_RATIO&&v<=sr.MAX_FINDER_PATTERN_RATIO){let b=Number.MAX_SAFE_INTEGER,S=Number.MIN_SAFE_INTEGER;for(let N of o)N>S&&(S=N),N<b&&(b=N);return S<10*b}return!1}}sr.MAX_AVG_VARIANCE=.2,sr.MAX_INDIVIDUAL_VARIANCE=.45,sr.MIN_FINDER_PATTERN_RATIO=9.5/12,sr.MAX_FINDER_PATTERN_RATIO=12.5/14;class la{constructor(o,d){this.value=o,this.checksumPortion=d}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(o){if(!(o instanceof la))return!1;const d=o;return this.value===d.value&&this.checksumPortion===d.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class ve{constructor(o,d,m,v,b){this.value=o,this.startEnd=d,this.value=o,this.startEnd=d,this.resultPoints=new Array,this.resultPoints.push(new Ze(m,b)),this.resultPoints.push(new Ze(v,b))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(o){if(!(o instanceof ve))return!1;const d=o;return this.value===d.value}hashCode(){return this.value}}class xe{constructor(){}static getRSSvalue(o,d,m){let v=0;for(let R of o)v+=R;let b=0,S=0,N=o.length;for(let R=0;R<N-1;R++){let P;for(P=1,S|=1<<R;P<o[R];P++,S&=~(1<<R)){let F=xe.combins(v-P-1,N-R-2);if(m&&S===0&&v-P-(N-R-1)>=N-R-1&&(F-=xe.combins(v-P-(N-R),N-R-2)),N-R-1>1){let $=0;for(let K=v-P-(N-R-2);K>d;K--)$+=xe.combins(v-P-K-1,N-R-3);F-=$*(N-1-R)}else v-P>d&&F--;b+=F}v-=P}return b}static combins(o,d){let m,v;o-d>d?(v=d,m=o-d):(v=o-d,m=d);let b=1,S=1;for(let N=o;N>m;N--)b*=N,S<=v&&(b/=S,S++);for(;S<=v;)b/=S,S++;return b}}class je{static buildBitArray(o){let d=o.length*2-1;o[o.length-1].getRightChar()==null&&(d-=1);let m=12*d,v=new G(m),b=0,N=o[0].getRightChar().getValue();for(let R=11;R>=0;--R)(N&1<<R)!=0&&v.set(b),b++;for(let R=1;R<o.length;++R){let P=o[R],F=P.getLeftChar().getValue();for(let $=11;$>=0;--$)(F&1<<$)!=0&&v.set(b),b++;if(P.getRightChar()!=null){let $=P.getRightChar().getValue();for(let K=11;K>=0;--K)($&1<<K)!=0&&v.set(b),b++}}return v}}class Ye{constructor(o,d){d?this.decodedInformation=null:(this.finished=o,this.decodedInformation=d)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class tt{constructor(o){this.newPosition=o}getNewPosition(){return this.newPosition}}class bt extends tt{constructor(o,d){super(o),this.value=d}getValue(){return this.value}isFNC1(){return this.value===bt.FNC1}}bt.FNC1="$";class kt extends tt{constructor(o,d,m){super(o),m?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=d}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class St extends tt{constructor(o,d,m){if(super(o),d<0||d>10||m<0||m>10)throw new B;this.firstDigit=d,this.secondDigit=m}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===St.FNC1}isSecondDigitFNC1(){return this.secondDigit===St.FNC1}isAnyFNC1(){return this.firstDigit===St.FNC1||this.secondDigit===St.FNC1}}St.FNC1=10;class We{constructor(){}static parseFieldsInGeneralPurpose(o){if(!o)return null;if(o.length<2)throw new le;let d=o.substring(0,2);for(let b of We.TWO_DIGIT_DATA_LENGTH)if(b[0]===d)return b[1]===We.VARIABLE_LENGTH?We.processVariableAI(2,b[2],o):We.processFixedAI(2,b[1],o);if(o.length<3)throw new le;let m=o.substring(0,3);for(let b of We.THREE_DIGIT_DATA_LENGTH)if(b[0]===m)return b[1]===We.VARIABLE_LENGTH?We.processVariableAI(3,b[2],o):We.processFixedAI(3,b[1],o);for(let b of We.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(b[0]===m)return b[1]===We.VARIABLE_LENGTH?We.processVariableAI(4,b[2],o):We.processFixedAI(4,b[1],o);if(o.length<4)throw new le;let v=o.substring(0,4);for(let b of We.FOUR_DIGIT_DATA_LENGTH)if(b[0]===v)return b[1]===We.VARIABLE_LENGTH?We.processVariableAI(4,b[2],o):We.processFixedAI(4,b[1],o);throw new le}static processFixedAI(o,d,m){if(m.length<o)throw new le;let v=m.substring(0,o);if(m.length<o+d)throw new le;let b=m.substring(o,o+d),S=m.substring(o+d),N="("+v+")"+b,R=We.parseFieldsInGeneralPurpose(S);return R==null?N:N+R}static processVariableAI(o,d,m){let v=m.substring(0,o),b;m.length<o+d?b=m.length:b=o+d;let S=m.substring(o,b),N=m.substring(b),R="("+v+")"+S,P=We.parseFieldsInGeneralPurpose(N);return P==null?R:R+P}}We.VARIABLE_LENGTH=[],We.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",We.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",We.VARIABLE_LENGTH,20],["22",We.VARIABLE_LENGTH,29],["30",We.VARIABLE_LENGTH,8],["37",We.VARIABLE_LENGTH,8],["90",We.VARIABLE_LENGTH,30],["91",We.VARIABLE_LENGTH,30],["92",We.VARIABLE_LENGTH,30],["93",We.VARIABLE_LENGTH,30],["94",We.VARIABLE_LENGTH,30],["95",We.VARIABLE_LENGTH,30],["96",We.VARIABLE_LENGTH,30],["97",We.VARIABLE_LENGTH,3],["98",We.VARIABLE_LENGTH,30],["99",We.VARIABLE_LENGTH,30]],We.THREE_DIGIT_DATA_LENGTH=[["240",We.VARIABLE_LENGTH,30],["241",We.VARIABLE_LENGTH,30],["242",We.VARIABLE_LENGTH,6],["250",We.VARIABLE_LENGTH,30],["251",We.VARIABLE_LENGTH,30],["253",We.VARIABLE_LENGTH,17],["254",We.VARIABLE_LENGTH,20],["400",We.VARIABLE_LENGTH,30],["401",We.VARIABLE_LENGTH,30],["402",17],["403",We.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",We.VARIABLE_LENGTH,20],["421",We.VARIABLE_LENGTH,15],["422",3],["423",We.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],We.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",We.VARIABLE_LENGTH,15],["391",We.VARIABLE_LENGTH,18],["392",We.VARIABLE_LENGTH,15],["393",We.VARIABLE_LENGTH,18],["703",We.VARIABLE_LENGTH,30]],We.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",We.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",We.VARIABLE_LENGTH,20],["8003",We.VARIABLE_LENGTH,30],["8004",We.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",We.VARIABLE_LENGTH,30],["8008",We.VARIABLE_LENGTH,12],["8018",18],["8020",We.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",We.VARIABLE_LENGTH,70],["8200",We.VARIABLE_LENGTH,70]];class Bt{constructor(o){this.buffer=new pe,this.information=o}decodeAllCodes(o,d){let m=d,v=null;do{let b=this.decodeGeneralPurposeField(m,v),S=We.parseFieldsInGeneralPurpose(b.getNewString());if(S!=null&&o.append(S),b.isRemaining()?v=""+b.getRemainingValue():v=null,m===b.getNewPosition())break;m=b.getNewPosition()}while(!0);return o.toString()}isStillNumeric(o){if(o+7>this.information.getSize())return o+4<=this.information.getSize();for(let d=o;d<o+3;++d)if(this.information.get(d))return!0;return this.information.get(o+3)}decodeNumeric(o){if(o+7>this.information.getSize()){let b=this.extractNumericValueFromBitArray(o,4);return b===0?new St(this.information.getSize(),St.FNC1,St.FNC1):new St(this.information.getSize(),b-1,St.FNC1)}let d=this.extractNumericValueFromBitArray(o,7),m=(d-8)/11,v=(d-8)%11;return new St(o+7,m,v)}extractNumericValueFromBitArray(o,d){return Bt.extractNumericValueFromBitArray(this.information,o,d)}static extractNumericValueFromBitArray(o,d,m){let v=0;for(let b=0;b<m;++b)o.get(d+b)&&(v|=1<<m-b-1);return v}decodeGeneralPurposeField(o,d){this.buffer.setLengthToZero(),d!=null&&this.buffer.append(d),this.current.setPosition(o);let m=this.parseBlocks();return m!=null&&m.isRemaining()?new kt(this.current.getPosition(),this.buffer.toString(),m.getRemainingValue()):new kt(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let o,d;do{let m=this.current.getPosition();if(this.current.isAlpha()?(d=this.parseAlphaBlock(),o=d.isFinished()):this.current.isIsoIec646()?(d=this.parseIsoIec646Block(),o=d.isFinished()):(d=this.parseNumericBlock(),o=d.isFinished()),!(m!==this.current.getPosition())&&!o)break}while(!o);return d.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let o=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFirstDigitFNC1()){let d;return o.isSecondDigitFNC1()?d=new kt(this.current.getPosition(),this.buffer.toString()):d=new kt(this.current.getPosition(),this.buffer.toString(),o.getSecondDigit()),new Ye(!0,d)}if(this.buffer.append(o.getFirstDigit()),o.isSecondDigitFNC1()){let d=new kt(this.current.getPosition(),this.buffer.toString());return new Ye(!0,d)}this.buffer.append(o.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Ye(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let o=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFNC1()){let d=new kt(this.current.getPosition(),this.buffer.toString());return new Ye(!0,d)}this.buffer.append(o.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Ye(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let o=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFNC1()){let d=new kt(this.current.getPosition(),this.buffer.toString());return new Ye(!0,d)}this.buffer.append(o.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Ye(!1)}isStillIsoIec646(o){if(o+5>this.information.getSize())return!1;let d=this.extractNumericValueFromBitArray(o,5);if(d>=5&&d<16)return!0;if(o+7>this.information.getSize())return!1;let m=this.extractNumericValueFromBitArray(o,7);if(m>=64&&m<116)return!0;if(o+8>this.information.getSize())return!1;let v=this.extractNumericValueFromBitArray(o,8);return v>=232&&v<253}decodeIsoIec646(o){let d=this.extractNumericValueFromBitArray(o,5);if(d===15)return new bt(o+5,bt.FNC1);if(d>=5&&d<15)return new bt(o+5,"0"+(d-5));let m=this.extractNumericValueFromBitArray(o,7);if(m>=64&&m<90)return new bt(o+7,""+(m+1));if(m>=90&&m<116)return new bt(o+7,""+(m+7));let v=this.extractNumericValueFromBitArray(o,8),b;switch(v){case 232:b="!";break;case 233:b='"';break;case 234:b="%";break;case 235:b="&";break;case 236:b="'";break;case 237:b="(";break;case 238:b=")";break;case 239:b="*";break;case 240:b="+";break;case 241:b=",";break;case 242:b="-";break;case 243:b=".";break;case 244:b="/";break;case 245:b=":";break;case 246:b=";";break;case 247:b="<";break;case 248:b="=";break;case 249:b=">";break;case 250:b="?";break;case 251:b="_";break;case 252:b=" ";break;default:throw new B}return new bt(o+8,b)}isStillAlpha(o){if(o+5>this.information.getSize())return!1;let d=this.extractNumericValueFromBitArray(o,5);if(d>=5&&d<16)return!0;if(o+6>this.information.getSize())return!1;let m=this.extractNumericValueFromBitArray(o,6);return m>=16&&m<63}decodeAlphanumeric(o){let d=this.extractNumericValueFromBitArray(o,5);if(d===15)return new bt(o+5,bt.FNC1);if(d>=5&&d<15)return new bt(o+5,"0"+(d-5));let m=this.extractNumericValueFromBitArray(o,6);if(m>=32&&m<58)return new bt(o+6,""+(m+33));let v;switch(m){case 58:v="*";break;case 59:v=",";break;case 60:v="-";break;case 61:v=".";break;case 62:v="/";break;default:throw new jt("Decoding invalid alphanumeric value: "+m)}return new bt(o+6,v)}isAlphaTo646ToAlphaLatch(o){if(o+1>this.information.getSize())return!1;for(let d=0;d<5&&d+o<this.information.getSize();++d)if(d===2){if(!this.information.get(o+2))return!1}else if(this.information.get(o+d))return!1;return!0}isAlphaOr646ToNumericLatch(o){if(o+3>this.information.getSize())return!1;for(let d=o;d<o+3;++d)if(this.information.get(d))return!1;return!0}isNumericToAlphaNumericLatch(o){if(o+1>this.information.getSize())return!1;for(let d=0;d<4&&d+o<this.information.getSize();++d)if(this.information.get(o+d))return!1;return!0}}class Ut{constructor(o){this.information=o,this.generalDecoder=new Bt(o)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class ct extends Ut{constructor(o){super(o)}encodeCompressedGtin(o,d){o.append("(01)");let m=o.length();o.append("9"),this.encodeCompressedGtinWithoutAI(o,d,m)}encodeCompressedGtinWithoutAI(o,d,m){for(let v=0;v<4;++v){let b=this.getGeneralDecoder().extractNumericValueFromBitArray(d+10*v,10);b/100===0&&o.append("0"),b/10===0&&o.append("0"),o.append(b)}ct.appendCheckDigit(o,m)}static appendCheckDigit(o,d){let m=0;for(let v=0;v<13;v++){let b=o.charAt(v+d).charCodeAt(0)-48;m+=(v&1)===0?3*b:b}m=10-m%10,m===10&&(m=0),o.append(m)}}ct.GTIN_SIZE=40;class or extends ct{constructor(o){super(o)}parseInformation(){let o=new pe;o.append("(01)");let d=o.length(),m=this.getGeneralDecoder().extractNumericValueFromBitArray(or.HEADER_SIZE,4);return o.append(m),this.encodeCompressedGtinWithoutAI(o,or.HEADER_SIZE+4,d),this.getGeneralDecoder().decodeAllCodes(o,or.HEADER_SIZE+44)}}or.HEADER_SIZE=4;class Fr extends Ut{constructor(o){super(o)}parseInformation(){let o=new pe;return this.getGeneralDecoder().decodeAllCodes(o,Fr.HEADER_SIZE)}}Fr.HEADER_SIZE=5;class Hr extends ct{constructor(o){super(o)}encodeCompressedWeight(o,d,m){let v=this.getGeneralDecoder().extractNumericValueFromBitArray(d,m);this.addWeightCode(o,v);let b=this.checkWeight(v),S=1e5;for(let N=0;N<5;++N)b/S===0&&o.append("0"),S/=10;o.append(b)}}class Kn extends Hr{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()!=Kn.HEADER_SIZE+Hr.GTIN_SIZE+Kn.WEIGHT_SIZE)throw new le;let o=new pe;return this.encodeCompressedGtin(o,Kn.HEADER_SIZE),this.encodeCompressedWeight(o,Kn.HEADER_SIZE+Hr.GTIN_SIZE,Kn.WEIGHT_SIZE),o.toString()}}Kn.HEADER_SIZE=5,Kn.WEIGHT_SIZE=15;class Co extends Kn{constructor(o){super(o)}addWeightCode(o,d){o.append("(3103)")}checkWeight(o){return o}}class Oa extends Kn{constructor(o){super(o)}addWeightCode(o,d){d<1e4?o.append("(3202)"):o.append("(3203)")}checkWeight(o){return o<1e4?o:o-1e4}}class Ei extends ct{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()<Ei.HEADER_SIZE+ct.GTIN_SIZE)throw new le;let o=new pe;this.encodeCompressedGtin(o,Ei.HEADER_SIZE);let d=this.getGeneralDecoder().extractNumericValueFromBitArray(Ei.HEADER_SIZE+ct.GTIN_SIZE,Ei.LAST_DIGIT_SIZE);o.append("(392"),o.append(d),o.append(")");let m=this.getGeneralDecoder().decodeGeneralPurposeField(Ei.HEADER_SIZE+ct.GTIN_SIZE+Ei.LAST_DIGIT_SIZE,null);return o.append(m.getNewString()),o.toString()}}Ei.HEADER_SIZE=8,Ei.LAST_DIGIT_SIZE=2;class Xn extends ct{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()<Xn.HEADER_SIZE+ct.GTIN_SIZE)throw new le;let o=new pe;this.encodeCompressedGtin(o,Xn.HEADER_SIZE);let d=this.getGeneralDecoder().extractNumericValueFromBitArray(Xn.HEADER_SIZE+ct.GTIN_SIZE,Xn.LAST_DIGIT_SIZE);o.append("(393"),o.append(d),o.append(")");let m=this.getGeneralDecoder().extractNumericValueFromBitArray(Xn.HEADER_SIZE+ct.GTIN_SIZE+Xn.LAST_DIGIT_SIZE,Xn.FIRST_THREE_DIGITS_SIZE);m/100==0&&o.append("0"),m/10==0&&o.append("0"),o.append(m);let v=this.getGeneralDecoder().decodeGeneralPurposeField(Xn.HEADER_SIZE+ct.GTIN_SIZE+Xn.LAST_DIGIT_SIZE+Xn.FIRST_THREE_DIGITS_SIZE,null);return o.append(v.getNewString()),o.toString()}}Xn.HEADER_SIZE=8,Xn.LAST_DIGIT_SIZE=2,Xn.FIRST_THREE_DIGITS_SIZE=10;class rn extends Hr{constructor(o,d,m){super(o),this.dateCode=m,this.firstAIdigits=d}parseInformation(){if(this.getInformation().getSize()!=rn.HEADER_SIZE+rn.GTIN_SIZE+rn.WEIGHT_SIZE+rn.DATE_SIZE)throw new le;let o=new pe;return this.encodeCompressedGtin(o,rn.HEADER_SIZE),this.encodeCompressedWeight(o,rn.HEADER_SIZE+rn.GTIN_SIZE,rn.WEIGHT_SIZE),this.encodeCompressedDate(o,rn.HEADER_SIZE+rn.GTIN_SIZE+rn.WEIGHT_SIZE),o.toString()}encodeCompressedDate(o,d){let m=this.getGeneralDecoder().extractNumericValueFromBitArray(d,rn.DATE_SIZE);if(m==38400)return;o.append("("),o.append(this.dateCode),o.append(")");let v=m%32;m/=32;let b=m%12+1;m/=12;let S=m;S/10==0&&o.append("0"),o.append(S),b/10==0&&o.append("0"),o.append(b),v/10==0&&o.append("0"),o.append(v)}addWeightCode(o,d){o.append("("),o.append(this.firstAIdigits),o.append(d/1e5),o.append(")")}checkWeight(o){return o%1e5}}rn.HEADER_SIZE=8,rn.WEIGHT_SIZE=20,rn.DATE_SIZE=16;function No(q){try{if(q.get(1))return new or(q);if(!q.get(2))return new Fr(q);switch(Bt.extractNumericValueFromBitArray(q,1,4)){case 4:return new Co(q);case 5:return new Oa(q)}switch(Bt.extractNumericValueFromBitArray(q,1,5)){case 12:return new Ei(q);case 13:return new Xn(q)}switch(Bt.extractNumericValueFromBitArray(q,1,7)){case 56:return new rn(q,"310","11");case 57:return new rn(q,"320","11");case 58:return new rn(q,"310","13");case 59:return new rn(q,"320","13");case 60:return new rn(q,"310","15");case 61:return new rn(q,"320","15");case 62:return new rn(q,"310","17");case 63:return new rn(q,"320","17")}}catch(o){throw console.log(o),new jt("unknown decoder: "+q)}}class fi{constructor(o,d,m,v){this.leftchar=o,this.rightchar=d,this.finderpattern=m,this.maybeLast=v}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(o,d){return o instanceof fi?fi.equalsOrNull(o.leftchar,d.leftchar)&&fi.equalsOrNull(o.rightchar,d.rightchar)&&fi.equalsOrNull(o.finderpattern,d.finderpattern):!1}static equalsOrNull(o,d){return o===null?d===null:fi.equals(o,d)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Jn{constructor(o,d,m){this.pairs=o,this.rowNumber=d,this.wasReversed=m}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(o){return this.checkEqualitity(this,o)}toString(){return"{ "+this.pairs+" }"}equals(o,d){return o instanceof Jn?this.checkEqualitity(o,d)&&o.wasReversed===d.wasReversed:!1}checkEqualitity(o,d){if(!o||!d)return;let m;return o.forEach((v,b)=>{d.forEach(S=>{v.getLeftChar().getValue()===S.getLeftChar().getValue()&&v.getRightChar().getValue()===S.getRightChar().getValue()&&v.getFinderPatter().getValue()===S.getFinderPatter().getValue()&&(m=!0)})}),m}}class Be extends sr{constructor(o){super(...arguments),this.pairs=new Array(Be.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=o===!0}decodeRow(o,d,m){this.pairs.length=0,this.startFromEven=!1;try{return Be.constructResult(this.decodeRow2pairs(o,d))}catch(v){this.verbose&&console.log(v)}return this.pairs.length=0,this.startFromEven=!0,Be.constructResult(this.decodeRow2pairs(o,d))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(o,d){let m=!1;for(;!m;)try{this.pairs.push(this.retrieveNextPair(d,this.pairs,o))}catch(b){if(b instanceof le){if(!this.pairs.length)throw new le;m=!0}}if(this.checkChecksum())return this.pairs;let v;if(this.rows.length?v=!0:v=!1,this.storeRow(o,!1),v){let b=this.checkRowsBoolean(!1);if(b!=null||(b=this.checkRowsBoolean(!0),b!=null))return b}throw new le}checkRowsBoolean(o){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,o&&(this.rows=this.rows.reverse());let d=null;try{d=this.checkRows(new Array,0)}catch(m){this.verbose&&console.log(m)}return o&&(this.rows=this.rows.reverse()),d}checkRows(o,d){for(let m=d;m<this.rows.length;m++){let v=this.rows[m];this.pairs.length=0;for(let S of o)this.pairs.push(S.getPairs());if(this.pairs.push(v.getPairs()),!Be.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let b=new Array(o);b.push(v);try{return this.checkRows(b,m+1)}catch(S){this.verbose&&console.log(S)}}throw new le}static isValidSequence(o){for(let d of Be.FINDER_PATTERN_SEQUENCES){if(o.length>d.length)continue;let m=!0;for(let v=0;v<o.length;v++)if(o[v].getFinderPattern().getValue()!=d[v]){m=!1;break}if(m)return!0}return!1}storeRow(o,d){let m=0,v=!1,b=!1;for(;m<this.rows.length;){let S=this.rows[m];if(S.getRowNumber()>o){b=S.isEquivalent(this.pairs);break}v=S.isEquivalent(this.pairs),m++}b||v||Be.isPartialRow(this.pairs,this.rows)||(this.rows.push(m,new Jn(this.pairs,o,d)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(o,d){for(let m of d)if(m.getPairs().length!==o.length){for(let v of m.getPairs())for(let b of o)if(fi.equals(v,b))break}}static isPartialRow(o,d){for(let m of d){let v=!0;for(let b of o){let S=!1;for(let N of m.getPairs())if(b.equals(N)){S=!0;break}if(!S){v=!1;break}}if(v)return!0}return!1}getRows(){return this.rows}static constructResult(o){let d=je.buildBitArray(o),v=No(d).parseInformation(),b=o[0].getFinderPattern().getResultPoints(),S=o[o.length-1].getFinderPattern().getResultPoints(),N=[b[0],b[1],S[0],S[1]];return new se(v,null,null,N,ie.RSS_EXPANDED,null)}checkChecksum(){let o=this.pairs.get(0),d=o.getLeftChar(),m=o.getRightChar();if(m==null)return!1;let v=m.getChecksumPortion(),b=2;for(let N=1;N<this.pairs.size();++N){let R=this.pairs.get(N);v+=R.getLeftChar().getChecksumPortion(),b++;let P=R.getRightChar();P!=null&&(v+=P.getChecksumPortion(),b++)}return v%=211,211*(b-4)+v==d.getValue()}static getNextSecondBar(o,d){let m;return o.get(d)?(m=o.getNextUnset(d),m=o.getNextSet(m)):(m=o.getNextSet(d),m=o.getNextUnset(m)),m}retrieveNextPair(o,d,m){let v=d.length%2==0;this.startFromEven&&(v=!v);let b,S=!0,N=-1;do this.findNextPair(o,d,N),b=this.parseFoundFinderPattern(o,m,v),b==null?N=Be.getNextSecondBar(o,this.startEnd[0]):S=!1;while(S);let R=this.decodeDataCharacter(o,b,v,!0);if(!this.isEmptyPair(d)&&d[d.length-1].mustBeLast())throw new le;let P;try{P=this.decodeDataCharacter(o,b,v,!1)}catch(F){P=null,this.verbose&&console.log(F)}return new fi(R,P,b,!0)}isEmptyPair(o){return o.length===0}findNextPair(o,d,m){let v=this.getDecodeFinderCounters();v[0]=0,v[1]=0,v[2]=0,v[3]=0;let b=o.getSize(),S;m>=0?S=m:this.isEmptyPair(d)?S=0:S=d[d.length-1].getFinderPattern().getStartEnd()[1];let N=d.length%2!=0;this.startFromEven&&(N=!N);let R=!1;for(;S<b&&(R=!o.get(S),!!R);)S++;let P=0,F=S;for(let $=S;$<b;$++)if(o.get($)!=R)v[P]++;else{if(P==3){if(N&&Be.reverseCounters(v),Be.isFinderPattern(v)){this.startEnd[0]=F,this.startEnd[1]=$;return}N&&Be.reverseCounters(v),F+=v[0]+v[1],v[0]=v[2],v[1]=v[3],v[2]=0,v[3]=0,P--}else P++;v[P]=1,R=!R}throw new le}static reverseCounters(o){let d=o.length;for(let m=0;m<d/2;++m){let v=o[m];o[m]=o[d-m-1],o[d-m-1]=v}}parseFoundFinderPattern(o,d,m){let v,b,S;if(m){let P=this.startEnd[0]-1;for(;P>=0&&!o.get(P);)P--;P++,v=this.startEnd[0]-P,b=P,S=this.startEnd[1]}else b=this.startEnd[0],S=o.getNextUnset(this.startEnd[1]+1),v=S-this.startEnd[1];let N=this.getDecodeFinderCounters();M.arraycopy(N,0,N,1,N.length-1),N[0]=v;let R;try{R=this.parseFinderValue(N,Be.FINDER_PATTERNS)}catch{return null}return new ve(R,[b,S],b,S,d)}decodeDataCharacter(o,d,m,v){let b=this.getDataCharacterCounters();for(let dn=0;dn<b.length;dn++)b[dn]=0;if(v)Be.recordPatternInReverse(o,d.getStartEnd()[0],b);else{Be.recordPattern(o,d.getStartEnd()[1],b);for(let dn=0,Ir=b.length-1;dn<Ir;dn++,Ir--){let mi=b[dn];b[dn]=b[Ir],b[Ir]=mi}}let S=17,N=Rt.sum(new Int32Array(b))/S,R=(d.getStartEnd()[1]-d.getStartEnd()[0])/15;if(Math.abs(N-R)/R>.3)throw new le;let P=this.getOddCounts(),F=this.getEvenCounts(),$=this.getOddRoundingErrors(),K=this.getEvenRoundingErrors();for(let dn=0;dn<b.length;dn++){let Ir=1*b[dn]/N,mi=Ir+.5;if(mi<1){if(Ir<.3)throw new le;mi=1}else if(mi>8){if(Ir>8.7)throw new le;mi=8}let Bo=dn/2;(dn&1)==0?(P[Bo]=mi,$[Bo]=Ir-mi):(F[Bo]=mi,K[Bo]=Ir-mi)}this.adjustOddEvenCounts(S);let ee=4*d.getValue()+(m?0:2)+(v?0:1)-1,oe=0,ce=0;for(let dn=P.length-1;dn>=0;dn--){if(Be.isNotA1left(d,m,v)){let Ir=Be.WEIGHTS[ee][2*dn];ce+=P[dn]*Ir}oe+=P[dn]}let be=0;for(let dn=F.length-1;dn>=0;dn--)if(Be.isNotA1left(d,m,v)){let Ir=Be.WEIGHTS[ee][2*dn+1];be+=F[dn]*Ir}let _e=ce+be;if((oe&1)!=0||oe>13||oe<4)throw new le;let Ge=(13-oe)/2,He=Be.SYMBOL_WIDEST[Ge],Fe=9-He,Dt=xe.getRSSvalue(P,He,!0),At=xe.getRSSvalue(F,Fe,!1),Zn=Be.EVEN_TOTAL_SUBSET[Ge],Ci=Be.GSUM[Ge],Kr=Dt*Zn+At+Ci;return new la(Kr,_e)}static isNotA1left(o,d,m){return!(o.getValue()==0&&d&&m)}adjustOddEvenCounts(o){let d=Rt.sum(new Int32Array(this.getOddCounts())),m=Rt.sum(new Int32Array(this.getEvenCounts())),v=!1,b=!1;d>13?b=!0:d<4&&(v=!0);let S=!1,N=!1;m>13?N=!0:m<4&&(S=!0);let R=d+m-o,P=(d&1)==1,F=(m&1)==0;if(R==1)if(P){if(F)throw new le;b=!0}else{if(!F)throw new le;N=!0}else if(R==-1)if(P){if(F)throw new le;v=!0}else{if(!F)throw new le;S=!0}else if(R==0){if(P){if(!F)throw new le;d<m?(v=!0,N=!0):(b=!0,S=!0)}else if(F)throw new le}else throw new le;if(v){if(b)throw new le;Be.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(b&&Be.decrement(this.getOddCounts(),this.getOddRoundingErrors()),S){if(N)throw new le;Be.increment(this.getEvenCounts(),this.getOddRoundingErrors())}N&&Be.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Be.SYMBOL_WIDEST=[7,5,4,3,1],Be.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Be.GSUM=[0,348,1388,2948,3988],Be.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Be.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Be.FINDER_PAT_A=0,Be.FINDER_PAT_B=1,Be.FINDER_PAT_C=2,Be.FINDER_PAT_D=3,Be.FINDER_PAT_E=4,Be.FINDER_PAT_F=5,Be.FINDER_PATTERN_SEQUENCES=[[Be.FINDER_PAT_A,Be.FINDER_PAT_A],[Be.FINDER_PAT_A,Be.FINDER_PAT_B,Be.FINDER_PAT_B],[Be.FINDER_PAT_A,Be.FINDER_PAT_C,Be.FINDER_PAT_B,Be.FINDER_PAT_D],[Be.FINDER_PAT_A,Be.FINDER_PAT_E,Be.FINDER_PAT_B,Be.FINDER_PAT_D,Be.FINDER_PAT_C],[Be.FINDER_PAT_A,Be.FINDER_PAT_E,Be.FINDER_PAT_B,Be.FINDER_PAT_D,Be.FINDER_PAT_D,Be.FINDER_PAT_F],[Be.FINDER_PAT_A,Be.FINDER_PAT_E,Be.FINDER_PAT_B,Be.FINDER_PAT_D,Be.FINDER_PAT_E,Be.FINDER_PAT_F,Be.FINDER_PAT_F],[Be.FINDER_PAT_A,Be.FINDER_PAT_A,Be.FINDER_PAT_B,Be.FINDER_PAT_B,Be.FINDER_PAT_C,Be.FINDER_PAT_C,Be.FINDER_PAT_D,Be.FINDER_PAT_D],[Be.FINDER_PAT_A,Be.FINDER_PAT_A,Be.FINDER_PAT_B,Be.FINDER_PAT_B,Be.FINDER_PAT_C,Be.FINDER_PAT_C,Be.FINDER_PAT_D,Be.FINDER_PAT_E,Be.FINDER_PAT_E],[Be.FINDER_PAT_A,Be.FINDER_PAT_A,Be.FINDER_PAT_B,Be.FINDER_PAT_B,Be.FINDER_PAT_C,Be.FINDER_PAT_C,Be.FINDER_PAT_D,Be.FINDER_PAT_E,Be.FINDER_PAT_F,Be.FINDER_PAT_F],[Be.FINDER_PAT_A,Be.FINDER_PAT_A,Be.FINDER_PAT_B,Be.FINDER_PAT_B,Be.FINDER_PAT_C,Be.FINDER_PAT_D,Be.FINDER_PAT_D,Be.FINDER_PAT_E,Be.FINDER_PAT_E,Be.FINDER_PAT_F,Be.FINDER_PAT_F]],Be.MAX_PAIRS=11;class ph extends la{constructor(o,d,m){super(o,d),this.count=0,this.finderPattern=m}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class cn extends sr{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(o,d,m){const v=this.decodePair(d,!1,o,m);cn.addOrTally(this.possibleLeftPairs,v),d.reverse();let b=this.decodePair(d,!0,o,m);cn.addOrTally(this.possibleRightPairs,b),d.reverse();for(let S of this.possibleLeftPairs)if(S.getCount()>1){for(let N of this.possibleRightPairs)if(N.getCount()>1&&cn.checkChecksum(S,N))return cn.constructResult(S,N)}throw new le}static addOrTally(o,d){if(d==null)return;let m=!1;for(let v of o)if(v.getValue()===d.getValue()){v.incrementCount(),m=!0;break}m||o.push(d)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(o,d){let m=4537077*o.getValue()+d.getValue(),v=new String(m).toString(),b=new pe;for(let P=13-v.length;P>0;P--)b.append("0");b.append(v);let S=0;for(let P=0;P<13;P++){let F=b.charAt(P).charCodeAt(0)-48;S+=(P&1)===0?3*F:F}S=10-S%10,S===10&&(S=0),b.append(S.toString());let N=o.getFinderPattern().getResultPoints(),R=d.getFinderPattern().getResultPoints();return new se(b.toString(),null,0,[N[0],N[1],R[0],R[1]],ie.RSS_14,new Date().getTime())}static checkChecksum(o,d){let m=(o.getChecksumPortion()+16*d.getChecksumPortion())%79,v=9*o.getFinderPattern().getValue()+d.getFinderPattern().getValue();return v>72&&v--,v>8&&v--,m===v}decodePair(o,d,m,v){try{let b=this.findFinderPattern(o,d),S=this.parseFoundFinderPattern(o,m,d,b),N=v==null?null:v.get(z.NEED_RESULT_POINT_CALLBACK);if(N!=null){let F=(b[0]+b[1])/2;d&&(F=o.getSize()-1-F),N.foundPossibleResultPoint(new Ze(F,m))}let R=this.decodeDataCharacter(o,S,!0),P=this.decodeDataCharacter(o,S,!1);return new ph(1597*R.getValue()+P.getValue(),R.getChecksumPortion()+4*P.getChecksumPortion(),S)}catch{return null}}decodeDataCharacter(o,d,m){let v=this.getDataCharacterCounters();for(let be=0;be<v.length;be++)v[be]=0;if(m)xn.recordPatternInReverse(o,d.getStartEnd()[0],v);else{xn.recordPattern(o,d.getStartEnd()[1]+1,v);for(let be=0,_e=v.length-1;be<_e;be++,_e--){let Ge=v[be];v[be]=v[_e],v[_e]=Ge}}let b=m?16:15,S=Rt.sum(new Int32Array(v))/b,N=this.getOddCounts(),R=this.getEvenCounts(),P=this.getOddRoundingErrors(),F=this.getEvenRoundingErrors();for(let be=0;be<v.length;be++){let _e=v[be]/S,Ge=Math.floor(_e+.5);Ge<1?Ge=1:Ge>8&&(Ge=8);let He=Math.floor(be/2);(be&1)===0?(N[He]=Ge,P[He]=_e-Ge):(R[He]=Ge,F[He]=_e-Ge)}this.adjustOddEvenCounts(m,b);let $=0,K=0;for(let be=N.length-1;be>=0;be--)K*=9,K+=N[be],$+=N[be];let ee=0,oe=0;for(let be=R.length-1;be>=0;be--)ee*=9,ee+=R[be],oe+=R[be];let ce=K+3*ee;if(m){if(($&1)!==0||$>12||$<4)throw new le;let be=(12-$)/2,_e=cn.OUTSIDE_ODD_WIDEST[be],Ge=9-_e,He=xe.getRSSvalue(N,_e,!1),Fe=xe.getRSSvalue(R,Ge,!0),Dt=cn.OUTSIDE_EVEN_TOTAL_SUBSET[be],At=cn.OUTSIDE_GSUM[be];return new la(He*Dt+Fe+At,ce)}else{if((oe&1)!==0||oe>10||oe<4)throw new le;let be=(10-oe)/2,_e=cn.INSIDE_ODD_WIDEST[be],Ge=9-_e,He=xe.getRSSvalue(N,_e,!0),Fe=xe.getRSSvalue(R,Ge,!1),Dt=cn.INSIDE_ODD_TOTAL_SUBSET[be],At=cn.INSIDE_GSUM[be];return new la(Fe*Dt+He+At,ce)}}findFinderPattern(o,d){let m=this.getDecodeFinderCounters();m[0]=0,m[1]=0,m[2]=0,m[3]=0;let v=o.getSize(),b=!1,S=0;for(;S<v&&(b=!o.get(S),d!==b);)S++;let N=0,R=S;for(let P=S;P<v;P++)if(o.get(P)!==b)m[N]++;else{if(N===3){if(sr.isFinderPattern(m))return[R,P];R+=m[0]+m[1],m[0]=m[2],m[1]=m[3],m[2]=0,m[3]=0,N--}else N++;m[N]=1,b=!b}throw new le}parseFoundFinderPattern(o,d,m,v){let b=o.get(v[0]),S=v[0]-1;for(;S>=0&&b!==o.get(S);)S--;S++;const N=v[0]-S,R=this.getDecodeFinderCounters(),P=new Int32Array(R.length);M.arraycopy(R,0,P,1,R.length-1),P[0]=N;const F=this.parseFinderValue(P,cn.FINDER_PATTERNS);let $=S,K=v[1];return m&&($=o.getSize()-1-$,K=o.getSize()-1-K),new ve(F,[S,v[1]],$,K,d)}adjustOddEvenCounts(o,d){let m=Rt.sum(new Int32Array(this.getOddCounts())),v=Rt.sum(new Int32Array(this.getEvenCounts())),b=!1,S=!1,N=!1,R=!1;o?(m>12?S=!0:m<4&&(b=!0),v>12?R=!0:v<4&&(N=!0)):(m>11?S=!0:m<5&&(b=!0),v>10?R=!0:v<4&&(N=!0));let P=m+v-d,F=(m&1)===(o?1:0),$=(v&1)===1;if(P===1)if(F){if($)throw new le;S=!0}else{if(!$)throw new le;R=!0}else if(P===-1)if(F){if($)throw new le;b=!0}else{if(!$)throw new le;N=!0}else if(P===0){if(F){if(!$)throw new le;m<v?(b=!0,R=!0):(S=!0,N=!0)}else if($)throw new le}else throw new le;if(b){if(S)throw new le;sr.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(S&&sr.decrement(this.getOddCounts(),this.getOddRoundingErrors()),N){if(R)throw new le;sr.increment(this.getEvenCounts(),this.getOddRoundingErrors())}R&&sr.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}cn.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],cn.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],cn.OUTSIDE_GSUM=[0,161,961,2015,2715],cn.INSIDE_GSUM=[0,336,1036,1516],cn.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],cn.INSIDE_ODD_WIDEST=[2,4,6,8],cn.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Pi extends xn{constructor(o,d){super(),this.readers=[],this.verbose=d===!0;const m=o?o.get(z.POSSIBLE_FORMATS):null,v=o&&o.get(z.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;m?((m.includes(ie.EAN_13)||m.includes(ie.UPC_A)||m.includes(ie.EAN_8)||m.includes(ie.UPC_E))&&this.readers.push(new Rl(o)),m.includes(ie.CODE_39)&&this.readers.push(new ln(v)),m.includes(ie.CODE_128)&&this.readers.push(new ze),m.includes(ie.ITF)&&this.readers.push(new Tt),m.includes(ie.RSS_14)&&this.readers.push(new cn),m.includes(ie.RSS_EXPANDED)&&this.readers.push(new Be(this.verbose))):(this.readers.push(new Rl(o)),this.readers.push(new ln),this.readers.push(new Rl(o)),this.readers.push(new ze),this.readers.push(new Tt),this.readers.push(new cn),this.readers.push(new Be(this.verbose)))}decodeRow(o,d,m){for(let v=0;v<this.readers.length;v++)try{return this.readers[v].decodeRow(o,d,m)}catch{}throw new le}reset(){this.readers.forEach(o=>o.reset())}}class Tg extends he{constructor(o=500,d){super(new Pi(d),o,d)}}class Xt{constructor(o,d,m){this.ecCodewords=o,this.ecBlocks=[d],m&&this.ecBlocks.push(m)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Kt{constructor(o,d){this.count=o,this.dataCodewords=d}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ht{constructor(o,d,m,v,b,S){this.versionNumber=o,this.symbolSizeRows=d,this.symbolSizeColumns=m,this.dataRegionSizeRows=v,this.dataRegionSizeColumns=b,this.ecBlocks=S;let N=0;const R=S.getECCodewords(),P=S.getECBlocks();for(let F of P)N+=F.getCount()*(F.getDataCodewords()+R);this.totalCodewords=N}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(o,d){if((o&1)!==0||(d&1)!==0)throw new B;for(let m of Ht.VERSIONS)if(m.symbolSizeRows===o&&m.symbolSizeColumns===d)return m;throw new B}toString(){return""+this.versionNumber}static buildVersions(){return[new Ht(1,10,10,8,8,new Xt(5,new Kt(1,3))),new Ht(2,12,12,10,10,new Xt(7,new Kt(1,5))),new Ht(3,14,14,12,12,new Xt(10,new Kt(1,8))),new Ht(4,16,16,14,14,new Xt(12,new Kt(1,12))),new Ht(5,18,18,16,16,new Xt(14,new Kt(1,18))),new Ht(6,20,20,18,18,new Xt(18,new Kt(1,22))),new Ht(7,22,22,20,20,new Xt(20,new Kt(1,30))),new Ht(8,24,24,22,22,new Xt(24,new Kt(1,36))),new Ht(9,26,26,24,24,new Xt(28,new Kt(1,44))),new Ht(10,32,32,14,14,new Xt(36,new Kt(1,62))),new Ht(11,36,36,16,16,new Xt(42,new Kt(1,86))),new Ht(12,40,40,18,18,new Xt(48,new Kt(1,114))),new Ht(13,44,44,20,20,new Xt(56,new Kt(1,144))),new Ht(14,48,48,22,22,new Xt(68,new Kt(1,174))),new Ht(15,52,52,24,24,new Xt(42,new Kt(2,102))),new Ht(16,64,64,14,14,new Xt(56,new Kt(2,140))),new Ht(17,72,72,16,16,new Xt(36,new Kt(4,92))),new Ht(18,80,80,18,18,new Xt(48,new Kt(4,114))),new Ht(19,88,88,20,20,new Xt(56,new Kt(4,144))),new Ht(20,96,96,22,22,new Xt(68,new Kt(4,174))),new Ht(21,104,104,24,24,new Xt(56,new Kt(6,136))),new Ht(22,120,120,18,18,new Xt(68,new Kt(6,175))),new Ht(23,132,132,20,20,new Xt(62,new Kt(8,163))),new Ht(24,144,144,22,22,new Xt(62,new Kt(8,156),new Kt(2,155))),new Ht(25,8,18,6,16,new Xt(7,new Kt(1,5))),new Ht(26,8,32,6,14,new Xt(11,new Kt(1,10))),new Ht(27,12,26,10,24,new Xt(14,new Kt(1,16))),new Ht(28,12,36,10,16,new Xt(18,new Kt(1,22))),new Ht(29,16,36,14,16,new Xt(24,new Kt(1,32))),new Ht(30,16,48,14,22,new Xt(28,new Kt(1,49)))]}}Ht.VERSIONS=Ht.buildVersions();class _o{constructor(o){const d=o.getHeight();if(d<8||d>144||(d&1)!==0)throw new B;this.version=_o.readVersion(o),this.mappingBitMatrix=this.extractDataRegion(o),this.readMappingMatrix=new Te(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(o){const d=o.getHeight(),m=o.getWidth();return Ht.getVersionForDimensions(d,m)}readCodewords(){const o=new Int8Array(this.version.getTotalCodewords());let d=0,m=4,v=0;const b=this.mappingBitMatrix.getHeight(),S=this.mappingBitMatrix.getWidth();let N=!1,R=!1,P=!1,F=!1;do if(m===b&&v===0&&!N)o[d++]=this.readCorner1(b,S)&255,m-=2,v+=2,N=!0;else if(m===b-2&&v===0&&(S&3)!==0&&!R)o[d++]=this.readCorner2(b,S)&255,m-=2,v+=2,R=!0;else if(m===b+4&&v===2&&(S&7)===0&&!P)o[d++]=this.readCorner3(b,S)&255,m-=2,v+=2,P=!0;else if(m===b-2&&v===0&&(S&7)===4&&!F)o[d++]=this.readCorner4(b,S)&255,m-=2,v+=2,F=!0;else{do m<b&&v>=0&&!this.readMappingMatrix.get(v,m)&&(o[d++]=this.readUtah(m,v,b,S)&255),m-=2,v+=2;while(m>=0&&v<S);m+=1,v+=3;do m>=0&&v<S&&!this.readMappingMatrix.get(v,m)&&(o[d++]=this.readUtah(m,v,b,S)&255),m+=2,v-=2;while(m<b&&v>=0);m+=3,v+=1}while(m<b||v<S);if(d!==this.version.getTotalCodewords())throw new B;return o}readModule(o,d,m,v){return o<0&&(o+=m,d+=4-(m+4&7)),d<0&&(d+=v,o+=4-(v+4&7)),this.readMappingMatrix.set(d,o),this.mappingBitMatrix.get(d,o)}readUtah(o,d,m,v){let b=0;return this.readModule(o-2,d-2,m,v)&&(b|=1),b<<=1,this.readModule(o-2,d-1,m,v)&&(b|=1),b<<=1,this.readModule(o-1,d-2,m,v)&&(b|=1),b<<=1,this.readModule(o-1,d-1,m,v)&&(b|=1),b<<=1,this.readModule(o-1,d,m,v)&&(b|=1),b<<=1,this.readModule(o,d-2,m,v)&&(b|=1),b<<=1,this.readModule(o,d-1,m,v)&&(b|=1),b<<=1,this.readModule(o,d,m,v)&&(b|=1),b}readCorner1(o,d){let m=0;return this.readModule(o-1,0,o,d)&&(m|=1),m<<=1,this.readModule(o-1,1,o,d)&&(m|=1),m<<=1,this.readModule(o-1,2,o,d)&&(m|=1),m<<=1,this.readModule(0,d-2,o,d)&&(m|=1),m<<=1,this.readModule(0,d-1,o,d)&&(m|=1),m<<=1,this.readModule(1,d-1,o,d)&&(m|=1),m<<=1,this.readModule(2,d-1,o,d)&&(m|=1),m<<=1,this.readModule(3,d-1,o,d)&&(m|=1),m}readCorner2(o,d){let m=0;return this.readModule(o-3,0,o,d)&&(m|=1),m<<=1,this.readModule(o-2,0,o,d)&&(m|=1),m<<=1,this.readModule(o-1,0,o,d)&&(m|=1),m<<=1,this.readModule(0,d-4,o,d)&&(m|=1),m<<=1,this.readModule(0,d-3,o,d)&&(m|=1),m<<=1,this.readModule(0,d-2,o,d)&&(m|=1),m<<=1,this.readModule(0,d-1,o,d)&&(m|=1),m<<=1,this.readModule(1,d-1,o,d)&&(m|=1),m}readCorner3(o,d){let m=0;return this.readModule(o-1,0,o,d)&&(m|=1),m<<=1,this.readModule(o-1,d-1,o,d)&&(m|=1),m<<=1,this.readModule(0,d-3,o,d)&&(m|=1),m<<=1,this.readModule(0,d-2,o,d)&&(m|=1),m<<=1,this.readModule(0,d-1,o,d)&&(m|=1),m<<=1,this.readModule(1,d-3,o,d)&&(m|=1),m<<=1,this.readModule(1,d-2,o,d)&&(m|=1),m<<=1,this.readModule(1,d-1,o,d)&&(m|=1),m}readCorner4(o,d){let m=0;return this.readModule(o-3,0,o,d)&&(m|=1),m<<=1,this.readModule(o-2,0,o,d)&&(m|=1),m<<=1,this.readModule(o-1,0,o,d)&&(m|=1),m<<=1,this.readModule(0,d-2,o,d)&&(m|=1),m<<=1,this.readModule(0,d-1,o,d)&&(m|=1),m<<=1,this.readModule(1,d-1,o,d)&&(m|=1),m<<=1,this.readModule(2,d-1,o,d)&&(m|=1),m<<=1,this.readModule(3,d-1,o,d)&&(m|=1),m}extractDataRegion(o){const d=this.version.getSymbolSizeRows(),m=this.version.getSymbolSizeColumns();if(o.getHeight()!==d)throw new y("Dimension of bitMatrix must match the version size");const v=this.version.getDataRegionSizeRows(),b=this.version.getDataRegionSizeColumns(),S=d/v|0,N=m/b|0,R=S*v,P=N*b,F=new Te(P,R);for(let $=0;$<S;++$){const K=$*v;for(let ee=0;ee<N;++ee){const oe=ee*b;for(let ce=0;ce<v;++ce){const be=$*(v+2)+1+ce,_e=K+ce;for(let Ge=0;Ge<b;++Ge){const He=ee*(b+2)+1+Ge;if(o.get(He,be)){const Fe=oe+Ge;F.set(Fe,_e)}}}}}return F}}class To{constructor(o,d){this.numDataCodewords=o,this.codewords=d}static getDataBlocks(o,d){const m=d.getECBlocks();let v=0;const b=m.getECBlocks();for(let ce of b)v+=ce.getCount();const S=new Array(v);let N=0;for(let ce of b)for(let be=0;be<ce.getCount();be++){const _e=ce.getDataCodewords(),Ge=m.getECCodewords()+_e;S[N++]=new To(_e,new Uint8Array(Ge))}const P=S[0].codewords.length-m.getECCodewords(),F=P-1;let $=0;for(let ce=0;ce<F;ce++)for(let be=0;be<N;be++)S[be].codewords[ce]=o[$++];const K=d.getVersionNumber()===24,ee=K?8:N;for(let ce=0;ce<ee;ce++)S[ce].codewords[P-1]=o[$++];const oe=S[0].codewords.length;for(let ce=P;ce<oe;ce++)for(let be=0;be<N;be++){const _e=K?(be+8)%N:be,Ge=K&&_e>7?ce-1:ce;S[_e].codewords[Ge]=o[$++]}if($!==o.length)throw new y;return S}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class ji{constructor(o){this.bytes=o,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(o){if(o<1||o>32||o>this.available())throw new y(""+o);let d=0,m=this.bitOffset,v=this.byteOffset;const b=this.bytes;if(m>0){const S=8-m,N=o<S?o:S,R=S-N,P=255>>8-N<<R;d=(b[v]&P)>>R,o-=N,m+=N,m===8&&(m=0,v++)}if(o>0){for(;o>=8;)d=d<<8|b[v]&255,v++,o-=8;if(o>0){const S=8-o,N=255>>S<<S;d=d<<o|(b[v]&N)>>S,m+=o}}return this.bitOffset=m,this.byteOffset=v,d}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Jt;(function(q){q[q.PAD_ENCODE=0]="PAD_ENCODE",q[q.ASCII_ENCODE=1]="ASCII_ENCODE",q[q.C40_ENCODE=2]="C40_ENCODE",q[q.TEXT_ENCODE=3]="TEXT_ENCODE",q[q.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",q[q.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",q[q.BASE256_ENCODE=6]="BASE256_ENCODE"})(Jt||(Jt={}));class Da{static decode(o){const d=new ji(o),m=new pe,v=new pe,b=new Array;let S=Jt.ASCII_ENCODE;do if(S===Jt.ASCII_ENCODE)S=this.decodeAsciiSegment(d,m,v);else{switch(S){case Jt.C40_ENCODE:this.decodeC40Segment(d,m);break;case Jt.TEXT_ENCODE:this.decodeTextSegment(d,m);break;case Jt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(d,m);break;case Jt.EDIFACT_ENCODE:this.decodeEdifactSegment(d,m);break;case Jt.BASE256_ENCODE:this.decodeBase256Segment(d,m,b);break;default:throw new B}S=Jt.ASCII_ENCODE}while(S!==Jt.PAD_ENCODE&&d.available()>0);return v.length()>0&&m.append(v.toString()),new me(o,m.toString(),b.length===0?null:b,null)}static decodeAsciiSegment(o,d,m){let v=!1;do{let b=o.readBits(8);if(b===0)throw new B;if(b<=128)return v&&(b+=128),d.append(String.fromCharCode(b-1)),Jt.ASCII_ENCODE;if(b===129)return Jt.PAD_ENCODE;if(b<=229){const S=b-130;S<10&&d.append("0"),d.append(""+S)}else switch(b){case 230:return Jt.C40_ENCODE;case 231:return Jt.BASE256_ENCODE;case 232:d.append("");break;case 233:case 234:break;case 235:v=!0;break;case 236:d.append("[)>05"),m.insert(0,"");break;case 237:d.append("[)>06"),m.insert(0,"");break;case 238:return Jt.ANSIX12_ENCODE;case 239:return Jt.TEXT_ENCODE;case 240:return Jt.EDIFACT_ENCODE;case 241:break;default:if(b!==254||o.available()!==0)throw new B;break}}while(o.available()>0);return Jt.ASCII_ENCODE}static decodeC40Segment(o,d){let m=!1;const v=[];let b=0;do{if(o.available()===8)return;const S=o.readBits(8);if(S===254)return;this.parseTwoBytes(S,o.readBits(8),v);for(let N=0;N<3;N++){const R=v[N];switch(b){case 0:if(R<3)b=R+1;else if(R<this.C40_BASIC_SET_CHARS.length){const P=this.C40_BASIC_SET_CHARS[R];m?(d.append(String.fromCharCode(P.charCodeAt(0)+128)),m=!1):d.append(P)}else throw new B;break;case 1:m?(d.append(String.fromCharCode(R+128)),m=!1):d.append(String.fromCharCode(R)),b=0;break;case 2:if(R<this.C40_SHIFT2_SET_CHARS.length){const P=this.C40_SHIFT2_SET_CHARS[R];m?(d.append(String.fromCharCode(P.charCodeAt(0)+128)),m=!1):d.append(P)}else switch(R){case 27:d.append("");break;case 30:m=!0;break;default:throw new B}b=0;break;case 3:m?(d.append(String.fromCharCode(R+224)),m=!1):d.append(String.fromCharCode(R+96)),b=0;break;default:throw new B}}}while(o.available()>0)}static decodeTextSegment(o,d){let m=!1,v=[],b=0;do{if(o.available()===8)return;const S=o.readBits(8);if(S===254)return;this.parseTwoBytes(S,o.readBits(8),v);for(let N=0;N<3;N++){const R=v[N];switch(b){case 0:if(R<3)b=R+1;else if(R<this.TEXT_BASIC_SET_CHARS.length){const P=this.TEXT_BASIC_SET_CHARS[R];m?(d.append(String.fromCharCode(P.charCodeAt(0)+128)),m=!1):d.append(P)}else throw new B;break;case 1:m?(d.append(String.fromCharCode(R+128)),m=!1):d.append(String.fromCharCode(R)),b=0;break;case 2:if(R<this.TEXT_SHIFT2_SET_CHARS.length){const P=this.TEXT_SHIFT2_SET_CHARS[R];m?(d.append(String.fromCharCode(P.charCodeAt(0)+128)),m=!1):d.append(P)}else switch(R){case 27:d.append("");break;case 30:m=!0;break;default:throw new B}b=0;break;case 3:if(R<this.TEXT_SHIFT3_SET_CHARS.length){const P=this.TEXT_SHIFT3_SET_CHARS[R];m?(d.append(String.fromCharCode(P.charCodeAt(0)+128)),m=!1):d.append(P),b=0}else throw new B;break;default:throw new B}}}while(o.available()>0)}static decodeAnsiX12Segment(o,d){const m=[];do{if(o.available()===8)return;const v=o.readBits(8);if(v===254)return;this.parseTwoBytes(v,o.readBits(8),m);for(let b=0;b<3;b++){const S=m[b];switch(S){case 0:d.append("\r");break;case 1:d.append("*");break;case 2:d.append(">");break;case 3:d.append(" ");break;default:if(S<14)d.append(String.fromCharCode(S+44));else if(S<40)d.append(String.fromCharCode(S+51));else throw new B;break}}}while(o.available()>0)}static parseTwoBytes(o,d,m){let v=(o<<8)+d-1,b=Math.floor(v/1600);m[0]=b,v-=b*1600,b=Math.floor(v/40),m[1]=b,m[2]=v-b*40}static decodeEdifactSegment(o,d){do{if(o.available()<=16)return;for(let m=0;m<4;m++){let v=o.readBits(6);if(v===31){const b=8-o.getBitOffset();b!==8&&o.readBits(b);return}(v&32)===0&&(v|=64),d.append(String.fromCharCode(v))}}while(o.available()>0)}static decodeBase256Segment(o,d,m){let v=1+o.getByteOffset();const b=this.unrandomize255State(o.readBits(8),v++);let S;if(b===0?S=o.available()/8|0:b<250?S=b:S=250*(b-249)+this.unrandomize255State(o.readBits(8),v++),S<0)throw new B;const N=new Uint8Array(S);for(let R=0;R<S;R++){if(o.available()<8)throw new B;N[R]=this.unrandomize255State(o.readBits(8),v++)}m.push(N);try{d.append(te.decode(N,Y.ISO88591))}catch(R){throw new jt("Platform does not support required encoding: "+R.message)}}static unrandomize255State(o,d){const m=149*d%255+1,v=o-m;return v>=0?v:v+256}}Da.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Da.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Da.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Da.TEXT_SHIFT2_SET_CHARS=Da.C40_SHIFT2_SET_CHARS,Da.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Ig{constructor(){this.rsDecoder=new gn(ft.DATA_MATRIX_FIELD_256)}decode(o){const d=new _o(o),m=d.getVersion(),v=d.readCodewords(),b=To.getDataBlocks(v,m);let S=0;for(let P of b)S+=P.getNumDataCodewords();const N=new Uint8Array(S),R=b.length;for(let P=0;P<R;P++){const F=b[P],$=F.getCodewords(),K=F.getNumDataCodewords();this.correctErrors($,K);for(let ee=0;ee<K;ee++)N[ee*R+P]=$[ee]}return Da.decode(N)}correctErrors(o,d){const m=new Int32Array(o);try{this.rsDecoder.decode(m,o.length-d)}catch{throw new C}for(let v=0;v<d;v++)o[v]=m[v]}}class On{constructor(o){this.image=o,this.rectangleDetector=new _t(this.image)}detect(){const o=this.rectangleDetector.detect();let d=this.detectSolid1(o);if(d=this.detectSolid2(d),d[3]=this.correctTopRight(d),!d[3])throw new le;d=this.shiftToModuleCenter(d);const m=d[0],v=d[1],b=d[2],S=d[3];let N=this.transitionsBetween(m,S)+1,R=this.transitionsBetween(b,S)+1;(N&1)===1&&(N+=1),(R&1)===1&&(R+=1),4*N<7*R&&4*R<7*N&&(N=R=Math.max(N,R));let P=On.sampleGrid(this.image,m,v,b,S,N,R);return new rs(P,[m,v,b,S])}static shiftPoint(o,d,m){let v=(d.getX()-o.getX())/(m+1),b=(d.getY()-o.getY())/(m+1);return new Ze(o.getX()+v,o.getY()+b)}static moveAway(o,d,m){let v=o.getX(),b=o.getY();return v<d?v-=1:v+=1,b<m?b-=1:b+=1,new Ze(v,b)}detectSolid1(o){let d=o[0],m=o[1],v=o[3],b=o[2],S=this.transitionsBetween(d,m),N=this.transitionsBetween(m,v),R=this.transitionsBetween(v,b),P=this.transitionsBetween(b,d),F=S,$=[b,d,m,v];return F>N&&(F=N,$[0]=d,$[1]=m,$[2]=v,$[3]=b),F>R&&(F=R,$[0]=m,$[1]=v,$[2]=b,$[3]=d),F>P&&($[0]=v,$[1]=b,$[2]=d,$[3]=m),$}detectSolid2(o){let d=o[0],m=o[1],v=o[2],b=o[3],S=this.transitionsBetween(d,b),N=On.shiftPoint(m,v,(S+1)*4),R=On.shiftPoint(v,m,(S+1)*4),P=this.transitionsBetween(N,d),F=this.transitionsBetween(R,b);return P<F?(o[0]=d,o[1]=m,o[2]=v,o[3]=b):(o[0]=m,o[1]=v,o[2]=b,o[3]=d),o}correctTopRight(o){let d=o[0],m=o[1],v=o[2],b=o[3],S=this.transitionsBetween(d,b),N=this.transitionsBetween(m,b),R=On.shiftPoint(d,m,(N+1)*4),P=On.shiftPoint(v,m,(S+1)*4);S=this.transitionsBetween(R,b),N=this.transitionsBetween(P,b);let F=new Ze(b.getX()+(v.getX()-m.getX())/(S+1),b.getY()+(v.getY()-m.getY())/(S+1)),$=new Ze(b.getX()+(d.getX()-m.getX())/(N+1),b.getY()+(d.getY()-m.getY())/(N+1));if(!this.isValid(F))return this.isValid($)?$:null;if(!this.isValid($))return F;let K=this.transitionsBetween(R,F)+this.transitionsBetween(P,F),ee=this.transitionsBetween(R,$)+this.transitionsBetween(P,$);return K>ee?F:$}shiftToModuleCenter(o){let d=o[0],m=o[1],v=o[2],b=o[3],S=this.transitionsBetween(d,b)+1,N=this.transitionsBetween(v,b)+1,R=On.shiftPoint(d,m,N*4),P=On.shiftPoint(v,m,S*4);S=this.transitionsBetween(R,b)+1,N=this.transitionsBetween(P,b)+1,(S&1)===1&&(S+=1),(N&1)===1&&(N+=1);let F=(d.getX()+m.getX()+v.getX()+b.getX())/4,$=(d.getY()+m.getY()+v.getY()+b.getY())/4;d=On.moveAway(d,F,$),m=On.moveAway(m,F,$),v=On.moveAway(v,F,$),b=On.moveAway(b,F,$);let K,ee;return R=On.shiftPoint(d,m,N*4),R=On.shiftPoint(R,b,S*4),K=On.shiftPoint(m,d,N*4),K=On.shiftPoint(K,v,S*4),P=On.shiftPoint(v,b,N*4),P=On.shiftPoint(P,m,S*4),ee=On.shiftPoint(b,v,N*4),ee=On.shiftPoint(ee,d,S*4),[R,K,P,ee]}isValid(o){return o.getX()>=0&&o.getX()<this.image.getWidth()&&o.getY()>0&&o.getY()<this.image.getHeight()}static sampleGrid(o,d,m,v,b,S,N){return di.getInstance().sampleGrid(o,S,N,.5,.5,S-.5,.5,S-.5,N-.5,.5,N-.5,d.getX(),d.getY(),b.getX(),b.getY(),v.getX(),v.getY(),m.getX(),m.getY())}transitionsBetween(o,d){let m=Math.trunc(o.getX()),v=Math.trunc(o.getY()),b=Math.trunc(d.getX()),S=Math.trunc(d.getY()),N=Math.abs(S-v)>Math.abs(b-m);if(N){let ce=m;m=v,v=ce,ce=b,b=S,S=ce}let R=Math.abs(b-m),P=Math.abs(S-v),F=-R/2,$=v<S?1:-1,K=m<b?1:-1,ee=0,oe=this.image.get(N?v:m,N?m:v);for(let ce=m,be=v;ce!==b;ce+=K){let _e=this.image.get(N?be:ce,N?ce:be);if(_e!==oe&&(ee++,oe=_e),F+=P,F>0){if(be===S)break;be+=$,F-=R}}return ee}}class ka{constructor(){this.decoder=new Ig}decode(o,d=null){let m,v;if(d!=null&&d.has(z.PURE_BARCODE)){const P=ka.extractPureBits(o.getBlackMatrix());m=this.decoder.decode(P),v=ka.NO_POINTS}else{const P=new On(o.getBlackMatrix()).detect();m=this.decoder.decode(P.getBits()),v=P.getPoints()}const b=m.getRawBytes(),S=new se(m.getText(),b,8*b.length,v,ie.DATA_MATRIX,M.currentTimeMillis()),N=m.getByteSegments();N!=null&&S.putMetadata(qe.BYTE_SEGMENTS,N);const R=m.getECLevel();return R!=null&&S.putMetadata(qe.ERROR_CORRECTION_LEVEL,R),S}reset(){}static extractPureBits(o){const d=o.getTopLeftOnBit(),m=o.getBottomRightOnBit();if(d==null||m==null)throw new le;const v=this.moduleSize(d,o);let b=d[1];const S=m[1];let N=d[0];const P=(m[0]-N+1)/v,F=(S-b+1)/v;if(P<=0||F<=0)throw new le;const $=v/2;b+=$,N+=$;const K=new Te(P,F);for(let ee=0;ee<F;ee++){const oe=b+ee*v;for(let ce=0;ce<P;ce++)o.get(N+ce*v,oe)&&K.set(ce,ee)}return K}static moduleSize(o,d){const m=d.getWidth();let v=o[0];const b=o[1];for(;v<m&&d.get(v,b);)v++;if(v===m)throw new le;const S=v-o[0];if(S===0)throw new le;return S}}ka.NO_POINTS=[];class Tc extends he{constructor(o=500){super(new ka,o)}}var Io;(function(q){q[q.L=0]="L",q[q.M=1]="M",q[q.Q=2]="Q",q[q.H=3]="H"})(Io||(Io={}));class Pt{constructor(o,d,m){this.value=o,this.stringValue=d,this.bits=m,Pt.FOR_BITS.set(m,this),Pt.FOR_VALUE.set(o,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(o){switch(o){case"L":return Pt.L;case"M":return Pt.M;case"Q":return Pt.Q;case"H":return Pt.H;default:throw new g(o+"not available")}}toString(){return this.stringValue}equals(o){if(!(o instanceof Pt))return!1;const d=o;return this.value===d.value}static forBits(o){if(o<0||o>=Pt.FOR_BITS.size)throw new y;return Pt.FOR_BITS.get(o)}}Pt.FOR_BITS=new Map,Pt.FOR_VALUE=new Map,Pt.L=new Pt(Io.L,"L",1),Pt.M=new Pt(Io.M,"M",0),Pt.Q=new Pt(Io.Q,"Q",3),Pt.H=new Pt(Io.H,"H",2);class pr{constructor(o){this.errorCorrectionLevel=Pt.forBits(o>>3&3),this.dataMask=o&7}static numBitsDiffering(o,d){return L.bitCount(o^d)}static decodeFormatInformation(o,d){const m=pr.doDecodeFormatInformation(o,d);return m!==null?m:pr.doDecodeFormatInformation(o^pr.FORMAT_INFO_MASK_QR,d^pr.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(o,d){let m=Number.MAX_SAFE_INTEGER,v=0;for(const b of pr.FORMAT_INFO_DECODE_LOOKUP){const S=b[0];if(S===o||S===d)return new pr(b[1]);let N=pr.numBitsDiffering(o,S);N<m&&(v=b[1],m=N),o!==d&&(N=pr.numBitsDiffering(d,S),N<m&&(v=b[1],m=N))}return m<=3?new pr(v):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(o){if(!(o instanceof pr))return!1;const d=o;return this.errorCorrectionLevel===d.errorCorrectionLevel&&this.dataMask===d.dataMask}}pr.FORMAT_INFO_MASK_QR=21522,pr.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class Ee{constructor(o,...d){this.ecCodewordsPerBlock=o,this.ecBlocks=d}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let o=0;const d=this.ecBlocks;for(const m of d)o+=m.getCount();return o}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class Q{constructor(o,d){this.count=o,this.dataCodewords=d}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class it{constructor(o,d,...m){this.versionNumber=o,this.alignmentPatternCenters=d,this.ecBlocks=m;let v=0;const b=m[0].getECCodewordsPerBlock(),S=m[0].getECBlocks();for(const N of S)v+=N.getCount()*(N.getDataCodewords()+b);this.totalCodewords=v}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(o){return this.ecBlocks[o.getValue()]}static getProvisionalVersionForDimension(o){if(o%4!==1)throw new B;try{return this.getVersionForNumber((o-17)/4)}catch{throw new B}}static getVersionForNumber(o){if(o<1||o>40)throw new y;return it.VERSIONS[o-1]}static decodeVersionInformation(o){let d=Number.MAX_SAFE_INTEGER,m=0;for(let v=0;v<it.VERSION_DECODE_INFO.length;v++){const b=it.VERSION_DECODE_INFO[v];if(b===o)return it.getVersionForNumber(v+7);const S=pr.numBitsDiffering(o,b);S<d&&(m=v+7,d=S)}return d<=3?it.getVersionForNumber(m):null}buildFunctionPattern(){const o=this.getDimensionForVersion(),d=new Te(o);d.setRegion(0,0,9,9),d.setRegion(o-8,0,8,9),d.setRegion(0,o-8,9,8);const m=this.alignmentPatternCenters.length;for(let v=0;v<m;v++){const b=this.alignmentPatternCenters[v]-2;for(let S=0;S<m;S++)v===0&&(S===0||S===m-1)||v===m-1&&S===0||d.setRegion(this.alignmentPatternCenters[S]-2,b,5,5)}return d.setRegion(6,9,1,o-17),d.setRegion(9,6,o-17,1),this.versionNumber>6&&(d.setRegion(o-11,0,3,6),d.setRegion(0,o-11,6,3)),d}toString(){return""+this.versionNumber}}it.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),it.VERSIONS=[new it(1,new Int32Array(0),new Ee(7,new Q(1,19)),new Ee(10,new Q(1,16)),new Ee(13,new Q(1,13)),new Ee(17,new Q(1,9))),new it(2,Int32Array.from([6,18]),new Ee(10,new Q(1,34)),new Ee(16,new Q(1,28)),new Ee(22,new Q(1,22)),new Ee(28,new Q(1,16))),new it(3,Int32Array.from([6,22]),new Ee(15,new Q(1,55)),new Ee(26,new Q(1,44)),new Ee(18,new Q(2,17)),new Ee(22,new Q(2,13))),new it(4,Int32Array.from([6,26]),new Ee(20,new Q(1,80)),new Ee(18,new Q(2,32)),new Ee(26,new Q(2,24)),new Ee(16,new Q(4,9))),new it(5,Int32Array.from([6,30]),new Ee(26,new Q(1,108)),new Ee(24,new Q(2,43)),new Ee(18,new Q(2,15),new Q(2,16)),new Ee(22,new Q(2,11),new Q(2,12))),new it(6,Int32Array.from([6,34]),new Ee(18,new Q(2,68)),new Ee(16,new Q(4,27)),new Ee(24,new Q(4,19)),new Ee(28,new Q(4,15))),new it(7,Int32Array.from([6,22,38]),new Ee(20,new Q(2,78)),new Ee(18,new Q(4,31)),new Ee(18,new Q(2,14),new Q(4,15)),new Ee(26,new Q(4,13),new Q(1,14))),new it(8,Int32Array.from([6,24,42]),new Ee(24,new Q(2,97)),new Ee(22,new Q(2,38),new Q(2,39)),new Ee(22,new Q(4,18),new Q(2,19)),new Ee(26,new Q(4,14),new Q(2,15))),new it(9,Int32Array.from([6,26,46]),new Ee(30,new Q(2,116)),new Ee(22,new Q(3,36),new Q(2,37)),new Ee(20,new Q(4,16),new Q(4,17)),new Ee(24,new Q(4,12),new Q(4,13))),new it(10,Int32Array.from([6,28,50]),new Ee(18,new Q(2,68),new Q(2,69)),new Ee(26,new Q(4,43),new Q(1,44)),new Ee(24,new Q(6,19),new Q(2,20)),new Ee(28,new Q(6,15),new Q(2,16))),new it(11,Int32Array.from([6,30,54]),new Ee(20,new Q(4,81)),new Ee(30,new Q(1,50),new Q(4,51)),new Ee(28,new Q(4,22),new Q(4,23)),new Ee(24,new Q(3,12),new Q(8,13))),new it(12,Int32Array.from([6,32,58]),new Ee(24,new Q(2,92),new Q(2,93)),new Ee(22,new Q(6,36),new Q(2,37)),new Ee(26,new Q(4,20),new Q(6,21)),new Ee(28,new Q(7,14),new Q(4,15))),new it(13,Int32Array.from([6,34,62]),new Ee(26,new Q(4,107)),new Ee(22,new Q(8,37),new Q(1,38)),new Ee(24,new Q(8,20),new Q(4,21)),new Ee(22,new Q(12,11),new Q(4,12))),new it(14,Int32Array.from([6,26,46,66]),new Ee(30,new Q(3,115),new Q(1,116)),new Ee(24,new Q(4,40),new Q(5,41)),new Ee(20,new Q(11,16),new Q(5,17)),new Ee(24,new Q(11,12),new Q(5,13))),new it(15,Int32Array.from([6,26,48,70]),new Ee(22,new Q(5,87),new Q(1,88)),new Ee(24,new Q(5,41),new Q(5,42)),new Ee(30,new Q(5,24),new Q(7,25)),new Ee(24,new Q(11,12),new Q(7,13))),new it(16,Int32Array.from([6,26,50,74]),new Ee(24,new Q(5,98),new Q(1,99)),new Ee(28,new Q(7,45),new Q(3,46)),new Ee(24,new Q(15,19),new Q(2,20)),new Ee(30,new Q(3,15),new Q(13,16))),new it(17,Int32Array.from([6,30,54,78]),new Ee(28,new Q(1,107),new Q(5,108)),new Ee(28,new Q(10,46),new Q(1,47)),new Ee(28,new Q(1,22),new Q(15,23)),new Ee(28,new Q(2,14),new Q(17,15))),new it(18,Int32Array.from([6,30,56,82]),new Ee(30,new Q(5,120),new Q(1,121)),new Ee(26,new Q(9,43),new Q(4,44)),new Ee(28,new Q(17,22),new Q(1,23)),new Ee(28,new Q(2,14),new Q(19,15))),new it(19,Int32Array.from([6,30,58,86]),new Ee(28,new Q(3,113),new Q(4,114)),new Ee(26,new Q(3,44),new Q(11,45)),new Ee(26,new Q(17,21),new Q(4,22)),new Ee(26,new Q(9,13),new Q(16,14))),new it(20,Int32Array.from([6,34,62,90]),new Ee(28,new Q(3,107),new Q(5,108)),new Ee(26,new Q(3,41),new Q(13,42)),new Ee(30,new Q(15,24),new Q(5,25)),new Ee(28,new Q(15,15),new Q(10,16))),new it(21,Int32Array.from([6,28,50,72,94]),new Ee(28,new Q(4,116),new Q(4,117)),new Ee(26,new Q(17,42)),new Ee(28,new Q(17,22),new Q(6,23)),new Ee(30,new Q(19,16),new Q(6,17))),new it(22,Int32Array.from([6,26,50,74,98]),new Ee(28,new Q(2,111),new Q(7,112)),new Ee(28,new Q(17,46)),new Ee(30,new Q(7,24),new Q(16,25)),new Ee(24,new Q(34,13))),new it(23,Int32Array.from([6,30,54,78,102]),new Ee(30,new Q(4,121),new Q(5,122)),new Ee(28,new Q(4,47),new Q(14,48)),new Ee(30,new Q(11,24),new Q(14,25)),new Ee(30,new Q(16,15),new Q(14,16))),new it(24,Int32Array.from([6,28,54,80,106]),new Ee(30,new Q(6,117),new Q(4,118)),new Ee(28,new Q(6,45),new Q(14,46)),new Ee(30,new Q(11,24),new Q(16,25)),new Ee(30,new Q(30,16),new Q(2,17))),new it(25,Int32Array.from([6,32,58,84,110]),new Ee(26,new Q(8,106),new Q(4,107)),new Ee(28,new Q(8,47),new Q(13,48)),new Ee(30,new Q(7,24),new Q(22,25)),new Ee(30,new Q(22,15),new Q(13,16))),new it(26,Int32Array.from([6,30,58,86,114]),new Ee(28,new Q(10,114),new Q(2,115)),new Ee(28,new Q(19,46),new Q(4,47)),new Ee(28,new Q(28,22),new Q(6,23)),new Ee(30,new Q(33,16),new Q(4,17))),new it(27,Int32Array.from([6,34,62,90,118]),new Ee(30,new Q(8,122),new Q(4,123)),new Ee(28,new Q(22,45),new Q(3,46)),new Ee(30,new Q(8,23),new Q(26,24)),new Ee(30,new Q(12,15),new Q(28,16))),new it(28,Int32Array.from([6,26,50,74,98,122]),new Ee(30,new Q(3,117),new Q(10,118)),new Ee(28,new Q(3,45),new Q(23,46)),new Ee(30,new Q(4,24),new Q(31,25)),new Ee(30,new Q(11,15),new Q(31,16))),new it(29,Int32Array.from([6,30,54,78,102,126]),new Ee(30,new Q(7,116),new Q(7,117)),new Ee(28,new Q(21,45),new Q(7,46)),new Ee(30,new Q(1,23),new Q(37,24)),new Ee(30,new Q(19,15),new Q(26,16))),new it(30,Int32Array.from([6,26,52,78,104,130]),new Ee(30,new Q(5,115),new Q(10,116)),new Ee(28,new Q(19,47),new Q(10,48)),new Ee(30,new Q(15,24),new Q(25,25)),new Ee(30,new Q(23,15),new Q(25,16))),new it(31,Int32Array.from([6,30,56,82,108,134]),new Ee(30,new Q(13,115),new Q(3,116)),new Ee(28,new Q(2,46),new Q(29,47)),new Ee(30,new Q(42,24),new Q(1,25)),new Ee(30,new Q(23,15),new Q(28,16))),new it(32,Int32Array.from([6,34,60,86,112,138]),new Ee(30,new Q(17,115)),new Ee(28,new Q(10,46),new Q(23,47)),new Ee(30,new Q(10,24),new Q(35,25)),new Ee(30,new Q(19,15),new Q(35,16))),new it(33,Int32Array.from([6,30,58,86,114,142]),new Ee(30,new Q(17,115),new Q(1,116)),new Ee(28,new Q(14,46),new Q(21,47)),new Ee(30,new Q(29,24),new Q(19,25)),new Ee(30,new Q(11,15),new Q(46,16))),new it(34,Int32Array.from([6,34,62,90,118,146]),new Ee(30,new Q(13,115),new Q(6,116)),new Ee(28,new Q(14,46),new Q(23,47)),new Ee(30,new Q(44,24),new Q(7,25)),new Ee(30,new Q(59,16),new Q(1,17))),new it(35,Int32Array.from([6,30,54,78,102,126,150]),new Ee(30,new Q(12,121),new Q(7,122)),new Ee(28,new Q(12,47),new Q(26,48)),new Ee(30,new Q(39,24),new Q(14,25)),new Ee(30,new Q(22,15),new Q(41,16))),new it(36,Int32Array.from([6,24,50,76,102,128,154]),new Ee(30,new Q(6,121),new Q(14,122)),new Ee(28,new Q(6,47),new Q(34,48)),new Ee(30,new Q(46,24),new Q(10,25)),new Ee(30,new Q(2,15),new Q(64,16))),new it(37,Int32Array.from([6,28,54,80,106,132,158]),new Ee(30,new Q(17,122),new Q(4,123)),new Ee(28,new Q(29,46),new Q(14,47)),new Ee(30,new Q(49,24),new Q(10,25)),new Ee(30,new Q(24,15),new Q(46,16))),new it(38,Int32Array.from([6,32,58,84,110,136,162]),new Ee(30,new Q(4,122),new Q(18,123)),new Ee(28,new Q(13,46),new Q(32,47)),new Ee(30,new Q(48,24),new Q(14,25)),new Ee(30,new Q(42,15),new Q(32,16))),new it(39,Int32Array.from([6,26,54,82,110,138,166]),new Ee(30,new Q(20,117),new Q(4,118)),new Ee(28,new Q(40,47),new Q(7,48)),new Ee(30,new Q(43,24),new Q(22,25)),new Ee(30,new Q(10,15),new Q(67,16))),new it(40,Int32Array.from([6,30,58,86,114,142,170]),new Ee(30,new Q(19,118),new Q(6,119)),new Ee(28,new Q(18,47),new Q(31,48)),new Ee(30,new Q(34,24),new Q(34,25)),new Ee(30,new Q(20,15),new Q(61,16)))];var lr;(function(q){q[q.DATA_MASK_000=0]="DATA_MASK_000",q[q.DATA_MASK_001=1]="DATA_MASK_001",q[q.DATA_MASK_010=2]="DATA_MASK_010",q[q.DATA_MASK_011=3]="DATA_MASK_011",q[q.DATA_MASK_100=4]="DATA_MASK_100",q[q.DATA_MASK_101=5]="DATA_MASK_101",q[q.DATA_MASK_110=6]="DATA_MASK_110",q[q.DATA_MASK_111=7]="DATA_MASK_111"})(lr||(lr={}));class hi{constructor(o,d){this.value=o,this.isMasked=d}unmaskBitMatrix(o,d){for(let m=0;m<d;m++)for(let v=0;v<d;v++)this.isMasked(m,v)&&o.flip(v,m)}}hi.values=new Map([[lr.DATA_MASK_000,new hi(lr.DATA_MASK_000,(q,o)=>(q+o&1)===0)],[lr.DATA_MASK_001,new hi(lr.DATA_MASK_001,(q,o)=>(q&1)===0)],[lr.DATA_MASK_010,new hi(lr.DATA_MASK_010,(q,o)=>o%3===0)],[lr.DATA_MASK_011,new hi(lr.DATA_MASK_011,(q,o)=>(q+o)%3===0)],[lr.DATA_MASK_100,new hi(lr.DATA_MASK_100,(q,o)=>(Math.floor(q/2)+Math.floor(o/3)&1)===0)],[lr.DATA_MASK_101,new hi(lr.DATA_MASK_101,(q,o)=>q*o%6===0)],[lr.DATA_MASK_110,new hi(lr.DATA_MASK_110,(q,o)=>q*o%6<3)],[lr.DATA_MASK_111,new hi(lr.DATA_MASK_111,(q,o)=>(q+o+q*o%3&1)===0)]]);class Ro{constructor(o){const d=o.getHeight();if(d<21||(d&3)!==1)throw new B;this.bitMatrix=o}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let o=0;for(let b=0;b<6;b++)o=this.copyBit(b,8,o);o=this.copyBit(7,8,o),o=this.copyBit(8,8,o),o=this.copyBit(8,7,o);for(let b=5;b>=0;b--)o=this.copyBit(8,b,o);const d=this.bitMatrix.getHeight();let m=0;const v=d-7;for(let b=d-1;b>=v;b--)m=this.copyBit(8,b,m);for(let b=d-8;b<d;b++)m=this.copyBit(b,8,m);if(this.parsedFormatInfo=pr.decodeFormatInformation(o,m),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new B}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const o=this.bitMatrix.getHeight(),d=Math.floor((o-17)/4);if(d<=6)return it.getVersionForNumber(d);let m=0;const v=o-11;for(let S=5;S>=0;S--)for(let N=o-9;N>=v;N--)m=this.copyBit(N,S,m);let b=it.decodeVersionInformation(m);if(b!==null&&b.getDimensionForVersion()===o)return this.parsedVersion=b,b;m=0;for(let S=5;S>=0;S--)for(let N=o-9;N>=v;N--)m=this.copyBit(S,N,m);if(b=it.decodeVersionInformation(m),b!==null&&b.getDimensionForVersion()===o)return this.parsedVersion=b,b;throw new B}copyBit(o,d,m){return(this.isMirror?this.bitMatrix.get(d,o):this.bitMatrix.get(o,d))?m<<1|1:m<<1}readCodewords(){const o=this.readFormatInformation(),d=this.readVersion(),m=hi.values.get(o.getDataMask()),v=this.bitMatrix.getHeight();m.unmaskBitMatrix(this.bitMatrix,v);const b=d.buildFunctionPattern();let S=!0;const N=new Uint8Array(d.getTotalCodewords());let R=0,P=0,F=0;for(let $=v-1;$>0;$-=2){$===6&&$--;for(let K=0;K<v;K++){const ee=S?v-1-K:K;for(let oe=0;oe<2;oe++)b.get($-oe,ee)||(F++,P<<=1,this.bitMatrix.get($-oe,ee)&&(P|=1),F===8&&(N[R++]=P,F=0,P=0))}S=!S}if(R!==d.getTotalCodewords())throw new B;return N}remask(){if(this.parsedFormatInfo===null)return;const o=hi.values[this.parsedFormatInfo.getDataMask()],d=this.bitMatrix.getHeight();o.unmaskBitMatrix(this.bitMatrix,d)}setMirror(o){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=o}mirror(){const o=this.bitMatrix;for(let d=0,m=o.getWidth();d<m;d++)for(let v=d+1,b=o.getHeight();v<b;v++)o.get(d,v)!==o.get(v,d)&&(o.flip(v,d),o.flip(d,v))}}class ud{constructor(o,d){this.numDataCodewords=o,this.codewords=d}static getDataBlocks(o,d,m){if(o.length!==d.getTotalCodewords())throw new y;const v=d.getECBlocksForLevel(m);let b=0;const S=v.getECBlocks();for(const oe of S)b+=oe.getCount();const N=new Array(b);let R=0;for(const oe of S)for(let ce=0;ce<oe.getCount();ce++){const be=oe.getDataCodewords(),_e=v.getECCodewordsPerBlock()+be;N[R++]=new ud(be,new Uint8Array(_e))}const P=N[0].codewords.length;let F=N.length-1;for(;F>=0&&N[F].codewords.length!==P;)F--;F++;const $=P-v.getECCodewordsPerBlock();let K=0;for(let oe=0;oe<$;oe++)for(let ce=0;ce<R;ce++)N[ce].codewords[oe]=o[K++];for(let oe=F;oe<R;oe++)N[oe].codewords[$]=o[K++];const ee=N[0].codewords.length;for(let oe=$;oe<ee;oe++)for(let ce=0;ce<R;ce++){const be=ce<F?oe:oe+1;N[ce].codewords[be]=o[K++]}return N}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var pi;(function(q){q[q.TERMINATOR=0]="TERMINATOR",q[q.NUMERIC=1]="NUMERIC",q[q.ALPHANUMERIC=2]="ALPHANUMERIC",q[q.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",q[q.BYTE=4]="BYTE",q[q.ECI=5]="ECI",q[q.KANJI=6]="KANJI",q[q.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",q[q.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",q[q.HANZI=9]="HANZI"})(pi||(pi={}));class ut{constructor(o,d,m,v){this.value=o,this.stringValue=d,this.characterCountBitsForVersions=m,this.bits=v,ut.FOR_BITS.set(v,this),ut.FOR_VALUE.set(o,this)}static forBits(o){const d=ut.FOR_BITS.get(o);if(d===void 0)throw new y;return d}getCharacterCountBits(o){const d=o.getVersionNumber();let m;return d<=9?m=0:d<=26?m=1:m=2,this.characterCountBitsForVersions[m]}getValue(){return this.value}getBits(){return this.bits}equals(o){if(!(o instanceof ut))return!1;const d=o;return this.value===d.value}toString(){return this.stringValue}}ut.FOR_BITS=new Map,ut.FOR_VALUE=new Map,ut.TERMINATOR=new ut(pi.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),ut.NUMERIC=new ut(pi.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),ut.ALPHANUMERIC=new ut(pi.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),ut.STRUCTURED_APPEND=new ut(pi.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),ut.BYTE=new ut(pi.BYTE,"BYTE",Int32Array.from([8,16,16]),4),ut.ECI=new ut(pi.ECI,"ECI",Int32Array.from([0,0,0]),7),ut.KANJI=new ut(pi.KANJI,"KANJI",Int32Array.from([8,10,12]),8),ut.FNC1_FIRST_POSITION=new ut(pi.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),ut.FNC1_SECOND_POSITION=new ut(pi.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),ut.HANZI=new ut(pi.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class An{static decode(o,d,m,v){const b=new ji(o);let S=new pe;const N=new Array;let R=-1,P=-1;try{let F=null,$=!1,K;do{if(b.available()<4)K=ut.TERMINATOR;else{const ee=b.readBits(4);K=ut.forBits(ee)}switch(K){case ut.TERMINATOR:break;case ut.FNC1_FIRST_POSITION:case ut.FNC1_SECOND_POSITION:$=!0;break;case ut.STRUCTURED_APPEND:if(b.available()<16)throw new B;R=b.readBits(8),P=b.readBits(8);break;case ut.ECI:const ee=An.parseECIValue(b);if(F=W.getCharacterSetECIByValue(ee),F===null)throw new B;break;case ut.HANZI:const oe=b.readBits(4),ce=b.readBits(K.getCharacterCountBits(d));oe===An.GB2312_SUBSET&&An.decodeHanziSegment(b,S,ce);break;default:const be=b.readBits(K.getCharacterCountBits(d));switch(K){case ut.NUMERIC:An.decodeNumericSegment(b,S,be);break;case ut.ALPHANUMERIC:An.decodeAlphanumericSegment(b,S,be,$);break;case ut.BYTE:An.decodeByteSegment(b,S,be,F,N,v);break;case ut.KANJI:An.decodeKanjiSegment(b,S,be);break;default:throw new B}break}}while(K!==ut.TERMINATOR)}catch{throw new B}return new me(o,S.toString(),N.length===0?null:N,m===null?null:m.toString(),R,P)}static decodeHanziSegment(o,d,m){if(m*13>o.available())throw new B;const v=new Uint8Array(2*m);let b=0;for(;m>0;){const S=o.readBits(13);let N=S/96<<8&4294967295|S%96;N<959?N+=41377:N+=42657,v[b]=N>>8&255,v[b+1]=N&255,b+=2,m--}try{d.append(te.decode(v,Y.GB2312))}catch(S){throw new B(S)}}static decodeKanjiSegment(o,d,m){if(m*13>o.available())throw new B;const v=new Uint8Array(2*m);let b=0;for(;m>0;){const S=o.readBits(13);let N=S/192<<8&4294967295|S%192;N<7936?N+=33088:N+=49472,v[b]=N>>8,v[b+1]=N,b+=2,m--}try{d.append(te.decode(v,Y.SHIFT_JIS))}catch(S){throw new B(S)}}static decodeByteSegment(o,d,m,v,b,S){if(8*m>o.available())throw new B;const N=new Uint8Array(m);for(let P=0;P<m;P++)N[P]=o.readBits(8);let R;v===null?R=Y.guessEncoding(N,S):R=v.getName();try{d.append(te.decode(N,R))}catch(P){throw new B(P)}b.push(N)}static toAlphaNumericChar(o){if(o>=An.ALPHANUMERIC_CHARS.length)throw new B;return An.ALPHANUMERIC_CHARS[o]}static decodeAlphanumericSegment(o,d,m,v){const b=d.length();for(;m>1;){if(o.available()<11)throw new B;const S=o.readBits(11);d.append(An.toAlphaNumericChar(Math.floor(S/45))),d.append(An.toAlphaNumericChar(S%45)),m-=2}if(m===1){if(o.available()<6)throw new B;d.append(An.toAlphaNumericChar(o.readBits(6)))}if(v)for(let S=b;S<d.length();S++)d.charAt(S)==="%"&&(S<d.length()-1&&d.charAt(S+1)==="%"?d.deleteCharAt(S+1):d.setCharAt(S,""))}static decodeNumericSegment(o,d,m){for(;m>=3;){if(o.available()<10)throw new B;const v=o.readBits(10);if(v>=1e3)throw new B;d.append(An.toAlphaNumericChar(Math.floor(v/100))),d.append(An.toAlphaNumericChar(Math.floor(v/10)%10)),d.append(An.toAlphaNumericChar(v%10)),m-=3}if(m===2){if(o.available()<7)throw new B;const v=o.readBits(7);if(v>=100)throw new B;d.append(An.toAlphaNumericChar(Math.floor(v/10))),d.append(An.toAlphaNumericChar(v%10))}else if(m===1){if(o.available()<4)throw new B;const v=o.readBits(4);if(v>=10)throw new B;d.append(An.toAlphaNumericChar(v))}}static parseECIValue(o){const d=o.readBits(8);if((d&128)===0)return d&127;if((d&192)===128){const m=o.readBits(8);return(d&63)<<8&4294967295|m}if((d&224)===192){const m=o.readBits(16);return(d&31)<<16&4294967295|m}throw new B}}An.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",An.GB2312_SUBSET=1;class mh{constructor(o){this.mirrored=o}isMirrored(){return this.mirrored}applyMirroredCorrection(o){if(!this.mirrored||o===null||o.length<3)return;const d=o[0];o[0]=o[2],o[2]=d}}class Rg{constructor(){this.rsDecoder=new gn(ft.QR_CODE_FIELD_256)}decodeBooleanArray(o,d){return this.decodeBitMatrix(Te.parseFromBooleanArray(o),d)}decodeBitMatrix(o,d){const m=new Ro(o);let v=null;try{return this.decodeBitMatrixParser(m,d)}catch(b){v=b}try{m.remask(),m.setMirror(!0),m.readVersion(),m.readFormatInformation(),m.mirror();const b=this.decodeBitMatrixParser(m,d);return b.setOther(new mh(!0)),b}catch(b){throw v!==null?v:b}}decodeBitMatrixParser(o,d){const m=o.readVersion(),v=o.readFormatInformation().getErrorCorrectionLevel(),b=o.readCodewords(),S=ud.getDataBlocks(b,m,v);let N=0;for(const F of S)N+=F.getNumDataCodewords();const R=new Uint8Array(N);let P=0;for(const F of S){const $=F.getCodewords(),K=F.getNumDataCodewords();this.correctErrors($,K);for(let ee=0;ee<K;ee++)R[P++]=$[ee]}return An.decode(R,m,v,d)}correctErrors(o,d){const m=new Int32Array(o);try{this.rsDecoder.decode(m,o.length-d)}catch{throw new C}for(let v=0;v<d;v++)o[v]=m[v]}}class Mo extends Ze{constructor(o,d,m){super(o,d),this.estimatedModuleSize=m}aboutEquals(o,d,m){if(Math.abs(d-this.getY())<=o&&Math.abs(m-this.getX())<=o){const v=Math.abs(o-this.estimatedModuleSize);return v<=1||v<=this.estimatedModuleSize}return!1}combineEstimate(o,d,m){const v=(this.getX()+d)/2,b=(this.getY()+o)/2,S=(this.estimatedModuleSize+m)/2;return new Mo(v,b,S)}}class Si{constructor(o,d,m,v,b,S,N){this.image=o,this.startX=d,this.startY=m,this.width=v,this.height=b,this.moduleSize=S,this.resultPointCallback=N,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const o=this.startX,d=this.height,m=this.width,v=o+m,b=this.startY+d/2,S=new Int32Array(3),N=this.image;for(let R=0;R<d;R++){const P=b+((R&1)===0?Math.floor((R+1)/2):-Math.floor((R+1)/2));S[0]=0,S[1]=0,S[2]=0;let F=o;for(;F<v&&!N.get(F,P);)F++;let $=0;for(;F<v;){if(N.get(F,P))if($===1)S[1]++;else if($===2){if(this.foundPatternCross(S)){const K=this.handlePossibleCenter(S,P,F);if(K!==null)return K}S[0]=S[2],S[1]=1,S[2]=0,$=1}else S[++$]++;else $===1&&$++,S[$]++;F++}if(this.foundPatternCross(S)){const K=this.handlePossibleCenter(S,P,v);if(K!==null)return K}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new le}static centerFromEnd(o,d){return d-o[2]-o[1]/2}foundPatternCross(o){const d=this.moduleSize,m=d/2;for(let v=0;v<3;v++)if(Math.abs(d-o[v])>=m)return!1;return!0}crossCheckVertical(o,d,m,v){const b=this.image,S=b.getHeight(),N=this.crossCheckStateCount;N[0]=0,N[1]=0,N[2]=0;let R=o;for(;R>=0&&b.get(d,R)&&N[1]<=m;)N[1]++,R--;if(R<0||N[1]>m)return NaN;for(;R>=0&&!b.get(d,R)&&N[0]<=m;)N[0]++,R--;if(N[0]>m)return NaN;for(R=o+1;R<S&&b.get(d,R)&&N[1]<=m;)N[1]++,R++;if(R===S||N[1]>m)return NaN;for(;R<S&&!b.get(d,R)&&N[2]<=m;)N[2]++,R++;if(N[2]>m)return NaN;const P=N[0]+N[1]+N[2];return 5*Math.abs(P-v)>=2*v?NaN:this.foundPatternCross(N)?Si.centerFromEnd(N,R):NaN}handlePossibleCenter(o,d,m){const v=o[0]+o[1]+o[2],b=Si.centerFromEnd(o,m),S=this.crossCheckVertical(d,b,2*o[1],v);if(!isNaN(S)){const N=(o[0]+o[1]+o[2])/3;for(const P of this.possibleCenters)if(P.aboutEquals(N,S,b))return P.combineEstimate(S,b,N);const R=new Mo(b,S,N);this.possibleCenters.push(R),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(R)}return null}}class Ml extends Ze{constructor(o,d,m,v){super(o,d),this.estimatedModuleSize=m,this.count=v,v===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(o,d,m){if(Math.abs(d-this.getY())<=o&&Math.abs(m-this.getX())<=o){const v=Math.abs(o-this.estimatedModuleSize);return v<=1||v<=this.estimatedModuleSize}return!1}combineEstimate(o,d,m){const v=this.count+1,b=(this.count*this.getX()+d)/v,S=(this.count*this.getY()+o)/v,N=(this.count*this.estimatedModuleSize+m)/v;return new Ml(b,S,N,v)}}class dd{constructor(o){this.bottomLeft=o[0],this.topLeft=o[1],this.topRight=o[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Dn{constructor(o,d){this.image=o,this.resultPointCallback=d,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=d}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(o){const d=o!=null&&o.get(z.TRY_HARDER)!==void 0,m=o!=null&&o.get(z.PURE_BARCODE)!==void 0,v=this.image,b=v.getHeight(),S=v.getWidth();let N=Math.floor(3*b/(4*Dn.MAX_MODULES));(N<Dn.MIN_SKIP||d)&&(N=Dn.MIN_SKIP);let R=!1;const P=new Int32Array(5);for(let $=N-1;$<b&&!R;$+=N){P[0]=0,P[1]=0,P[2]=0,P[3]=0,P[4]=0;let K=0;for(let ee=0;ee<S;ee++)if(v.get(ee,$))(K&1)===1&&K++,P[K]++;else if((K&1)===0)if(K===4)if(Dn.foundPatternCross(P)){if(this.handlePossibleCenter(P,$,ee,m)===!0)if(N=2,this.hasSkipped===!0)R=this.haveMultiplyConfirmedCenters();else{const ce=this.findRowSkip();ce>P[2]&&($+=ce-P[2]-N,ee=S-1)}else{P[0]=P[2],P[1]=P[3],P[2]=P[4],P[3]=1,P[4]=0,K=3;continue}K=0,P[0]=0,P[1]=0,P[2]=0,P[3]=0,P[4]=0}else P[0]=P[2],P[1]=P[3],P[2]=P[4],P[3]=1,P[4]=0,K=3;else P[++K]++;else P[K]++;Dn.foundPatternCross(P)&&this.handlePossibleCenter(P,$,S,m)===!0&&(N=P[0],this.hasSkipped&&(R=this.haveMultiplyConfirmedCenters()))}const F=this.selectBestPatterns();return Ze.orderBestPatterns(F),new dd(F)}static centerFromEnd(o,d){return d-o[4]-o[3]-o[2]/2}static foundPatternCross(o){let d=0;for(let b=0;b<5;b++){const S=o[b];if(S===0)return!1;d+=S}if(d<7)return!1;const m=d/7,v=m/2;return Math.abs(m-o[0])<v&&Math.abs(m-o[1])<v&&Math.abs(3*m-o[2])<3*v&&Math.abs(m-o[3])<v&&Math.abs(m-o[4])<v}getCrossCheckStateCount(){const o=this.crossCheckStateCount;return o[0]=0,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o}crossCheckDiagonal(o,d,m,v){const b=this.getCrossCheckStateCount();let S=0;const N=this.image;for(;o>=S&&d>=S&&N.get(d-S,o-S);)b[2]++,S++;if(o<S||d<S)return!1;for(;o>=S&&d>=S&&!N.get(d-S,o-S)&&b[1]<=m;)b[1]++,S++;if(o<S||d<S||b[1]>m)return!1;for(;o>=S&&d>=S&&N.get(d-S,o-S)&&b[0]<=m;)b[0]++,S++;if(b[0]>m)return!1;const R=N.getHeight(),P=N.getWidth();for(S=1;o+S<R&&d+S<P&&N.get(d+S,o+S);)b[2]++,S++;if(o+S>=R||d+S>=P)return!1;for(;o+S<R&&d+S<P&&!N.get(d+S,o+S)&&b[3]<m;)b[3]++,S++;if(o+S>=R||d+S>=P||b[3]>=m)return!1;for(;o+S<R&&d+S<P&&N.get(d+S,o+S)&&b[4]<m;)b[4]++,S++;if(b[4]>=m)return!1;const F=b[0]+b[1]+b[2]+b[3]+b[4];return Math.abs(F-v)<2*v&&Dn.foundPatternCross(b)}crossCheckVertical(o,d,m,v){const b=this.image,S=b.getHeight(),N=this.getCrossCheckStateCount();let R=o;for(;R>=0&&b.get(d,R);)N[2]++,R--;if(R<0)return NaN;for(;R>=0&&!b.get(d,R)&&N[1]<=m;)N[1]++,R--;if(R<0||N[1]>m)return NaN;for(;R>=0&&b.get(d,R)&&N[0]<=m;)N[0]++,R--;if(N[0]>m)return NaN;for(R=o+1;R<S&&b.get(d,R);)N[2]++,R++;if(R===S)return NaN;for(;R<S&&!b.get(d,R)&&N[3]<m;)N[3]++,R++;if(R===S||N[3]>=m)return NaN;for(;R<S&&b.get(d,R)&&N[4]<m;)N[4]++,R++;if(N[4]>=m)return NaN;const P=N[0]+N[1]+N[2]+N[3]+N[4];return 5*Math.abs(P-v)>=2*v?NaN:Dn.foundPatternCross(N)?Dn.centerFromEnd(N,R):NaN}crossCheckHorizontal(o,d,m,v){const b=this.image,S=b.getWidth(),N=this.getCrossCheckStateCount();let R=o;for(;R>=0&&b.get(R,d);)N[2]++,R--;if(R<0)return NaN;for(;R>=0&&!b.get(R,d)&&N[1]<=m;)N[1]++,R--;if(R<0||N[1]>m)return NaN;for(;R>=0&&b.get(R,d)&&N[0]<=m;)N[0]++,R--;if(N[0]>m)return NaN;for(R=o+1;R<S&&b.get(R,d);)N[2]++,R++;if(R===S)return NaN;for(;R<S&&!b.get(R,d)&&N[3]<m;)N[3]++,R++;if(R===S||N[3]>=m)return NaN;for(;R<S&&b.get(R,d)&&N[4]<m;)N[4]++,R++;if(N[4]>=m)return NaN;const P=N[0]+N[1]+N[2]+N[3]+N[4];return 5*Math.abs(P-v)>=v?NaN:Dn.foundPatternCross(N)?Dn.centerFromEnd(N,R):NaN}handlePossibleCenter(o,d,m,v){const b=o[0]+o[1]+o[2]+o[3]+o[4];let S=Dn.centerFromEnd(o,m),N=this.crossCheckVertical(d,Math.floor(S),o[2],b);if(!isNaN(N)&&(S=this.crossCheckHorizontal(Math.floor(S),Math.floor(N),o[2],b),!isNaN(S)&&(!v||this.crossCheckDiagonal(Math.floor(N),Math.floor(S),o[2],b)))){const R=b/7;let P=!1;const F=this.possibleCenters;for(let $=0,K=F.length;$<K;$++){const ee=F[$];if(ee.aboutEquals(R,N,S)){F[$]=ee.combineEstimate(N,S,R),P=!0;break}}if(!P){const $=new Ml(S,N,R);F.push($),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint($)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let d=null;for(const m of this.possibleCenters)if(m.getCount()>=Dn.CENTER_QUORUM)if(d==null)d=m;else return this.hasSkipped=!0,Math.floor((Math.abs(d.getX()-m.getX())-Math.abs(d.getY()-m.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let o=0,d=0;const m=this.possibleCenters.length;for(const S of this.possibleCenters)S.getCount()>=Dn.CENTER_QUORUM&&(o++,d+=S.getEstimatedModuleSize());if(o<3)return!1;const v=d/m;let b=0;for(const S of this.possibleCenters)b+=Math.abs(S.getEstimatedModuleSize()-v);return b<=.05*d}selectBestPatterns(){const o=this.possibleCenters.length;if(o<3)throw new le;const d=this.possibleCenters;let m;if(o>3){let v=0,b=0;for(const R of this.possibleCenters){const P=R.getEstimatedModuleSize();v+=P,b+=P*P}m=v/o;let S=Math.sqrt(b/o-m*m);d.sort((R,P)=>{const F=Math.abs(P.getEstimatedModuleSize()-m),$=Math.abs(R.getEstimatedModuleSize()-m);return F<$?-1:F>$?1:0});const N=Math.max(.2*m,S);for(let R=0;R<d.length&&d.length>3;R++){const P=d[R];Math.abs(P.getEstimatedModuleSize()-m)>N&&(d.splice(R,1),R--)}}if(d.length>3){let v=0;for(const b of d)v+=b.getEstimatedModuleSize();m=v/d.length,d.sort((b,S)=>{if(S.getCount()===b.getCount()){const N=Math.abs(S.getEstimatedModuleSize()-m),R=Math.abs(b.getEstimatedModuleSize()-m);return N<R?1:N>R?-1:0}else return S.getCount()-b.getCount()}),d.splice(3)}return[d[0],d[1],d[2]]}}Dn.CENTER_QUORUM=2,Dn.MIN_SKIP=3,Dn.MAX_MODULES=57;class ca{constructor(o){this.image=o}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(o){this.resultPointCallback=o==null?null:o.get(z.NEED_RESULT_POINT_CALLBACK);const m=new Dn(this.image,this.resultPointCallback).find(o);return this.processFinderPatternInfo(m)}processFinderPatternInfo(o){const d=o.getTopLeft(),m=o.getTopRight(),v=o.getBottomLeft(),b=this.calculateModuleSize(d,m,v);if(b<1)throw new le("No pattern found in proccess finder.");const S=ca.computeDimension(d,m,v,b),N=it.getProvisionalVersionForDimension(S),R=N.getDimensionForVersion()-7;let P=null;if(N.getAlignmentPatternCenters().length>0){const ee=m.getX()-d.getX()+v.getX(),oe=m.getY()-d.getY()+v.getY(),ce=1-3/R,be=Math.floor(d.getX()+ce*(ee-d.getX())),_e=Math.floor(d.getY()+ce*(oe-d.getY()));for(let Ge=4;Ge<=16;Ge<<=1)try{P=this.findAlignmentInRegion(b,be,_e,Ge);break}catch(He){if(!(He instanceof le))throw He}}const F=ca.createTransform(d,m,v,P,S),$=ca.sampleGrid(this.image,F,S);let K;return P===null?K=[v,d,m]:K=[v,d,m,P],new rs($,K)}static createTransform(o,d,m,v,b){const S=b-3.5;let N,R,P,F;return v!==null?(N=v.getX(),R=v.getY(),P=S-3,F=P):(N=d.getX()-o.getX()+m.getX(),R=d.getY()-o.getY()+m.getY(),P=S,F=S),Ur.quadrilateralToQuadrilateral(3.5,3.5,S,3.5,P,F,3.5,S,o.getX(),o.getY(),d.getX(),d.getY(),N,R,m.getX(),m.getY())}static sampleGrid(o,d,m){return di.getInstance().sampleGridWithTransform(o,m,m,d)}static computeDimension(o,d,m,v){const b=Rt.round(Ze.distance(o,d)/v),S=Rt.round(Ze.distance(o,m)/v);let N=Math.floor((b+S)/2)+7;switch(N&3){case 0:N++;break;case 2:N--;break;case 3:throw new le("Dimensions could be not found.")}return N}calculateModuleSize(o,d,m){return(this.calculateModuleSizeOneWay(o,d)+this.calculateModuleSizeOneWay(o,m))/2}calculateModuleSizeOneWay(o,d){const m=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(d.getX()),Math.floor(d.getY())),v=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(d.getX()),Math.floor(d.getY()),Math.floor(o.getX()),Math.floor(o.getY()));return isNaN(m)?v/7:isNaN(v)?m/7:(m+v)/14}sizeOfBlackWhiteBlackRunBothWays(o,d,m,v){let b=this.sizeOfBlackWhiteBlackRun(o,d,m,v),S=1,N=o-(m-o);N<0?(S=o/(o-N),N=0):N>=this.image.getWidth()&&(S=(this.image.getWidth()-1-o)/(N-o),N=this.image.getWidth()-1);let R=Math.floor(d-(v-d)*S);return S=1,R<0?(S=d/(d-R),R=0):R>=this.image.getHeight()&&(S=(this.image.getHeight()-1-d)/(R-d),R=this.image.getHeight()-1),N=Math.floor(o+(N-o)*S),b+=this.sizeOfBlackWhiteBlackRun(o,d,N,R),b-1}sizeOfBlackWhiteBlackRun(o,d,m,v){const b=Math.abs(v-d)>Math.abs(m-o);if(b){let ee=o;o=d,d=ee,ee=m,m=v,v=ee}const S=Math.abs(m-o),N=Math.abs(v-d);let R=-S/2;const P=o<m?1:-1,F=d<v?1:-1;let $=0;const K=m+P;for(let ee=o,oe=d;ee!==K;ee+=P){const ce=b?oe:ee,be=b?ee:oe;if($===1===this.image.get(ce,be)){if($===2)return Rt.distance(ee,oe,o,d);$++}if(R+=N,R>0){if(oe===v)break;oe+=F,R-=S}}return $===2?Rt.distance(m+P,v,o,d):NaN}findAlignmentInRegion(o,d,m,v){const b=Math.floor(v*o),S=Math.max(0,d-b),N=Math.min(this.image.getWidth()-1,d+b);if(N-S<o*3)throw new le("Alignment top exceeds estimated module size.");const R=Math.max(0,m-b),P=Math.min(this.image.getHeight()-1,m+b);if(P-R<o*3)throw new le("Alignment bottom exceeds estimated module size.");return new Si(this.image,S,R,N-S,P-R,o,this.resultPointCallback).find()}}class Pa{constructor(){this.decoder=new Rg}getDecoder(){return this.decoder}decode(o,d){let m,v;if(d!=null&&d.get(z.PURE_BARCODE)!==void 0){const R=Pa.extractPureBits(o.getBlackMatrix());m=this.decoder.decodeBitMatrix(R,d),v=Pa.NO_POINTS}else{const R=new ca(o.getBlackMatrix()).detect(d);m=this.decoder.decodeBitMatrix(R.getBits(),d),v=R.getPoints()}m.getOther()instanceof mh&&m.getOther().applyMirroredCorrection(v);const b=new se(m.getText(),m.getRawBytes(),void 0,v,ie.QR_CODE,void 0),S=m.getByteSegments();S!==null&&b.putMetadata(qe.BYTE_SEGMENTS,S);const N=m.getECLevel();return N!==null&&b.putMetadata(qe.ERROR_CORRECTION_LEVEL,N),m.hasStructuredAppend()&&(b.putMetadata(qe.STRUCTURED_APPEND_SEQUENCE,m.getStructuredAppendSequenceNumber()),b.putMetadata(qe.STRUCTURED_APPEND_PARITY,m.getStructuredAppendParity())),b}reset(){}static extractPureBits(o){const d=o.getTopLeftOnBit(),m=o.getBottomRightOnBit();if(d===null||m===null)throw new le;const v=this.moduleSize(d,o);let b=d[1],S=m[1],N=d[0],R=m[0];if(N>=R||b>=S)throw new le;if(S-b!==R-N&&(R=N+(S-b),R>=o.getWidth()))throw new le;const P=Math.round((R-N+1)/v),F=Math.round((S-b+1)/v);if(P<=0||F<=0)throw new le;if(F!==P)throw new le;const $=Math.floor(v/2);b+=$,N+=$;const K=N+Math.floor((P-1)*v)-R;if(K>0){if(K>$)throw new le;N-=K}const ee=b+Math.floor((F-1)*v)-S;if(ee>0){if(ee>$)throw new le;b-=ee}const oe=new Te(P,F);for(let ce=0;ce<F;ce++){const be=b+Math.floor(ce*v);for(let _e=0;_e<P;_e++)o.get(N+Math.floor(_e*v),be)&&oe.set(_e,ce)}return oe}static moduleSize(o,d){const m=d.getHeight(),v=d.getWidth();let b=o[0],S=o[1],N=!0,R=0;for(;b<v&&S<m;){if(N!==d.get(b,S)){if(++R===5)break;N=!N}b++,S++}if(b===v||S===m)throw new le;return(b-o[0])/7}}Pa.NO_POINTS=new Array;class ht{PDF417Common(){}static getBitCountSum(o){return Rt.sum(o)}static toIntArray(o){if(o==null||!o.length)return ht.EMPTY_INT_ARRAY;const d=new Int32Array(o.length);let m=0;for(const v of o)d[m++]=v;return d}static getCodeword(o){const d=U.binarySearch(ht.SYMBOL_TABLE,o&262143);return d<0?-1:(ht.CODEWORD_TABLE[d]-1)%ht.NUMBER_OF_CODEWORDS}}ht.NUMBER_OF_CODEWORDS=929,ht.MAX_CODEWORDS_IN_BARCODE=ht.NUMBER_OF_CODEWORDS-1,ht.MIN_ROWS_IN_BARCODE=3,ht.MAX_ROWS_IN_BARCODE=90,ht.MODULES_IN_CODEWORD=17,ht.MODULES_IN_STOP_PATTERN=18,ht.BARS_IN_MODULE=8,ht.EMPTY_INT_ARRAY=new Int32Array([]),ht.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),ht.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class gh{constructor(o,d){this.bits=o,this.points=d}getBits(){return this.bits}getPoints(){return this.points}}class wt{static detectMultiple(o,d,m){let v=o.getBlackMatrix(),b=wt.detect(m,v);return b.length||(v=v.clone(),v.rotate180(),b=wt.detect(m,v)),new gh(v,b)}static detect(o,d){const m=new Array;let v=0,b=0,S=!1;for(;v<d.getHeight();){const N=wt.findVertices(d,v,b);if(N[0]==null&&N[3]==null){if(!S)break;S=!1,b=0;for(const R of m)R[1]!=null&&(v=Math.trunc(Math.max(v,R[1].getY()))),R[3]!=null&&(v=Math.max(v,Math.trunc(R[3].getY())));v+=wt.ROW_STEP;continue}if(S=!0,m.push(N),!o)break;N[2]!=null?(b=Math.trunc(N[2].getX()),v=Math.trunc(N[2].getY())):(b=Math.trunc(N[4].getX()),v=Math.trunc(N[4].getY()))}return m}static findVertices(o,d,m){const v=o.getHeight(),b=o.getWidth(),S=new Array(8);return wt.copyToResult(S,wt.findRowsWithPattern(o,v,b,d,m,wt.START_PATTERN),wt.INDEXES_START_PATTERN),S[4]!=null&&(m=Math.trunc(S[4].getX()),d=Math.trunc(S[4].getY())),wt.copyToResult(S,wt.findRowsWithPattern(o,v,b,d,m,wt.STOP_PATTERN),wt.INDEXES_STOP_PATTERN),S}static copyToResult(o,d,m){for(let v=0;v<m.length;v++)o[m[v]]=d[v]}static findRowsWithPattern(o,d,m,v,b,S){const N=new Array(4);let R=!1;const P=new Int32Array(S.length);for(;v<d;v+=wt.ROW_STEP){let $=wt.findGuardPattern(o,b,v,m,!1,S,P);if($!=null){for(;v>0;){const K=wt.findGuardPattern(o,b,--v,m,!1,S,P);if(K!=null)$=K;else{v++;break}}N[0]=new Ze($[0],v),N[1]=new Ze($[1],v),R=!0;break}}let F=v+1;if(R){let $=0,K=Int32Array.from([Math.trunc(N[0].getX()),Math.trunc(N[1].getX())]);for(;F<d;F++){const ee=wt.findGuardPattern(o,K[0],F,m,!1,S,P);if(ee!=null&&Math.abs(K[0]-ee[0])<wt.MAX_PATTERN_DRIFT&&Math.abs(K[1]-ee[1])<wt.MAX_PATTERN_DRIFT)K=ee,$=0;else{if($>wt.SKIPPED_ROW_COUNT_MAX)break;$++}}F-=$+1,N[2]=new Ze(K[0],F),N[3]=new Ze(K[1],F)}return F-v<wt.BARCODE_MIN_HEIGHT&&U.fill(N,null),N}static findGuardPattern(o,d,m,v,b,S,N){U.fillWithin(N,0,N.length,0);let R=d,P=0;for(;o.get(R,m)&&R>0&&P++<wt.MAX_PIXEL_DRIFT;)R--;let F=R,$=0,K=S.length;for(let ee=b;F<v;F++)if(o.get(F,m)!==ee)N[$]++;else{if($===K-1){if(wt.patternMatchVariance(N,S,wt.MAX_INDIVIDUAL_VARIANCE)<wt.MAX_AVG_VARIANCE)return new Int32Array([R,F]);R+=N[0]+N[1],M.arraycopy(N,2,N,0,$-1),N[$-1]=0,N[$]=0,$--}else $++;N[$]=1,ee=!ee}return $===K-1&&wt.patternMatchVariance(N,S,wt.MAX_INDIVIDUAL_VARIANCE)<wt.MAX_AVG_VARIANCE?new Int32Array([R,F-1]):null}static patternMatchVariance(o,d,m){let v=o.length,b=0,S=0;for(let P=0;P<v;P++)b+=o[P],S+=d[P];if(b<S)return 1/0;let N=b/S;m*=N;let R=0;for(let P=0;P<v;P++){let F=o[P],$=d[P]*N,K=F>$?F-$:$-F;if(K>m)return 1/0;R+=K}return R/b}}wt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),wt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),wt.MAX_AVG_VARIANCE=.42,wt.MAX_INDIVIDUAL_VARIANCE=.8,wt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),wt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),wt.MAX_PIXEL_DRIFT=3,wt.MAX_PATTERN_DRIFT=5,wt.SKIPPED_ROW_COUNT_MAX=25,wt.ROW_STEP=5,wt.BARCODE_MIN_HEIGHT=10;class Cn{constructor(o,d){if(d.length===0)throw new y;this.field=o;let m=d.length;if(m>1&&d[0]===0){let v=1;for(;v<m&&d[v]===0;)v++;v===m?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(m-v),M.arraycopy(d,v,this.coefficients,0,this.coefficients.length))}else this.coefficients=d}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(o){return this.coefficients[this.coefficients.length-1-o]}evaluateAt(o){if(o===0)return this.getCoefficient(0);if(o===1){let v=0;for(let b of this.coefficients)v=this.field.add(v,b);return v}let d=this.coefficients[0],m=this.coefficients.length;for(let v=1;v<m;v++)d=this.field.add(this.field.multiply(o,d),this.coefficients[v]);return d}add(o){if(!this.field.equals(o.field))throw new y("ModulusPolys do not have same ModulusGF field");if(this.isZero())return o;if(o.isZero())return this;let d=this.coefficients,m=o.coefficients;if(d.length>m.length){let S=d;d=m,m=S}let v=new Int32Array(m.length),b=m.length-d.length;M.arraycopy(m,0,v,0,b);for(let S=b;S<m.length;S++)v[S]=this.field.add(d[S-b],m[S]);return new Cn(this.field,v)}subtract(o){if(!this.field.equals(o.field))throw new y("ModulusPolys do not have same ModulusGF field");return o.isZero()?this:this.add(o.negative())}multiply(o){return o instanceof Cn?this.multiplyOther(o):this.multiplyScalar(o)}multiplyOther(o){if(!this.field.equals(o.field))throw new y("ModulusPolys do not have same ModulusGF field");if(this.isZero()||o.isZero())return new Cn(this.field,new Int32Array([0]));let d=this.coefficients,m=d.length,v=o.coefficients,b=v.length,S=new Int32Array(m+b-1);for(let N=0;N<m;N++){let R=d[N];for(let P=0;P<b;P++)S[N+P]=this.field.add(S[N+P],this.field.multiply(R,v[P]))}return new Cn(this.field,S)}negative(){let o=this.coefficients.length,d=new Int32Array(o);for(let m=0;m<o;m++)d[m]=this.field.subtract(0,this.coefficients[m]);return new Cn(this.field,d)}multiplyScalar(o){if(o===0)return new Cn(this.field,new Int32Array([0]));if(o===1)return this;let d=this.coefficients.length,m=new Int32Array(d);for(let v=0;v<d;v++)m[v]=this.field.multiply(this.coefficients[v],o);return new Cn(this.field,m)}multiplyByMonomial(o,d){if(o<0)throw new y;if(d===0)return new Cn(this.field,new Int32Array([0]));let m=this.coefficients.length,v=new Int32Array(m+o);for(let b=0;b<m;b++)v[b]=this.field.multiply(this.coefficients[b],d);return new Cn(this.field,v)}toString(){let o=new pe;for(let d=this.getDegree();d>=0;d--){let m=this.getCoefficient(d);m!==0&&(m<0?(o.append(" - "),m=-m):o.length()>0&&o.append(" + "),(d===0||m!==1)&&o.append(m),d!==0&&(d===1?o.append("x"):(o.append("x^"),o.append(d))))}return o.toString()}}class fd{add(o,d){return(o+d)%this.modulus}subtract(o,d){return(this.modulus+o-d)%this.modulus}exp(o){return this.expTable[o]}log(o){if(o===0)throw new y;return this.logTable[o]}inverse(o){if(o===0)throw new Ue;return this.expTable[this.modulus-this.logTable[o]-1]}multiply(o,d){return o===0||d===0?0:this.expTable[(this.logTable[o]+this.logTable[d])%(this.modulus-1)]}getSize(){return this.modulus}equals(o){return o===this}}class _s extends fd{constructor(o,d){super(),this.modulus=o,this.expTable=new Int32Array(o),this.logTable=new Int32Array(o);let m=1;for(let v=0;v<o;v++)this.expTable[v]=m,m=m*d%o;for(let v=0;v<o-1;v++)this.logTable[this.expTable[v]]=v;this.zero=new Cn(this,new Int32Array([0])),this.one=new Cn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(o,d){if(o<0)throw new y;if(d===0)return this.zero;let m=new Int32Array(o+1);return m[0]=d,new Cn(this,m)}}_s.PDF417_GF=new _s(ht.NUMBER_OF_CODEWORDS,3);class ja{constructor(){this.field=_s.PDF417_GF}decode(o,d,m){let v=new Cn(this.field,o),b=new Int32Array(d),S=!1;for(let oe=d;oe>0;oe--){let ce=v.evaluateAt(this.field.exp(oe));b[d-oe]=ce,ce!==0&&(S=!0)}if(!S)return 0;let N=this.field.getOne();if(m!=null)for(const oe of m){let ce=this.field.exp(o.length-1-oe),be=new Cn(this.field,new Int32Array([this.field.subtract(0,ce),1]));N=N.multiply(be)}let R=new Cn(this.field,b),P=this.runEuclideanAlgorithm(this.field.buildMonomial(d,1),R,d),F=P[0],$=P[1],K=this.findErrorLocations(F),ee=this.findErrorMagnitudes($,F,K);for(let oe=0;oe<K.length;oe++){let ce=o.length-1-this.field.log(K[oe]);if(ce<0)throw C.getChecksumInstance();o[ce]=this.field.subtract(o[ce],ee[oe])}return K.length}runEuclideanAlgorithm(o,d,m){if(o.getDegree()<d.getDegree()){let K=o;o=d,d=K}let v=o,b=d,S=this.field.getZero(),N=this.field.getOne();for(;b.getDegree()>=Math.round(m/2);){let K=v,ee=S;if(v=b,S=N,v.isZero())throw C.getChecksumInstance();b=K;let oe=this.field.getZero(),ce=v.getCoefficient(v.getDegree()),be=this.field.inverse(ce);for(;b.getDegree()>=v.getDegree()&&!b.isZero();){let _e=b.getDegree()-v.getDegree(),Ge=this.field.multiply(b.getCoefficient(b.getDegree()),be);oe=oe.add(this.field.buildMonomial(_e,Ge)),b=b.subtract(v.multiplyByMonomial(_e,Ge))}N=oe.multiply(S).subtract(ee).negative()}let R=N.getCoefficient(0);if(R===0)throw C.getChecksumInstance();let P=this.field.inverse(R),F=N.multiply(P),$=b.multiply(P);return[F,$]}findErrorLocations(o){let d=o.getDegree(),m=new Int32Array(d),v=0;for(let b=1;b<this.field.getSize()&&v<d;b++)o.evaluateAt(b)===0&&(m[v]=this.field.inverse(b),v++);if(v!==d)throw C.getChecksumInstance();return m}findErrorMagnitudes(o,d,m){let v=d.getDegree(),b=new Int32Array(v);for(let P=1;P<=v;P++)b[v-P]=this.field.multiply(P,d.getCoefficient(P));let S=new Cn(this.field,b),N=m.length,R=new Int32Array(N);for(let P=0;P<N;P++){let F=this.field.inverse(m[P]),$=this.field.subtract(0,o.evaluateAt(F)),K=this.field.inverse(S.evaluateAt(F));R[P]=this.field.multiply($,K)}return R}}class La{constructor(o,d,m,v,b){o instanceof La?this.constructor_2(o):this.constructor_1(o,d,m,v,b)}constructor_1(o,d,m,v,b){const S=d==null||m==null,N=v==null||b==null;if(S&&N)throw new le;S?(d=new Ze(0,v.getY()),m=new Ze(0,b.getY())):N&&(v=new Ze(o.getWidth()-1,d.getY()),b=new Ze(o.getWidth()-1,m.getY())),this.image=o,this.topLeft=d,this.bottomLeft=m,this.topRight=v,this.bottomRight=b,this.minX=Math.trunc(Math.min(d.getX(),m.getX())),this.maxX=Math.trunc(Math.max(v.getX(),b.getX())),this.minY=Math.trunc(Math.min(d.getY(),v.getY())),this.maxY=Math.trunc(Math.max(m.getY(),b.getY()))}constructor_2(o){this.image=o.image,this.topLeft=o.getTopLeft(),this.bottomLeft=o.getBottomLeft(),this.topRight=o.getTopRight(),this.bottomRight=o.getBottomRight(),this.minX=o.getMinX(),this.maxX=o.getMaxX(),this.minY=o.getMinY(),this.maxY=o.getMaxY()}static merge(o,d){return o==null?d:d==null?o:new La(o.image,o.topLeft,o.bottomLeft,d.topRight,d.bottomRight)}addMissingRows(o,d,m){let v=this.topLeft,b=this.bottomLeft,S=this.topRight,N=this.bottomRight;if(o>0){let R=m?this.topLeft:this.topRight,P=Math.trunc(R.getY()-o);P<0&&(P=0);let F=new Ze(R.getX(),P);m?v=F:S=F}if(d>0){let R=m?this.bottomLeft:this.bottomRight,P=Math.trunc(R.getY()+d);P>=this.image.getHeight()&&(P=this.image.getHeight()-1);let F=new Ze(R.getX(),P);m?b=F:N=F}return new La(this.image,v,b,S,N)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Ic{constructor(o,d,m,v){this.columnCount=o,this.errorCorrectionLevel=v,this.rowCountUpperPart=d,this.rowCountLowerPart=m,this.rowCount=d+m}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Oo{constructor(){this.buffer=""}static form(o,d){let m=-1;function v(S,N,R,P,F,$){if(S==="%%")return"%";if(d[++m]===void 0)return;S=P?parseInt(P.substr(1)):void 0;let K=F?parseInt(F.substr(1)):void 0,ee;switch($){case"s":ee=d[m];break;case"c":ee=d[m][0];break;case"f":ee=parseFloat(d[m]).toFixed(S);break;case"p":ee=parseFloat(d[m]).toPrecision(S);break;case"e":ee=parseFloat(d[m]).toExponential(S);break;case"x":ee=parseInt(d[m]).toString(K||16);break;case"d":ee=parseFloat(parseInt(d[m],K||10).toPrecision(S)).toFixed(0);break}ee=typeof ee=="object"?JSON.stringify(ee):(+ee).toString(K);let oe=parseInt(R),ce=R&&R[0]+""=="0"?"0":" ";for(;ee.length<oe;)ee=N!==void 0?ee+ce:ce+ee;return ee}let b=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return o.replace(b,v)}format(o,...d){this.buffer+=Oo.form(o,d)}toString(){return this.buffer}}class as{constructor(o){this.boundingBox=new La(o),this.codewords=new Array(o.getMaxY()-o.getMinY()+1)}getCodewordNearby(o){let d=this.getCodeword(o);if(d!=null)return d;for(let m=1;m<as.MAX_NEARBY_DISTANCE;m++){let v=this.imageRowToCodewordIndex(o)-m;if(v>=0&&(d=this.codewords[v],d!=null)||(v=this.imageRowToCodewordIndex(o)+m,v<this.codewords.length&&(d=this.codewords[v],d!=null)))return d}return null}imageRowToCodewordIndex(o){return o-this.boundingBox.getMinY()}setCodeword(o,d){this.codewords[this.imageRowToCodewordIndex(o)]=d}getCodeword(o){return this.codewords[this.imageRowToCodewordIndex(o)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const o=new Oo;let d=0;for(const m of this.codewords){if(m==null){o.format("%3d:    |   %n",d++);continue}o.format("%3d: %3d|%3d%n",d++,m.getRowNumber(),m.getValue())}return o.toString()}}as.MAX_NEARBY_DISTANCE=5;class ss{constructor(){this.values=new Map}setValue(o){o=Math.trunc(o);let d=this.values.get(o);d==null&&(d=0),d++,this.values.set(o,d)}getValue(){let o=-1,d=new Array;for(const[m,v]of this.values.entries()){const b={getKey:()=>m,getValue:()=>v};b.getValue()>o?(o=b.getValue(),d=[],d.push(b.getKey())):b.getValue()===o&&d.push(b.getKey())}return ht.toIntArray(d)}getConfidence(o){return this.values.get(o)}}class hd extends as{constructor(o,d){super(o),this._isLeft=d}setRowNumbers(){for(let o of this.getCodewords())o!=null&&o.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(o){let d=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(d,o);let m=this.getBoundingBox(),v=this._isLeft?m.getTopLeft():m.getTopRight(),b=this._isLeft?m.getBottomLeft():m.getBottomRight(),S=this.imageRowToCodewordIndex(Math.trunc(v.getY())),N=this.imageRowToCodewordIndex(Math.trunc(b.getY())),R=-1,P=1,F=0;for(let $=S;$<N;$++){if(d[$]==null)continue;let K=d[$],ee=K.getRowNumber()-R;if(ee===0)F++;else if(ee===1)P=Math.max(P,F),F=1,R=K.getRowNumber();else if(ee<0||K.getRowNumber()>=o.getRowCount()||ee>$)d[$]=null;else{let oe;P>2?oe=(P-2)*ee:oe=ee;let ce=oe>=$;for(let be=1;be<=oe&&!ce;be++)ce=d[$-be]!=null;ce?d[$]=null:(R=K.getRowNumber(),F=1)}}}getRowHeights(){let o=this.getBarcodeMetadata();if(o==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(o);let d=new Int32Array(o.getRowCount());for(let m of this.getCodewords())if(m!=null){let v=m.getRowNumber();if(v>=d.length)continue;d[v]++}return d}adjustIncompleteIndicatorColumnRowNumbers(o){let d=this.getBoundingBox(),m=this._isLeft?d.getTopLeft():d.getTopRight(),v=this._isLeft?d.getBottomLeft():d.getBottomRight(),b=this.imageRowToCodewordIndex(Math.trunc(m.getY())),S=this.imageRowToCodewordIndex(Math.trunc(v.getY())),N=this.getCodewords(),R=-1;for(let P=b;P<S;P++){if(N[P]==null)continue;let F=N[P];F.setRowNumberAsRowIndicatorColumn();let $=F.getRowNumber()-R;$===0||($===1?R=F.getRowNumber():F.getRowNumber()>=o.getRowCount()?N[P]=null:R=F.getRowNumber())}}getBarcodeMetadata(){let o=this.getCodewords(),d=new ss,m=new ss,v=new ss,b=new ss;for(let N of o){if(N==null)continue;N.setRowNumberAsRowIndicatorColumn();let R=N.getValue()%30,P=N.getRowNumber();switch(this._isLeft||(P+=2),P%3){case 0:m.setValue(R*3+1);break;case 1:b.setValue(R/3),v.setValue(R%3);break;case 2:d.setValue(R+1);break}}if(d.getValue().length===0||m.getValue().length===0||v.getValue().length===0||b.getValue().length===0||d.getValue()[0]<1||m.getValue()[0]+v.getValue()[0]<ht.MIN_ROWS_IN_BARCODE||m.getValue()[0]+v.getValue()[0]>ht.MAX_ROWS_IN_BARCODE)return null;let S=new Ic(d.getValue()[0],m.getValue()[0],v.getValue()[0],b.getValue()[0]);return this.removeIncorrectCodewords(o,S),S}removeIncorrectCodewords(o,d){for(let m=0;m<o.length;m++){let v=o[m];if(o[m]==null)continue;let b=v.getValue()%30,S=v.getRowNumber();if(S>d.getRowCount()){o[m]=null;continue}switch(this._isLeft||(S+=2),S%3){case 0:b*3+1!==d.getRowCountUpperPart()&&(o[m]=null);break;case 1:(Math.trunc(b/3)!==d.getErrorCorrectionLevel()||b%3!==d.getRowCountLowerPart())&&(o[m]=null);break;case 2:b+1!==d.getColumnCount()&&(o[m]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class mr{constructor(o,d){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=o,this.barcodeColumnCount=o.getColumnCount(),this.boundingBox=d,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let o=ht.MAX_CODEWORDS_IN_BARCODE,d;do d=o,o=this.adjustRowNumbersAndGetCount();while(o>0&&o<d);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(o){o!=null&&o.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let o=this.adjustRowNumbersByRow();if(o===0)return 0;for(let d=1;d<this.barcodeColumnCount+1;d++){let m=this.detectionResultColumns[d].getCodewords();for(let v=0;v<m.length;v++)m[v]!=null&&(m[v].hasValidRowNumber()||this.adjustRowNumbers(d,v,m))}return o}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let o=this.detectionResultColumns[0].getCodewords(),d=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let m=0;m<o.length;m++)if(o[m]!=null&&d[m]!=null&&o[m].getRowNumber()===d[m].getRowNumber())for(let v=1;v<=this.barcodeColumnCount;v++){let b=this.detectionResultColumns[v].getCodewords()[m];b!=null&&(b.setRowNumber(o[m].getRowNumber()),b.hasValidRowNumber()||(this.detectionResultColumns[v].getCodewords()[m]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let o=0,d=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let m=0;m<d.length;m++){if(d[m]==null)continue;let v=d[m].getRowNumber(),b=0;for(let S=this.barcodeColumnCount+1;S>0&&b<this.ADJUST_ROW_NUMBER_SKIP;S--){let N=this.detectionResultColumns[S].getCodewords()[m];N!=null&&(b=mr.adjustRowNumberIfValid(v,b,N),N.hasValidRowNumber()||o++)}}return o}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let o=0,d=this.detectionResultColumns[0].getCodewords();for(let m=0;m<d.length;m++){if(d[m]==null)continue;let v=d[m].getRowNumber(),b=0;for(let S=1;S<this.barcodeColumnCount+1&&b<this.ADJUST_ROW_NUMBER_SKIP;S++){let N=this.detectionResultColumns[S].getCodewords()[m];N!=null&&(b=mr.adjustRowNumberIfValid(v,b,N),N.hasValidRowNumber()||o++)}}return o}static adjustRowNumberIfValid(o,d,m){return m==null||m.hasValidRowNumber()||(m.isValidRowNumber(o)?(m.setRowNumber(o),d=0):++d),d}adjustRowNumbers(o,d,m){if(!this.detectionResultColumns[o-1])return;let v=m[d],b=this.detectionResultColumns[o-1].getCodewords(),S=b;this.detectionResultColumns[o+1]!=null&&(S=this.detectionResultColumns[o+1].getCodewords());let N=new Array(14);N[2]=b[d],N[3]=S[d],d>0&&(N[0]=m[d-1],N[4]=b[d-1],N[5]=S[d-1]),d>1&&(N[8]=m[d-2],N[10]=b[d-2],N[11]=S[d-2]),d<m.length-1&&(N[1]=m[d+1],N[6]=b[d+1],N[7]=S[d+1]),d<m.length-2&&(N[9]=m[d+2],N[12]=b[d+2],N[13]=S[d+2]);for(let R of N)if(mr.adjustRowNumber(v,R))return}static adjustRowNumber(o,d){return d==null?!1:d.hasValidRowNumber()&&d.getBucket()===o.getBucket()?(o.setRowNumber(d.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(o){this.boundingBox=o}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(o,d){this.detectionResultColumns[o]=d}getDetectionResultColumn(o){return this.detectionResultColumns[o]}toString(){let o=this.detectionResultColumns[0];o==null&&(o=this.detectionResultColumns[this.barcodeColumnCount+1]);let d=new Oo;for(let m=0;m<o.getCodewords().length;m++){d.format("CW %3d:",m);for(let v=0;v<this.barcodeColumnCount+2;v++){if(this.detectionResultColumns[v]==null){d.format("    |   ");continue}let b=this.detectionResultColumns[v].getCodewords()[m];if(b==null){d.format("    |   ");continue}d.format(" %3d|%3d",b.getRowNumber(),b.getValue())}d.format("%n")}return d.toString()}}class Li{constructor(o,d,m,v){this.rowNumber=Li.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(o),this.endX=Math.trunc(d),this.bucket=Math.trunc(m),this.value=Math.trunc(v)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(o){return o!==Li.BARCODE_ROW_UNKNOWN&&this.bucket===o%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(o){this.rowNumber=o}toString(){return this.rowNumber+"|"+this.value}}Li.BARCODE_ROW_UNKNOWN=-1;class _r{static initialize(){for(let o=0;o<ht.SYMBOL_TABLE.length;o++){let d=ht.SYMBOL_TABLE[o],m=d&1;for(let v=0;v<ht.BARS_IN_MODULE;v++){let b=0;for(;(d&1)===m;)b+=1,d>>=1;m=d&1,_r.RATIOS_TABLE[o]||(_r.RATIOS_TABLE[o]=new Array(ht.BARS_IN_MODULE)),_r.RATIOS_TABLE[o][ht.BARS_IN_MODULE-v-1]=Math.fround(b/ht.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(o){let d=_r.getDecodedCodewordValue(_r.sampleBitCounts(o));return d!==-1?d:_r.getClosestDecodedValue(o)}static sampleBitCounts(o){let d=Rt.sum(o),m=new Int32Array(ht.BARS_IN_MODULE),v=0,b=0;for(let S=0;S<ht.MODULES_IN_CODEWORD;S++){let N=d/(2*ht.MODULES_IN_CODEWORD)+S*d/ht.MODULES_IN_CODEWORD;b+o[v]<=N&&(b+=o[v],v++),m[v]++}return m}static getDecodedCodewordValue(o){let d=_r.getBitValue(o);return ht.getCodeword(d)===-1?-1:d}static getBitValue(o){let d=0;for(let m=0;m<o.length;m++)for(let v=0;v<o[m];v++)d=d<<1|(m%2===0?1:0);return Math.trunc(d)}static getClosestDecodedValue(o){let d=Rt.sum(o),m=new Array(ht.BARS_IN_MODULE);if(d>1)for(let S=0;S<m.length;S++)m[S]=Math.fround(o[S]/d);let v=sa.MAX_VALUE,b=-1;this.bSymbolTableReady||_r.initialize();for(let S=0;S<_r.RATIOS_TABLE.length;S++){let N=0,R=_r.RATIOS_TABLE[S];for(let P=0;P<ht.BARS_IN_MODULE;P++){let F=Math.fround(R[P]-m[P]);if(N+=Math.fround(F*F),N>=v)break}N<v&&(v=N,b=ht.SYMBOL_TABLE[S])}return b}}_r.bSymbolTableReady=!1,_r.RATIOS_TABLE=new Array(ht.SYMBOL_TABLE.length).map(q=>new Array(ht.BARS_IN_MODULE));class Do{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(o){this.segmentIndex=o}getFileId(){return this.fileId}setFileId(o){this.fileId=o}getOptionalData(){return this.optionalData}setOptionalData(o){this.optionalData=o}isLastSegment(){return this.lastSegment}setLastSegment(o){this.lastSegment=o}getSegmentCount(){return this.segmentCount}setSegmentCount(o){this.segmentCount=o}getSender(){return this.sender||null}setSender(o){this.sender=o}getAddressee(){return this.addressee||null}setAddressee(o){this.addressee=o}getFileName(){return this.fileName}setFileName(o){this.fileName=o}getFileSize(){return this.fileSize}setFileSize(o){this.fileSize=o}getChecksum(){return this.checksum}setChecksum(o){this.checksum=o}getTimestamp(){return this.timestamp}setTimestamp(o){this.timestamp=o}}class xh{static parseLong(o,d=void 0){return parseInt(o,d)}}class Rc extends u{}Rc.kind="NullPointerException";class pd{writeBytes(o){this.writeBytesOffset(o,0,o.length)}writeBytesOffset(o,d,m){if(o==null)throw new Rc;if(d<0||d>o.length||m<0||d+m>o.length||d+m<0)throw new O;if(m===0)return;for(let v=0;v<m;v++)this.write(o[d+v])}flush(){}close(){}}class Ol extends u{}class Mc extends pd{constructor(o=32){if(super(),this.count=0,o<0)throw new y("Negative initial size: "+o);this.buf=new Uint8Array(o)}ensureCapacity(o){o-this.buf.length>0&&this.grow(o)}grow(o){let m=this.buf.length<<1;if(m-o<0&&(m=o),m<0){if(o<0)throw new Ol;m=L.MAX_VALUE}this.buf=U.copyOfUint8Array(this.buf,m)}write(o){this.ensureCapacity(this.count+1),this.buf[this.count]=o,this.count+=1}writeBytesOffset(o,d,m){if(d<0||d>o.length||m<0||d+m-o.length>0)throw new O;this.ensureCapacity(this.count+m),M.arraycopy(o,d,this.buf,this.count,m),this.count+=m}writeTo(o){o.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return U.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(o){return o?typeof o=="string"?this.toString_string(o):this.toString_number(o):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(o){return new String(this.buf).toString()}toString_number(o){return new String(this.buf).toString()}close(){}}var an;(function(q){q[q.ALPHA=0]="ALPHA",q[q.LOWER=1]="LOWER",q[q.MIXED=2]="MIXED",q[q.PUNCT=3]="PUNCT",q[q.ALPHA_SHIFT=4]="ALPHA_SHIFT",q[q.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(an||(an={}));function yh(){if(typeof window<"u")return window.BigInt||null;if(typeof I0<"u")return I0.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Oc;function os(q){if(typeof Oc>"u"&&(Oc=yh()),Oc===null)throw new Error("BigInt is not supported!");return Oc(q)}function md(){let q=[];q[0]=os(1);let o=os(900);q[1]=o;for(let d=2;d<16;d++)q[d]=q[d-1]*o;return q}class Ie{static decode(o,d){let m=new pe(""),v=W.ISO8859_1;m.enableDecoding(v);let b=1,S=o[b++],N=new Do;for(;b<o[0];){switch(S){case Ie.TEXT_COMPACTION_MODE_LATCH:b=Ie.textCompaction(o,b,m);break;case Ie.BYTE_COMPACTION_MODE_LATCH:case Ie.BYTE_COMPACTION_MODE_LATCH_6:b=Ie.byteCompaction(S,o,v,b,m);break;case Ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m.append(o[b++]);break;case Ie.NUMERIC_COMPACTION_MODE_LATCH:b=Ie.numericCompaction(o,b,m);break;case Ie.ECI_CHARSET:W.getCharacterSetECIByValue(o[b++]);break;case Ie.ECI_GENERAL_PURPOSE:b+=2;break;case Ie.ECI_USER_DEFINED:b++;break;case Ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK:b=Ie.decodeMacroBlock(o,b,N);break;case Ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ie.MACRO_PDF417_TERMINATOR:throw new B;default:b--,b=Ie.textCompaction(o,b,m);break}if(b<o.length)S=o[b++];else throw B.getFormatInstance()}if(m.length()===0)throw B.getFormatInstance();let R=new me(null,m.toString(),null,d);return R.setOther(N),R}static decodeMacroBlock(o,d,m){if(d+Ie.NUMBER_OF_SEQUENCE_CODEWORDS>o[0])throw B.getFormatInstance();let v=new Int32Array(Ie.NUMBER_OF_SEQUENCE_CODEWORDS);for(let N=0;N<Ie.NUMBER_OF_SEQUENCE_CODEWORDS;N++,d++)v[N]=o[d];m.setSegmentIndex(L.parseInt(Ie.decodeBase900toBase10(v,Ie.NUMBER_OF_SEQUENCE_CODEWORDS)));let b=new pe;d=Ie.textCompaction(o,d,b),m.setFileId(b.toString());let S=-1;for(o[d]===Ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(S=d+1);d<o[0];)switch(o[d]){case Ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(d++,o[d]){case Ie.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let N=new pe;d=Ie.textCompaction(o,d+1,N),m.setFileName(N.toString());break;case Ie.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let R=new pe;d=Ie.textCompaction(o,d+1,R),m.setSender(R.toString());break;case Ie.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let P=new pe;d=Ie.textCompaction(o,d+1,P),m.setAddressee(P.toString());break;case Ie.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let F=new pe;d=Ie.numericCompaction(o,d+1,F),m.setSegmentCount(L.parseInt(F.toString()));break;case Ie.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let $=new pe;d=Ie.numericCompaction(o,d+1,$),m.setTimestamp(xh.parseLong($.toString()));break;case Ie.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let K=new pe;d=Ie.numericCompaction(o,d+1,K),m.setChecksum(L.parseInt(K.toString()));break;case Ie.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let ee=new pe;d=Ie.numericCompaction(o,d+1,ee),m.setFileSize(xh.parseLong(ee.toString()));break;default:throw B.getFormatInstance()}break;case Ie.MACRO_PDF417_TERMINATOR:d++,m.setLastSegment(!0);break;default:throw B.getFormatInstance()}if(S!==-1){let N=d-S;m.isLastSegment()&&N--,m.setOptionalData(U.copyOfRange(o,S,S+N))}return d}static textCompaction(o,d,m){let v=new Int32Array((o[0]-d)*2),b=new Int32Array((o[0]-d)*2),S=0,N=!1;for(;d<o[0]&&!N;){let R=o[d++];if(R<Ie.TEXT_COMPACTION_MODE_LATCH)v[S]=R/30,v[S+1]=R%30,S+=2;else switch(R){case Ie.TEXT_COMPACTION_MODE_LATCH:v[S++]=Ie.TEXT_COMPACTION_MODE_LATCH;break;case Ie.BYTE_COMPACTION_MODE_LATCH:case Ie.BYTE_COMPACTION_MODE_LATCH_6:case Ie.NUMERIC_COMPACTION_MODE_LATCH:case Ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ie.MACRO_PDF417_TERMINATOR:d--,N=!0;break;case Ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:v[S]=Ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,R=o[d++],b[S]=R,S++;break}}return Ie.decodeTextCompaction(v,b,S,m),d}static decodeTextCompaction(o,d,m,v){let b=an.ALPHA,S=an.ALPHA,N=0;for(;N<m;){let R=o[N],P="";switch(b){case an.ALPHA:if(R<26)P=String.fromCharCode(65+R);else switch(R){case 26:P=" ";break;case Ie.LL:b=an.LOWER;break;case Ie.ML:b=an.MIXED;break;case Ie.PS:S=b,b=an.PUNCT_SHIFT;break;case Ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:v.append(d[N]);break;case Ie.TEXT_COMPACTION_MODE_LATCH:b=an.ALPHA;break}break;case an.LOWER:if(R<26)P=String.fromCharCode(97+R);else switch(R){case 26:P=" ";break;case Ie.AS:S=b,b=an.ALPHA_SHIFT;break;case Ie.ML:b=an.MIXED;break;case Ie.PS:S=b,b=an.PUNCT_SHIFT;break;case Ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:v.append(d[N]);break;case Ie.TEXT_COMPACTION_MODE_LATCH:b=an.ALPHA;break}break;case an.MIXED:if(R<Ie.PL)P=Ie.MIXED_CHARS[R];else switch(R){case Ie.PL:b=an.PUNCT;break;case 26:P=" ";break;case Ie.LL:b=an.LOWER;break;case Ie.AL:b=an.ALPHA;break;case Ie.PS:S=b,b=an.PUNCT_SHIFT;break;case Ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:v.append(d[N]);break;case Ie.TEXT_COMPACTION_MODE_LATCH:b=an.ALPHA;break}break;case an.PUNCT:if(R<Ie.PAL)P=Ie.PUNCT_CHARS[R];else switch(R){case Ie.PAL:b=an.ALPHA;break;case Ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:v.append(d[N]);break;case Ie.TEXT_COMPACTION_MODE_LATCH:b=an.ALPHA;break}break;case an.ALPHA_SHIFT:if(b=S,R<26)P=String.fromCharCode(65+R);else switch(R){case 26:P=" ";break;case Ie.TEXT_COMPACTION_MODE_LATCH:b=an.ALPHA;break}break;case an.PUNCT_SHIFT:if(b=S,R<Ie.PAL)P=Ie.PUNCT_CHARS[R];else switch(R){case Ie.PAL:b=an.ALPHA;break;case Ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:v.append(d[N]);break;case Ie.TEXT_COMPACTION_MODE_LATCH:b=an.ALPHA;break}break}P!==""&&v.append(P),N++}}static byteCompaction(o,d,m,v,b){let S=new Mc,N=0,R=0,P=!1;switch(o){case Ie.BYTE_COMPACTION_MODE_LATCH:let F=new Int32Array(6),$=d[v++];for(;v<d[0]&&!P;)switch(F[N++]=$,R=900*R+$,$=d[v++],$){case Ie.TEXT_COMPACTION_MODE_LATCH:case Ie.BYTE_COMPACTION_MODE_LATCH:case Ie.NUMERIC_COMPACTION_MODE_LATCH:case Ie.BYTE_COMPACTION_MODE_LATCH_6:case Ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ie.MACRO_PDF417_TERMINATOR:v--,P=!0;break;default:if(N%5===0&&N>0){for(let K=0;K<6;++K)S.write(Number(os(R)>>os(8*(5-K))));R=0,N=0}break}v===d[0]&&$<Ie.TEXT_COMPACTION_MODE_LATCH&&(F[N++]=$);for(let K=0;K<N;K++)S.write(F[K]);break;case Ie.BYTE_COMPACTION_MODE_LATCH_6:for(;v<d[0]&&!P;){let K=d[v++];if(K<Ie.TEXT_COMPACTION_MODE_LATCH)N++,R=900*R+K;else switch(K){case Ie.TEXT_COMPACTION_MODE_LATCH:case Ie.BYTE_COMPACTION_MODE_LATCH:case Ie.NUMERIC_COMPACTION_MODE_LATCH:case Ie.BYTE_COMPACTION_MODE_LATCH_6:case Ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ie.MACRO_PDF417_TERMINATOR:v--,P=!0;break}if(N%5===0&&N>0){for(let ee=0;ee<6;++ee)S.write(Number(os(R)>>os(8*(5-ee))));R=0,N=0}}break}return b.append(te.decode(S.toByteArray(),m)),v}static numericCompaction(o,d,m){let v=0,b=!1,S=new Int32Array(Ie.MAX_NUMERIC_CODEWORDS);for(;d<o[0]&&!b;){let N=o[d++];if(d===o[0]&&(b=!0),N<Ie.TEXT_COMPACTION_MODE_LATCH)S[v]=N,v++;else switch(N){case Ie.TEXT_COMPACTION_MODE_LATCH:case Ie.BYTE_COMPACTION_MODE_LATCH:case Ie.BYTE_COMPACTION_MODE_LATCH_6:case Ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ie.MACRO_PDF417_TERMINATOR:d--,b=!0;break}(v%Ie.MAX_NUMERIC_CODEWORDS===0||N===Ie.NUMERIC_COMPACTION_MODE_LATCH||b)&&v>0&&(m.append(Ie.decodeBase900toBase10(S,v)),v=0)}return d}static decodeBase900toBase10(o,d){let m=os(0);for(let b=0;b<d;b++)m+=Ie.EXP900[d-b-1]*os(o[b]);let v=m.toString();if(v.charAt(0)!=="1")throw new B;return v.substring(1)}}Ie.TEXT_COMPACTION_MODE_LATCH=900,Ie.BYTE_COMPACTION_MODE_LATCH=901,Ie.NUMERIC_COMPACTION_MODE_LATCH=902,Ie.BYTE_COMPACTION_MODE_LATCH_6=924,Ie.ECI_USER_DEFINED=925,Ie.ECI_GENERAL_PURPOSE=926,Ie.ECI_CHARSET=927,Ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Ie.MACRO_PDF417_TERMINATOR=922,Ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Ie.MAX_NUMERIC_CODEWORDS=15,Ie.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Ie.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Ie.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Ie.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Ie.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Ie.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Ie.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Ie.PL=25,Ie.LL=27,Ie.AS=27,Ie.ML=28,Ie.AL=28,Ie.PS=29,Ie.PAL=29,Ie.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Ie.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Ie.EXP900=yh()?md():[],Ie.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Mt{constructor(){}static decode(o,d,m,v,b,S,N){let R=new La(o,d,m,v,b),P=null,F=null,$;for(let oe=!0;;oe=!1){if(d!=null&&(P=Mt.getRowIndicatorColumn(o,R,d,!0,S,N)),v!=null&&(F=Mt.getRowIndicatorColumn(o,R,v,!1,S,N)),$=Mt.merge(P,F),$==null)throw le.getNotFoundInstance();let ce=$.getBoundingBox();if(oe&&ce!=null&&(ce.getMinY()<R.getMinY()||ce.getMaxY()>R.getMaxY()))R=ce;else break}$.setBoundingBox(R);let K=$.getBarcodeColumnCount()+1;$.setDetectionResultColumn(0,P),$.setDetectionResultColumn(K,F);let ee=P!=null;for(let oe=1;oe<=K;oe++){let ce=ee?oe:K-oe;if($.getDetectionResultColumn(ce)!==void 0)continue;let be;ce===0||ce===K?be=new hd(R,ce===0):be=new as(R),$.setDetectionResultColumn(ce,be);let _e=-1,Ge=_e;for(let He=R.getMinY();He<=R.getMaxY();He++){if(_e=Mt.getStartColumn($,ce,He,ee),_e<0||_e>R.getMaxX()){if(Ge===-1)continue;_e=Ge}let Fe=Mt.detectCodeword(o,R.getMinX(),R.getMaxX(),ee,_e,He,S,N);Fe!=null&&(be.setCodeword(He,Fe),Ge=_e,S=Math.min(S,Fe.getWidth()),N=Math.max(N,Fe.getWidth()))}}return Mt.createDecoderResult($)}static merge(o,d){if(o==null&&d==null)return null;let m=Mt.getBarcodeMetadata(o,d);if(m==null)return null;let v=La.merge(Mt.adjustBoundingBox(o),Mt.adjustBoundingBox(d));return new mr(m,v)}static adjustBoundingBox(o){if(o==null)return null;let d=o.getRowHeights();if(d==null)return null;let m=Mt.getMax(d),v=0;for(let N of d)if(v+=m-N,N>0)break;let b=o.getCodewords();for(let N=0;v>0&&b[N]==null;N++)v--;let S=0;for(let N=d.length-1;N>=0&&(S+=m-d[N],!(d[N]>0));N--);for(let N=b.length-1;S>0&&b[N]==null;N--)S--;return o.getBoundingBox().addMissingRows(v,S,o.isLeft())}static getMax(o){let d=-1;for(let m of o)d=Math.max(d,m);return d}static getBarcodeMetadata(o,d){let m;if(o==null||(m=o.getBarcodeMetadata())==null)return d==null?null:d.getBarcodeMetadata();let v;return d==null||(v=d.getBarcodeMetadata())==null?m:m.getColumnCount()!==v.getColumnCount()&&m.getErrorCorrectionLevel()!==v.getErrorCorrectionLevel()&&m.getRowCount()!==v.getRowCount()?null:m}static getRowIndicatorColumn(o,d,m,v,b,S){let N=new hd(d,v);for(let R=0;R<2;R++){let P=R===0?1:-1,F=Math.trunc(Math.trunc(m.getX()));for(let $=Math.trunc(Math.trunc(m.getY()));$<=d.getMaxY()&&$>=d.getMinY();$+=P){let K=Mt.detectCodeword(o,0,o.getWidth(),v,F,$,b,S);K!=null&&(N.setCodeword($,K),v?F=K.getStartX():F=K.getEndX())}}return N}static adjustCodewordCount(o,d){let m=d[0][1],v=m.getValue(),b=o.getBarcodeColumnCount()*o.getBarcodeRowCount()-Mt.getNumberOfECCodeWords(o.getBarcodeECLevel());if(v.length===0){if(b<1||b>ht.MAX_CODEWORDS_IN_BARCODE)throw le.getNotFoundInstance();m.setValue(b)}else v[0]!==b&&m.setValue(b)}static createDecoderResult(o){let d=Mt.createBarcodeMatrix(o);Mt.adjustCodewordCount(o,d);let m=new Array,v=new Int32Array(o.getBarcodeRowCount()*o.getBarcodeColumnCount()),b=[],S=new Array;for(let R=0;R<o.getBarcodeRowCount();R++)for(let P=0;P<o.getBarcodeColumnCount();P++){let F=d[R][P+1].getValue(),$=R*o.getBarcodeColumnCount()+P;F.length===0?m.push($):F.length===1?v[$]=F[0]:(S.push($),b.push(F))}let N=new Array(b.length);for(let R=0;R<N.length;R++)N[R]=b[R];return Mt.createDecoderResultFromAmbiguousValues(o.getBarcodeECLevel(),v,ht.toIntArray(m),ht.toIntArray(S),N)}static createDecoderResultFromAmbiguousValues(o,d,m,v,b){let S=new Int32Array(v.length),N=100;for(;N-- >0;){for(let R=0;R<S.length;R++)d[v[R]]=b[R][S[R]];try{return Mt.decodeCodewords(d,o,m)}catch(R){if(!(R instanceof C))throw R}if(S.length===0)throw C.getChecksumInstance();for(let R=0;R<S.length;R++)if(S[R]<b[R].length-1){S[R]++;break}else if(S[R]=0,R===S.length-1)throw C.getChecksumInstance()}throw C.getChecksumInstance()}static createBarcodeMatrix(o){let d=Array.from({length:o.getBarcodeRowCount()},()=>new Array(o.getBarcodeColumnCount()+2));for(let v=0;v<d.length;v++)for(let b=0;b<d[v].length;b++)d[v][b]=new ss;let m=0;for(let v of o.getDetectionResultColumns()){if(v!=null){for(let b of v.getCodewords())if(b!=null){let S=b.getRowNumber();if(S>=0){if(S>=d.length)continue;d[S][m].setValue(b.getValue())}}}m++}return d}static isValidBarcodeColumn(o,d){return d>=0&&d<=o.getBarcodeColumnCount()+1}static getStartColumn(o,d,m,v){let b=v?1:-1,S=null;if(Mt.isValidBarcodeColumn(o,d-b)&&(S=o.getDetectionResultColumn(d-b).getCodeword(m)),S!=null)return v?S.getEndX():S.getStartX();if(S=o.getDetectionResultColumn(d).getCodewordNearby(m),S!=null)return v?S.getStartX():S.getEndX();if(Mt.isValidBarcodeColumn(o,d-b)&&(S=o.getDetectionResultColumn(d-b).getCodewordNearby(m)),S!=null)return v?S.getEndX():S.getStartX();let N=0;for(;Mt.isValidBarcodeColumn(o,d-b);){d-=b;for(let R of o.getDetectionResultColumn(d).getCodewords())if(R!=null)return(v?R.getEndX():R.getStartX())+b*N*(R.getEndX()-R.getStartX());N++}return v?o.getBoundingBox().getMinX():o.getBoundingBox().getMaxX()}static detectCodeword(o,d,m,v,b,S,N,R){b=Mt.adjustCodewordStartColumn(o,d,m,v,b,S);let P=Mt.getModuleBitCount(o,d,m,v,b,S);if(P==null)return null;let F,$=Rt.sum(P);if(v)F=b+$;else{for(let oe=0;oe<P.length/2;oe++){let ce=P[oe];P[oe]=P[P.length-1-oe],P[P.length-1-oe]=ce}F=b,b=F-$}if(!Mt.checkCodewordSkew($,N,R))return null;let K=_r.getDecodedValue(P),ee=ht.getCodeword(K);return ee===-1?null:new Li(b,F,Mt.getCodewordBucketNumber(K),ee)}static getModuleBitCount(o,d,m,v,b,S){let N=b,R=new Int32Array(8),P=0,F=v?1:-1,$=v;for(;(v?N<m:N>=d)&&P<R.length;)o.get(N,S)===$?(R[P]++,N+=F):(P++,$=!$);return P===R.length||N===(v?m:d)&&P===R.length-1?R:null}static getNumberOfECCodeWords(o){return 2<<o}static adjustCodewordStartColumn(o,d,m,v,b,S){let N=b,R=v?-1:1;for(let P=0;P<2;P++){for(;(v?N>=d:N<m)&&v===o.get(N,S);){if(Math.abs(b-N)>Mt.CODEWORD_SKEW_SIZE)return b;N+=R}R=-R,v=!v}return N}static checkCodewordSkew(o,d,m){return d-Mt.CODEWORD_SKEW_SIZE<=o&&o<=m+Mt.CODEWORD_SKEW_SIZE}static decodeCodewords(o,d,m){if(o.length===0)throw B.getFormatInstance();let v=1<<d+1,b=Mt.correctErrors(o,m,v);Mt.verifyCodewordCount(o,v);let S=Ie.decode(o,""+d);return S.setErrorsCorrected(b),S.setErasures(m.length),S}static correctErrors(o,d,m){if(d!=null&&d.length>m/2+Mt.MAX_ERRORS||m<0||m>Mt.MAX_EC_CODEWORDS)throw C.getChecksumInstance();return Mt.errorCorrection.decode(o,m,d)}static verifyCodewordCount(o,d){if(o.length<4)throw B.getFormatInstance();let m=o[0];if(m>o.length)throw B.getFormatInstance();if(m===0)if(d<o.length)o[0]=o.length-d;else throw B.getFormatInstance()}static getBitCountForCodeword(o){let d=new Int32Array(8),m=0,v=d.length-1;for(;!((o&1)!==m&&(m=o&1,v--,v<0));)d[v]++,o>>=1;return d}static getCodewordBucketNumber(o){return o instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(o):this.getCodewordBucketNumber_number(o)}static getCodewordBucketNumber_number(o){return Mt.getCodewordBucketNumber(Mt.getBitCountForCodeword(o))}static getCodewordBucketNumber_Int32Array(o){return(o[0]-o[2]+o[4]-o[6]+9)%9}static toString(o){let d=new Oo;for(let m=0;m<o.length;m++){d.format("Row %2d: ",m);for(let v=0;v<o[m].length;v++){let b=o[m][v];b.getValue().length===0?d.format("        ",null):d.format("%4d(%2d)",b.getValue()[0],b.getConfidence(b.getValue()[0]))}d.format("%n")}return d.toString()}}Mt.CODEWORD_SKEW_SIZE=2,Mt.MAX_ERRORS=3,Mt.MAX_EC_CODEWORDS=512,Mt.errorCorrection=new ja;class Tr{decode(o,d=null){let m=Tr.decode(o,d,!1);if(m==null||m.length===0||m[0]==null)throw le.getNotFoundInstance();return m[0]}decodeMultiple(o,d=null){try{return Tr.decode(o,d,!0)}catch(m){throw m instanceof B||m instanceof C?le.getNotFoundInstance():m}}static decode(o,d,m){const v=new Array,b=wt.detectMultiple(o,d,m);for(const S of b.getPoints()){const N=Mt.decode(b.getBits(),S[4],S[5],S[6],S[7],Tr.getMinCodewordWidth(S),Tr.getMaxCodewordWidth(S)),R=new se(N.getText(),N.getRawBytes(),void 0,S,ie.PDF_417);R.putMetadata(qe.ERROR_CORRECTION_LEVEL,N.getECLevel());const P=N.getOther();P!=null&&R.putMetadata(qe.PDF417_EXTRA_METADATA,P),v.push(R)}return v.map(S=>S)}static getMaxWidth(o,d){return o==null||d==null?0:Math.trunc(Math.abs(o.getX()-d.getX()))}static getMinWidth(o,d){return o==null||d==null?L.MAX_VALUE:Math.trunc(Math.abs(o.getX()-d.getX()))}static getMaxCodewordWidth(o){return Math.floor(Math.max(Math.max(Tr.getMaxWidth(o[0],o[4]),Tr.getMaxWidth(o[6],o[2])*ht.MODULES_IN_CODEWORD/ht.MODULES_IN_STOP_PATTERN),Math.max(Tr.getMaxWidth(o[1],o[5]),Tr.getMaxWidth(o[7],o[3])*ht.MODULES_IN_CODEWORD/ht.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(o){return Math.floor(Math.min(Math.min(Tr.getMinWidth(o[0],o[4]),Tr.getMinWidth(o[6],o[2])*ht.MODULES_IN_CODEWORD/ht.MODULES_IN_STOP_PATTERN),Math.min(Tr.getMinWidth(o[1],o[5]),Tr.getMinWidth(o[7],o[3])*ht.MODULES_IN_CODEWORD/ht.MODULES_IN_STOP_PATTERN)))}reset(){}}class Dc extends u{}Dc.kind="ReaderException";class vh{constructor(o,d){this.verbose=o===!0,d&&this.setHints(d)}decode(o,d){return d&&this.setHints(d),this.decodeInternal(o)}decodeWithState(o){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(o)}setHints(o){this.hints=o;const d=!r(o)&&o.get(z.TRY_HARDER)===!0,m=r(o)?null:o.get(z.POSSIBLE_FORMATS),v=new Array;if(!r(m)){const b=m.some(S=>S===ie.UPC_A||S===ie.UPC_E||S===ie.EAN_13||S===ie.EAN_8||S===ie.CODABAR||S===ie.CODE_39||S===ie.CODE_93||S===ie.CODE_128||S===ie.ITF||S===ie.RSS_14||S===ie.RSS_EXPANDED);b&&!d&&v.push(new Pi(o,this.verbose)),m.includes(ie.QR_CODE)&&v.push(new Pa),m.includes(ie.DATA_MATRIX)&&v.push(new ka),m.includes(ie.AZTEC)&&v.push(new is),m.includes(ie.PDF_417)&&v.push(new Tr),b&&d&&v.push(new Pi(o,this.verbose))}v.length===0&&(d||v.push(new Pi(o,this.verbose)),v.push(new Pa),v.push(new ka),v.push(new is),v.push(new Tr),d&&v.push(new Pi(o,this.verbose))),this.readers=v}reset(){if(this.readers!==null)for(const o of this.readers)o.reset()}decodeInternal(o){if(this.readers===null)throw new Dc("No readers where selected, nothing can be read.");for(const d of this.readers)try{return d.decode(o,this.hints)}catch(m){if(m instanceof Dc)continue}throw new le("No MultiFormat Readers were able to detect the code.")}}class bh extends he{constructor(o=null,d=500){const m=new vh;m.setHints(o),super(m,d)}decodeBitmap(o){return this.reader.decodeWithState(o)}}class Mg extends he{constructor(o=500){super(new Tr,o)}}class Og extends he{constructor(o=500){super(new Pa,o)}}var gd;(function(q){q[q.ERROR_CORRECTION=0]="ERROR_CORRECTION",q[q.CHARACTER_SET=1]="CHARACTER_SET",q[q.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",q[q.MIN_SIZE=3]="MIN_SIZE",q[q.MAX_SIZE=4]="MAX_SIZE",q[q.MARGIN=5]="MARGIN",q[q.PDF417_COMPACT=6]="PDF417_COMPACT",q[q.PDF417_COMPACTION=7]="PDF417_COMPACTION",q[q.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",q[q.AZTEC_LAYERS=9]="AZTEC_LAYERS",q[q.QR_VERSION=10]="QR_VERSION"})(gd||(gd={}));var cr=gd;class Dl{constructor(o){this.field=o,this.cachedGenerators=[],this.cachedGenerators.push(new Qe(o,Int32Array.from([1])))}buildGenerator(o){const d=this.cachedGenerators;if(o>=d.length){let m=d[d.length-1];const v=this.field;for(let b=d.length;b<=o;b++){const S=m.multiply(new Qe(v,Int32Array.from([1,v.exp(b-1+v.getGeneratorBase())])));d.push(S),m=S}}return d[o]}encode(o,d){if(d===0)throw new y("No error correction bytes");const m=o.length-d;if(m<=0)throw new y("No data bytes provided");const v=this.buildGenerator(d),b=new Int32Array(m);M.arraycopy(o,0,b,0,m);let S=new Qe(this.field,b);S=S.multiplyByMonomial(d,1);const R=S.divide(v)[1].getCoefficients(),P=d-R.length;for(let F=0;F<P;F++)o[m+F]=0;M.arraycopy(R,0,o,m+P,R.length)}}class Fn{constructor(){}static applyMaskPenaltyRule1(o){return Fn.applyMaskPenaltyRule1Internal(o,!0)+Fn.applyMaskPenaltyRule1Internal(o,!1)}static applyMaskPenaltyRule2(o){let d=0;const m=o.getArray(),v=o.getWidth(),b=o.getHeight();for(let S=0;S<b-1;S++){const N=m[S];for(let R=0;R<v-1;R++){const P=N[R];P===N[R+1]&&P===m[S+1][R]&&P===m[S+1][R+1]&&d++}}return Fn.N2*d}static applyMaskPenaltyRule3(o){let d=0;const m=o.getArray(),v=o.getWidth(),b=o.getHeight();for(let S=0;S<b;S++)for(let N=0;N<v;N++){const R=m[S];N+6<v&&R[N]===1&&R[N+1]===0&&R[N+2]===1&&R[N+3]===1&&R[N+4]===1&&R[N+5]===0&&R[N+6]===1&&(Fn.isWhiteHorizontal(R,N-4,N)||Fn.isWhiteHorizontal(R,N+7,N+11))&&d++,S+6<b&&m[S][N]===1&&m[S+1][N]===0&&m[S+2][N]===1&&m[S+3][N]===1&&m[S+4][N]===1&&m[S+5][N]===0&&m[S+6][N]===1&&(Fn.isWhiteVertical(m,N,S-4,S)||Fn.isWhiteVertical(m,N,S+7,S+11))&&d++}return d*Fn.N3}static isWhiteHorizontal(o,d,m){d=Math.max(d,0),m=Math.min(m,o.length);for(let v=d;v<m;v++)if(o[v]===1)return!1;return!0}static isWhiteVertical(o,d,m,v){m=Math.max(m,0),v=Math.min(v,o.length);for(let b=m;b<v;b++)if(o[b][d]===1)return!1;return!0}static applyMaskPenaltyRule4(o){let d=0;const m=o.getArray(),v=o.getWidth(),b=o.getHeight();for(let R=0;R<b;R++){const P=m[R];for(let F=0;F<v;F++)P[F]===1&&d++}const S=o.getHeight()*o.getWidth();return Math.floor(Math.abs(d*2-S)*10/S)*Fn.N4}static getDataMaskBit(o,d,m){let v,b;switch(o){case 0:v=m+d&1;break;case 1:v=m&1;break;case 2:v=d%3;break;case 3:v=(m+d)%3;break;case 4:v=Math.floor(m/2)+Math.floor(d/3)&1;break;case 5:b=m*d,v=(b&1)+b%3;break;case 6:b=m*d,v=(b&1)+b%3&1;break;case 7:b=m*d,v=b%3+(m+d&1)&1;break;default:throw new y("Invalid mask pattern: "+o)}return v===0}static applyMaskPenaltyRule1Internal(o,d){let m=0;const v=d?o.getHeight():o.getWidth(),b=d?o.getWidth():o.getHeight(),S=o.getArray();for(let N=0;N<v;N++){let R=0,P=-1;for(let F=0;F<b;F++){const $=d?S[N][F]:S[F][N];$===P?R++:(R>=5&&(m+=Fn.N1+(R-5)),R=1,P=$)}R>=5&&(m+=Fn.N1+(R-5))}return m}}Fn.N1=3,Fn.N2=3,Fn.N3=40,Fn.N4=10;class kc{constructor(o,d){this.width=o,this.height=d;const m=new Array(d);for(let v=0;v!==d;v++)m[v]=new Uint8Array(o);this.bytes=m}getHeight(){return this.height}getWidth(){return this.width}get(o,d){return this.bytes[d][o]}getArray(){return this.bytes}setNumber(o,d,m){this.bytes[d][o]=m}setBoolean(o,d,m){this.bytes[d][o]=m?1:0}clear(o){for(const d of this.bytes)U.fill(d,o)}equals(o){if(!(o instanceof kc))return!1;const d=o;if(this.width!==d.width||this.height!==d.height)return!1;for(let m=0,v=this.height;m<v;++m){const b=this.bytes[m],S=d.bytes[m];for(let N=0,R=this.width;N<R;++N)if(b[N]!==S[N])return!1}return!0}toString(){const o=new pe;for(let d=0,m=this.height;d<m;++d){const v=this.bytes[d];for(let b=0,S=this.width;b<S;++b)switch(v[b]){case 0:o.append(" 0");break;case 1:o.append(" 1");break;default:o.append("  ");break}o.append(`
`)}return o.toString()}}class Ts{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const o=new pe;return o.append(`<<
`),o.append(" mode: "),o.append(this.mode?this.mode.toString():"null"),o.append(`
 ecLevel: `),o.append(this.ecLevel?this.ecLevel.toString():"null"),o.append(`
 version: `),o.append(this.version?this.version.toString():"null"),o.append(`
 maskPattern: `),o.append(this.maskPattern.toString()),this.matrix?(o.append(`
 matrix:
`),o.append(this.matrix.toString())):o.append(`
 matrix: null
`),o.append(`>>
`),o.toString()}setMode(o){this.mode=o}setECLevel(o){this.ecLevel=o}setVersion(o){this.version=o}setMaskPattern(o){this.maskPattern=o}setMatrix(o){this.matrix=o}static isValidMaskPattern(o){return o>=0&&o<Ts.NUM_MASK_PATTERNS}}Ts.NUM_MASK_PATTERNS=8;class un extends u{}un.kind="WriterException";class pt{constructor(){}static clearMatrix(o){o.clear(255)}static buildMatrix(o,d,m,v,b){pt.clearMatrix(b),pt.embedBasicPatterns(m,b),pt.embedTypeInfo(d,v,b),pt.maybeEmbedVersionInfo(m,b),pt.embedDataBits(o,v,b)}static embedBasicPatterns(o,d){pt.embedPositionDetectionPatternsAndSeparators(d),pt.embedDarkDotAtLeftBottomCorner(d),pt.maybeEmbedPositionAdjustmentPatterns(o,d),pt.embedTimingPatterns(d)}static embedTypeInfo(o,d,m){const v=new G;pt.makeTypeInfoBits(o,d,v);for(let b=0,S=v.getSize();b<S;++b){const N=v.get(v.getSize()-1-b),R=pt.TYPE_INFO_COORDINATES[b],P=R[0],F=R[1];if(m.setBoolean(P,F,N),b<8){const $=m.getWidth()-b-1;m.setBoolean($,8,N)}else{const K=m.getHeight()-7+(b-8);m.setBoolean(8,K,N)}}}static maybeEmbedVersionInfo(o,d){if(o.getVersionNumber()<7)return;const m=new G;pt.makeVersionInfoBits(o,m);let v=17;for(let b=0;b<6;++b)for(let S=0;S<3;++S){const N=m.get(v);v--,d.setBoolean(b,d.getHeight()-11+S,N),d.setBoolean(d.getHeight()-11+S,b,N)}}static embedDataBits(o,d,m){let v=0,b=-1,S=m.getWidth()-1,N=m.getHeight()-1;for(;S>0;){for(S===6&&(S-=1);N>=0&&N<m.getHeight();){for(let R=0;R<2;++R){const P=S-R;if(!pt.isEmpty(m.get(P,N)))continue;let F;v<o.getSize()?(F=o.get(v),++v):F=!1,d!==255&&Fn.getDataMaskBit(d,P,N)&&(F=!F),m.setBoolean(P,N,F)}N+=b}b=-b,N+=b,S-=2}if(v!==o.getSize())throw new un("Not all bits consumed: "+v+"/"+o.getSize())}static findMSBSet(o){return 32-L.numberOfLeadingZeros(o)}static calculateBCHCode(o,d){if(d===0)throw new y("0 polynomial");const m=pt.findMSBSet(d);for(o<<=m-1;pt.findMSBSet(o)>=m;)o^=d<<pt.findMSBSet(o)-m;return o}static makeTypeInfoBits(o,d,m){if(!Ts.isValidMaskPattern(d))throw new un("Invalid mask pattern");const v=o.getBits()<<3|d;m.appendBits(v,5);const b=pt.calculateBCHCode(v,pt.TYPE_INFO_POLY);m.appendBits(b,10);const S=new G;if(S.appendBits(pt.TYPE_INFO_MASK_PATTERN,15),m.xor(S),m.getSize()!==15)throw new un("should not happen but we got: "+m.getSize())}static makeVersionInfoBits(o,d){d.appendBits(o.getVersionNumber(),6);const m=pt.calculateBCHCode(o.getVersionNumber(),pt.VERSION_INFO_POLY);if(d.appendBits(m,12),d.getSize()!==18)throw new un("should not happen but we got: "+d.getSize())}static isEmpty(o){return o===255}static embedTimingPatterns(o){for(let d=8;d<o.getWidth()-8;++d){const m=(d+1)%2;pt.isEmpty(o.get(d,6))&&o.setNumber(d,6,m),pt.isEmpty(o.get(6,d))&&o.setNumber(6,d,m)}}static embedDarkDotAtLeftBottomCorner(o){if(o.get(8,o.getHeight()-8)===0)throw new un;o.setNumber(8,o.getHeight()-8,1)}static embedHorizontalSeparationPattern(o,d,m){for(let v=0;v<8;++v){if(!pt.isEmpty(m.get(o+v,d)))throw new un;m.setNumber(o+v,d,0)}}static embedVerticalSeparationPattern(o,d,m){for(let v=0;v<7;++v){if(!pt.isEmpty(m.get(o,d+v)))throw new un;m.setNumber(o,d+v,0)}}static embedPositionAdjustmentPattern(o,d,m){for(let v=0;v<5;++v){const b=pt.POSITION_ADJUSTMENT_PATTERN[v];for(let S=0;S<5;++S)m.setNumber(o+S,d+v,b[S])}}static embedPositionDetectionPattern(o,d,m){for(let v=0;v<7;++v){const b=pt.POSITION_DETECTION_PATTERN[v];for(let S=0;S<7;++S)m.setNumber(o+S,d+v,b[S])}}static embedPositionDetectionPatternsAndSeparators(o){const d=pt.POSITION_DETECTION_PATTERN[0].length;pt.embedPositionDetectionPattern(0,0,o),pt.embedPositionDetectionPattern(o.getWidth()-d,0,o),pt.embedPositionDetectionPattern(0,o.getWidth()-d,o);const m=8;pt.embedHorizontalSeparationPattern(0,m-1,o),pt.embedHorizontalSeparationPattern(o.getWidth()-m,m-1,o),pt.embedHorizontalSeparationPattern(0,o.getWidth()-m,o);const v=7;pt.embedVerticalSeparationPattern(v,0,o),pt.embedVerticalSeparationPattern(o.getHeight()-v-1,0,o),pt.embedVerticalSeparationPattern(v,o.getHeight()-v,o)}static maybeEmbedPositionAdjustmentPatterns(o,d){if(o.getVersionNumber()<2)return;const m=o.getVersionNumber()-1,v=pt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[m];for(let b=0,S=v.length;b!==S;b++){const N=v[b];if(N>=0)for(let R=0;R!==S;R++){const P=v[R];P>=0&&pt.isEmpty(d.get(P,N))&&pt.embedPositionAdjustmentPattern(P-2,N-2,d)}}}}pt.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),pt.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),pt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),pt.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),pt.VERSION_INFO_POLY=7973,pt.TYPE_INFO_POLY=1335,pt.TYPE_INFO_MASK_PATTERN=21522;class Dg{constructor(o,d){this.dataBytes=o,this.errorCorrectionBytes=d}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Nn{constructor(){}static calculateMaskPenalty(o){return Fn.applyMaskPenaltyRule1(o)+Fn.applyMaskPenaltyRule2(o)+Fn.applyMaskPenaltyRule3(o)+Fn.applyMaskPenaltyRule4(o)}static encode(o,d,m=null){let v=Nn.DEFAULT_BYTE_MODE_ENCODING;const b=m!==null&&m.get(cr.CHARACTER_SET)!==void 0;b&&(v=m.get(cr.CHARACTER_SET).toString());const S=this.chooseMode(o,v),N=new G;if(S===ut.BYTE&&(b||Nn.DEFAULT_BYTE_MODE_ENCODING!==v)){const He=W.getCharacterSetECIByName(v);He!==void 0&&this.appendECI(He,N)}this.appendModeInfo(S,N);const R=new G;this.appendBytes(o,S,R,v);let P;if(m!==null&&m.get(cr.QR_VERSION)!==void 0){const He=Number.parseInt(m.get(cr.QR_VERSION).toString(),10);P=it.getVersionForNumber(He);const Fe=this.calculateBitsNeeded(S,N,R,P);if(!this.willFit(Fe,P,d))throw new un("Data too big for requested version")}else P=this.recommendVersion(d,S,N,R);const F=new G;F.appendBitArray(N);const $=S===ut.BYTE?R.getSizeInBytes():o.length;this.appendLengthInfo($,P,S,F),F.appendBitArray(R);const K=P.getECBlocksForLevel(d),ee=P.getTotalCodewords()-K.getTotalECCodewords();this.terminateBits(ee,F);const oe=this.interleaveWithECBytes(F,P.getTotalCodewords(),ee,K.getNumBlocks()),ce=new Ts;ce.setECLevel(d),ce.setMode(S),ce.setVersion(P);const be=P.getDimensionForVersion(),_e=new kc(be,be),Ge=this.chooseMaskPattern(oe,d,P,_e);return ce.setMaskPattern(Ge),pt.buildMatrix(oe,d,P,Ge,_e),ce.setMatrix(_e),ce}static recommendVersion(o,d,m,v){const b=this.calculateBitsNeeded(d,m,v,it.getVersionForNumber(1)),S=this.chooseVersion(b,o),N=this.calculateBitsNeeded(d,m,v,S);return this.chooseVersion(N,o)}static calculateBitsNeeded(o,d,m,v){return d.getSize()+o.getCharacterCountBits(v)+m.getSize()}static getAlphanumericCode(o){return o<Nn.ALPHANUMERIC_TABLE.length?Nn.ALPHANUMERIC_TABLE[o]:-1}static chooseMode(o,d=null){if(W.SJIS.getName()===d&&this.isOnlyDoubleByteKanji(o))return ut.KANJI;let m=!1,v=!1;for(let b=0,S=o.length;b<S;++b){const N=o.charAt(b);if(Nn.isDigit(N))m=!0;else if(this.getAlphanumericCode(N.charCodeAt(0))!==-1)v=!0;else return ut.BYTE}return v?ut.ALPHANUMERIC:m?ut.NUMERIC:ut.BYTE}static isOnlyDoubleByteKanji(o){let d;try{d=te.encode(o,W.SJIS)}catch{return!1}const m=d.length;if(m%2!==0)return!1;for(let v=0;v<m;v+=2){const b=d[v]&255;if((b<129||b>159)&&(b<224||b>235))return!1}return!0}static chooseMaskPattern(o,d,m,v){let b=Number.MAX_SAFE_INTEGER,S=-1;for(let N=0;N<Ts.NUM_MASK_PATTERNS;N++){pt.buildMatrix(o,d,m,N,v);let R=this.calculateMaskPenalty(v);R<b&&(b=R,S=N)}return S}static chooseVersion(o,d){for(let m=1;m<=40;m++){const v=it.getVersionForNumber(m);if(Nn.willFit(o,v,d))return v}throw new un("Data too big")}static willFit(o,d,m){const v=d.getTotalCodewords(),S=d.getECBlocksForLevel(m).getTotalECCodewords(),N=v-S,R=(o+7)/8;return N>=R}static terminateBits(o,d){const m=o*8;if(d.getSize()>m)throw new un("data bits cannot fit in the QR Code"+d.getSize()+" > "+m);for(let S=0;S<4&&d.getSize()<m;++S)d.appendBit(!1);const v=d.getSize()&7;if(v>0)for(let S=v;S<8;S++)d.appendBit(!1);const b=o-d.getSizeInBytes();for(let S=0;S<b;++S)d.appendBits((S&1)===0?236:17,8);if(d.getSize()!==m)throw new un("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(o,d,m,v,b,S){if(v>=m)throw new un("Block ID too large");const N=o%m,R=m-N,P=Math.floor(o/m),F=P+1,$=Math.floor(d/m),K=$+1,ee=P-$,oe=F-K;if(ee!==oe)throw new un("EC bytes mismatch");if(m!==R+N)throw new un("RS blocks mismatch");if(o!==($+ee)*R+(K+oe)*N)throw new un("Total bytes mismatch");v<R?(b[0]=$,S[0]=ee):(b[0]=K,S[0]=oe)}static interleaveWithECBytes(o,d,m,v){if(o.getSizeInBytes()!==m)throw new un("Number of bits and data bytes does not match");let b=0,S=0,N=0;const R=new Array;for(let F=0;F<v;++F){const $=new Int32Array(1),K=new Int32Array(1);Nn.getNumDataBytesAndNumECBytesForBlockID(d,m,v,F,$,K);const ee=$[0],oe=new Uint8Array(ee);o.toBytes(8*b,oe,0,ee);const ce=Nn.generateECBytes(oe,K[0]);R.push(new Dg(oe,ce)),S=Math.max(S,ee),N=Math.max(N,ce.length),b+=$[0]}if(m!==b)throw new un("Data bytes does not match offset");const P=new G;for(let F=0;F<S;++F)for(const $ of R){const K=$.getDataBytes();F<K.length&&P.appendBits(K[F],8)}for(let F=0;F<N;++F)for(const $ of R){const K=$.getErrorCorrectionBytes();F<K.length&&P.appendBits(K[F],8)}if(d!==P.getSizeInBytes())throw new un("Interleaving error: "+d+" and "+P.getSizeInBytes()+" differ.");return P}static generateECBytes(o,d){const m=o.length,v=new Int32Array(m+d);for(let S=0;S<m;S++)v[S]=o[S]&255;new Dl(ft.QR_CODE_FIELD_256).encode(v,d);const b=new Uint8Array(d);for(let S=0;S<d;S++)b[S]=v[m+S];return b}static appendModeInfo(o,d){d.appendBits(o.getBits(),4)}static appendLengthInfo(o,d,m,v){const b=m.getCharacterCountBits(d);if(o>=1<<b)throw new un(o+" is bigger than "+((1<<b)-1));v.appendBits(o,b)}static appendBytes(o,d,m,v){switch(d){case ut.NUMERIC:Nn.appendNumericBytes(o,m);break;case ut.ALPHANUMERIC:Nn.appendAlphanumericBytes(o,m);break;case ut.BYTE:Nn.append8BitBytes(o,m,v);break;case ut.KANJI:Nn.appendKanjiBytes(o,m);break;default:throw new un("Invalid mode: "+d)}}static getDigit(o){return o.charCodeAt(0)-48}static isDigit(o){const d=Nn.getDigit(o);return d>=0&&d<=9}static appendNumericBytes(o,d){const m=o.length;let v=0;for(;v<m;){const b=Nn.getDigit(o.charAt(v));if(v+2<m){const S=Nn.getDigit(o.charAt(v+1)),N=Nn.getDigit(o.charAt(v+2));d.appendBits(b*100+S*10+N,10),v+=3}else if(v+1<m){const S=Nn.getDigit(o.charAt(v+1));d.appendBits(b*10+S,7),v+=2}else d.appendBits(b,4),v++}}static appendAlphanumericBytes(o,d){const m=o.length;let v=0;for(;v<m;){const b=Nn.getAlphanumericCode(o.charCodeAt(v));if(b===-1)throw new un;if(v+1<m){const S=Nn.getAlphanumericCode(o.charCodeAt(v+1));if(S===-1)throw new un;d.appendBits(b*45+S,11),v+=2}else d.appendBits(b,6),v++}}static append8BitBytes(o,d,m){let v;try{v=te.encode(o,m)}catch(b){throw new un(b)}for(let b=0,S=v.length;b!==S;b++){const N=v[b];d.appendBits(N,8)}}static appendKanjiBytes(o,d){let m;try{m=te.encode(o,W.SJIS)}catch(b){throw new un(b)}const v=m.length;for(let b=0;b<v;b+=2){const S=m[b]&255,N=m[b+1]&255,R=S<<8&4294967295|N;let P=-1;if(R>=33088&&R<=40956?P=R-33088:R>=57408&&R<=60351&&(P=R-49472),P===-1)throw new un("Invalid byte sequence");const F=(P>>8)*192+(P&255);d.appendBits(F,13)}}static appendECI(o,d){d.appendBits(ut.ECI.getBits(),4),d.appendBits(o.getValue(),8)}}Nn.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Nn.DEFAULT_BYTE_MODE_ENCODING=W.UTF8.getName();class Is{write(o,d,m,v=null){if(o.length===0)throw new y("Found empty contents");if(d<0||m<0)throw new y("Requested dimensions are too small: "+d+"x"+m);let b=Pt.L,S=Is.QUIET_ZONE_SIZE;v!==null&&(v.get(cr.ERROR_CORRECTION)!==void 0&&(b=Pt.fromString(v.get(cr.ERROR_CORRECTION).toString())),v.get(cr.MARGIN)!==void 0&&(S=Number.parseInt(v.get(cr.MARGIN).toString(),10)));const N=Nn.encode(o,b,v);return this.renderResult(N,d,m,S)}writeToDom(o,d,m,v,b=null){typeof o=="string"&&(o=document.querySelector(o));const S=this.write(d,m,v,b);o&&o.appendChild(S)}renderResult(o,d,m,v){const b=o.getMatrix();if(b===null)throw new jt;const S=b.getWidth(),N=b.getHeight(),R=S+v*2,P=N+v*2,F=Math.max(d,R),$=Math.max(m,P),K=Math.min(Math.floor(F/R),Math.floor($/P)),ee=Math.floor((F-S*K)/2),oe=Math.floor(($-N*K)/2),ce=this.createSVGElement(F,$);for(let be=0,_e=oe;be<N;be++,_e+=K)for(let Ge=0,He=ee;Ge<S;Ge++,He+=K)if(b.get(Ge,be)===1){const Fe=this.createSvgRectElement(He,_e,K,K);ce.appendChild(Fe)}return ce}createSVGElement(o,d){const m=document.createElementNS(Is.SVG_NS,"svg");return m.setAttributeNS(null,"height",o.toString()),m.setAttributeNS(null,"width",d.toString()),m}createSvgRectElement(o,d,m,v){const b=document.createElementNS(Is.SVG_NS,"rect");return b.setAttributeNS(null,"x",o.toString()),b.setAttributeNS(null,"y",d.toString()),b.setAttributeNS(null,"height",m.toString()),b.setAttributeNS(null,"width",v.toString()),b.setAttributeNS(null,"fill","#000000"),b}}Is.QUIET_ZONE_SIZE=4,Is.SVG_NS="http://www.w3.org/2000/svg";class ko{encode(o,d,m,v,b){if(o.length===0)throw new y("Found empty contents");if(d!==ie.QR_CODE)throw new y("Can only encode QR_CODE, but got "+d);if(m<0||v<0)throw new y(`Requested dimensions are too small: ${m}x${v}`);let S=Pt.L,N=ko.QUIET_ZONE_SIZE;b!==null&&(b.get(cr.ERROR_CORRECTION)!==void 0&&(S=Pt.fromString(b.get(cr.ERROR_CORRECTION).toString())),b.get(cr.MARGIN)!==void 0&&(N=Number.parseInt(b.get(cr.MARGIN).toString(),10)));const R=Nn.encode(o,S,b);return ko.renderResult(R,m,v,N)}static renderResult(o,d,m,v){const b=o.getMatrix();if(b===null)throw new jt;const S=b.getWidth(),N=b.getHeight(),R=S+v*2,P=N+v*2,F=Math.max(d,R),$=Math.max(m,P),K=Math.min(Math.floor(F/R),Math.floor($/P)),ee=Math.floor((F-S*K)/2),oe=Math.floor(($-N*K)/2),ce=new Te(F,$);for(let be=0,_e=oe;be<N;be++,_e+=K)for(let Ge=0,He=ee;Ge<S;Ge++,He+=K)b.get(Ge,be)===1&&ce.setRegion(He,_e,K,K);return ce}}ko.QUIET_ZONE_SIZE=4;class kg{encode(o,d,m,v,b){let S;switch(d){case ie.QR_CODE:S=new ko;break;default:throw new y("No encoder available for format "+d)}return S.encode(o,d,m,v,b)}}class ua extends De{constructor(o,d,m,v,b,S,N,R){if(super(S,N),this.yuvData=o,this.dataWidth=d,this.dataHeight=m,this.left=v,this.top=b,v+S>d||b+N>m)throw new y("Crop rectangle does not fit within image data.");R&&this.reverseHorizontal(S,N)}getRow(o,d){if(o<0||o>=this.getHeight())throw new y("Requested row is outside the image: "+o);const m=this.getWidth();(d==null||d.length<m)&&(d=new Uint8ClampedArray(m));const v=(o+this.top)*this.dataWidth+this.left;return M.arraycopy(this.yuvData,v,d,0,m),d}getMatrix(){const o=this.getWidth(),d=this.getHeight();if(o===this.dataWidth&&d===this.dataHeight)return this.yuvData;const m=o*d,v=new Uint8ClampedArray(m);let b=this.top*this.dataWidth+this.left;if(o===this.dataWidth)return M.arraycopy(this.yuvData,b,v,0,m),v;for(let S=0;S<d;S++){const N=S*o;M.arraycopy(this.yuvData,b,v,N,o),b+=this.dataWidth}return v}isCropSupported(){return!0}crop(o,d,m,v){return new ua(this.yuvData,this.dataWidth,this.dataHeight,this.left+o,this.top+d,m,v,!1)}renderThumbnail(){const o=this.getWidth()/ua.THUMBNAIL_SCALE_FACTOR,d=this.getHeight()/ua.THUMBNAIL_SCALE_FACTOR,m=new Int32Array(o*d),v=this.yuvData;let b=this.top*this.dataWidth+this.left;for(let S=0;S<d;S++){const N=S*o;for(let R=0;R<o;R++){const P=v[b+R*ua.THUMBNAIL_SCALE_FACTOR]&255;m[N+R]=4278190080|P*65793}b+=this.dataWidth*ua.THUMBNAIL_SCALE_FACTOR}return m}getThumbnailWidth(){return this.getWidth()/ua.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/ua.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(o,d){const m=this.yuvData;for(let v=0,b=this.top*this.dataWidth+this.left;v<d;v++,b+=this.dataWidth){const S=b+o/2;for(let N=b,R=b+o-1;N<S;N++,R--){const P=m[N];m[N]=m[R],m[R]=P}}}invert(){return new we(this)}}ua.THUMBNAIL_SCALE_FACTOR=2;class xd extends De{constructor(o,d,m,v,b,S,N){if(super(d,m),this.dataWidth=v,this.dataHeight=b,this.left=S,this.top=N,o.BYTES_PER_ELEMENT===4){const R=d*m,P=new Uint8ClampedArray(R);for(let F=0;F<R;F++){const $=o[F],K=$>>16&255,ee=$>>7&510,oe=$&255;P[F]=(K+ee+oe)/4&255}this.luminances=P}else this.luminances=o;if(v===void 0&&(this.dataWidth=d),b===void 0&&(this.dataHeight=m),S===void 0&&(this.left=0),N===void 0&&(this.top=0),this.left+d>this.dataWidth||this.top+m>this.dataHeight)throw new y("Crop rectangle does not fit within image data.")}getRow(o,d){if(o<0||o>=this.getHeight())throw new y("Requested row is outside the image: "+o);const m=this.getWidth();(d==null||d.length<m)&&(d=new Uint8ClampedArray(m));const v=(o+this.top)*this.dataWidth+this.left;return M.arraycopy(this.luminances,v,d,0,m),d}getMatrix(){const o=this.getWidth(),d=this.getHeight();if(o===this.dataWidth&&d===this.dataHeight)return this.luminances;const m=o*d,v=new Uint8ClampedArray(m);let b=this.top*this.dataWidth+this.left;if(o===this.dataWidth)return M.arraycopy(this.luminances,b,v,0,m),v;for(let S=0;S<d;S++){const N=S*o;M.arraycopy(this.luminances,b,v,N,o),b+=this.dataWidth}return v}isCropSupported(){return!0}crop(o,d,m,v){return new xd(this.luminances,m,v,this.dataWidth,this.dataHeight,this.left+o,this.top+d)}invert(){return new we(this)}}class wh extends W{static forName(o){return this.getCharacterSetECIByName(o)}}class kl{}kl.ISO_8859_1=W.ISO8859_1;class Po{isCompact(){return this.compact}setCompact(o){this.compact=o}getSize(){return this.size}setSize(o){this.size=o}getLayers(){return this.layers}setLayers(o){this.layers=o}getCodeWords(){return this.codeWords}setCodeWords(o){this.codeWords=o}getMatrix(){return this.matrix}setMatrix(o){this.matrix=o}}class Eh{static singletonList(o){return[o]}static min(o,d){return o.sort(d)[0]}}class Sh{constructor(o){this.previous=o}getPrevious(){return this.previous}}class Rs extends Sh{constructor(o,d,m){super(o),this.value=d,this.bitCount=m}appendTo(o,d){o.appendBits(this.value,this.bitCount)}add(o,d){return new Rs(this,o,d)}addBinaryShift(o,d){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Rs(this,o,d)}toString(){let o=this.value&(1<<this.bitCount)-1;return o|=1<<this.bitCount,"<"+L.toBinaryString(o|1<<this.bitCount).substring(1)+">"}}class Pc extends Rs{constructor(o,d,m){super(o,0,0),this.binaryShiftStart=d,this.binaryShiftByteCount=m}appendTo(o,d){for(let m=0;m<this.binaryShiftByteCount;m++)(m===0||m===31&&this.binaryShiftByteCount<=62)&&(o.appendBits(31,5),this.binaryShiftByteCount>62?o.appendBits(this.binaryShiftByteCount-31,16):m===0?o.appendBits(Math.min(this.binaryShiftByteCount,31),5):o.appendBits(this.binaryShiftByteCount-31,5)),o.appendBits(d[this.binaryShiftStart+m],8)}addBinaryShift(o,d){return new Pc(this,o,d)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Ah(q,o,d){return new Pc(q,o,d)}function jo(q,o,d){return new Rs(q,o,d)}const Lo=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],ls=0,jc=1,Ai=2,yd=3,Bi=4,Pl=new Rs(null,0,0),Ms=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Pg(q){for(let o of q)U.fill(o,-1);return q[ls][Bi]=0,q[jc][Bi]=0,q[jc][ls]=28,q[yd][Bi]=0,q[Ai][Bi]=0,q[Ai][ls]=15,q}const jl=Pg(U.createInt32Array(6,6));class Ui{constructor(o,d,m,v){this.token=o,this.mode=d,this.binaryShiftByteCount=m,this.bitCount=v}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(o,d){let m=this.bitCount,v=this.token;if(o!==this.mode){let S=Ms[this.mode][o];v=jo(v,S&65535,S>>16),m+=S>>16}let b=o===Ai?4:5;return v=jo(v,d,b),new Ui(v,o,0,m+b)}shiftAndAppend(o,d){let m=this.token,v=this.mode===Ai?4:5;return m=jo(m,jl[this.mode][o],v),m=jo(m,d,5),new Ui(m,this.mode,0,this.bitCount+v+5)}addBinaryShiftChar(o){let d=this.token,m=this.mode,v=this.bitCount;if(this.mode===Bi||this.mode===Ai){let N=Ms[m][ls];d=jo(d,N&65535,N>>16),v+=N>>16,m=ls}let b=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,S=new Ui(d,m,this.binaryShiftByteCount+1,v+b);return S.binaryShiftByteCount===2078&&(S=S.endBinaryShift(o+1)),S}endBinaryShift(o){if(this.binaryShiftByteCount===0)return this;let d=this.token;return d=Ah(d,o-this.binaryShiftByteCount,this.binaryShiftByteCount),new Ui(d,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(o){let d=this.bitCount+(Ms[this.mode][o.mode]>>16);return this.binaryShiftByteCount<o.binaryShiftByteCount?d+=Ui.calculateBinaryShiftCost(o)-Ui.calculateBinaryShiftCost(this):this.binaryShiftByteCount>o.binaryShiftByteCount&&o.binaryShiftByteCount>0&&(d+=10),d<=o.bitCount}toBitArray(o){let d=[];for(let v=this.endBinaryShift(o.length).token;v!==null;v=v.getPrevious())d.unshift(v);let m=new G;for(const v of d)v.appendTo(m,o);return m}toString(){return Y.format("%s bits=%d bytes=%d",Lo[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(o){return o.binaryShiftByteCount>62?21:o.binaryShiftByteCount>31?20:o.binaryShiftByteCount>0?10:0}}Ui.INITIAL_STATE=new Ui(Pl,ls,0,0);function Ch(q){const o=Y.getCharCode(" "),d=Y.getCharCode("."),m=Y.getCharCode(",");q[ls][o]=1;const v=Y.getCharCode("Z"),b=Y.getCharCode("A");for(let K=b;K<=v;K++)q[ls][K]=K-b+2;q[jc][o]=1;const S=Y.getCharCode("z"),N=Y.getCharCode("a");for(let K=N;K<=S;K++)q[jc][K]=K-N+2;q[Ai][o]=1;const R=Y.getCharCode("9"),P=Y.getCharCode("0");for(let K=P;K<=R;K++)q[Ai][K]=K-P+2;q[Ai][m]=12,q[Ai][d]=13;const F=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let K=0;K<F.length;K++)q[yd][Y.getCharCode(F[K])]=K;const $=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let K=0;K<$.length;K++)Y.getCharCode($[K])>0&&(q[Bi][Y.getCharCode($[K])]=K);return q}const Ll=Ch(U.createInt32Array(5,256));class Os{constructor(o){this.text=o}encode(){const o=Y.getCharCode(" "),d=Y.getCharCode(`
`);let m=Eh.singletonList(Ui.INITIAL_STATE);for(let b=0;b<this.text.length;b++){let S,N=b+1<this.text.length?this.text[b+1]:0;switch(this.text[b]){case Y.getCharCode("\r"):S=N===d?2:0;break;case Y.getCharCode("."):S=N===o?3:0;break;case Y.getCharCode(","):S=N===o?4:0;break;case Y.getCharCode(":"):S=N===o?5:0;break;default:S=0}S>0?(m=Os.updateStateListForPair(m,b,S),b++):m=this.updateStateListForChar(m,b)}return Eh.min(m,(b,S)=>b.getBitCount()-S.getBitCount()).toBitArray(this.text)}updateStateListForChar(o,d){const m=[];for(let v of o)this.updateStateForChar(v,d,m);return Os.simplifyStates(m)}updateStateForChar(o,d,m){let v=this.text[d]&255,b=Ll[o.getMode()][v]>0,S=null;for(let N=0;N<=Bi;N++){let R=Ll[N][v];if(R>0){if(S==null&&(S=o.endBinaryShift(d)),!b||N===o.getMode()||N===Ai){const P=S.latchAndAppend(N,R);m.push(P)}if(!b&&jl[o.getMode()][N]>=0){const P=S.shiftAndAppend(N,R);m.push(P)}}}if(o.getBinaryShiftByteCount()>0||Ll[o.getMode()][v]===0){let N=o.addBinaryShiftChar(d);m.push(N)}}static updateStateListForPair(o,d,m){const v=[];for(let b of o)this.updateStateForPair(b,d,m,v);return this.simplifyStates(v)}static updateStateForPair(o,d,m,v){let b=o.endBinaryShift(d);if(v.push(b.latchAndAppend(Bi,m)),o.getMode()!==Bi&&v.push(b.shiftAndAppend(Bi,m)),m===3||m===4){let S=b.latchAndAppend(Ai,16-m).latchAndAppend(Ai,1);v.push(S)}if(o.getBinaryShiftByteCount()>0){let S=o.addBinaryShiftChar(d).addBinaryShiftChar(d+1);v.push(S)}}static simplifyStates(o){let d=[];for(const m of o){let v=!0;for(const b of d){if(b.isBetterThanOrEqualTo(m)){v=!1;break}m.isBetterThanOrEqualTo(b)&&(d=d.filter(S=>S!==b))}v&&d.push(m)}return d}}class qt{constructor(){}static encodeBytes(o){return qt.encode(o,qt.DEFAULT_EC_PERCENT,qt.DEFAULT_AZTEC_LAYERS)}static encode(o,d,m){let v=new Os(o).encode(),b=L.truncDivision(v.getSize()*d,100)+11,S=v.getSize()+b,N,R,P,F,$;if(m!==qt.DEFAULT_AZTEC_LAYERS){if(N=m<0,R=Math.abs(m),R>(N?qt.MAX_NB_BITS_COMPACT:qt.MAX_NB_BITS))throw new y(Y.format("Illegal value %s for layers",m));P=qt.totalBitsInLayer(R,N),F=qt.WORD_SIZE[R];let Fe=P-P%F;if($=qt.stuffBits(v,F),$.getSize()+b>Fe)throw new y("Data to large for user specified layer");if(N&&$.getSize()>F*64)throw new y("Data to large for user specified layer")}else{F=0,$=null;for(let Fe=0;;Fe++){if(Fe>qt.MAX_NB_BITS)throw new y("Data too large for an Aztec code");if(N=Fe<=3,R=N?Fe+1:Fe,P=qt.totalBitsInLayer(R,N),S>P)continue;($==null||F!==qt.WORD_SIZE[R])&&(F=qt.WORD_SIZE[R],$=qt.stuffBits(v,F));let Dt=P-P%F;if(!(N&&$.getSize()>F*64)&&$.getSize()+b<=Dt)break}}let K=qt.generateCheckWords($,P,F),ee=$.getSize()/F,oe=qt.generateModeMessage(N,R,ee),ce=(N?11:14)+R*4,be=new Int32Array(ce),_e;if(N){_e=ce;for(let Fe=0;Fe<be.length;Fe++)be[Fe]=Fe}else{_e=ce+1+2*L.truncDivision(L.truncDivision(ce,2)-1,15);let Fe=L.truncDivision(ce,2),Dt=L.truncDivision(_e,2);for(let At=0;At<Fe;At++){let Zn=At+L.truncDivision(At,15);be[Fe-At-1]=Dt-Zn-1,be[Fe+At]=Dt+Zn+1}}let Ge=new Te(_e);for(let Fe=0,Dt=0;Fe<R;Fe++){let At=(R-Fe)*4+(N?9:12);for(let Zn=0;Zn<At;Zn++){let Ci=Zn*2;for(let Kr=0;Kr<2;Kr++)K.get(Dt+Ci+Kr)&&Ge.set(be[Fe*2+Kr],be[Fe*2+Zn]),K.get(Dt+At*2+Ci+Kr)&&Ge.set(be[Fe*2+Zn],be[ce-1-Fe*2-Kr]),K.get(Dt+At*4+Ci+Kr)&&Ge.set(be[ce-1-Fe*2-Kr],be[ce-1-Fe*2-Zn]),K.get(Dt+At*6+Ci+Kr)&&Ge.set(be[ce-1-Fe*2-Zn],be[Fe*2+Kr])}Dt+=At*8}if(qt.drawModeMessage(Ge,N,_e,oe),N)qt.drawBullsEye(Ge,L.truncDivision(_e,2),5);else{qt.drawBullsEye(Ge,L.truncDivision(_e,2),7);for(let Fe=0,Dt=0;Fe<L.truncDivision(ce,2)-1;Fe+=15,Dt+=16)for(let At=L.truncDivision(_e,2)&1;At<_e;At+=2)Ge.set(L.truncDivision(_e,2)-Dt,At),Ge.set(L.truncDivision(_e,2)+Dt,At),Ge.set(At,L.truncDivision(_e,2)-Dt),Ge.set(At,L.truncDivision(_e,2)+Dt)}let He=new Po;return He.setCompact(N),He.setSize(_e),He.setLayers(R),He.setCodeWords(ee),He.setMatrix(Ge),He}static drawBullsEye(o,d,m){for(let v=0;v<m;v+=2)for(let b=d-v;b<=d+v;b++)o.set(b,d-v),o.set(b,d+v),o.set(d-v,b),o.set(d+v,b);o.set(d-m,d-m),o.set(d-m+1,d-m),o.set(d-m,d-m+1),o.set(d+m,d-m),o.set(d+m,d-m+1),o.set(d+m,d+m-1)}static generateModeMessage(o,d,m){let v=new G;return o?(v.appendBits(d-1,2),v.appendBits(m-1,6),v=qt.generateCheckWords(v,28,4)):(v.appendBits(d-1,5),v.appendBits(m-1,11),v=qt.generateCheckWords(v,40,4)),v}static drawModeMessage(o,d,m,v){let b=L.truncDivision(m,2);if(d)for(let S=0;S<7;S++){let N=b-3+S;v.get(S)&&o.set(N,b-5),v.get(S+7)&&o.set(b+5,N),v.get(20-S)&&o.set(N,b+5),v.get(27-S)&&o.set(b-5,N)}else for(let S=0;S<10;S++){let N=b-5+S+L.truncDivision(S,5);v.get(S)&&o.set(N,b-7),v.get(S+10)&&o.set(b+7,N),v.get(29-S)&&o.set(N,b+7),v.get(39-S)&&o.set(b-7,N)}}static generateCheckWords(o,d,m){let v=o.getSize()/m,b=new Dl(qt.getGF(m)),S=L.truncDivision(d,m),N=qt.bitsToWords(o,m,S);b.encode(N,S-v);let R=d%m,P=new G;P.appendBits(0,R);for(const F of Array.from(N))P.appendBits(F,m);return P}static bitsToWords(o,d,m){let v=new Int32Array(m),b,S;for(b=0,S=o.getSize()/d;b<S;b++){let N=0;for(let R=0;R<d;R++)N|=o.get(b*d+R)?1<<d-R-1:0;v[b]=N}return v}static getGF(o){switch(o){case 4:return ft.AZTEC_PARAM;case 6:return ft.AZTEC_DATA_6;case 8:return ft.AZTEC_DATA_8;case 10:return ft.AZTEC_DATA_10;case 12:return ft.AZTEC_DATA_12;default:throw new y("Unsupported word size "+o)}}static stuffBits(o,d){let m=new G,v=o.getSize(),b=(1<<d)-2;for(let S=0;S<v;S+=d){let N=0;for(let R=0;R<d;R++)(S+R>=v||o.get(S+R))&&(N|=1<<d-1-R);(N&b)===b?(m.appendBits(N&b,d),S--):(N&b)===0?(m.appendBits(N|1,d),S--):m.appendBits(N,d)}return m}static totalBitsInLayer(o,d){return((d?88:112)+16*o)*o}}qt.DEFAULT_EC_PERCENT=33,qt.DEFAULT_AZTEC_LAYERS=0,qt.MAX_NB_BITS=32,qt.MAX_NB_BITS_COMPACT=4,qt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Bl{encode(o,d,m,v){return this.encodeWithHints(o,d,m,v,null)}encodeWithHints(o,d,m,v,b){let S=kl.ISO_8859_1,N=qt.DEFAULT_EC_PERCENT,R=qt.DEFAULT_AZTEC_LAYERS;return b!=null&&(b.has(cr.CHARACTER_SET)&&(S=wh.forName(b.get(cr.CHARACTER_SET).toString())),b.has(cr.ERROR_CORRECTION)&&(N=L.parseInt(b.get(cr.ERROR_CORRECTION).toString())),b.has(cr.AZTEC_LAYERS)&&(R=L.parseInt(b.get(cr.AZTEC_LAYERS).toString()))),Bl.encodeLayers(o,d,m,v,S,N,R)}static encodeLayers(o,d,m,v,b,S,N){if(d!==ie.AZTEC)throw new y("Can only encode AZTEC, but got "+d);let R=qt.encode(Y.getBytes(o,b),S,N);return Bl.renderResult(R,m,v)}static renderResult(o,d,m){let v=o.getMatrix();if(v==null)throw new jt;let b=v.getWidth(),S=v.getHeight(),N=Math.max(d,b),R=Math.max(m,S),P=Math.min(N/b,R/S),F=(N-b*P)/2,$=(R-S*P)/2,K=new Te(N,R);for(let ee=0,oe=$;ee<S;ee++,oe+=P)for(let ce=0,be=F;ce<b;ce++,be+=P)v.get(ce,ee)&&K.setRegion(be,oe,P,P);return K}}n.AbstractExpandedDecoder=Ut,n.ArgumentException=g,n.ArithmeticException=Ue,n.AztecCode=Po,n.AztecCodeReader=is,n.AztecCodeWriter=Bl,n.AztecDecoder=Ft,n.AztecDetector=Tl,n.AztecDetectorResult=Ke,n.AztecEncoder=qt,n.AztecHighLevelEncoder=Os,n.AztecPoint=Cr,n.BarcodeFormat=ie,n.Binarizer=I,n.BinaryBitmap=E,n.BitArray=G,n.BitMatrix=Te,n.BitSource=ji,n.BrowserAztecCodeReader=cd,n.BrowserBarcodeReader=Tg,n.BrowserCodeReader=he,n.BrowserDatamatrixCodeReader=Tc,n.BrowserMultiFormatReader=bh,n.BrowserPDF417Reader=Mg,n.BrowserQRCodeReader=Og,n.BrowserQRCodeSvgWriter=Is,n.CharacterSetECI=W,n.ChecksumException=C,n.Code128Reader=ze,n.Code39Reader=ln,n.DataMatrixDecodedBitStreamParser=Da,n.DataMatrixReader=ka,n.DecodeHintType=z,n.DecoderResult=me,n.DefaultGridSampler=_l,n.DetectorResult=rs,n.EAN13Reader=Nr,n.EncodeHintType=cr,n.Exception=u,n.FormatException=B,n.GenericGF=ft,n.GenericGFPoly=Qe,n.GlobalHistogramBinarizer=de,n.GridSampler=Br,n.GridSamplerInstance=di,n.HTMLCanvasElementLuminanceSource=$e,n.HybridBinarizer=ge,n.ITFReader=Tt,n.IllegalArgumentException=y,n.IllegalStateException=jt,n.InvertedLuminanceSource=we,n.LuminanceSource=De,n.MathUtils=Rt,n.MultiFormatOneDReader=Pi,n.MultiFormatReader=vh,n.MultiFormatWriter=kg,n.NotFoundException=le,n.OneDReader=xn,n.PDF417DecodedBitStreamParser=Ie,n.PDF417DecoderErrorCorrection=ja,n.PDF417Reader=Tr,n.PDF417ResultMetadata=Do,n.PerspectiveTransform=Ur,n.PlanarYUVLuminanceSource=ua,n.QRCodeByteMatrix=kc,n.QRCodeDataMask=hi,n.QRCodeDecodedBitStreamParser=An,n.QRCodeDecoderErrorCorrectionLevel=Pt,n.QRCodeDecoderFormatInformation=pr,n.QRCodeEncoder=Nn,n.QRCodeEncoderQRCode=Ts,n.QRCodeMaskUtil=Fn,n.QRCodeMatrixUtil=pt,n.QRCodeMode=ut,n.QRCodeReader=Pa,n.QRCodeVersion=it,n.QRCodeWriter=ko,n.RGBLuminanceSource=xd,n.RSS14Reader=cn,n.RSSExpandedReader=Be,n.ReaderException=Dc,n.ReedSolomonDecoder=gn,n.ReedSolomonEncoder=Dl,n.ReedSolomonException=Et,n.Result=se,n.ResultMetadataType=qe,n.ResultPoint=Ze,n.StringUtils=Y,n.UnsupportedOperationException=Z,n.VideoInputDevice=ne,n.WhiteRectangleDetector=_t,n.WriterException=un,n.ZXingArrays=U,n.ZXingCharset=wh,n.ZXingInteger=L,n.ZXingStandardCharsets=kl,n.ZXingStringBuilder=pe,n.ZXingStringEncoding=te,n.ZXingSystem=M,n.createAbstractExpandedDecoder=No,Object.defineProperty(n,"__esModule",{value:!0})}))})(xf,xf.exports)),xf.exports}var jn=$ue();const Yue=Qa(jn),Wue=s3({__proto__:null,default:Yue},[jn]);var VO=(function(){function e(t,n,r){if(this.formatMap=new Map([[et.QR_CODE,jn.BarcodeFormat.QR_CODE],[et.AZTEC,jn.BarcodeFormat.AZTEC],[et.CODABAR,jn.BarcodeFormat.CODABAR],[et.CODE_39,jn.BarcodeFormat.CODE_39],[et.CODE_93,jn.BarcodeFormat.CODE_93],[et.CODE_128,jn.BarcodeFormat.CODE_128],[et.DATA_MATRIX,jn.BarcodeFormat.DATA_MATRIX],[et.MAXICODE,jn.BarcodeFormat.MAXICODE],[et.ITF,jn.BarcodeFormat.ITF],[et.EAN_13,jn.BarcodeFormat.EAN_13],[et.EAN_8,jn.BarcodeFormat.EAN_8],[et.PDF_417,jn.BarcodeFormat.PDF_417],[et.RSS_14,jn.BarcodeFormat.RSS_14],[et.RSS_EXPANDED,jn.BarcodeFormat.RSS_EXPANDED],[et.UPC_A,jn.BarcodeFormat.UPC_A],[et.UPC_E,jn.BarcodeFormat.UPC_E],[et.UPC_EAN_EXTENSION,jn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!Wue)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=r;var i=this.createZXingFormats(t),a=new Map;a.set(jn.DecodeHintType.POSSIBLE_FORMATS,i),a.set(jn.DecodeHintType.TRY_HARDER,!1),this.hints=a}return e.prototype.decodeAsync=function(t){var n=this;return new Promise(function(r,i){try{r(n.decode(t))}catch(a){i(a)}})},e.prototype.decode=function(t){var n=new jn.MultiFormatReader(this.verbose,this.hints),r=new jn.HTMLCanvasElementLuminanceSource(t),i=new jn.BinaryBitmap(new jn.HybridBinarizer(r)),a=n.decode(i);return{text:a.text,format:Uj.create(this.toHtml5QrcodeSupportedFormats(a.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,r,i){t.set(n,r)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var n=[],r=0,i=t;r<i.length;r++){var a=i[r];this.formatMap.has(a)?n.push(this.formatMap.get(a)):this.logger.logError("".concat(a," is not supported by")+"ZXingHtml5QrcodeShim")}return n},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e})(),Kue=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function f(g){try{u(r.next(g))}catch(y){l(y)}}function h(g){try{u(r.throw(g))}catch(y){l(y)}}function u(g){g.done?a(g.value):i(g.value).then(f,h)}u((r=r.apply(e,t||[])).next())})},Xue=function(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(u){return function(g){return h([u,g])}}function h(u){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,u[0]&&(n=0)),n;)try{if(r=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){n.label=u[1];break}if(u[0]===6&&n.label<a[1]){n.label=a[1],a=u;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(u);break}a[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(g){u=[6,g],i=0}finally{r=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},qO=(function(){function e(t,n,r){if(this.formatMap=new Map([[et.QR_CODE,"qr_code"],[et.AZTEC,"aztec"],[et.CODABAR,"codabar"],[et.CODE_39,"code_39"],[et.CODE_93,"code_93"],[et.CODE_128,"code_128"],[et.DATA_MATRIX,"data_matrix"],[et.ITF,"itf"],[et.EAN_13,"ean_13"],[et.EAN_8,"ean_8"],[et.PDF_417,"pdf417"],[et.UPC_A,"upc_a"],[et.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var i=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},e.prototype.decodeAsync=function(t){return Kue(this,void 0,void 0,function(){var n,r;return Xue(this,function(i){switch(i.label){case 0:return[4,this.detector.detect(t)];case 1:if(n=i.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(n),[2,{text:r.rawValue,format:Uj.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var n=null,r=0,i=0,a=t;i<a.length;i++){var l=a[i],f=l.boundingBox.width*l.boundingBox.height;f>r&&(r=f,n=l)}if(!n)throw"No largest barcode found";return n},e.prototype.createBarcodeDetectorFormats=function(t){for(var n=[],r=0,i=t;r<i.length;r++){var a=i[r];this.formatMap.has(a)?n.push(this.formatMap.get(a)):this.logger.warn("".concat(a," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,r,i){t.set(n,r)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e})(),$O=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function f(g){try{u(r.next(g))}catch(y){l(y)}}function h(g){try{u(r.throw(g))}catch(y){l(y)}}function u(g){g.done?a(g.value):i(g.value).then(f,h)}u((r=r.apply(e,t||[])).next())})},YO=function(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(u){return function(g){return h([u,g])}}function h(u){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,u[0]&&(n=0)),n;)try{if(r=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){n.label=u[1];break}if(u[0]===6&&n.label<a[1]){n.label=a[1],a=u;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(u);break}a[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(g){u=[6,g],i=0}finally{r=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Jue=(function(){function e(t,n,r,i){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,n&&qO.isSupported()?(this.primaryDecoder=new qO(t,r,i),this.secondaryDecoder=new VO(t,r,i)):this.primaryDecoder=new VO(t,r,i)}return e.prototype.decodeAsync=function(t){return $O(this,void 0,void 0,function(){var n;return YO(this,function(r){switch(r.label){case 0:n=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return $O(this,void 0,void 0,function(){var n,r;return YO(this,function(i){switch(i.label){case 0:n=performance.now(),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,i.sent()];case 3:if(r=i.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw r;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var n=performance.now()-t;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,n=0,r=this.executionResults;n<r.length;n++){var i=r[n];t+=i}var a=t/this.executionResults.length;console.log("".concat(a," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e})(),mS=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),bm=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function f(g){try{u(r.next(g))}catch(y){l(y)}}function h(g){try{u(r.throw(g))}catch(y){l(y)}}function u(g){g.done?a(g.value):i(g.value).then(f,h)}u((r=r.apply(e,t||[])).next())})},wm=function(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(u){return function(g){return h([u,g])}}function h(u){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,u[0]&&(n=0)),n;)try{if(r=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){n.label=u[1];break}if(u[0]===6&&n.label<a[1]){n.label=a[1],a=u;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(u);break}a[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(g){u=[6,g],i=0}finally{r=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Gj=(function(){function e(t,n){this.name=t,this.track=n}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(t){var n={};n[this.name]=t;var r={advanced:[n]};return this.track.applyConstraints(r)},e.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var n=t[this.name];return n}return null},e})(),Zue=(function(e){mS(t,e);function t(n,r){return e.call(this,n,r)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(n){var r={};r[this.name]=n;var i={advanced:[r]};return this.track.applyConstraints(i)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),r=n[this.name];return{min:r.min,max:r.max,step:r.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t})(Gj),Que=(function(e){mS(t,e);function t(n){return e.call(this,"zoom",n)||this}return t})(Zue),ede=(function(e){mS(t,e);function t(n){return e.call(this,"torch",n)||this}return t})(Gj),tde=(function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new Que(this.track)},e.prototype.torchFeature=function(){return new ede(this.track)},e})(),nde=(function(){function e(t,n,r){this.isClosed=!1,this.parentElement=t,this.mediaStream=n,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var n=document.createElement("video");return n.style.width="".concat(t,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var r=t.surface.clientWidth,i=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(r,i),t.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,n,r,i){return bm(this,void 0,void 0,function(){var a,l;return wm(this,function(f){switch(f.label){case 0:return a=new e(t,n,i),r.aspectRatio?(l={aspectRatio:r.aspectRatio},[4,a.getFirstTrackOrFail().applyConstraints(l)]):[3,2];case 1:f.sent(),f.label=2;case 2:return a.setupSurface(),[2,a]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var n=this,r=function(){setTimeout(t,200),n.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return bm(this,void 0,void 0,function(){return wm(this,function(n){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(n,r){var i=t.mediaStream.getVideoTracks(),a=i.length,l=0;t.mediaStream.getVideoTracks().forEach(function(f){t.mediaStream.removeTrack(f),f.stop(),++l,l>=a&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),n())})})},e.prototype.getCapabilities=function(){return new tde(this.getFirstTrackOrFail())},e})(),rde=(function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,n,r){return bm(this,void 0,void 0,function(){return wm(this,function(i){return[2,nde.create(t,this.mediaStream,n,r)]})})},e.create=function(t){return bm(this,void 0,void 0,function(){var n,r;return wm(this,function(i){switch(i.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return r=i.sent(),[2,new e(r)]}})})},e})(),WO=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function f(g){try{u(r.next(g))}catch(y){l(y)}}function h(g){try{u(r.throw(g))}catch(y){l(y)}}function u(g){g.done?a(g.value):i(g.value).then(f,h)}u((r=r.apply(e,t||[])).next())})},KO=function(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(u){return function(g){return h([u,g])}}function h(u){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,u[0]&&(n=0)),n;)try{if(r=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){n.label=u[1];break}if(u[0]===6&&n.label<a[1]){n.label=a[1],a=u;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(u);break}a[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(g){u=[6,g],i=0}finally{r=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},ide=(function(){function e(){}return e.failIfNotSupported=function(){return WO(this,void 0,void 0,function(){return KO(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return WO(this,void 0,void 0,function(){return KO(this,function(n){return[2,rde.create(t)]})})},e})(),ade=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function f(g){try{u(r.next(g))}catch(y){l(y)}}function h(g){try{u(r.throw(g))}catch(y){l(y)}}function u(g){g.done?a(g.value):i(g.value).then(f,h)}u((r=r.apply(e,t||[])).next())})},sde=function(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(u){return function(g){return h([u,g])}}function h(u){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,u[0]&&(n=0)),n;)try{if(r=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){n.label=u[1];break}if(u[0]===6&&n.label<a[1]){n.label=a[1],a=u;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(u);break}a[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(g){u=[6,g],i=0}finally{r=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},ode=(function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=Ru.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=Ru.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},e.getCamerasFromMediaDevices=function(){return ade(this,void 0,void 0,function(){var t,n,r,i,a,l,f;return sde(this,function(h){switch(h.label){case 0:return t=function(u){for(var g=u.getVideoTracks(),y=0,E=g;y<E.length;y++){var C=E[y];C.enabled=!1,C.stop(),u.removeTrack(C)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=h.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=h.sent(),i=[],a=0,l=r;a<l.length;a++)f=l[a],f.kind==="videoinput"&&i.push({id:f.deviceId,label:f.label});return t(n),[2,i]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,n){var r=function(a){for(var l=[],f=0,h=a;f<h.length;f++){var u=h[f];u.kind==="video"&&l.push({id:u.id,label:u.label})}t(l)},i=MediaStreamTrack;i.getSources(r)})},e})(),nr;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(nr||(nr={}));var lde=(function(){function e(){this.state=nr.NOT_STARTED,this.onGoingTransactionNewState=nr.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===nr.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=nr.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===nr.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=nr.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==nr.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case nr.UNKNOWN:throw"Transition from unknown is not allowed";case nr.NOT_STARTED:this.failIfNewStateIs(t,[nr.PAUSED]);break;case nr.SCANNING:break;case nr.PAUSED:break}},e.prototype.failIfNewStateIs=function(t,n){for(var r=0,i=n;r<i.length;r++){var a=i[r];if(t===a)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},e})(),cde=(function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===nr.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==nr.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===nr.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===nr.PAUSED},e})(),ude=(function(){function e(){}return e.create=function(){return new cde(new lde)},e})(),dde=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Wi=(function(e){dde(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t})(qa),fde=(function(){function e(t,n){this.logger=n,this.fps=Wi.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=Wi.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?zj.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!ms(this.qrbox)},e.create=function(t,n){return new e(t,n)},e})(),XO=(function(){function e(t,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var r;typeof n=="boolean"?this.verbose=n===!0:n&&(r=n,this.verbose=r.verbose===!0,r.experimentalFeatures),this.logger=new Hj(this.verbose),this.qrcode=new Jue(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=ude.create()}return e.prototype.start=function(t,n,r,i){var a=this;if(!t)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var l;i?l=i:l=this.verbose?this.logger.log:function(){};var f=fde.create(n,this.logger);this.clearElement();var h=!1;f.videoConstraints&&(f.isMediaStreamConstraintsValid()?h=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var u=h,g=document.getElementById(this.elementId);g.clientWidth?g.clientWidth:Wi.DEFAULT_WIDTH,g.style.position="relative",this.shouldScan=!0,this.element=g;var y=this,E=this.stateManagerProxy.startTransition(nr.SCANNING);return new Promise(function(C,I){var M=u?f.videoConstraints:y.createVideoConstraints(t);if(!M){E.cancel(),I("videoConstraints should be defined");return}var O={};(!u||f.aspectRatio)&&(O.aspectRatio=f.aspectRatio);var j={onRenderSurfaceReady:function(U,L){y.setupUi(U,L,f),y.isScanning=!0,y.foreverScan(f,r,l)}};ide.failIfNotSupported().then(function(U){U.create(M).then(function(L){return L.render(a.element,O,j).then(function(G){y.renderedCamera=G,E.execute(),C(null)}).catch(function(G){E.cancel(),I(G)})}).catch(function(L){E.cancel(),I(Ru.errorGettingUserMedia(L))})}).catch(function(U){E.cancel(),I(Ru.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(nr.PAUSED),this.showPausedState(),(ms(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,n=function(){t.stateManagerProxy.directTransition(nr.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(nr.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(t.element){var a=document.getElementById(Wi.SHADED_REGION_ELEMENT_ID);a&&t.element.removeChild(a)}},i=this;return this.renderedCamera.close().then(function(){return i.renderedCamera=null,i.element&&(i.element.removeChild(i.canvasElement),i.canvasElement=null),r(),i.qrRegion&&(i.qrRegion=null),i.context&&(i.context=null),n.execute(),i.hidePausedState(),i.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,n){return this.scanFileV2(t,n).then(function(r){return r.decodedText})},e.prototype.scanFileV2=function(t,n){var r=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(ms(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(i,a){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(t);var l=new Image;l.onload=function(){var f=l.width,h=l.height,u=document.getElementById(r.elementId),g=u.clientWidth?u.clientWidth:Wi.DEFAULT_WIDTH,y=Math.max(u.clientHeight?u.clientHeight:h,Wi.FILE_SCAN_MIN_HEIGHT),E=r.computeCanvasDrawConfig(f,h,g,y);if(n){var C=r.createCanvasElement(g,y,"qr-canvas-visible");C.style.display="inline-block",u.appendChild(C);var I=C.getContext("2d");if(!I)throw"Unable to get 2d context from canvas";I.canvas.width=g,I.canvas.height=y,I.drawImage(l,0,0,f,h,E.x,E.y,E.width,E.height)}var M=Wi.FILE_SCAN_HIDDEN_CANVAS_PADDING,O=Math.max(l.width,E.width),j=Math.max(l.height,E.height),U=O+2*M,L=j+2*M,G=r.createCanvasElement(U,L);u.appendChild(G);var V=G.getContext("2d");if(!V)throw"Unable to get 2d context from canvas";V.canvas.width=U,V.canvas.height=L,V.drawImage(l,0,0,f,h,M,M,O,j);try{r.qrcode.decodeRobustlyAsync(G).then(function(z){i(HO.createFromQrcodeResult(z))}).catch(a)}catch(z){a("QR code parse error, error = ".concat(z))}},l.onerror=a,l.onabort=a,l.onstalled=a,l.onsuspend=a,l.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return ode.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(t){if(!zj.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){var n=[et.QR_CODE,et.AZTEC,et.CODABAR,et.CODE_39,et.CODE_93,et.CODE_128,et.DATA_MATRIX,et.MAXICODE,et.ITF,et.EAN_13,et.EAN_8,et.PDF_417,et.RSS_14,et.RSS_EXPANDED,et.UPC_A,et.UPC_E,et.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return n;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],i=0,a=t.formatsToSupport;i<a.length;i++){var l=a[i];Gue(l)?r.push(l):this.logger.warn("Invalid format: ".concat(l," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(ms(t))return!0;if(!ms(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(ms(t.experimentalFeatures))return!0;var n=t.experimentalFeatures;return ms(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(t,n,r){var i=this,a=r.qrbox;this.validateQrboxConfig(a);var l=this.toQrdimensions(t,n,a),f=function(u){if(u<Wi.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Wi.MIN_QR_BOX_SIZE,"px.")},h=function(u){return u>t&&(i.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),u=t),u};f(l.width),f(l.height),l.width=h(l.width)},e.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,n,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(t,n)}catch(i){throw new Error("qrbox config was passed as a function but it failed with unknown error"+i)}return r},e.prototype.setupUi=function(t,n,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(t,n,r);var i=ms(r.qrbox)?{width:t,height:n}:r.qrbox;this.validateQrboxConfig(i);var a=this.toQrdimensions(t,n,i);a.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var l=r.isShadedBoxEnabled()&&a.height<=n,f={x:0,y:0,width:t,height:n},h=l?this.getShadedRegionBounds(t,n,a):f,u=this.createCanvasElement(h.width,h.height),g={willReadFrequently:!0},y=u.getContext("2d",g);y.canvas.width=h.width,y.canvas.height=h.height,this.element.append(u),l&&this.possiblyInsertShadingElement(this.element,t,n,a),this.createScannerPausedUiElement(this.element),this.qrRegion=h,this.context=y,this.canvasElement=u},e.prototype.createScannerPausedUiElement=function(t){var n=document.createElement("div");n.innerText=Ru.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",t.appendChild(n),this.scannerPausedUiElement=n},e.prototype.scanContext=function(t,n){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(i){return t(i.text,HO.createFromQrcodeResult(i)),r.possiblyUpdateShaders(!0),!0}).catch(function(i){r.possiblyUpdateShaders(!1);var a=Ru.codeParseError(i);return n(a,Fj.createFrom(a)),!1})},e.prototype.foreverScan=function(t,n,r){var i=this;if(this.shouldScan&&this.renderedCamera){var a=this.renderedCamera.getSurface(),l=a.videoWidth/a.clientWidth,f=a.videoHeight/a.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var h=this.qrRegion.width*l,u=this.qrRegion.height*f,g=this.qrRegion.x*l,y=this.qrRegion.y*f;this.context.drawImage(a,g,y,h,u,0,0,this.qrRegion.width,this.qrRegion.height);var E=function(){i.foreverScanTimeout=setTimeout(function(){i.foreverScan(t,n,r)},i.getTimeoutFps(t.fps))};this.scanContext(n,r).then(function(C){!C&&t.disableFlip!==!0?(i.context.translate(i.context.canvas.width,0),i.context.scale(-1,1),i.scanContext(n,r).finally(function(){E()})):E()}).catch(function(C){i.logger.logError("Error happend while scanning context",C),E()})}},e.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var n="facingMode",r="deviceId",i={user:!0,environment:!0},a="exact",l=function(I){if(I in i)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(I,"'")},f=Object.keys(t);if(f.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(f.length," keys");var h=Object.keys(t)[0];if(h!==n&&h!==r)throw"Only '".concat(n,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(h===n){var u=t.facingMode;if(typeof u=="string"){if(l(u))return{facingMode:u}}else if(typeof u=="object")if(a in u){if(l(u["".concat(a)]))return{facingMode:{exact:u["".concat(a)]}}}else throw"'facingMode' should be string or object with"+" ".concat(a," as key.");else{var g=typeof u;throw"Invalid type of 'facingMode' = ".concat(g)}}else{var y=t.deviceId;if(typeof y=="string")return{deviceId:y};if(typeof y=="object"){if(a in y)return{deviceId:{exact:y["".concat(a)]}};throw"'deviceId' should be string or object with"+" ".concat(a," as key.")}else{var E=typeof y;throw"Invalid type of 'deviceId' = ".concat(E)}}}var C=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(C)},e.prototype.computeCanvasDrawConfig=function(t,n,r,i){if(t<=r&&n<=i){var a=(r-t)/2,l=(i-n)/2;return{x:a,y:l,width:t,height:n}}else{var f=t,h=n;return t>r&&(n=r/t*n,t=r),n>i&&(t=i/n*t,n=i),this.logger.log("Image downsampled from "+"".concat(f,"X").concat(h)+" to ".concat(t,"X").concat(n,".")),this.computeCanvasDrawConfig(t,n,r,i)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=t?Wi.BORDER_SHADER_MATCH_COLOR:Wi.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,n,r){var i=t,a=n,l=document.createElement("canvas");return l.style.width="".concat(i,"px"),l.style.height="".concat(a,"px"),l.style.display="none",l.id=ms(r)?"qr-canvas":r,l},e.prototype.getShadedRegionBounds=function(t,n,r){if(r.width>t||r.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-r.width)/2,y:(n-r.height)/2,width:r.width,height:r.height}},e.prototype.possiblyInsertShadingElement=function(t,n,r,i){if(!(n-i.width<1||r-i.height<1)){var a=document.createElement("div");a.style.position="absolute";var l=(n-i.width)/2,f=(r-i.height)/2;if(a.style.borderLeft="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderRight="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderTop="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderBottom="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),a.style.boxSizing="border-box",a.style.top="0px",a.style.bottom="0px",a.style.left="0px",a.style.right="0px",a.id="".concat(Wi.SHADED_REGION_ELEMENT_ID),n-i.width<11||r-i.height<11)this.hasBorderShaders=!1;else{var h=5,u=40;this.insertShaderBorders(a,u,h,-h,null,0,!0),this.insertShaderBorders(a,u,h,-h,null,0,!1),this.insertShaderBorders(a,u,h,null,-h,0,!0),this.insertShaderBorders(a,u,h,null,-h,0,!1),this.insertShaderBorders(a,h,u+h,-h,null,-h,!0),this.insertShaderBorders(a,h,u+h,null,-h,-h,!0),this.insertShaderBorders(a,h,u+h,-h,null,-h,!1),this.insertShaderBorders(a,h,u+h,null,-h,-h,!1),this.hasBorderShaders=!0}t.append(a)}},e.prototype.insertShaderBorders=function(t,n,r,i,a,l,f){var h=document.createElement("div");h.style.position="absolute",h.style.backgroundColor=Wi.BORDER_SHADER_DEFAULT_COLOR,h.style.width="".concat(n,"px"),h.style.height="".concat(r,"px"),i!==null&&(h.style.top="".concat(i,"px")),a!==null&&(h.style.bottom="".concat(a,"px")),f?h.style.left="".concat(l,"px"):h.style.right="".concat(l,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(h),t.appendChild(h)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e})(),gS="data:image/svg+xml;base64,",hde=gS+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",pde=gS+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",JO=gS+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",mde="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",ZO=(function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e})(),gde=(function(){function e(){this.data=ZO.createDefault();var t=localStorage.getItem(e.LOCAL_STORAGE_KEY);t?this.data=JSON.parse(t):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(t){this.data.hasPermission=t,this.flush()},e.prototype.setLastUsedCameraId=function(t){this.data.lastUsedCameraId=t,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=ZO.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e})(),xde=(function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(t){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=zO.poweredBy();var n=document.createElement("a");n.innerText="ScanApp",n.href="https://scanapp.org",n.target="new",n.style.color="white",this.infoDiv.appendChild(n);var r=document.createElement("br"),i=document.createElement("br");this.infoDiv.appendChild(r),this.infoDiv.appendChild(i);var a=document.createElement("a");a.innerText=zO.reportIssues(),a.href="https://github.com/mebjas/html5-qrcode/issues",a.target="new",a.style.color="white",this.infoDiv.appendChild(a),t.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e})(),yde=(function(){function e(t,n){this.isShowingInfoIcon=!0,this.onTapIn=t,this.onTapOut=n,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(t){var n=this;this.infoIcon.alt="Info icon",this.infoIcon.src=JO,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(r){return n.onHoverIn()},this.infoIcon.onmouseout=function(r){return n.onHoverOut()},this.infoIcon.onclick=function(r){return n.onClick()},t.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=mde,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=JO,this.infoIcon.style.opacity="0.6")},e})(),vde=(function(){function e(){var t=this;this.infoDiv=new xde,this.infoIcon=new yde(function(){t.infoDiv.show()},function(){t.infoDiv.hide()})}return e.prototype.renderInto=function(t){this.infoDiv.renderInto(t),this.infoIcon.renderInto(t)},e})(),bde=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function f(g){try{u(r.next(g))}catch(y){l(y)}}function h(g){try{u(r.throw(g))}catch(y){l(y)}}function u(g){g.done?a(g.value):i(g.value).then(f,h)}u((r=r.apply(e,t||[])).next())})},wde=function(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(u){return function(g){return h([u,g])}}function h(u){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,u[0]&&(n=0)),n;)try{if(r=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){n.label=u[1];break}if(u[0]===6&&n.label<a[1]){n.label=a[1],a=u;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(u);break}a[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(g){u=[6,g],i=0}finally{r=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},QO=(function(){function e(){}return e.hasPermissions=function(){return bde(this,void 0,void 0,function(){var t,n,r,i;return wde(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(t=a.sent(),n=0,r=t;n<r.length;n++)if(i=r[n],i.kind==="videoinput"&&i.label)return[2,!0];return[2,!1]}})})},e})(),ol=(function(){function e(t){this.supportedScanTypes=this.validateAndReturnScanTypes(t)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var t=0,n=this.supportedScanTypes;t<n.length;t++){var r=n[t];if(e.isCameraScanType(r))return!0}return!1},e.isCameraScanType=function(t){return t===wl.SCAN_TYPE_CAMERA},e.isFileScanType=function(t){return t===wl.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(t){if(!t||t.length===0)return qa.DEFAULT_SUPPORTED_SCAN_TYPE;var n=qa.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(t.length>n)throw"Max ".concat(n," values expected for ")+"supportedScanTypes";for(var r=0,i=t;r<i.length;r++){var a=i[r];if(!qa.DEFAULT_SUPPORTED_SCAN_TYPE.includes(a))throw"Unsupported scan type ".concat(a)}return t},e})(),Qi=(function(){function e(){}return e.ALL_ELEMENT_CLASS="html5-qrcode-element",e.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",e.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",e.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",e.TORCH_BUTTON_ID="html5-qrcode-button-torch",e.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",e.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",e.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",e.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",e.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",e.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",e})(),to=(function(){function e(){}return e.createElement=function(t,n){var r=document.createElement(t);return r.id=n,r.classList.add(Qi.ALL_ELEMENT_CLASS),t==="button"&&r.setAttribute("type","button"),r},e})(),Vj=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function f(g){try{u(r.next(g))}catch(y){l(y)}}function h(g){try{u(r.throw(g))}catch(y){l(y)}}function u(g){g.done?a(g.value):i(g.value).then(f,h)}u((r=r.apply(e,t||[])).next())})},qj=function(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(u){return function(g){return h([u,g])}}function h(u){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,u[0]&&(n=0)),n;)try{if(r=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){n.label=u[1];break}if(u[0]===6&&n.label<a[1]){n.label=a[1],a=u;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(u);break}a[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(g){u=[6,g],i=0}finally{r=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},e3=(function(){function e(t,n,r){this.isTorchOn=!1,this.torchCapability=t,this.buttonController=n,this.onTorchActionFailureCallback=r}return e.prototype.isTorchEnabled=function(){return this.isTorchOn},e.prototype.flipState=function(){return Vj(this,void 0,void 0,function(){var t,n;return qj(this,function(r){switch(r.label){case 0:this.buttonController.disable(),t=!this.isTorchOn,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.torchCapability.apply(t)];case 2:return r.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),t),[3,4];case 3:return n=r.sent(),this.propagateFailure(t,n),this.buttonController.enable(),[3,4];case 4:return[2]}})})},e.prototype.updateUiBasedOnLatestSettings=function(t,n){t===n?(this.buttonController.setText(n?pn.torchOffButton():pn.torchOnButton()),this.isTorchOn=n):this.propagateFailure(n),this.buttonController.enable()},e.prototype.propagateFailure=function(t,n){var r=t?pn.torchOnFailedMessage():pn.torchOffFailedMessage();n&&(r+="; Error = "+n),this.onTorchActionFailureCallback(r)},e.prototype.reset=function(){this.isTorchOn=!1},e})(),Ede=(function(){function e(t,n){this.onTorchActionFailureCallback=n,this.torchButton=to.createElement("button",Qi.TORCH_BUTTON_ID),this.torchController=new e3(t,this,n)}return e.prototype.render=function(t,n){var r=this;this.torchButton.innerText=pn.torchOnButton(),this.torchButton.style.display=n.display,this.torchButton.style.marginLeft=n.marginLeft;var i=this;this.torchButton.addEventListener("click",function(a){return Vj(r,void 0,void 0,function(){return qj(this,function(l){switch(l.label){case 0:return[4,i.torchController.flipState()];case 1:return l.sent(),i.torchController.isTorchEnabled()?(i.torchButton.classList.remove(Qi.TORCH_BUTTON_CLASS_TORCH_OFF),i.torchButton.classList.add(Qi.TORCH_BUTTON_CLASS_TORCH_ON)):(i.torchButton.classList.remove(Qi.TORCH_BUTTON_CLASS_TORCH_ON),i.torchButton.classList.add(Qi.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),t.appendChild(this.torchButton)},e.prototype.updateTorchCapability=function(t){this.torchController=new e3(t,this,this.onTorchActionFailureCallback)},e.prototype.getTorchButton=function(){return this.torchButton},e.prototype.hide=function(){this.torchButton.style.display="none"},e.prototype.show=function(){this.torchButton.style.display="inline-block"},e.prototype.disable=function(){this.torchButton.disabled=!0},e.prototype.enable=function(){this.torchButton.disabled=!1},e.prototype.setText=function(t){this.torchButton.innerText=t},e.prototype.reset=function(){this.torchButton.innerText=pn.torchOnButton(),this.torchController.reset()},e.create=function(t,n,r,i){var a=new e(n,i);return a.render(t,r),a},e})(),Sde=(function(){function e(t,n,r){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=n?"block":"none",t.appendChild(this.fileBasedScanRegion);var i=document.createElement("label");i.setAttribute("for",this.getFileScanInputId()),i.style.display="inline-block",this.fileBasedScanRegion.appendChild(i),this.fileSelectionButton=to.createElement("button",Qi.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(f){i.click()}),i.append(this.fileSelectionButton),this.fileScanInput=to.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",i.appendChild(this.fileScanInput);var a=this;this.fileScanInput.addEventListener("change",function(f){if(!(f==null||f.target==null)){var h=f.target;if(!(h.files&&h.files.length===0)){var u=h.files,g=u[0],y=g.name;a.setImageNameToButton(y),r(g)}}});var l=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(l),this.fileBasedScanRegion.addEventListener("dragenter",function(f){a.fileBasedScanRegion.style.border=a.fileBasedScanRegionActiveBorder(),f.stopPropagation(),f.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(f){a.fileBasedScanRegion.style.border=a.fileBasedScanRegionDefaultBorder(),f.stopPropagation(),f.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(f){a.fileBasedScanRegion.style.border=a.fileBasedScanRegionActiveBorder(),f.stopPropagation(),f.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(f){f.stopPropagation(),f.preventDefault(),a.fileBasedScanRegion.style.border=a.fileBasedScanRegionDefaultBorder();var h=f.dataTransfer;if(h){var u=h.files;if(!u||u.length===0)return;for(var g=!1,y=0;y<u.length;++y){var E=u.item(y);if(E){var C=/image.*/;if(E.type.match(C)){g=!0;var I=E.name;a.setImageNameToButton(I),r(E),l.innerText=pn.dragAndDropMessage();break}}}g||(l.innerText=pn.dragAndDropMessageOnlyImages())}})}return e.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},e.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},e.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},e.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},e.prototype.createFileBasedScanRegion=function(){var t=document.createElement("div");return t.style.textAlign="center",t.style.margin="auto",t.style.width="80%",t.style.maxWidth="600px",t.style.border=this.fileBasedScanRegionDefaultBorder(),t.style.padding="10px",t.style.marginBottom="10px",t},e.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},e.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},e.prototype.createDragAndDropMessage=function(){var t=document.createElement("div");return t.innerText=pn.dragAndDropMessage(),t.style.fontWeight="400",t},e.prototype.setImageNameToButton=function(t){var n=20;if(t.length>n){var r=t.substring(0,8),i=t.length,a=t.substring(i-8,i);t="".concat(r,"....").concat(a)}var l=pn.fileSelectionChooseAnother()+" - "+t;this.fileSelectionButton.innerText=l},e.prototype.setInitialValueToButton=function(){var t=pn.fileSelectionChooseImage()+" - "+pn.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=t},e.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},e.create=function(t,n,r){var i=new e(t,n,r);return i},e})(),Ade=(function(){function e(t){this.selectElement=to.createElement("select",Qi.CAMERA_SELECTION_SELECT_ID),this.cameras=t,this.options=[]}return e.prototype.render=function(t){var n=document.createElement("span");n.style.marginRight="10px";var r=this.cameras.length;if(r===0)throw new Error("No cameras found");if(r===1)n.style.display="none";else{var i=pn.selectCamera();n.innerText="".concat(i," (").concat(this.cameras.length,")  ")}for(var a=1,l=0,f=this.cameras;l<f.length;l++){var h=f[l],u=h.id,g=h.label==null?u:h.label;(!g||g==="")&&(g=[pn.anonymousCameraPrefix(),a++].join(" "));var y=document.createElement("option");y.value=u,y.innerText=g,this.options.push(y),this.selectElement.appendChild(y)}n.appendChild(this.selectElement),t.appendChild(n)},e.prototype.disable=function(){this.selectElement.disabled=!0},e.prototype.isDisabled=function(){return this.selectElement.disabled===!0},e.prototype.enable=function(){this.selectElement.disabled=!1},e.prototype.getValue=function(){return this.selectElement.value},e.prototype.hasValue=function(t){for(var n=0,r=this.options;n<r.length;n++){var i=r[n];if(i.value===t)return!0}return!1},e.prototype.setValue=function(t){if(!this.hasValue(t))throw new Error("".concat(t," is not present in the camera list."));this.selectElement.value=t},e.prototype.hasSingleItem=function(){return this.cameras.length===1},e.prototype.numCameras=function(){return this.cameras.length},e.create=function(t,n){var r=new e(n);return r.render(t),r},e})(),Cde=(function(){function e(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=to.createElement("input",Qi.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return e.prototype.render=function(t,n){this.zoomElementContainer.style.display=n?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",t.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var r=pn.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(r),this.rangeText.style.marginRight="10px";var i=this;this.rangeInput.addEventListener("input",function(){return i.onValueChange()}),this.rangeInput.addEventListener("change",function(){return i.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},e.prototype.onValueChange=function(){var t=pn.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(t),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},e.prototype.setValues=function(t,n,r,i){this.rangeInput.min=t.toString(),this.rangeInput.max=n.toString(),this.rangeInput.step=i.toString(),this.rangeInput.value=r.toString(),this.onValueChange()},e.prototype.show=function(){this.zoomElementContainer.style.display="block"},e.prototype.hide=function(){this.zoomElementContainer.style.display="none"},e.prototype.setOnCameraZoomValueChangeCallback=function(t){this.onChangeCallback=t},e.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},e.create=function(t,n){var r=new e;return r.render(t,n),r},e})(),Ki;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Ki||(Ki={}));function Nde(e){return{fps:e.fps,qrbox:e.qrbox,aspectRatio:e.aspectRatio,disableFlip:e.disableFlip,videoConstraints:e.videoConstraints}}function _de(e,t){return{formatsToSupport:e.formatsToSupport,useBarCodeDetectorIfSupported:e.useBarCodeDetectorIfSupported,experimentalFeatures:e.experimentalFeatures,verbose:t}}var Tde=(function(){function e(t,n,r){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=t,this.config=this.createConfig(n),this.verbose=r===!0,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.scanTypeSelector=new ol(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new Hj(this.verbose),this.persistedDataManager=new gde,n.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return e.prototype.render=function(t,n){var r=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(a,l){if(t)t(a,l);else{if(r.lastMatchFound===a)return;r.lastMatchFound=a,r.setHeaderMessage(pn.lastMatch(a),Ki.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(a,l){n&&n(a,l)};var i=document.getElementById(this.elementId);if(!i)throw"HTML Element with id=".concat(this.elementId," not found");i.innerHTML="",this.createBasicLayout(i),this.html5Qrcode=new XO(this.getScanRegionId(),_de(this.config,this.verbose))},e.prototype.pause=function(t){(ms(t)||t!==!0)&&(t=!1),this.getHtml5QrcodeOrFail().pause(t)},e.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},e.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},e.prototype.clear=function(){var t=this,n=function(){var r=document.getElementById(t.elementId);r&&(r.innerHTML="",t.resetBasicLayout(r))};return this.html5Qrcode?new Promise(function(r,i){if(!t.html5Qrcode){r();return}t.html5Qrcode.isScanning?t.html5Qrcode.stop().then(function(a){if(!t.html5Qrcode){r();return}t.html5Qrcode.clear(),n(),r()}).catch(function(a){t.verbose&&t.logger.logError("Unable to stop qrcode scanner",a),i(a)}):(t.html5Qrcode.clear(),n(),r())}):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},e.prototype.applyVideoConstraints=function(t){return this.getHtml5QrcodeOrFail().applyVideoConstraints(t)},e.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},e.prototype.createConfig=function(t){return t?(t.fps||(t.fps=qa.SCAN_DEFAULT_FPS),t.rememberLastUsedCamera!==!qa.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(t.rememberLastUsedCamera=qa.DEFAULT_REMEMBER_LAST_CAMERA_USED),t.supportedScanTypes||(t.supportedScanTypes=qa.DEFAULT_SUPPORTED_SCAN_TYPE),t):{fps:qa.SCAN_DEFAULT_FPS,rememberLastUsedCamera:qa.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:qa.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(t){t.style.position="relative",t.style.padding="0px",t.style.border="1px solid silver",this.createHeader(t);var n=document.createElement("div"),r=this.getScanRegionId();n.id=r,n.style.width="100%",n.style.minHeight="100px",n.style.textAlign="center",t.appendChild(n),ol.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var i=document.createElement("div"),a=this.getDashboardId();i.id=a,i.style.width="100%",t.appendChild(i),this.setupInitialDashboard(i)},e.prototype.resetBasicLayout=function(t){t.style.border="none"},e.prototype.setupInitialDashboard=function(t){this.createSection(t),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(t){var n=document.createElement("div");n.style.textAlign="left",n.style.margin="0px",t.appendChild(n);var r=new vde;r.renderInto(n);var i=document.createElement("div");i.id=this.getHeaderMessageContainerId(),i.style.display="none",i.style.textAlign="center",i.style.fontSize="14px",i.style.padding="2px 10px",i.style.margin="4px",i.style.borderTop="1px solid #f6f6f6",n.appendChild(i)},e.prototype.createSection=function(t){var n=document.createElement("div");n.id=this.getDashboardSectionId(),n.style.width="100%",n.style.padding="10px 0px 10px 0px",n.style.textAlign="left",t.appendChild(n)},e.prototype.createCameraListUi=function(t,n,r){var i=this;i.showHideScanTypeSwapLink(!1),i.setHeaderMessage(pn.cameraPermissionRequesting());var a=function(){r||i.createPermissionButton(t,n)};XO.getCameras().then(function(l){i.persistedDataManager.setHasPermission(!0),i.showHideScanTypeSwapLink(!0),i.resetHeaderMessage(),l&&l.length>0?(t.removeChild(n),i.renderCameraSelection(l)):(i.setHeaderMessage(pn.noCameraFound(),Ki.STATUS_WARNING),a())}).catch(function(l){i.persistedDataManager.setHasPermission(!1),r?r.disabled=!1:a(),i.setHeaderMessage(l,Ki.STATUS_WARNING),i.showHideScanTypeSwapLink(!0)})},e.prototype.createPermissionButton=function(t,n){var r=this,i=to.createElement("button",this.getCameraPermissionButtonId());i.innerText=pn.cameraPermissionTitle(),i.addEventListener("click",function(){i.disabled=!0,r.createCameraListUi(t,n,i)}),n.appendChild(i)},e.prototype.createPermissionsUi=function(t,n){var r=this;if(ol.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){QO.hasPermissions().then(function(i){i?r.createCameraListUi(t,n):(r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(t,n))}).catch(function(i){r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(t,n)});return}this.createPermissionButton(t,n)},e.prototype.createSectionControlPanel=function(){var t=document.getElementById(this.getDashboardSectionId()),n=document.createElement("div");t.appendChild(n);var r=document.createElement("div");r.id=this.getDashboardSectionCameraScanRegionId(),r.style.display=ol.isCameraScanType(this.currentScanType)?"block":"none",n.appendChild(r);var i=document.createElement("div");i.style.textAlign="center",r.appendChild(i),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(r,i),this.renderFileScanUi(n)},e.prototype.renderFileScanUi=function(t){var n=ol.isFileScanType(this.currentScanType),r=this,i=function(a){if(!r.html5Qrcode)throw"html5Qrcode not defined";ol.isFileScanType(r.currentScanType)&&(r.setHeaderMessage(pn.loadingImage()),r.html5Qrcode.scanFileV2(a,!0).then(function(l){r.resetHeaderMessage(),r.qrCodeSuccessCallback(l.decodedText,l)}).catch(function(l){r.setHeaderMessage(l,Ki.STATUS_WARNING),r.qrCodeErrorCallback(l,Fj.createFrom(l))}))};this.fileSelectionUi=Sde.create(t,n,i)},e.prototype.renderCameraSelection=function(t){var n=this,r=this,i=document.getElementById(this.getDashboardSectionCameraScanRegionId());i.style.textAlign="center";var a=Cde.create(i,!1),l=function(M){var O=M.zoomFeature();if(O.isSupported()){a.setOnCameraZoomValueChangeCallback(function(U){O.apply(U)});var j=1;n.config.defaultZoomValueIfSupported&&(j=n.config.defaultZoomValueIfSupported),j=Vue(j,O.min(),O.max()),a.setValues(O.min(),O.max(),j,O.step()),a.show()}},f=Ade.create(i,t),h=document.createElement("span"),u=to.createElement("button",Qi.CAMERA_START_BUTTON_ID);u.innerText=pn.scanButtonStartScanningText(),h.appendChild(u);var g=to.createElement("button",Qi.CAMERA_STOP_BUTTON_ID);g.innerText=pn.scanButtonStopScanningText(),g.style.display="none",g.disabled=!0,h.appendChild(g);var y,E=function(M){if(!M.torchFeature().isSupported()){y&&y.hide();return}y?y.updateTorchCapability(M.torchFeature()):y=Ede.create(h,M.torchFeature(),{display:"none",marginLeft:"5px"},function(O){r.setHeaderMessage(O,Ki.STATUS_WARNING)}),y.show()};i.appendChild(h);var C=function(M){M||(u.style.display="none"),u.innerText=pn.scanButtonStartScanningText(),u.style.opacity="1",u.disabled=!1,M&&(u.style.display="inline-block")};if(u.addEventListener("click",function(M){u.innerText=pn.scanButtonScanningStarting(),f.disable(),u.disabled=!0,u.style.opacity="0.5",n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!1),r.resetHeaderMessage();var O=f.getValue();r.persistedDataManager.setLastUsedCameraId(O),r.html5Qrcode.start(O,Nde(r.config),r.qrCodeSuccessCallback,r.qrCodeErrorCallback).then(function(j){g.disabled=!1,g.style.display="inline-block",C(!1);var U=r.html5Qrcode.getRunningTrackCameraCapabilities();n.config.showTorchButtonIfSupported===!0&&E(U),n.config.showZoomSliderIfSupported===!0&&l(U)}).catch(function(j){r.showHideScanTypeSwapLink(!0),f.enable(),C(!0),r.setHeaderMessage(j,Ki.STATUS_WARNING)})}),f.hasSingleItem()&&u.click(),g.addEventListener("click",function(M){if(!r.html5Qrcode)throw"html5Qrcode not defined";g.disabled=!0,r.html5Qrcode.stop().then(function(O){n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!0),f.enable(),u.disabled=!1,g.style.display="none",u.style.display="inline-block",y&&(y.reset(),y.hide()),a.removeOnCameraZoomValueChangeCallback(),a.hide(),r.insertCameraScanImageToScanRegion()}).catch(function(O){g.disabled=!1,r.setHeaderMessage(O,Ki.STATUS_WARNING)})}),r.persistedDataManager.getLastUsedCameraId()){var I=r.persistedDataManager.getLastUsedCameraId();f.hasValue(I)?(f.setValue(I),u.click()):r.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var t=this,n=pn.textIfCameraScanSelected(),r=pn.textIfFileScanSelected(),i=document.getElementById(this.getDashboardSectionId()),a=document.createElement("div");a.style.textAlign="center";var l=to.createElement("span",this.getDashboardSectionSwapLinkId());l.style.textDecoration="underline",l.style.cursor="pointer",l.innerText=ol.isCameraScanType(this.currentScanType)?n:r,l.addEventListener("click",function(){if(!t.sectionSwapAllowed){t.verbose&&t.logger.logError("Section swap called when not allowed");return}t.resetHeaderMessage(),t.fileSelectionUi.resetValue(),t.sectionSwapAllowed=!1,ol.isCameraScanType(t.currentScanType)?(t.clearScanRegion(),t.getCameraScanRegion().style.display="none",t.fileSelectionUi.show(),l.innerText=r,t.currentScanType=wl.SCAN_TYPE_FILE,t.insertFileScanImageToScanRegion()):(t.clearScanRegion(),t.getCameraScanRegion().style.display="block",t.fileSelectionUi.hide(),l.innerText=n,t.currentScanType=wl.SCAN_TYPE_CAMERA,t.insertCameraScanImageToScanRegion(),t.startCameraScanIfPermissionExistsOnSwap()),t.sectionSwapAllowed=!0}),a.appendChild(l),i.appendChild(a)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var t=this,n=this;if(this.persistedDataManager.hasCameraPermissions()){QO.hasPermissions().then(function(r){if(r){var i=document.getElementById(n.getCameraPermissionButtonId());if(!i)throw t.logger.logError("Permission button not found, fail;"),"Permission button not found";i.click()}else n.persistedDataManager.setHasPermission(!1)}).catch(function(r){n.persistedDataManager.setHasPermission(!1)});return}},e.prototype.resetHeaderMessage=function(){var t=document.getElementById(this.getHeaderMessageContainerId());t.style.display="none"},e.prototype.setHeaderMessage=function(t,n){n||(n=Ki.STATUS_DEFAULT);var r=this.getHeaderMessageDiv();switch(r.innerText=t,r.style.display="block",n){case Ki.STATUS_SUCCESS:r.style.background="rgba(106, 175, 80, 0.26)",r.style.color="#477735";break;case Ki.STATUS_WARNING:r.style.background="rgba(203, 36, 49, 0.14)",r.style.color="#cb2431";break;case Ki.STATUS_DEFAULT:default:r.style.background="rgba(0, 0, 0, 0)",r.style.color="rgb(17, 17, 17)";break}},e.prototype.showHideScanTypeSwapLink=function(t){this.scanTypeSelector.hasMoreThanOneScanType()&&(t!==!0&&(t=!1),this.sectionSwapAllowed=t,this.getDashboardSectionSwapLink().style.display=t?"inline-block":"none")},e.prototype.insertCameraScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){n.innerHTML="<br>",n.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(t.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=hde,this.cameraScanImage.alt=pn.cameraScanAltText()},e.prototype.insertFileScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.fileScanImage){n.innerHTML="<br>",n.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(t.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=pde,this.fileScanImage.alt=pn.fileScanAltText()},e.prototype.clearScanRegion=function(){var t=document.getElementById(this.getScanRegionId());t.innerHTML=""},e.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},e.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},e.prototype.getDashboardSectionSwapLinkId=function(){return Qi.SCAN_TYPE_CHANGE_ANCHOR_ID},e.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},e.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},e.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},e.prototype.getCameraPermissionButtonId=function(){return Qi.CAMERA_PERMISSION_BUTTON_ID},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},e})();const no=e=>{const[t,n]=e.split(":").map(Number);return t*60+n},Ide=()=>{const e=new Date;return`${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`},Rde=(e,t)=>{const n=no(e);for(let r=0;r<t.length;r++){const i=t[r],a=no(i.start),l=no(i.end),f=a-30;if(n>=f&&n<=l)return{shift:i,index:r}}return null},Mde=(e,t)=>{const n=no(e),r=no(t);return Math.round((r-n)/60*100)/100},Ode=()=>{const{users:e,subscriptions:t,plans:n,recordAttendance:r,updateAttendance:i,attendance:a,currentUser:l,branches:f,showToast:h,bookings:u,updateBooking:g}=Un(),[y,E]=k.useState(null),[C,I]=k.useState(!1),[M]=k.useState(!0);k.useEffect(()=>{const G=new Tde("reader",{fps:10,qrbox:{width:250,height:250}},!1);G.render(V,z);function V(B){j(B),G.clear(),setTimeout(()=>{G.render(V,z)},3e3)}function z(B){}return()=>{G.clear()}},[]);const O=async G=>{const V=f.find(z=>z.id===G);if(V!=null&&V.gateWebhookUrl)try{console.log(`Sending OPEN signal to turnstile at ${V.gateWebhookUrl}`)}catch(z){console.error("Failed to trigger hardware gate:",z)}},j=async G=>{try{const V=JSON.parse(G);if(V.type==="CLASS_COMPLETION"&&V.bookingId){await U(V);return}}catch{}L(G)},U=async G=>{const{bookingId:V,trainerId:z,memberId:B,classType:J}=G,W=u.find(pe=>pe.id===V);if(!W){E({success:!1,message:"Class session not found."}),setTimeout(()=>E(null),3e3);return}if(W.status==="COMPLETED"){E({success:!1,message:"Class already marked as completed."}),setTimeout(()=>E(null),3e3);return}await g(V,{status:"COMPLETED"});const Z=e.find(pe=>pe.id===z),te=(Z==null?void 0:Z.commissionPercentage)||0;E({success:!0,message:`${J==="PT"?"PT Session":"Group Class"} Completed! ${te}% commission credited to trainer.`,subType:J}),h(`Class completed! Commission earned: ${te}%`,"success"),I(!0),await O(W.branchId),setTimeout(()=>{I(!1),E(null)},5e3)},L=G=>{if(!l){h("Please login to scan branch QR","error");return}const V=f.find(B=>B.id===G);if(!V){E({success:!1,message:"Invalid Branch QR Code Scanned."}),setTimeout(()=>E(null),3e3);return}const z=new Date().toISOString().split("T")[0];if(l.role!==Oe.MEMBER){const B=Ide(),J=l.shifts||[];if(J.length===0){E({success:!1,message:"No shifts assigned. Contact admin.",subType:l.role.replace("_"," ")}),setTimeout(()=>E(null),3e3);return}const W=Rde(B,J),Z=a.find(te=>te.userId===l.id&&te.date===z&&!te.timeOut);if(Z){const te=B,Y=Mde(Z.timeIn,te),pe=Z.shiftEnd?no(te)<no(Z.shiftEnd):!1;i(Z.id,{timeOut:te,hoursWorked:Y,isEarlyOut:pe}),E({success:!0,message:`Shift Ended: ${Y}h worked.`,subType:l.role.replace("_"," "),isCheckOut:!0})}else{if(!W){const Y=J.map(pe=>`${pe.start}-${pe.end}`).join(", ");E({success:!1,message:`Outside shift hours. Your shifts: ${Y}`,subType:l.role.replace("_"," ")}),setTimeout(()=>E(null),5e3);return}const te=no(B)>no(W.shift.start);r({id:`att-${Date.now()}`,userId:l.id,date:z,timeIn:B,branchId:V.id,type:"STAFF",shiftIndex:W.index,shiftStart:W.shift.start,shiftEnd:W.shift.end,isLate:te}),E({success:!0,message:`Shift ${W.index+1} Started: ${W.shift.start}-${W.shift.end}${te?" (Late)":""}`,subType:l.role.replace("_"," "),isCheckOut:!1})}I(!0),setTimeout(()=>{I(!1),E(null)},5e3);return}if(l.role===Oe.MEMBER){const J=t.filter(Y=>Y.memberId===l.id&&Y.status===Na.ACTIVE).find(Y=>{const pe=n.find(Te=>Te.id===Y.planId);return(pe==null?void 0:pe.type)===gt.GYM});if(!J){E({success:!1,message:"Access Denied: No active gym membership found."}),setTimeout(()=>E(null),3e3);return}const W=n.find(Y=>Y.id===J.planId),Z=l.branchId===V.id,te=(W==null?void 0:W.isMultiBranch)===!0;if(!Z&&!te){const Y=f.find(pe=>pe.id===l.branchId);E({success:!1,message:`Denied: Access restricted to ${(Y==null?void 0:Y.name)||"Home Branch"}.`,subType:W==null?void 0:W.name}),setTimeout(()=>E(null),4e3);return}r({id:`att-${Date.now()}`,userId:l.id,date:z,timeIn:new Date().toLocaleTimeString(),branchId:V.id,type:"MEMBER"}),E({success:!0,message:Z?`Welcome back to ${V.name}!`:`Guest Access at ${V.name} Approved.`,subType:W==null?void 0:W.name,isCheckOut:!1,isCrossBranch:!Z}),I(!0),O(V.id),setTimeout(()=>{I(!1),E(null)},4e3)}};return p.jsxs("div",{className:"max-w-2xl mx-auto space-y-8 animate-[fadeIn_0.5s_ease-out]",children:[p.jsxs("div",{className:"bg-white p-10 rounded-[3.5rem] shadow-2xl border-t-[12px] border-slate-900 relative overflow-hidden",children:[p.jsxs("div",{className:"absolute top-6 right-8 flex items-center gap-2",children:[p.jsx("span",{className:`w-2.5 h-2.5 rounded-full ${M?"bg-green-500 animate-pulse":"bg-red-500"}`}),p.jsx("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"SCANNER ACTIVE"})]}),p.jsxs("div",{className:"text-center mb-10",children:[p.jsx("h2",{className:"text-3xl font-black text-slate-900 uppercase tracking-tighter leading-none mb-2",children:(l==null?void 0:l.role)===Oe.MEMBER?"Scan QR Code":"Scan Branch QR"}),p.jsx("p",{className:"text-slate-400 font-bold uppercase text-[10px] tracking-[0.3em]",children:(l==null?void 0:l.role)===Oe.MEMBER?"Scan branch QR to enter or class QR to complete":(l==null?void 0:l.role)===Oe.TRAINER?"Scan branch QR for attendance":"Record your attendance instantly"})]}),p.jsxs("div",{className:"relative mb-10",children:[p.jsx("div",{id:"reader",className:"overflow-hidden rounded-[2.5rem] border-4 border-slate-50 shadow-inner"}),C&&p.jsxs("div",{className:"absolute inset-0 bg-green-500/90 backdrop-blur-sm flex flex-col items-center justify-center text-white z-10 rounded-[2.5rem]",children:[p.jsx("div",{className:"bg-white text-green-600 w-20 h-20 rounded-full flex items-center justify-center mb-4 shadow-2xl scale-110",children:p.jsx("i",{className:"fas fa-check text-3xl"})}),p.jsx("p",{className:"text-2xl font-black uppercase tracking-widest",children:"SUCCESS"}),p.jsx("p",{className:"text-sm font-bold opacity-80 uppercase tracking-tight mt-1",children:"Attendance Recorded"})]})]}),y&&!C&&p.jsxs("div",{className:`p-6 rounded-[2rem] border-2 flex items-center gap-4 animate-[slideUp_0.3s_ease-out] ${y.success?"bg-blue-50 border-blue-100 text-blue-700":"bg-red-50 border-red-100 text-red-700"}`,children:[p.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center shrink-0 ${y.success?"bg-blue-600":"bg-red-600"} text-white shadow-lg`,children:p.jsx("i",{className:`fas ${y.success?"fa-info-circle":"fa-exclamation-triangle"}`})}),p.jsxs("div",{children:[p.jsx("p",{className:"font-black text-xs uppercase tracking-widest mb-1",children:y.success?"STATUS":"ERROR"}),p.jsx("p",{className:"text-sm font-bold leading-tight",children:y.message})]})]})]}),p.jsxs("div",{className:"bg-slate-900 p-8 rounded-[3rem] text-white shadow-2xl relative overflow-hidden",children:[p.jsxs("h3",{className:"text-xs font-black uppercase tracking-[0.2em] mb-6 flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-shield-halved text-blue-500"})," Scanner Instructions"]}),p.jsx("div",{className:"space-y-6",children:(l==null?void 0:l.role)===Oe.MEMBER?p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"flex gap-4",children:[p.jsx("div",{className:"bg-white/10 w-10 h-10 rounded-xl flex items-center justify-center shrink-0",children:p.jsx("i",{className:"fas fa-door-open text-xs"})}),p.jsxs("div",{children:[p.jsx("p",{className:"text-[11px] font-black uppercase tracking-tight",children:"Branch Entry"}),p.jsx("p",{className:"text-[10px] text-slate-400 font-medium leading-tight",children:"Scan branch QR at entrance to check in and open the gate."})]})]}),p.jsxs("div",{className:"flex gap-4",children:[p.jsx("div",{className:"bg-white/10 w-10 h-10 rounded-xl flex items-center justify-center shrink-0",children:p.jsx("i",{className:"fas fa-check-circle text-xs"})}),p.jsxs("div",{children:[p.jsx("p",{className:"text-[11px] font-black uppercase tracking-tight",children:"Class Completion"}),p.jsx("p",{className:"text-[10px] text-slate-400 font-medium leading-tight",children:"After class, scan the QR shown by your trainer to mark attendance and complete the session."})]})]})]}):(l==null?void 0:l.role)===Oe.TRAINER?p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"flex gap-4",children:[p.jsx("div",{className:"bg-white/10 w-10 h-10 rounded-xl flex items-center justify-center shrink-0",children:p.jsx("i",{className:"fas fa-qrcode text-xs"})}),p.jsxs("div",{children:[p.jsx("p",{className:"text-[11px] font-black uppercase tracking-tight",children:"Mark Attendance"}),p.jsx("p",{className:"text-[10px] text-slate-400 font-medium leading-tight",children:"Scan branch QR to punch in/out for your shift."})]})]}),p.jsxs("div",{className:"flex gap-4",children:[p.jsx("div",{className:"bg-white/10 w-10 h-10 rounded-xl flex items-center justify-center shrink-0",children:p.jsx("i",{className:"fas fa-calendar-check text-xs"})}),p.jsxs("div",{children:[p.jsx("p",{className:"text-[11px] font-black uppercase tracking-tight",children:"Complete Classes"}),p.jsx("p",{className:"text-[10px] text-slate-400 font-medium leading-tight",children:"Use the Bookings page to generate QR codes for class completion."})]})]})]}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"flex gap-4",children:[p.jsx("div",{className:"bg-white/10 w-10 h-10 rounded-xl flex items-center justify-center shrink-0",children:p.jsx("i",{className:"fas fa-qrcode text-xs"})}),p.jsxs("div",{children:[p.jsx("p",{className:"text-[11px] font-black uppercase tracking-tight",children:"Point at Branch QR"}),p.jsx("p",{className:"text-[10px] text-slate-400 font-medium leading-tight",children:"Find the QR code displayed at the branch entrance and point your camera at it."})]})]}),p.jsxs("div",{className:"flex gap-4",children:[p.jsx("div",{className:"bg-white/10 w-10 h-10 rounded-xl flex items-center justify-center shrink-0",children:p.jsx("i",{className:"fas fa-bolt-lightning text-xs"})}),p.jsxs("div",{children:[p.jsx("p",{className:"text-[11px] font-black uppercase tracking-tight",children:"Automatic Recording"}),p.jsx("p",{className:"text-[10px] text-slate-400 font-medium leading-tight",children:"Once scanned, your attendance will be recorded automatically in our cloud database."})]})]})]})})]}),p.jsx("style",{children:`
        #reader { border: none !important; }
        #reader__dashboard_section_csr button {
          background: #0f172a;
          color: white;
          padding: 10px 20px;
          border-radius: 12px;
          font-weight: 800;
          text-transform: uppercase;
          font-size: 10px;
          letter-spacing: 0.1em;
          border: none;
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
      `})]})},$j=({sale:e,branch:t,member:n,plan:r,onClose:i})=>{const a=e.paymentMethod==="CASH",l=t.gstPercentage||18,f=a?e.amount:e.amount/(1+l/100),h=a?0:e.amount-f,u=h/2,g=h/2,y=l/2,E=I=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(I),C=I=>{I.preventDefault(),window.print()};return p.jsxs("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[200] flex items-center justify-center p-4 print-container",children:[p.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-[2rem] overflow-hidden shadow-2xl animate-[slideUp_0.3s_ease-out] flex flex-col max-h-[90vh] modal-content relative",children:[p.jsxs("div",{className:"bg-slate-900 px-8 py-4 text-white flex justify-between items-center shrink-0 no-print",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-file-invoice-dollar text-blue-400"}),p.jsxs("span",{className:"font-black uppercase tracking-widest text-xs",children:[a?"Payment Receipt":"Tax Invoice",": ",e.invoiceNo]})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsxs("button",{onClick:C,className:"bg-blue-600 hover:bg-blue-700 px-4 py-1.5 rounded-lg transition-all text-xs font-bold flex items-center gap-2 shadow-lg active:scale-95",children:[p.jsx("i",{className:"fas fa-print"})," PRINT"]}),p.jsx("button",{onClick:i,className:"bg-white/10 p-2 rounded-xl hover:bg-white/20 transition-colors",children:p.jsx("i",{className:"fas fa-times"})})]})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-12 bg-white text-slate-900 printable-area",id:"tax-invoice-document",children:[p.jsxs("div",{className:"flex justify-between items-start mb-12",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-3xl font-black tracking-tighter text-blue-600 mb-1",children:"IRONFLOW GYM"}),p.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Fitness Excellence Center"})]}),p.jsxs("div",{className:"text-right",children:[p.jsx("h3",{className:"text-xl font-black uppercase tracking-tight",children:"Tax Invoice"}),p.jsxs("p",{className:"text-xs font-bold text-slate-400 mt-1",children:["Invoice #: ",e.invoiceNo]}),p.jsxs("p",{className:"text-xs font-bold text-slate-400",children:["Date: ",e.date]})]})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-12 mb-12 border-t border-slate-100 pt-8",children:[p.jsxs("div",{children:[p.jsx("h4",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3",children:"Service Provider (From)"}),p.jsx("h4",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3",children:"Service Provider (From)"}),p.jsx("p",{className:"font-black text-sm uppercase",children:t.name}),p.jsx("p",{className:"text-xs text-slate-500 leading-relaxed mt-1",children:t.address}),!a&&p.jsxs("p",{className:"text-xs font-bold text-blue-600 mt-2",children:["GSTIN: ",t.gstin||"NOT SPECIFIED"]})]}),p.jsxs("div",{className:"text-right",children:[p.jsx("h4",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3",children:"Recipient (Bill To)"}),p.jsx("p",{className:"font-black text-sm uppercase",children:n.name}),p.jsx("p",{className:"text-xs text-slate-500 mt-1",children:n.email}),p.jsxs("p",{className:"text-xs font-bold text-slate-400 mt-1",children:["Member ID: ",n.memberId]})]})]}),p.jsxs("table",{className:"w-full mb-12",children:[p.jsx("thead",{className:"border-b-2 border-slate-900",children:p.jsxs("tr",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:[p.jsx("th",{className:"py-4 text-left",children:"Description"}),!a&&p.jsx("th",{className:"py-4 text-center",children:"HSN/SAC"}),p.jsx("th",{className:"py-4 text-right",children:a?"Amount":"Taxable Value"})]})}),p.jsx("tbody",{className:"divide-y divide-slate-100",children:p.jsxs("tr",{children:[p.jsxs("td",{className:"py-6",children:[p.jsx("p",{className:"font-black text-sm text-slate-900 uppercase",children:r.name}),p.jsxs("p",{className:"text-[10px] text-slate-400 font-bold mt-1",children:["Validity: ",r.durationDays," Days"]})]}),!a&&p.jsx("td",{className:"py-6 text-center text-xs font-bold text-slate-600",children:"9963"}),p.jsx("td",{className:"py-6 text-right font-bold text-slate-900",children:E(f)})]})})]}),p.jsx("div",{className:"flex justify-end mb-12",children:p.jsxs("div",{className:"w-64 space-y-3",children:[!a&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"flex justify-between text-xs font-bold text-slate-400",children:[p.jsx("span",{children:"Taxable Amount"}),p.jsx("span",{children:E(f)})]}),p.jsxs("div",{className:"flex justify-between text-xs font-bold text-slate-600",children:[p.jsxs("span",{children:["CGST (",y,"%)"]}),p.jsx("span",{children:E(u)})]}),p.jsxs("div",{className:"flex justify-between text-xs font-bold text-slate-600",children:[p.jsxs("span",{children:["SGST (",y,"%)"]}),p.jsx("span",{children:E(g)})]})]}),p.jsxs("div",{className:"flex justify-between pt-3 border-t-2 border-slate-900",children:[p.jsxs("span",{className:"text-sm font-black uppercase",children:["Total ",a?"Paid":"Invoice Value"]}),p.jsx("span",{className:"text-lg font-black text-blue-600",children:E(e.amount)})]})]})}),p.jsxs("div",{className:"grid grid-cols-2 gap-8 pt-8 border-t border-slate-100",children:[p.jsx("div",{className:"text-[10px] text-slate-400 font-medium leading-relaxed italic",children:a?"Note: This is a payment receipt for records. It is not a valid document for claiming Input Tax Credit.":`Note: This is a computer-generated tax invoice. No physical signature is required. Tax is calculated based on ${l}% GST rate configured for this branch.`}),p.jsxs("div",{className:"text-right",children:[p.jsx("div",{className:"w-32 h-12 border-b border-slate-300 ml-auto mb-2 opacity-20"}),p.jsx("p",{className:"text-[10px] font-black text-slate-900 uppercase",children:"Authorized Signatory"}),p.jsx("p",{className:"text-[9px] text-slate-400 font-bold",children:"IronFlow Systems Pvt Ltd"})]})]})]})]}),p.jsx("style",{children:`
        @media print {
          @page { margin: 1cm; size: portrait; }
          body * { visibility: hidden !important; }
          .print-container, .print-container *, #tax-invoice-document, #tax-invoice-document * { visibility: visible !important; }
          .no-print { display: none !important; }
          .print-container {
            position: fixed !important;
            left: 0 !important;
            top: 0 !important;
            width: 100% !important;
            height: 100% !important;
            background: white !important;
            z-index: 9999 !important;
            padding: 0 !important;
            margin: 0 !important;
            display: block !important;
          }
          .modal-content {
            position: absolute !important;
            top: 0 !important;
            left: 0 !important;
            width: 100% !important;
            max-width: none !important;
            box-shadow: none !important;
            border: none !important;
            height: auto !important;
            max-height: none !important;
          }
          .printable-area {
            overflow: visible !important;
            height: auto !important;
            padding: 0 !important;
          }
        }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
      `})]})},Dde=p.jsxs("div",{className:"prose prose-slate max-w-none space-y-6 text-sm text-slate-600 leading-relaxed font-medium",children:[p.jsxs("section",{children:[p.jsx("h4",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2",children:"1. Health and Safety Disclaimer"}),p.jsx("p",{children:"By using IronFlow facilities, you acknowledge that physical exercise carries inherent risks. You represent that you are in good physical condition and have no medical reason that would prevent you from using the equipment. Always consult a physician before starting a new program."})]}),p.jsxs("section",{children:[p.jsx("h4",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2",children:"2. AI Coaching and Personal Data"}),p.jsx("p",{children:'The "Smart AI Coach" utilizes Google Gemini. AI-generated workouts are for informational purposes only. You are responsible for executing exercises with proper form. IronFlow logs metrics (weight, goals) to provide a personalized experience.'})]}),p.jsxs("section",{children:[p.jsx("h4",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2",children:"3. Membership Rules"}),p.jsx("p",{children:"Your unique QR Gate Key (IF-ID) is non-transferable. Sharing credentials results in immediate suspension. Members must follow gym etiquette and re-rack weights after use."})]}),p.jsxs("section",{children:[p.jsx("h4",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2",children:"4. Liability Waiver"}),p.jsx("p",{children:"IronFlow Gym shall not be liable for any injury, loss, or damage to person or property arising out of the use of gym facilities or participation in training sessions."})]})]}),kde=()=>{const{currentUser:e,subscriptions:t,plans:n,bookings:r,addFeedback:i,feedback:a,showToast:l,updateUser:f,sales:h,branches:u,askGemini:g,metrics:y,addMetric:E,offers:C,users:I}=Un(),[M,O]=k.useState("OVERVIEW"),[j,U]=k.useState("SUGGESTION"),[L,G]=k.useState(""),[V,z]=k.useState(!1),[B,J]=k.useState(null),[W,Z]=k.useState(""),[te,Y]=k.useState(""),[pe,Te]=k.useState(!1),[le,de]=k.useState("FAT_LOSS"),[ge,De]=k.useState("NEWBIE"),[we,$e]=k.useState(1),[ne,re]=k.useState(null),[he,se]=k.useState(!1),[ke,ie]=k.useState(""),[ue,qe]=k.useState(!1),[me,Je]=k.useState(!1);if(!e||e.role!=="MEMBER")return p.jsx("div",{className:"p-8 text-center text-red-500 font-bold",children:"Access restricted to members only."});const Qe=u.find(Ke=>Ke.id===e.branchId),Ue=(Qe==null?void 0:Qe.equipment)||"Bodyweight exercises only.",ft=()=>{if(!me){l("Please confirm your agreement by checking the box.","error");return}f(e.id,{hasAcceptedTerms:!0}),l("Agreement Signed. Welcome to IronFlow Portal!","success")},Et=Ke=>{const{scrollTop:_t,scrollHeight:Br,clientHeight:Ur}=Ke.currentTarget;_t+Ur>=Br-20&&qe(!0)},jt=C.filter(Ke=>Ke.isActive&&(Ke.branchId==="GLOBAL"||Ke.branchId===e.branchId));if(!e.hasAcceptedTerms)return p.jsx("div",{className:"max-w-4xl mx-auto py-8 px-2 animate-[fadeIn_0.5s_ease-out]",children:p.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-2xl border border-slate-100 overflow-hidden",children:[p.jsxs("div",{className:"bg-slate-900 p-8 text-white",children:[p.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[p.jsx("div",{className:"bg-blue-600 p-3 rounded-2xl shrink-0",children:p.jsx("i",{className:"fas fa-file-contract text-xl md:text-2xl"})}),p.jsx("h2",{className:"text-xl md:text-3xl font-black uppercase tracking-tight",children:"Portal Activation"})]}),p.jsx("p",{className:"text-slate-400 text-xs md:text-sm font-medium",children:"Review and sign the membership agreement to proceed."})]}),p.jsx("div",{className:"p-6 md:p-10 max-h-[350px] overflow-y-auto bg-slate-50/50 border-b border-slate-100",onScroll:Et,children:Dde}),p.jsx("div",{className:"p-8 md:p-10 bg-white",children:p.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[p.jsxs("label",{className:"flex items-center gap-4 cursor-pointer group",children:[p.jsx("input",{type:"checkbox",className:"w-6 h-6 rounded-lg border-2 border-slate-200 text-blue-600 transition-all cursor-pointer shrink-0",checked:me,onChange:Ke=>Je(Ke.target.checked)}),p.jsx("span",{className:"text-xs md:text-sm font-bold text-slate-700 group-hover:text-slate-900 transition-colors leading-tight",children:"I accept the terms and liability waiver"})]}),p.jsx("button",{onClick:ft,className:`w-full md:w-auto px-12 py-4 rounded-2xl font-black text-xs md:text-sm uppercase tracking-widest transition-all shadow-xl ${me?"bg-blue-600 text-white hover:bg-blue-700 shadow-blue-100":"bg-slate-100 text-slate-400 cursor-not-allowed"}`,children:"ACTIVATE"})]})})]})});const gn=t.filter(Ke=>Ke.memberId===e.id),nn=h.filter(Ke=>Ke.memberId===e.id),Ft=y.filter(Ke=>Ke.memberId===e.id),Rt=async()=>{if(!W.trim())return;Te(!0);const Ke=`User: ${e.name}. Branch: ${Qe==null?void 0:Qe.name}. Available Equipment: ${Ue}.`,_t=await g(`${Ke}
User question: ${W}`);Y(_t),Te(!1)},sa=Ke=>{Ke.preventDefault(),ke&&(E({id:`m-${Date.now()}`,memberId:e.id,date:new Date().toISOString().split("T")[0],weight:Number(ke)}),ie(""),l("Weight Logged!","success"))},Ze=Ke=>{if(Ke.preventDefault(),!L.trim())return;z(!0);const _t={id:`fb-${Date.now()}`,memberId:e.id,branchId:e.branchId||"b1",type:j,content:L,status:"NEW",date:new Date().toISOString().split("T")[0]};setTimeout(()=>{i(_t),G(""),z(!1),l("Message Sent!","success")},800)},rs=Ke=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(Ke);return p.jsxs("div",{className:"max-w-6xl mx-auto space-y-6 md:space-y-8 animate-[fadeIn_0.5s_ease-out]",children:[jt.length>0&&p.jsx("div",{className:"relative overflow-hidden rounded-[2.5rem] bg-slate-950 shadow-2xl",children:p.jsxs("div",{className:"relative w-full min-h-[220px] md:min-h-0 aspect-[16/9] md:aspect-[21/7]",children:[p.jsx("img",{src:jt[0].imageUrl,className:"absolute inset-0 w-full h-full object-cover opacity-50 transition-transform duration-[4s]",alt:""}),p.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-slate-950 via-slate-950/70 to-transparent"}),p.jsxs("div",{className:"absolute inset-0 p-6 md:p-12 flex flex-col justify-center max-w-2xl",children:[p.jsx("div",{className:"mb-4",children:p.jsx("span",{className:"bg-blue-600 text-white text-[8px] md:text-[9px] font-black px-3 py-1 rounded-full uppercase tracking-widest",children:jt[0].branchId==="GLOBAL"?"GLOBAL ACCESS":"EXCLUSIVE"})}),p.jsx("h2",{className:"text-2xl md:text-5xl font-black text-white uppercase tracking-tighter leading-tight mb-4",children:jt[0].title}),p.jsx("p",{className:"text-slate-300 text-xs md:text-base font-medium leading-relaxed mb-6 line-clamp-2 opacity-90",children:jt[0].description}),p.jsx("button",{onClick:()=>l(`Offer Claimed: ${jt[0].title}`),className:"bg-white text-slate-950 w-fit px-8 py-4 rounded-xl font-black text-[10px] md:text-xs uppercase tracking-widest hover:bg-blue-50 transition-all active:scale-95 shadow-xl",children:jt[0].ctaText||"CLAIM NOW"})]})]})}),p.jsx("div",{className:"bg-slate-900 text-white rounded-[2.5rem] p-6 md:p-10 relative overflow-hidden shadow-xl",children:p.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row items-center gap-6 md:gap-8 text-center md:text-left",children:[p.jsx("img",{src:e.avatar,className:"w-20 h-20 md:w-24 md:h-24 rounded-2xl border-4 border-blue-500/30 shadow-2xl shrink-0",alt:""}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-2 mb-2",children:[p.jsx("h1",{className:"text-xl md:text-3xl font-black tracking-tight uppercase truncate",children:e.name}),p.jsx("span",{className:"w-fit mx-auto md:mx-0 bg-green-500/10 text-green-400 text-[8px] font-black px-2 py-0.5 rounded border border-green-500/20 uppercase tracking-widest",children:"ATHLETE"})]}),p.jsx("div",{className:"flex flex-wrap justify-center md:justify-start gap-2 md:gap-4 mt-4 overflow-x-auto scrollbar-hide pb-2",children:["OVERVIEW","COACH","METRICS","FEEDBACK"].map(Ke=>p.jsx("button",{onClick:()=>O(Ke),className:`px-4 py-2 rounded-xl text-[9px] font-black uppercase tracking-widest transition-all whitespace-nowrap ${M===Ke?"bg-blue-600 text-white shadow-lg":"bg-slate-800 text-slate-400 hover:text-white"}`,children:Ke},Ke))})]}),p.jsx("div",{className:"shrink-0 hidden sm:block",children:p.jsxs("div",{className:"bg-slate-800/50 p-5 rounded-2xl border border-white/5 text-center min-w-[100px]",children:[p.jsx("p",{className:"text-[9px] font-black text-blue-400 uppercase tracking-widest mb-1",children:"ID KEY"}),p.jsx("i",{className:"fas fa-qrcode text-2xl text-white mb-1"}),p.jsx("p",{className:"text-[10px] font-mono font-bold text-slate-300",children:e.memberId})]})})]})}),M==="OVERVIEW"&&p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 md:gap-8 animate-[slideUp_0.4s_ease-out]",children:[p.jsxs("div",{className:"lg:col-span-1 space-y-6 md:space-y-8",children:[p.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-[2.5rem] border shadow-sm",children:[p.jsxs("h3",{className:"text-sm md:text-base font-black text-slate-900 flex items-center gap-3 uppercase tracking-tight mb-6",children:[p.jsx("i",{className:"fas fa-ticket-alt text-blue-500"})," Active Subscriptions"]}),p.jsx("div",{className:"space-y-4",children:gn.map(Ke=>{const _t=n.find(Br=>Br.id===Ke.planId);return p.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-100",children:[p.jsxs("div",{className:"flex justify-between items-start mb-1",children:[p.jsx("h4",{className:"font-black text-slate-900 text-[10px] md:text-xs uppercase truncate max-w-[150px]",children:_t==null?void 0:_t.name}),p.jsx("span",{className:"bg-green-100 text-green-700 text-[8px] font-black px-2 py-0.5 rounded-md",children:"ACTIVE"})]}),p.jsxs("p",{className:"text-[9px] text-slate-400 font-bold uppercase tracking-widest",children:["Until: ",Ke.endDate]})]},Ke.id)})})]}),p.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-[2.5rem] border shadow-sm",children:[p.jsxs("h3",{className:"text-sm md:text-base font-black text-slate-900 flex items-center gap-3 uppercase tracking-tight mb-6",children:[p.jsx("i",{className:"fas fa-receipt text-green-500"})," Recent Billing"]}),p.jsx("div",{className:"space-y-3",children:nn.slice(0,3).map(Ke=>{var _t;return p.jsxs("div",{className:"flex items-center justify-between p-3 hover:bg-slate-50 rounded-xl transition-colors",children:[p.jsxs("div",{className:"min-w-0",children:[p.jsx("p",{className:"text-[10px] font-bold text-slate-700 truncate",children:((_t=n.find(Br=>Br.id===Ke.planId))==null?void 0:_t.name)||"Retail"}),p.jsx("p",{className:"text-[8px] text-slate-400 font-bold uppercase",children:Ke.date})]}),p.jsx("span",{className:"text-xs font-black text-slate-900 shrink-0 ml-2",children:rs(Ke.amount)})]},Ke.id)})})]})]}),p.jsx("div",{className:"lg:col-span-2 space-y-6",children:p.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-indigo-700 text-white p-6 md:p-10 rounded-[2.5rem] shadow-xl h-full",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[p.jsx("div",{className:"bg-white/20 p-3 rounded-2xl backdrop-blur-md shrink-0",children:p.jsx("i",{className:"fas fa-sparkles text-lg"})}),p.jsx("h3",{className:"text-lg md:text-xl font-black uppercase tracking-tight",children:"AI Coaching Desk"})]}),p.jsxs("div",{className:"space-y-4 h-full",children:[p.jsxs("div",{className:"relative",children:[p.jsx("textarea",{className:"w-full p-5 bg-white/10 border border-white/20 rounded-2xl outline-none focus:ring-4 focus:ring-white/10 text-sm font-medium placeholder:text-blue-200",rows:3,placeholder:"What should I train today with the equipment here?",value:W,onChange:Ke=>Z(Ke.target.value)}),p.jsx("button",{onClick:Rt,disabled:pe||!W.trim(),className:"absolute right-3 bottom-3 bg-white text-blue-600 px-5 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-widest shadow-lg hover:scale-105 active:scale-95 transition-all disabled:opacity-50",children:pe?p.jsx("i",{className:"fas fa-circle-notch fa-spin"}):"ASK COACH"})]}),te&&p.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 p-5 rounded-2xl animate-[fadeIn_0.5s_ease-out] overflow-y-auto max-h-[300px]",children:p.jsx("div",{className:"text-xs md:text-sm font-medium leading-relaxed whitespace-pre-wrap",children:te})})]})]})})]}),M==="COACH"&&p.jsx("div",{className:"animate-[slideUp_0.4s_ease-out]",children:(()=>{const Ke=gn.find(Br=>Br.status==="ACTIVE"&&Br.trainerId),_t=Ke?I.find(Br=>Br.id===Ke.trainerId):null;return _t?p.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] border border-slate-100 flex flex-col md:flex-row items-center gap-8 text-center md:text-left",children:[p.jsx("img",{src:_t.avatar,className:"w-32 h-32 rounded-3xl object-cover shadow-2xl",alt:""}),p.jsxs("div",{children:[p.jsx("span",{className:"bg-indigo-50 text-indigo-600 text-[9px] font-black px-3 py-1 rounded-full uppercase tracking-widest mb-3 inline-block",children:"Your Coach"}),p.jsx("h2",{className:"text-3xl font-black text-slate-900 uppercase tracking-tight mb-2",children:_t.name}),p.jsx("p",{className:"text-slate-500 font-medium text-sm mb-6",children:_t.email}),p.jsx("div",{className:"flex gap-4 justify-center md:justify-start",children:p.jsx("button",{className:"bg-indigo-600 text-white px-6 py-3 rounded-xl font-black text-xs uppercase tracking-widest shadow-lg shadow-indigo-100",children:"Message"})})]})]}):p.jsxs("div",{className:"bg-white p-10 rounded-[2.5rem] border border-slate-100 text-center",children:[p.jsx("div",{className:"w-20 h-20 bg-slate-50 rounded-full flex items-center justify-center mx-auto mb-4",children:p.jsx("i",{className:"fas fa-user-slash text-slate-300 text-3xl"})}),p.jsx("h3",{className:"text-xl font-black text-slate-900 uppercase tracking-tight mb-2",children:"No Personal Coach"}),p.jsx("p",{className:"text-slate-500 font-medium text-sm mb-6",children:"You currently do not have a dedicated personal trainer assigned."})]})})()}),M==="METRICS"&&p.jsxs("div",{className:"space-y-6 animate-[slideUp_0.4s_ease-out]",children:[p.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] border border-slate-100",children:[p.jsxs("h3",{className:"text-lg font-black text-slate-900 uppercase tracking-tight mb-6 flex items-center gap-3",children:[p.jsx("i",{className:"fas fa-weight-scale text-emerald-500"})," Log Progress"]}),p.jsxs("form",{onSubmit:sa,className:"flex gap-4",children:[p.jsx("input",{type:"number",placeholder:"Current Weight (kg)",className:"flex-1 p-4 bg-slate-50 border border-slate-100 rounded-2xl outline-none font-bold text-slate-900 focus:ring-2 focus:ring-emerald-500",value:ke,onChange:Ke=>ie(Ke.target.value)}),p.jsx("button",{type:"submit",className:"bg-emerald-500 text-white px-8 py-4 rounded-2xl font-black text-xs uppercase tracking-widest shadow-lg shadow-emerald-100 hover:bg-emerald-600 transition-all",children:"Log Entry"})]})]}),p.jsx("div",{className:"space-y-4",children:Ft.length===0?p.jsx("p",{className:"text-center text-slate-400 font-medium py-10",children:"No metrics logged yet. Start tracking today!"}):[...Ft].reverse().map(Ke=>p.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-slate-100 flex justify-between items-center",children:[p.jsx("span",{className:"font-bold text-slate-500 text-xs uppercase",children:Ke.date}),p.jsxs("span",{className:"font-black text-xl text-slate-900",children:[Ke.weight," ",p.jsx("span",{className:"text-sm text-slate-400",children:"kg"})]})]},Ke.id))})]}),M==="FEEDBACK"&&p.jsxs("div",{className:"space-y-6 animate-[slideUp_0.4s_ease-out]",children:[p.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] border border-slate-100",children:[p.jsxs("h3",{className:"text-lg font-black text-slate-900 uppercase tracking-tight mb-6 flex items-center gap-3",children:[p.jsx("i",{className:"fas fa-comment-dots text-blue-500"})," Share Your Voice"]}),p.jsxs("form",{onSubmit:Ze,className:"space-y-4",children:[p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{type:"button",onClick:()=>U("SUGGESTION"),className:`flex-1 py-3 rounded-xl font-black text-xs uppercase tracking-widest transition-all ${j==="SUGGESTION"?"bg-blue-600 text-white shadow-lg":"bg-slate-50 text-slate-400"}`,children:"Suggestion"}),p.jsx("button",{type:"button",onClick:()=>U("COMPLAINT"),className:`flex-1 py-3 rounded-xl font-black text-xs uppercase tracking-widest transition-all ${j==="COMPLAINT"?"bg-red-500 text-white shadow-lg":"bg-slate-50 text-slate-400"}`,children:"Issue Report"})]}),p.jsx("textarea",{className:"w-full p-5 bg-slate-50 border border-slate-100 rounded-2xl outline-none font-medium text-slate-700 focus:ring-2 focus:ring-blue-500 min-h-[120px]",placeholder:"Tell us how we can improve...",value:L,onChange:Ke=>G(Ke.target.value)}),p.jsx("button",{disabled:V||!L.trim(),className:"w-full py-4 bg-slate-900 text-white rounded-2xl font-black text-xs uppercase tracking-widest shadow-xl disabled:opacity-50",children:V?"Sending...":"Submit Feedback"})]})]}),p.jsx("div",{className:"space-y-4",children:a.filter(Ke=>Ke.memberId===e.id).length===0?p.jsx("p",{className:"text-center text-slate-400 font-medium py-10",children:"You haven't submitted any feedback yet."}):a.filter(Ke=>Ke.memberId===e.id).reverse().map(Ke=>p.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-100 space-y-3",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:`text-[9px] font-black px-2 py-1 rounded uppercase tracking-widest ${Ke.type==="SUGGESTION"?"bg-blue-50 text-blue-600":"bg-red-50 text-red-600"}`,children:Ke.type}),p.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase",children:Ke.date})]}),p.jsx("p",{className:"text-sm font-medium text-slate-700 leading-relaxed",children:Ke.content}),p.jsxs("div",{className:"pt-3 border-t border-slate-50 flex justify-between items-center",children:[p.jsx("span",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Status"}),p.jsx("span",{className:`text-[9px] font-black px-2 py-1 rounded uppercase tracking-widest ${Ke.status==="NEW"?"bg-yellow-50 text-yellow-600":Ke.status==="RESOLVED"?"bg-green-50 text-green-600":"bg-slate-100 text-slate-500"}`,children:Ke.status})]})]},Ke.id))})]}),B&&p.jsx($j,{sale:B,branch:u.find(Ke=>Ke.id===B.branchId),member:e,plan:n.find(Ke=>Ke.id===(B.planId||""))||{name:"Retail Store Item",price:B.amount,durationDays:0,branchId:B.branchId,isActive:!0,id:"",type:gt.GYM},onClose:()=>J(null)}),p.jsx("style",{children:`
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
      `})]})},t3=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e),Pde=()=>{const{sales:e,users:t,plans:n,branches:r,currentUser:i,generateTransactionCode:a}=Un(),[l,f]=k.useState(null),[h,u]=k.useState(null),[g,y]=k.useState(!1),E=(i==null?void 0:i.role)==="SUPER_ADMIN"?e:e.filter(U=>U.branchId===(i==null?void 0:i.branchId)),C=E.reduce((U,L)=>U+L.amount,0),I=()=>f(null),[M,O]=k.useState((i==null?void 0:i.branchId)||r[0].id),j=async()=>{y(!0);const U=await a(M);u(U),y(!1)};return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Revenue & Sales"}),p.jsx("p",{className:"text-gray-500",children:"Real-time financial tracking across branches"})]}),p.jsxs("div",{className:"flex items-center gap-4",children:[(i==null?void 0:i.role)==="SUPER_ADMIN"&&p.jsx("select",{className:"p-3 bg-gray-50 border border-gray-200 rounded-xl text-xs font-bold outline-none",value:M,onChange:U=>O(U.target.value),children:r.map(U=>p.jsx("option",{value:U.id,children:U.name},U.id))}),((i==null?void 0:i.role)===Oe.SUPER_ADMIN||(i==null?void 0:i.role)===Oe.BRANCH_ADMIN)&&p.jsxs("button",{onClick:j,disabled:g,className:"bg-indigo-600 text-white px-6 py-3 rounded-xl font-black text-[10px] uppercase tracking-widest shadow-xl shadow-indigo-100 hover:bg-indigo-700 transition-all flex items-center gap-2",children:[g?p.jsx("i",{className:"fas fa-circle-notch fa-spin"}):p.jsx("i",{className:"fas fa-key"}),"GENERATE PIN"]}),p.jsxs("div",{className:"bg-white px-6 py-3 rounded-2xl border shadow-sm",children:[p.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"Total Period Revenue"}),p.jsx("p",{className:"text-xl font-black text-green-600",children:t3(C)})]})]})]}),h&&p.jsxs("div",{className:"bg-indigo-900 p-6 rounded-[2rem] text-center text-white relative overflow-hidden animate-[slideUp_0.4s_ease-out] shadow-2xl",children:[p.jsx("p",{className:"text-indigo-300 font-bold text-xs uppercase tracking-widest mb-2",children:"One-Time Transaction PIN"}),p.jsx("div",{className:"text-5xl font-black tracking-[0.2em] font-mono text-white mb-2",children:h}),p.jsx("p",{className:"text-indigo-400 text-[10px] font-medium",children:"Share this code with staff to authorize a Cash/Card transaction. Valid for one use only."}),p.jsx("button",{onClick:()=>u(null),className:"absolute top-4 right-4 text-indigo-400 hover:text-white",children:p.jsx("i",{className:"fas fa-times"})})]}),p.jsx("div",{className:"bg-white rounded-3xl border shadow-sm overflow-hidden",children:p.jsxs("table",{className:"w-full text-left",children:[p.jsx("thead",{className:"bg-gray-50 border-b",children:p.jsxs("tr",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:[p.jsx("th",{className:"px-6 py-4",children:"Invoice No"}),p.jsx("th",{className:"px-6 py-4",children:"Member"}),p.jsx("th",{className:"px-6 py-4",children:"Plan / Service"}),p.jsx("th",{className:"px-6 py-4",children:"Branch"}),p.jsx("th",{className:"px-6 py-4 text-right",children:"Amount"}),p.jsx("th",{className:"px-6 py-4 text-center",children:"Action"})]})}),p.jsx("tbody",{className:"divide-y divide-gray-100",children:E.length===0?p.jsx("tr",{children:p.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-400 italic",children:"No sales data recorded yet."})}):[...E].reverse().map(U=>{const L=t.find(z=>z.id===U.memberId),G=n.find(z=>z.id===U.planId),V=r.find(z=>z.id===U.branchId);return p.jsxs("tr",{className:"hover:bg-blue-50/30 transition-colors",children:[p.jsx("td",{className:"px-6 py-4 font-mono text-xs text-blue-600 font-bold",children:U.invoiceNo}),p.jsxs("td",{className:"px-6 py-4",children:[p.jsx("div",{className:"font-bold text-gray-900",children:L==null?void 0:L.name}),p.jsx("div",{className:"text-[10px] text-gray-400",children:U.date})]}),p.jsxs("td",{className:"px-6 py-4",children:[p.jsx("div",{className:"text-sm font-medium text-gray-700",children:G==null?void 0:G.name}),p.jsx("div",{className:"text-[10px] text-blue-500 font-bold",children:U.paymentMethod})]}),p.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:V==null?void 0:V.name}),p.jsx("td",{className:"px-6 py-4 text-right",children:p.jsx("span",{className:"font-black text-gray-900",children:t3(U.amount)})}),p.jsx("td",{className:"px-6 py-4 text-center",children:p.jsx("button",{onClick:()=>f(U),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-xl transition-all",title:"View Invoice",children:p.jsx("i",{className:"fas fa-file-invoice"})})})]},U.id)})})]})}),l&&p.jsx($j,{sale:l,branch:r.find(U=>U.id===l.branchId),member:t.find(U=>U.id===l.memberId),plan:n.find(U=>U.id===l.planId),onClose:I})]})};var jde=Object.defineProperty,Em=Object.getOwnPropertySymbols,Yj=Object.prototype.hasOwnProperty,Wj=Object.prototype.propertyIsEnumerable,n3=(e,t,n)=>t in e?jde(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Zb=(e,t)=>{for(var n in t||(t={}))Yj.call(t,n)&&n3(e,n,t[n]);if(Em)for(var n of Em(t))Wj.call(t,n)&&n3(e,n,t[n]);return e},Qb=(e,t)=>{var n={};for(var r in e)Yj.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Em)for(var r of Em(e))t.indexOf(r)<0&&Wj.call(e,r)&&(n[r]=e[r]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Sc;(e=>{const t=class Vt{constructor(h,u,g,y){if(this.version=h,this.errorCorrectionLevel=u,this.modules=[],this.isFunction=[],h<Vt.MIN_VERSION||h>Vt.MAX_VERSION)throw new RangeError("Version value out of range");if(y<-1||y>7)throw new RangeError("Mask value out of range");this.size=h*4+17;let E=[];for(let I=0;I<this.size;I++)E.push(!1);for(let I=0;I<this.size;I++)this.modules.push(E.slice()),this.isFunction.push(E.slice());this.drawFunctionPatterns();const C=this.addEccAndInterleave(g);if(this.drawCodewords(C),y==-1){let I=1e9;for(let M=0;M<8;M++){this.applyMask(M),this.drawFormatBits(M);const O=this.getPenaltyScore();O<I&&(y=M,I=O),this.applyMask(M)}}i(0<=y&&y<=7),this.mask=y,this.applyMask(y),this.drawFormatBits(y),this.isFunction=[]}static encodeText(h,u){const g=e.QrSegment.makeSegments(h);return Vt.encodeSegments(g,u)}static encodeBinary(h,u){const g=e.QrSegment.makeBytes(h);return Vt.encodeSegments([g],u)}static encodeSegments(h,u,g=1,y=40,E=-1,C=!0){if(!(Vt.MIN_VERSION<=g&&g<=y&&y<=Vt.MAX_VERSION)||E<-1||E>7)throw new RangeError("Invalid value");let I,M;for(I=g;;I++){const L=Vt.getNumDataCodewords(I,u)*8,G=l.getTotalBits(h,I);if(G<=L){M=G;break}if(I>=y)throw new RangeError("Data too long")}for(const L of[Vt.Ecc.MEDIUM,Vt.Ecc.QUARTILE,Vt.Ecc.HIGH])C&&M<=Vt.getNumDataCodewords(I,L)*8&&(u=L);let O=[];for(const L of h){n(L.mode.modeBits,4,O),n(L.numChars,L.mode.numCharCountBits(I),O);for(const G of L.getData())O.push(G)}i(O.length==M);const j=Vt.getNumDataCodewords(I,u)*8;i(O.length<=j),n(0,Math.min(4,j-O.length),O),n(0,(8-O.length%8)%8,O),i(O.length%8==0);for(let L=236;O.length<j;L^=253)n(L,8,O);let U=[];for(;U.length*8<O.length;)U.push(0);return O.forEach((L,G)=>U[G>>>3]|=L<<7-(G&7)),new Vt(I,u,U,E)}getModule(h,u){return 0<=h&&h<this.size&&0<=u&&u<this.size&&this.modules[u][h]}getModules(){return this.modules}drawFunctionPatterns(){for(let g=0;g<this.size;g++)this.setFunctionModule(6,g,g%2==0),this.setFunctionModule(g,6,g%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const h=this.getAlignmentPatternPositions(),u=h.length;for(let g=0;g<u;g++)for(let y=0;y<u;y++)g==0&&y==0||g==0&&y==u-1||g==u-1&&y==0||this.drawAlignmentPattern(h[g],h[y]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(h){const u=this.errorCorrectionLevel.formatBits<<3|h;let g=u;for(let E=0;E<10;E++)g=g<<1^(g>>>9)*1335;const y=(u<<10|g)^21522;i(y>>>15==0);for(let E=0;E<=5;E++)this.setFunctionModule(8,E,r(y,E));this.setFunctionModule(8,7,r(y,6)),this.setFunctionModule(8,8,r(y,7)),this.setFunctionModule(7,8,r(y,8));for(let E=9;E<15;E++)this.setFunctionModule(14-E,8,r(y,E));for(let E=0;E<8;E++)this.setFunctionModule(this.size-1-E,8,r(y,E));for(let E=8;E<15;E++)this.setFunctionModule(8,this.size-15+E,r(y,E));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let h=this.version;for(let g=0;g<12;g++)h=h<<1^(h>>>11)*7973;const u=this.version<<12|h;i(u>>>18==0);for(let g=0;g<18;g++){const y=r(u,g),E=this.size-11+g%3,C=Math.floor(g/3);this.setFunctionModule(E,C,y),this.setFunctionModule(C,E,y)}}drawFinderPattern(h,u){for(let g=-4;g<=4;g++)for(let y=-4;y<=4;y++){const E=Math.max(Math.abs(y),Math.abs(g)),C=h+y,I=u+g;0<=C&&C<this.size&&0<=I&&I<this.size&&this.setFunctionModule(C,I,E!=2&&E!=4)}}drawAlignmentPattern(h,u){for(let g=-2;g<=2;g++)for(let y=-2;y<=2;y++)this.setFunctionModule(h+y,u+g,Math.max(Math.abs(y),Math.abs(g))!=1)}setFunctionModule(h,u,g){this.modules[u][h]=g,this.isFunction[u][h]=!0}addEccAndInterleave(h){const u=this.version,g=this.errorCorrectionLevel;if(h.length!=Vt.getNumDataCodewords(u,g))throw new RangeError("Invalid argument");const y=Vt.NUM_ERROR_CORRECTION_BLOCKS[g.ordinal][u],E=Vt.ECC_CODEWORDS_PER_BLOCK[g.ordinal][u],C=Math.floor(Vt.getNumRawDataModules(u)/8),I=y-C%y,M=Math.floor(C/y);let O=[];const j=Vt.reedSolomonComputeDivisor(E);for(let L=0,G=0;L<y;L++){let V=h.slice(G,G+M-E+(L<I?0:1));G+=V.length;const z=Vt.reedSolomonComputeRemainder(V,j);L<I&&V.push(0),O.push(V.concat(z))}let U=[];for(let L=0;L<O[0].length;L++)O.forEach((G,V)=>{(L!=M-E||V>=I)&&U.push(G[L])});return i(U.length==C),U}drawCodewords(h){if(h.length!=Math.floor(Vt.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let u=0;for(let g=this.size-1;g>=1;g-=2){g==6&&(g=5);for(let y=0;y<this.size;y++)for(let E=0;E<2;E++){const C=g-E,M=(g+1&2)==0?this.size-1-y:y;!this.isFunction[M][C]&&u<h.length*8&&(this.modules[M][C]=r(h[u>>>3],7-(u&7)),u++)}}i(u==h.length*8)}applyMask(h){if(h<0||h>7)throw new RangeError("Mask value out of range");for(let u=0;u<this.size;u++)for(let g=0;g<this.size;g++){let y;switch(h){case 0:y=(g+u)%2==0;break;case 1:y=u%2==0;break;case 2:y=g%3==0;break;case 3:y=(g+u)%3==0;break;case 4:y=(Math.floor(g/3)+Math.floor(u/2))%2==0;break;case 5:y=g*u%2+g*u%3==0;break;case 6:y=(g*u%2+g*u%3)%2==0;break;case 7:y=((g+u)%2+g*u%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[u][g]&&y&&(this.modules[u][g]=!this.modules[u][g])}}getPenaltyScore(){let h=0;for(let E=0;E<this.size;E++){let C=!1,I=0,M=[0,0,0,0,0,0,0];for(let O=0;O<this.size;O++)this.modules[E][O]==C?(I++,I==5?h+=Vt.PENALTY_N1:I>5&&h++):(this.finderPenaltyAddHistory(I,M),C||(h+=this.finderPenaltyCountPatterns(M)*Vt.PENALTY_N3),C=this.modules[E][O],I=1);h+=this.finderPenaltyTerminateAndCount(C,I,M)*Vt.PENALTY_N3}for(let E=0;E<this.size;E++){let C=!1,I=0,M=[0,0,0,0,0,0,0];for(let O=0;O<this.size;O++)this.modules[O][E]==C?(I++,I==5?h+=Vt.PENALTY_N1:I>5&&h++):(this.finderPenaltyAddHistory(I,M),C||(h+=this.finderPenaltyCountPatterns(M)*Vt.PENALTY_N3),C=this.modules[O][E],I=1);h+=this.finderPenaltyTerminateAndCount(C,I,M)*Vt.PENALTY_N3}for(let E=0;E<this.size-1;E++)for(let C=0;C<this.size-1;C++){const I=this.modules[E][C];I==this.modules[E][C+1]&&I==this.modules[E+1][C]&&I==this.modules[E+1][C+1]&&(h+=Vt.PENALTY_N2)}let u=0;for(const E of this.modules)u=E.reduce((C,I)=>C+(I?1:0),u);const g=this.size*this.size,y=Math.ceil(Math.abs(u*20-g*10)/g)-1;return i(0<=y&&y<=9),h+=y*Vt.PENALTY_N4,i(0<=h&&h<=2568888),h}getAlignmentPatternPositions(){if(this.version==1)return[];{const h=Math.floor(this.version/7)+2,u=this.version==32?26:Math.ceil((this.version*4+4)/(h*2-2))*2;let g=[6];for(let y=this.size-7;g.length<h;y-=u)g.splice(1,0,y);return g}}static getNumRawDataModules(h){if(h<Vt.MIN_VERSION||h>Vt.MAX_VERSION)throw new RangeError("Version number out of range");let u=(16*h+128)*h+64;if(h>=2){const g=Math.floor(h/7)+2;u-=(25*g-10)*g-55,h>=7&&(u-=36)}return i(208<=u&&u<=29648),u}static getNumDataCodewords(h,u){return Math.floor(Vt.getNumRawDataModules(h)/8)-Vt.ECC_CODEWORDS_PER_BLOCK[u.ordinal][h]*Vt.NUM_ERROR_CORRECTION_BLOCKS[u.ordinal][h]}static reedSolomonComputeDivisor(h){if(h<1||h>255)throw new RangeError("Degree out of range");let u=[];for(let y=0;y<h-1;y++)u.push(0);u.push(1);let g=1;for(let y=0;y<h;y++){for(let E=0;E<u.length;E++)u[E]=Vt.reedSolomonMultiply(u[E],g),E+1<u.length&&(u[E]^=u[E+1]);g=Vt.reedSolomonMultiply(g,2)}return u}static reedSolomonComputeRemainder(h,u){let g=u.map(y=>0);for(const y of h){const E=y^g.shift();g.push(0),u.forEach((C,I)=>g[I]^=Vt.reedSolomonMultiply(C,E))}return g}static reedSolomonMultiply(h,u){if(h>>>8||u>>>8)throw new RangeError("Byte out of range");let g=0;for(let y=7;y>=0;y--)g=g<<1^(g>>>7)*285,g^=(u>>>y&1)*h;return i(g>>>8==0),g}finderPenaltyCountPatterns(h){const u=h[1];i(u<=this.size*3);const g=u>0&&h[2]==u&&h[3]==u*3&&h[4]==u&&h[5]==u;return(g&&h[0]>=u*4&&h[6]>=u?1:0)+(g&&h[6]>=u*4&&h[0]>=u?1:0)}finderPenaltyTerminateAndCount(h,u,g){return h&&(this.finderPenaltyAddHistory(u,g),u=0),u+=this.size,this.finderPenaltyAddHistory(u,g),this.finderPenaltyCountPatterns(g)}finderPenaltyAddHistory(h,u){u[0]==0&&(h+=this.size),u.pop(),u.unshift(h)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;function n(f,h,u){if(h<0||h>31||f>>>h)throw new RangeError("Value out of range");for(let g=h-1;g>=0;g--)u.push(f>>>g&1)}function r(f,h){return(f>>>h&1)!=0}function i(f){if(!f)throw new Error("Assertion error")}const a=class tr{constructor(h,u,g){if(this.mode=h,this.numChars=u,this.bitData=g,u<0)throw new RangeError("Invalid argument");this.bitData=g.slice()}static makeBytes(h){let u=[];for(const g of h)n(g,8,u);return new tr(tr.Mode.BYTE,h.length,u)}static makeNumeric(h){if(!tr.isNumeric(h))throw new RangeError("String contains non-numeric characters");let u=[];for(let g=0;g<h.length;){const y=Math.min(h.length-g,3);n(parseInt(h.substring(g,g+y),10),y*3+1,u),g+=y}return new tr(tr.Mode.NUMERIC,h.length,u)}static makeAlphanumeric(h){if(!tr.isAlphanumeric(h))throw new RangeError("String contains unencodable characters in alphanumeric mode");let u=[],g;for(g=0;g+2<=h.length;g+=2){let y=tr.ALPHANUMERIC_CHARSET.indexOf(h.charAt(g))*45;y+=tr.ALPHANUMERIC_CHARSET.indexOf(h.charAt(g+1)),n(y,11,u)}return g<h.length&&n(tr.ALPHANUMERIC_CHARSET.indexOf(h.charAt(g)),6,u),new tr(tr.Mode.ALPHANUMERIC,h.length,u)}static makeSegments(h){return h==""?[]:tr.isNumeric(h)?[tr.makeNumeric(h)]:tr.isAlphanumeric(h)?[tr.makeAlphanumeric(h)]:[tr.makeBytes(tr.toUtf8ByteArray(h))]}static makeEci(h){let u=[];if(h<0)throw new RangeError("ECI assignment value out of range");if(h<128)n(h,8,u);else if(h<16384)n(2,2,u),n(h,14,u);else if(h<1e6)n(6,3,u),n(h,21,u);else throw new RangeError("ECI assignment value out of range");return new tr(tr.Mode.ECI,0,u)}static isNumeric(h){return tr.NUMERIC_REGEX.test(h)}static isAlphanumeric(h){return tr.ALPHANUMERIC_REGEX.test(h)}getData(){return this.bitData.slice()}static getTotalBits(h,u){let g=0;for(const y of h){const E=y.mode.numCharCountBits(u);if(y.numChars>=1<<E)return 1/0;g+=4+E+y.bitData.length}return g}static toUtf8ByteArray(h){h=encodeURI(h);let u=[];for(let g=0;g<h.length;g++)h.charAt(g)!="%"?u.push(h.charCodeAt(g)):(u.push(parseInt(h.substring(g+1,g+3),16)),g+=2);return u}};a.NUMERIC_REGEX=/^[0-9]*$/,a.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,a.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let l=a;e.QrSegment=a})(Sc||(Sc={}));(e=>{(t=>{const n=class{constructor(i,a){this.ordinal=i,this.formatBits=a}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),t.Ecc=n})(e.QrCode||(e.QrCode={}))})(Sc||(Sc={}));(e=>{(t=>{const n=class{constructor(i,a){this.modeBits=i,this.numBitsCharCount=a}numCharCountBits(i){return this.numBitsCharCount[Math.floor((i+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),t.Mode=n})(e.QrSegment||(e.QrSegment={}))})(Sc||(Sc={}));var Mu=Sc;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var Lde={L:Mu.QrCode.Ecc.LOW,M:Mu.QrCode.Ecc.MEDIUM,Q:Mu.QrCode.Ecc.QUARTILE,H:Mu.QrCode.Ecc.HIGH},Kj=128,Xj="L",Jj="#FFFFFF",Zj="#000000",Qj=!1,e6=1,Bde=4,Ude=0,Fde=.1;function t6(e,t=0){const n=[];return e.forEach(function(r,i){let a=null;r.forEach(function(l,f){if(!l&&a!==null){n.push(`M${a+t} ${i+t}h${f-a}v1H${a+t}z`),a=null;return}if(f===r.length-1){if(!l)return;a===null?n.push(`M${f+t},${i+t} h1v1H${f+t}z`):n.push(`M${a+t},${i+t} h${f+1-a}v1H${a+t}z`);return}l&&a===null&&(a=f)})}),n.join("")}function n6(e,t){return e.slice().map((n,r)=>r<t.y||r>=t.y+t.h?n:n.map((i,a)=>a<t.x||a>=t.x+t.w?i:!1))}function Hde(e,t,n,r){if(r==null)return null;const i=e.length+n*2,a=Math.floor(t*Fde),l=i/t,f=(r.width||a)*l,h=(r.height||a)*l,u=r.x==null?e.length/2-f/2:r.x*l,g=r.y==null?e.length/2-h/2:r.y*l,y=r.opacity==null?1:r.opacity;let E=null;if(r.excavate){let I=Math.floor(u),M=Math.floor(g),O=Math.ceil(f+u-I),j=Math.ceil(h+g-M);E={x:I,y:M,w:O,h:j}}const C=r.crossOrigin;return{x:u,y:g,h,w:f,excavation:E,opacity:y,crossOrigin:C}}function zde(e,t){return t!=null?Math.max(Math.floor(t),0):e?Bde:Ude}function r6({value:e,level:t,minVersion:n,includeMargin:r,marginSize:i,imageSettings:a,size:l,boostLevel:f}){let h=yt.useMemo(()=>{const I=(Array.isArray(e)?e:[e]).reduce((M,O)=>(M.push(...Mu.QrSegment.makeSegments(O)),M),[]);return Mu.QrCode.encodeSegments(I,Lde[t],n,void 0,void 0,f)},[e,t,n,f]);const{cells:u,margin:g,numCells:y,calculatedImageSettings:E}=yt.useMemo(()=>{let C=h.getModules();const I=zde(r,i),M=C.length+I*2,O=Hde(C,l,I,a);return{cells:C,margin:I,numCells:M,calculatedImageSettings:O}},[h,l,a,r,i]);return{qrcode:h,margin:g,cells:u,numCells:y,calculatedImageSettings:E}}var Gde=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),Vde=yt.forwardRef(function(t,n){const r=t,{value:i,size:a=Kj,level:l=Xj,bgColor:f=Jj,fgColor:h=Zj,includeMargin:u=Qj,minVersion:g=e6,boostLevel:y,marginSize:E,imageSettings:C}=r,M=Qb(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:O}=M,j=Qb(M,["style"]),U=C==null?void 0:C.src,L=yt.useRef(null),G=yt.useRef(null),V=yt.useCallback(Te=>{L.current=Te,typeof n=="function"?n(Te):n&&(n.current=Te)},[n]),[z,B]=yt.useState(!1),{margin:J,cells:W,numCells:Z,calculatedImageSettings:te}=r6({value:i,level:l,minVersion:g,boostLevel:y,includeMargin:u,marginSize:E,imageSettings:C,size:a});yt.useEffect(()=>{if(L.current!=null){const Te=L.current,le=Te.getContext("2d");if(!le)return;let de=W;const ge=G.current,De=te!=null&&ge!==null&&ge.complete&&ge.naturalHeight!==0&&ge.naturalWidth!==0;De&&te.excavation!=null&&(de=n6(W,te.excavation));const we=window.devicePixelRatio||1;Te.height=Te.width=a*we;const $e=a/Z*we;le.scale($e,$e),le.fillStyle=f,le.fillRect(0,0,Z,Z),le.fillStyle=h,Gde?le.fill(new Path2D(t6(de,J))):W.forEach(function(ne,re){ne.forEach(function(he,se){he&&le.fillRect(se+J,re+J,1,1)})}),te&&(le.globalAlpha=te.opacity),De&&le.drawImage(ge,te.x+J,te.y+J,te.w,te.h)}}),yt.useEffect(()=>{B(!1)},[U]);const Y=Zb({height:a,width:a},O);let pe=null;return U!=null&&(pe=yt.createElement("img",{src:U,key:U,style:{display:"none"},onLoad:()=>{B(!0)},ref:G,crossOrigin:te==null?void 0:te.crossOrigin})),yt.createElement(yt.Fragment,null,yt.createElement("canvas",Zb({style:Y,height:a,width:a,ref:V,role:"img"},j)),pe)});Vde.displayName="QRCodeCanvas";var xS=yt.forwardRef(function(t,n){const r=t,{value:i,size:a=Kj,level:l=Xj,bgColor:f=Jj,fgColor:h=Zj,includeMargin:u=Qj,minVersion:g=e6,boostLevel:y,title:E,marginSize:C,imageSettings:I}=r,M=Qb(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:O,cells:j,numCells:U,calculatedImageSettings:L}=r6({value:i,level:l,minVersion:g,boostLevel:y,includeMargin:u,marginSize:C,imageSettings:I,size:a});let G=j,V=null;I!=null&&L!=null&&(L.excavation!=null&&(G=n6(j,L.excavation)),V=yt.createElement("image",{href:I.src,height:L.h,width:L.w,x:L.x+O,y:L.y+O,preserveAspectRatio:"none",opacity:L.opacity,crossOrigin:L.crossOrigin}));const z=t6(G,O);return yt.createElement("svg",Zb({height:a,width:a,viewBox:`0 0 ${U} ${U}`,ref:n,role:"img"},M),!!E&&yt.createElement("title",null,E),yt.createElement("path",{fill:f,d:`M0,0 h${U}v${U}H0z`,shapeRendering:"crispEdges"}),yt.createElement("path",{fill:h,d:z,shapeRendering:"crispEdges"}),V)});xS.displayName="QRCodeSVG";const qde=()=>{const{branches:e,users:t,sales:n,addBranch:r,updateBranch:i,currentUser:a}=Un(),[l,f]=k.useState(!1),[h,u]=k.useState(!1),[g,y]=k.useState(null),[E,C]=k.useState(null),[I,M]=k.useState("");k.useEffect(()=>{if(!h||!g)return;const Z=()=>{const Y=Date.now(),pe=Math.random().toString(36).substring(2,10);M(`${g}|${Y}|${pe}`)};Z();const te=setInterval(Z,15e3);return()=>clearInterval(te)},[h,g]);const[O,j]=k.useState({name:"",address:"",phone:"",email:"",gstin:"",gstPercentage:18,gateWebhookUrl:"",paymentProvider:"RAZORPAY",paymentApiKey:"",paymentMerchantId:"",emailProvider:"SENDGRID",emailApiKey:"",emailFromAddress:"",smsProvider:"TWILIO",smsApiKey:"",smsSenderId:"",equipment:"",latitude:0,longitude:0,geofenceRadius:100}),U=Z=>{const te=t.filter(pe=>pe.branchId===Z&&pe.role==="MEMBER").length,Y=n.filter(pe=>pe.branchId===Z).reduce((pe,Te)=>pe+Te.amount,0);return{memberCount:te,revenue:Y}},L=()=>{C(null),j({name:"",address:"",phone:"",email:"",gstin:"",gstPercentage:18,gateWebhookUrl:"",paymentProvider:"RAZORPAY",paymentApiKey:"",paymentMerchantId:"",emailProvider:"SENDGRID",emailApiKey:"",emailFromAddress:"",smsProvider:"TWILIO",smsApiKey:"",smsSenderId:"",equipment:"",latitude:0,longitude:0,geofenceRadius:100}),f(!0)},G=Z=>{C(Z),j({name:Z.name,address:Z.address,phone:Z.phone,email:Z.email,gstin:Z.gstin||"",gstPercentage:Z.gstPercentage||18,gateWebhookUrl:Z.gateWebhookUrl||"",paymentProvider:Z.paymentProvider||"RAZORPAY",paymentApiKey:Z.paymentApiKey||"",paymentMerchantId:Z.paymentMerchantId||"",emailProvider:Z.emailProvider||"SENDGRID",emailApiKey:Z.emailApiKey||"",emailFromAddress:Z.emailFromAddress||"",smsProvider:Z.smsProvider||"TWILIO",smsApiKey:Z.smsApiKey||"",smsSenderId:Z.smsSenderId||"",equipment:Z.equipment||"",latitude:Z.latitude||0,longitude:Z.longitude||0,geofenceRadius:Z.geofenceRadius||100}),f(!0)},V=async Z=>{Z.preventDefault();try{E?await i(E.id,O):await r({id:`b-${Date.now()}`,...O}),f(!1)}catch(te){console.error("Submit error:",te),alert("Failed to save branch. Please try again.")}},z=e.find(Z=>Z.id===g),B=(()=>{switch(O.paymentProvider){case"RAZORPAY":return{secret:"Key ID (rzp_test_... or rzp_live_...)",key:"Key Secret (for backend, optional)"};case"STRIPE":return{secret:"Publishable Key (pk_...)",key:"Secret Key (sk_..., optional)"};case"PAYTM":return{secret:"Merchant ID (MID)",key:"Merchant Key (optional)"};default:return{secret:"Public Key / Key ID",key:"Secret Key (optional)"}}})(),J=(()=>{switch(O.emailProvider){case"SENDGRID":return{key:"SendGrid API Key (starts with SG...)",from:"Verified Sender Email"};case"MAILGUN":return{key:"Private API Key",from:"Sender Address (e.g. hello@mg.yourdomain.com)"};case"SMTP":return{key:"SMTP Password",from:"SMTP Username / Email"};default:return{key:"Email API Key / Password",from:"From Address (e.g. gym@branch.com)"}}})(),W=(()=>{switch(O.smsProvider){case"TWILIO":return{key:"Auth Token",sender:"Twilio Phone Number"};case"MSG91":return{key:"Auth Key",sender:"Sender ID (6 chars, e.g. IRNFLW)"};case"GUPSHUP":return{key:"API Key / Password",sender:"Sender ID / Mask"};default:return{key:"SMS API Key / Auth Token",sender:"Sender ID / From Number"}}})();return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Branch Network"}),p.jsx("p",{className:"text-gray-50",children:"Infrastructure & Multi-Channel Gateway Management"})]}),p.jsxs("button",{onClick:L,className:"bg-blue-600 text-white px-6 py-2 rounded-xl font-bold hover:bg-blue-700 transition-all flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-plus"})," NEW BRANCH"]})]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(Z=>{const te=U(Z.id);return p.jsxs("div",{className:"bg-white rounded-3xl border shadow-sm p-6 hover:shadow-xl transition-all group",children:[p.jsxs("div",{className:"flex justify-between items-start mb-4",children:[p.jsx("div",{className:"bg-blue-50 text-blue-600 w-12 h-12 rounded-2xl flex items-center justify-center",children:p.jsx("i",{className:"fas fa-building text-xl"})}),p.jsxs("div",{className:"flex flex-col items-end",children:[Z.latitude&&Z.longitude?p.jsxs("span",{className:"text-[10px] font-black text-emerald-500 bg-emerald-50 px-2 py-1 rounded mb-1 flex items-center gap-1",children:[p.jsx("i",{className:"fas fa-location-dot"})," GPS ACTIVE"]}):p.jsxs("span",{className:"text-[10px] font-black text-amber-500 bg-amber-50 px-2 py-1 rounded mb-1 flex items-center gap-1",children:[p.jsx("i",{className:"fas fa-location-cross"})," NO GPS"]}),p.jsx("span",{className:"text-[10px] font-black text-green-500 bg-green-50 px-2 py-1 rounded mb-1",children:"ONLINE"}),p.jsxs("div",{className:"flex gap-1",children:[p.jsx("span",{className:"text-[7px] font-black text-slate-400 bg-slate-100 px-1.5 py-0.5 rounded uppercase",children:Z.paymentProvider||"NO PAY"}),p.jsx("span",{className:"text-[7px] font-black text-slate-400 bg-slate-100 px-1.5 py-0.5 rounded uppercase",children:Z.emailProvider||"NO EMAIL"})]})]})]}),p.jsx("h3",{className:"text-xl font-bold text-gray-900",children:Z.name}),p.jsxs("p",{className:"text-xs text-gray-400 mb-6 line-clamp-1",children:[p.jsx("i",{className:"fas fa-map-marker-alt mr-1"})," ",Z.address]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-gray-50 mb-6",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:"Active Members"}),p.jsx("p",{className:"text-lg font-black text-gray-900",children:te.memberCount})]}),p.jsxs("div",{children:[p.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:"Total Revenue"}),p.jsxs("p",{className:"text-lg font-black text-blue-600",children:["",te.revenue.toLocaleString()]})]})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{onClick:()=>G(Z),className:"flex-1 py-3 bg-gray-50 text-gray-500 rounded-xl font-bold text-[10px] hover:bg-gray-100 transition-colors uppercase tracking-widest",children:"Configure"}),p.jsxs("button",{onClick:()=>{y(Z.id),u(!0)},className:"px-4 py-3 bg-slate-900 text-white rounded-xl font-bold text-[10px] hover:bg-black transition-colors uppercase tracking-widest flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-qrcode"})," Check-in QR"]})]})]},Z.id)})}),h&&z&&p.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:p.jsxs("div",{className:"bg-white rounded-[3rem] w-full max-w-md p-10 shadow-2xl animate-[slideUp_0.3s_ease-out] text-center",children:[p.jsx("div",{className:"bg-slate-50 w-20 h-20 rounded-3xl flex items-center justify-center mx-auto mb-6",children:p.jsx("i",{className:"fas fa-qrcode text-3xl text-slate-900"})}),p.jsx("h3",{className:"text-2xl font-black text-slate-900 uppercase tracking-tight mb-2",children:"Gate Entry QR"}),p.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase tracking-widest mb-8",children:z.name}),p.jsx("div",{className:"bg-white p-8 rounded-[2.5rem] border-4 border-slate-50 shadow-inner flex items-center justify-center mb-4",children:p.jsx(xS,{value:I||z.id,size:200,level:"H",includeMargin:!0})}),p.jsxs("div",{className:"flex items-center justify-center gap-2 mb-6",children:[p.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),p.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"Refreshes every 15 seconds"})]}),p.jsx("p",{className:"text-[10px] text-slate-400 font-medium px-6 mb-8 uppercase tracking-widest",children:"Members & Staff should scan this code using the IronFlow App Scanner to record attendance."}),p.jsx("button",{onClick:()=>u(!1),className:"w-full py-4 bg-slate-900 text-white rounded-2xl font-black text-sm hover:bg-black transition-all uppercase tracking-widest shadow-xl",children:"Close QR Display"})]})}),l&&p.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:p.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-md p-8 shadow-2xl animate-[slideUp_0.3s_ease-out] overflow-y-auto max-h-[90vh] scrollbar-hide",children:[p.jsx("h3",{className:"text-2xl font-bold mb-6 tracking-tight uppercase",children:E?"Update Branch":"Register New Branch"}),p.jsxs("form",{onSubmit:V,className:"space-y-6",children:[p.jsxs("section",{className:"space-y-3",children:[p.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-info-circle text-blue-500"})," Identity & Location"]}),p.jsx("input",{required:!0,placeholder:"Branch Name",className:"w-full p-3 bg-gray-50 border rounded-xl outline-none",value:O.name,onChange:Z=>j({...O,name:Z.target.value})}),p.jsx("input",{required:!0,placeholder:"Address",className:"w-full p-3 bg-gray-50 border rounded-xl outline-none",value:O.address,onChange:Z=>j({...O,address:Z.target.value})}),p.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[p.jsx("input",{required:!0,placeholder:"Phone",className:"w-full p-3 bg-gray-50 border rounded-xl outline-none",value:O.phone,onChange:Z=>j({...O,phone:Z.target.value})}),p.jsx("input",{required:!0,type:"email",placeholder:"Branch Public Email",className:"w-full p-3 bg-gray-50 border rounded-xl outline-none text-xs",value:O.email,onChange:Z=>j({...O,email:Z.target.value})})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-2",children:[p.jsx("input",{placeholder:"GSTIN (Tax ID)",className:"w-full p-3 bg-gray-50 border rounded-xl outline-none text-xs font-mono uppercase",value:O.gstin,onChange:Z=>j({...O,gstin:Z.target.value})}),p.jsxs("div",{className:"relative",children:[p.jsx("input",{type:"number",required:!0,min:"0",max:"100",placeholder:"GST Rate",className:"w-full p-3 bg-gray-50 border rounded-xl outline-none text-xs font-bold",value:O.gstPercentage,onChange:Z=>j({...O,gstPercentage:Number(Z.target.value)})}),p.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-xs font-bold text-gray-400",children:"%"})]})]}),p.jsxs("div",{className:"space-y-3 pt-2 border-t border-slate-100",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-location-cross text-amber-500"})," GPS Geofencing"]}),p.jsxs("button",{type:"button",onClick:()=>{console.log("Auto-Locate clicked"),navigator.geolocation?(console.log("Geolocation is supported"),navigator.geolocation.getCurrentPosition(Z=>{console.log("Position received:",Z.coords),j({...O,latitude:Z.coords.latitude,longitude:Z.coords.longitude}),alert(`Location captured: ${Z.coords.latitude.toFixed(6)}, ${Z.coords.longitude.toFixed(6)}`)},Z=>{console.error("Geolocation error:",Z.code,Z.message);let te="Location access denied. Please enable GPS.";switch(Z.code){case Z.PERMISSION_DENIED:te="Location permission denied. Please allow location access in your browser settings.";break;case Z.POSITION_UNAVAILABLE:te="Location information unavailable. Please try again.";break;case Z.TIMEOUT:te="Location request timed out. Please try again.";break}alert(te)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})):(console.error("Geolocation not supported"),alert("Geolocation is not supported by your browser."))},className:"text-[9px] font-black text-blue-600 bg-blue-50 px-2 py-1 rounded uppercase tracking-widest hover:bg-blue-100 transition-colors flex items-center gap-1",children:[p.jsx("i",{className:"fas fa-crosshairs"})," Auto-Locate"]})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[p.jsx("input",{type:"number",step:"any",placeholder:"Latitude",className:"w-full p-3 bg-gray-50 border rounded-xl outline-none text-xs",value:O.latitude,onChange:Z=>j({...O,latitude:Number(Z.target.value)})}),p.jsx("input",{type:"number",step:"any",placeholder:"Longitude",className:"w-full p-3 bg-gray-50 border rounded-xl outline-none text-xs",value:O.longitude,onChange:Z=>j({...O,longitude:Number(Z.target.value)})})]}),p.jsxs("div",{className:"relative",children:[p.jsx("input",{type:"number",min:"10",placeholder:"Geofence Radius (Meters)",className:"w-full p-3 bg-gray-50 border rounded-xl outline-none text-xs font-bold",value:O.geofenceRadius,onChange:Z=>j({...O,geofenceRadius:Number(Z.target.value)})}),p.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-[10px] font-bold text-gray-400",children:"METERS"})]})]})]}),p.jsxs("section",{className:"space-y-3 pt-6 border-t",children:[p.jsxs("label",{className:"text-[10px] font-black text-blue-600 uppercase tracking-widest flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-dumbbell"})," Gym Equipment Inventory"]}),p.jsx("p",{className:"text-[9px] text-slate-400 italic",children:"List machines and free weights here. AI Coach uses this for member plans."}),p.jsx("textarea",{rows:4,placeholder:"e.g. 5 Treadmills, Smith Machine, Dumbbells (2-40kg), Leg Press, Cable Crossover...",className:"w-full p-4 bg-blue-50/30 border border-blue-100 rounded-2xl outline-none text-xs font-medium",value:O.equipment,onChange:Z=>j({...O,equipment:Z.target.value})})]}),p.jsxs("section",{className:"space-y-3 pt-6 border-t",children:[p.jsxs("label",{className:"text-[10px] font-black text-emerald-600 uppercase tracking-widest flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-envelope-open-text"})," Email Infrastructure"]}),p.jsxs("select",{className:"w-full p-3 bg-gray-50 border rounded-xl outline-none text-xs font-bold",value:O.emailProvider,onChange:Z=>j({...O,emailProvider:Z.target.value}),children:[p.jsx("option",{value:"SENDGRID",children:"SendGrid"}),p.jsx("option",{value:"MAILGUN",children:"Mailgun"}),p.jsx("option",{value:"SMTP",children:"Custom SMTP"})]}),p.jsx("input",{placeholder:J.key,className:"w-full p-3 bg-emerald-50/50 border border-emerald-100 rounded-xl outline-none text-xs font-mono",value:O.emailApiKey,onChange:Z=>j({...O,emailApiKey:Z.target.value})}),p.jsx("input",{placeholder:J.from,className:"w-full p-3 bg-emerald-50/50 border border-emerald-100 rounded-xl outline-none text-xs font-mono",value:O.emailFromAddress,onChange:Z=>j({...O,emailFromAddress:Z.target.value})})]}),p.jsxs("section",{className:"space-y-3 pt-6 border-t",children:[p.jsxs("label",{className:"text-[10px] font-black text-orange-600 uppercase tracking-widest flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-sms"})," SMS Gateway"]}),p.jsxs("select",{className:"w-full p-3 bg-gray-50 border rounded-xl outline-none text-xs font-bold",value:O.smsProvider,onChange:Z=>j({...O,smsProvider:Z.target.value}),children:[p.jsx("option",{value:"TWILIO",children:"Twilio"}),p.jsx("option",{value:"MSG91",children:"Msg91 (India)"}),p.jsx("option",{value:"GUPSHUP",children:"Gupshup"})]}),p.jsx("input",{placeholder:W.key,className:"w-full p-3 bg-orange-50/50 border border-orange-100 rounded-xl outline-none text-xs font-mono",value:O.smsApiKey,onChange:Z=>j({...O,smsApiKey:Z.target.value})}),p.jsx("input",{placeholder:W.sender,className:"w-full p-3 bg-orange-50/50 border border-orange-100 rounded-xl outline-none text-xs font-mono",value:O.smsSenderId,onChange:Z=>j({...O,smsSenderId:Z.target.value})})]}),p.jsxs("section",{className:"space-y-3 pt-6 border-t",children:[p.jsxs("label",{className:"text-[10px] font-black text-indigo-600 uppercase tracking-widest flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-credit-card"})," Payment Gateway"]}),p.jsxs("select",{className:"w-full p-3 bg-gray-50 border rounded-xl outline-none text-xs font-bold",value:O.paymentProvider,onChange:Z=>j({...O,paymentProvider:Z.target.value}),children:[p.jsx("option",{value:"RAZORPAY",children:"Razorpay (India)"}),p.jsx("option",{value:"STRIPE",children:"Stripe (Global)"}),p.jsx("option",{value:"PAYTM",children:"Paytm (India)"})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[9px] font-bold text-indigo-500 uppercase",children:"API Key ID (Required)"}),p.jsx("input",{placeholder:B.secret,className:"w-full p-3 bg-indigo-50/50 border border-indigo-100 rounded-xl outline-none text-xs font-mono",value:O.paymentApiKey,onChange:Z=>j({...O,paymentApiKey:Z.target.value})})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[9px] font-bold text-indigo-400 uppercase",children:"API Key Secret (Optional)"}),p.jsx("input",{placeholder:B.key,className:"w-full p-3 bg-indigo-50/30 border border-indigo-100 rounded-xl outline-none text-xs font-mono",value:O.paymentMerchantId,onChange:Z=>j({...O,paymentMerchantId:Z.target.value})})]})]}),p.jsxs("div",{className:"pt-6",children:[p.jsx("button",{className:"w-full py-4 bg-slate-900 text-white rounded-2xl font-black text-lg hover:bg-black shadow-xl shadow-slate-100 transition-all uppercase tracking-tighter",children:E?"Sync Branch Overrides":"Deploy Branch Environment"}),p.jsx("button",{type:"button",onClick:()=>f(!1),className:"w-full py-3 text-gray-400 font-bold hover:text-gray-600 transition-colors uppercase text-[10px] tracking-[0.2em]",children:"CANCEL"})]})]})]})}),p.jsx("style",{children:`
        @keyframes slideUp {
          from { transform: translateY(20px); opacity: 0; }
          to { transform: translateY(0); opacity: 1; }
        }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
      `})]})},$de=()=>{const{offers:e,addOffer:t,deleteOffer:n,branches:r,currentUser:i,showToast:a}=Un(),[l,f]=k.useState(!1),h=k.useRef(null),[u,g]=k.useState({title:"",description:"",imageUrl:"",expiryDate:"",branchId:(i==null?void 0:i.branchId)||"GLOBAL",ctaText:"CLAIM OFFER"}),y=I=>{var O;const M=(O=I.target.files)==null?void 0:O[0];if(M){const j=new FileReader;j.onloadend=()=>{g({...u,imageUrl:j.result})},j.readAsDataURL(M)}},E=I=>{if(I.preventDefault(),!u.imageUrl){a("Please upload an offer graphic!","error");return}const M={id:`offer-${Date.now()}`,isActive:!0,...u};t(M),f(!1),g({title:"",description:"",imageUrl:"",expiryDate:"",branchId:(i==null?void 0:i.branchId)||"GLOBAL",ctaText:"CLAIM OFFER"}),a("Campaign broadcasted successfully!")},C=(i==null?void 0:i.role)==="SUPER_ADMIN"?e:e.filter(I=>I.branchId==="GLOBAL"||I.branchId===(i==null?void 0:i.branchId));return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-3xl font-black text-slate-900 tracking-tight uppercase",children:"Campaign Manager"}),p.jsx("p",{className:"text-slate-500 font-medium",children:"Broadcast offers and graphics to your members"})]}),p.jsxs("button",{onClick:()=>f(!0),className:"bg-blue-600 text-white px-8 py-3 rounded-2xl font-black text-xs tracking-widest uppercase shadow-xl shadow-blue-100 hover:bg-blue-700 transition-all flex items-center gap-3",children:[p.jsx("i",{className:"fas fa-plus-circle"})," Create Campaign"]})]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:C.length===0?p.jsxs("div",{className:"col-span-full py-20 bg-white rounded-[3rem] border border-dashed flex flex-col items-center justify-center text-slate-300",children:[p.jsx("i",{className:"fas fa-bullhorn text-5xl mb-4 opacity-10"}),p.jsx("p",{className:"font-bold uppercase tracking-widest text-xs",children:"No active campaigns running"})]}):C.map(I=>p.jsxs("div",{className:"bg-white rounded-[2.5rem] border shadow-sm overflow-hidden flex flex-col group hover:shadow-2xl transition-all",children:[p.jsxs("div",{className:"aspect-[16/9] relative overflow-hidden bg-slate-100",children:[p.jsx("img",{src:I.imageUrl,className:"w-full h-full object-cover group-hover:scale-105 transition-transform",alt:""}),p.jsx("div",{className:"absolute top-4 right-4 flex gap-2",children:p.jsx("span",{className:`text-[8px] font-black px-3 py-1 rounded-full uppercase tracking-widest ${I.branchId==="GLOBAL"?"bg-indigo-600 text-white":"bg-blue-600 text-white"}`,children:I.branchId==="GLOBAL"?"GLOBAL":"BRANCH ONLY"})})]}),p.jsxs("div",{className:"p-8 flex-1 flex flex-col",children:[p.jsx("h3",{className:"text-xl font-black text-slate-900 uppercase tracking-tight mb-2",children:I.title}),p.jsx("p",{className:"text-slate-500 text-xs font-medium leading-relaxed mb-6 line-clamp-2",children:I.description}),p.jsx("div",{className:"mt-auto space-y-4",children:p.jsxs("div",{className:"flex justify-between items-center text-[10px] font-black text-slate-400 uppercase tracking-widest border-t pt-4",children:[p.jsxs("span",{children:["Expires: ",I.expiryDate]}),p.jsxs("button",{onClick:()=>n(I.id),className:"text-red-400 hover:text-red-600 transition-colors",children:[p.jsx("i",{className:"fas fa-trash-alt mr-1"})," End Campaign"]})]})})]})]},I.id))}),l&&p.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-md z-[100] flex items-center justify-center p-4",children:p.jsxs("div",{className:"bg-white rounded-[3rem] w-full max-w-xl shadow-2xl animate-[slideUp_0.3s_ease-out] overflow-hidden",children:[p.jsxs("div",{className:"bg-slate-900 p-8 text-white flex justify-between items-center",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-2xl font-black uppercase tracking-tight leading-none mb-1",children:"New Broadcast"}),p.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest",children:"Designing member experience"})]}),p.jsx("button",{onClick:()=>f(!1),className:"bg-white/10 hover:bg-white/20 p-3 rounded-2xl transition-colors",children:p.jsx("i",{className:"fas fa-times"})})]}),p.jsxs("form",{onSubmit:E,className:"p-10 space-y-6",children:[p.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Campaign Title"}),p.jsx("input",{required:!0,className:"w-full p-4 bg-slate-50 border rounded-2xl outline-none focus:ring-2 focus:ring-blue-500 font-bold",value:u.title,onChange:I=>g({...u,title:I.target.value}),placeholder:"e.g. Monsoon Fit Sale"})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Expiry Date"}),p.jsx("input",{type:"date",required:!0,className:"w-full p-4 bg-slate-50 border rounded-2xl outline-none focus:ring-2 focus:ring-blue-500 font-bold",value:u.expiryDate,onChange:I=>g({...u,expiryDate:I.target.value})})]})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Offer Graphic (Banner)"}),p.jsx("div",{onClick:()=>{var I;return(I=h.current)==null?void 0:I.click()},className:"w-full aspect-[21/9] border-4 border-dashed border-slate-100 rounded-[2rem] flex flex-col items-center justify-center cursor-pointer hover:border-blue-200 hover:bg-slate-50 transition-all relative overflow-hidden",children:u.imageUrl?p.jsx("img",{src:u.imageUrl,className:"absolute inset-0 w-full h-full object-cover",alt:"Preview"}):p.jsxs(p.Fragment,{children:[p.jsx("i",{className:"fas fa-image text-4xl text-slate-200 mb-2"}),p.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Select PNG/JPG (1200x500px recommended)"})]})}),p.jsx("input",{type:"file",ref:h,className:"hidden",accept:"image/*",onChange:y})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Detailed Description"}),p.jsx("textarea",{required:!0,rows:3,className:"w-full p-4 bg-slate-50 border rounded-2xl outline-none focus:ring-2 focus:ring-blue-500 font-medium text-sm",value:u.description,onChange:I=>g({...u,description:I.target.value}),placeholder:"Explain the offer terms and benefits..."})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-6 pt-4 border-t",children:[p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Target Audience"}),p.jsxs("select",{className:"w-full p-4 bg-slate-50 border rounded-2xl outline-none font-bold text-xs",value:u.branchId,onChange:I=>g({...u,branchId:I.target.value}),children:[p.jsx("option",{value:"GLOBAL",children:"All Branches (Global)"}),r.map(I=>p.jsx("option",{value:I.id,children:I.name},I.id))]})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Button Text"}),p.jsx("input",{className:"w-full p-4 bg-slate-50 border rounded-2xl outline-none focus:ring-2 focus:ring-blue-500 font-bold",value:u.ctaText,onChange:I=>g({...u,ctaText:I.target.value}),placeholder:"e.g. VIEW DETAILS"})]})]}),p.jsx("button",{className:"w-full py-5 bg-blue-600 text-white rounded-[2rem] font-black uppercase tracking-widest shadow-2xl shadow-blue-100 hover:bg-blue-700 transition-all active:scale-95",children:"Launch Campaign Broadcast"})]})]})}),p.jsx("style",{children:`
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
      `})]})},ew=9,Yde=6,Wde=9,Kde=9,r3=e=>{const[t,n]=e.split(":").map(Number);return t*60+n},Xde=(e,t)=>{const n=r3(e),r=r3(t);return Math.round((r-n)/60*100)/100},i6=(e,t=0)=>new Date(e).getDay()===t,Jde=(e,t)=>{if(!e.timeOut)return{basePay:0,totalHours:0,payableHours:0};const n=e.hoursWorked||Xde(e.timeIn,e.timeOut),r=Math.min(n,ew);return{basePay:r*t,totalHours:n,payableHours:r}},Zde=(e,t)=>{const n=Math.floor(e/Yde),r=n*Wde*t;return{weekOffsEarned:n,weekOffPay:r}},Qde=(e,t,n=[],r=0)=>{const i=new Set(n.map(l=>l.date));return e.filter(l=>{const f=i.has(l.date),h=i6(l.date,r);return(f||h)&&l.timeOut}).length*Kde*t},efe=(e,t,n)=>{const a=t.filter(l=>l.trainerId===e&&l.status==="COMPLETED").length*500*(n/100);return Math.round(a)},a6=(e,t,n,r,i=[],a=[])=>{const l=`${n}-${String(r).padStart(2,"0")}`,f=e.hourlyRate||0,h=e.weekOffDay??0,u=t.filter(B=>{const J=B.date.substring(0,7);return B.userId===e.id&&J===l&&B.type==="STAFF"});let g=0,y=0,E=0,C=0,I=0;const M=new Set(a.map(B=>B.date));u.forEach(B=>{if(B.timeOut){const J=i6(B.date,h),W=M.has(B.date);if(!J&&!W){const Z=Jde(B,f);g++,y+=Z.totalHours,I+=Z.basePay}B.isLate&&E++,B.isEarlyOut&&C++}});const{weekOffsEarned:O,weekOffPay:j}=Zde(g,f),U=Qde(u,f,a,h),L=efe(e.id,i,e.commissionPercentage||0),G=I+j+U+L,V=0,z=G-V;return{id:`payroll-${e.id}-${l}`,userId:e.id,month:l,year:n,totalDaysWorked:g,totalHoursWorked:Math.round(y*100)/100,lateDays:E,earlyOutDays:C,overtimeHours:0,weekOffsTaken:O,holidaysWorked:0,baseSalary:Math.round(I),weekOffPay:Math.round(j),holidayPay:Math.round(U),overtimePay:0,commissionEarned:Math.round(L),bonus:0,totalEarnings:Math.round(G),deductions:Math.round(V),netPay:Math.round(z),status:"DRAFT",branchId:e.branchId||"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}},s6=e=>!e||e.length===0?"No shifts assigned":e.map((t,n)=>`Shift ${n+1}: ${t.start}-${t.end}`).join(", "),tfe=()=>{var ie;const{users:e,branches:t,currentUser:n,addUser:r,updateUser:i,deleteUser:a,attendance:l,bookings:f,holidays:h}=Un(),[u,g]=k.useState(!1),[y,E]=k.useState(!1),[C,I]=k.useState(!1),[M,O]=k.useState(!1),[j,U]=k.useState(null),[L,G]=k.useState(new Date().getMonth()),[V,z]=k.useState(new Date().getFullYear()),[B,J]=k.useState({name:"",email:"",role:Oe.TRAINER,branchId:((ie=t[0])==null?void 0:ie.id)||"",shifts:[{start:"09:00",end:"13:00"}],hourlyRate:500,commissionPercentage:10,emergencyContact:"",avatar:"",weekOffDay:0}),[W,Z]=k.useState(!1),te=e.filter(ue=>ue.role!==Oe.MEMBER&&((n==null?void 0:n.role)===Oe.SUPER_ADMIN||ue.branchId===(n==null?void 0:n.branchId))),Y=()=>{var ue;J({name:"",email:"",role:Oe.TRAINER,branchId:(n==null?void 0:n.branchId)||((ue=t[0])==null?void 0:ue.id)||"",shifts:[{start:"09:00",end:"13:00"}],hourlyRate:500,commissionPercentage:10,emergencyContact:"",avatar:"",weekOffDay:0}),g(!0)},pe=ue=>{var qe;U(ue),J({name:ue.name,email:ue.email,role:ue.role,branchId:ue.branchId||((qe=t[0])==null?void 0:qe.id)||"",shifts:ue.shifts&&ue.shifts.length>0?ue.shifts:[{start:"09:00",end:"13:00"}],hourlyRate:ue.hourlyRate||500,commissionPercentage:ue.commissionPercentage||0,emergencyContact:ue.emergencyContact||"",avatar:ue.avatar||"",weekOffDay:ue.weekOffDay??0}),E(!0)},Te=ue=>{J({...B,avatar:ue})},le=ue=>{U(ue),I(!0)},de=ue=>{U(ue),O(!0)},ge=k.useMemo(()=>j?h.filter(ue=>ue.branchId==="ALL"||ue.branchId===j.branchId):[],[j,h]),De=k.useMemo(()=>j?a6(j,l,V,L+1,f,ge):null,[j,l,V,L,f,ge]),we=ue=>{ue.preventDefault();const qe={id:`staff-${Date.now()}`,name:B.name,email:B.email,role:B.role,branchId:B.branchId,shifts:B.shifts,hourlyRate:B.hourlyRate,commissionPercentage:B.commissionPercentage,emergencyContact:B.emergencyContact,avatar:B.avatar||`https://i.pravatar.cc/150?u=${Date.now()}`,weekOffDay:B.weekOffDay};r(qe),g(!1)},$e=ue=>{ue.preventDefault(),j&&(i(j.id,B),E(!1),U(null))},ne=ue=>{window.confirm("Are you sure you want to remove this staff member?")&&a(ue)},re=()=>{B.shifts.length<3&&J({...B,shifts:[...B.shifts,{start:"14:00",end:"18:00"}]})},he=ue=>{if(B.shifts.length>1){const qe=[...B.shifts];qe.splice(ue,1),J({...B,shifts:qe})}},se=(ue,qe,me)=>{const Je=[...B.shifts];Je[ue]={...Je[ue],[qe]:me},J({...B,shifts:Je})},ke=(ue,qe)=>{if(!qe)return"Active";const me=new Date(`2000-01-01 ${ue}`);return`${((new Date(`2000-01-01 ${qe}`).getTime()-me.getTime())/1e3/60/60).toFixed(1)} hrs`};return p.jsxs("div",{className:"space-y-6 md:space-y-8 animate-[fadeIn_0.5s_ease-out]",children:[p.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl md:text-3xl font-black text-slate-900 tracking-tight uppercase",children:"Staff Directory"}),p.jsx("p",{className:"text-gray-500 font-medium text-sm",children:"Monitor multiple shifts and team attendance logs"})]}),p.jsxs("button",{onClick:Y,className:"w-full sm:w-auto bg-blue-600 text-white px-6 py-3 md:py-4 rounded-2xl font-black text-xs uppercase tracking-widest hover:bg-blue-700 transition-all flex items-center justify-center gap-2 shadow-xl shadow-blue-100",children:[p.jsx("i",{className:"fas fa-user-plus"})," ADD STAFF"]})]}),p.jsx("div",{className:"bg-white rounded-[2.5rem] border shadow-sm overflow-hidden",children:p.jsx("div",{className:"overflow-x-auto scrollbar-hide",children:p.jsxs("table",{className:"w-full text-left min-w-[700px]",children:[p.jsx("thead",{className:"bg-gray-50 border-b",children:p.jsxs("tr",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:[p.jsx("th",{className:"px-6 py-5 text-center w-20",children:"Photo"}),p.jsx("th",{className:"px-6 py-5 min-w-[180px]",children:"Employee"}),p.jsx("th",{className:"px-6 py-5 min-w-[140px]",children:"Role"}),p.jsx("th",{className:"px-6 py-5",children:"Pay / Comm"}),p.jsx("th",{className:"px-6 py-5",children:"Shift Info"}),p.jsx("th",{className:"px-6 py-5",children:"Emergency"}),p.jsx("th",{className:"px-6 py-5 text-right pr-8",children:"Actions"})]})}),p.jsx("tbody",{className:"divide-y divide-gray-100",children:te.length===0?p.jsx("tr",{children:p.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-400 italic",children:"No staff found."})}):te.map(ue=>{const qe=t.find(Ue=>Ue.id===ue.branchId),me=new Date().toISOString().split("T")[0],Je=l.find(Ue=>Ue.userId===ue.id&&Ue.date===me),Qe=Je&&!Je.timeOut;return p.jsxs("tr",{className:"hover:bg-gray-50 transition-colors group",children:[p.jsx("td",{className:"px-6 py-5",children:p.jsx("img",{src:ue.avatar,className:"w-12 h-12 rounded-2xl object-cover border-2 border-white shadow-sm mx-auto",alt:""})}),p.jsxs("td",{className:"px-6 py-5",children:[p.jsx("span",{className:"font-black text-slate-900 block leading-tight uppercase tracking-tight truncate max-w-[150px]",children:ue.name}),p.jsx("span",{className:"text-[10px] text-gray-400 font-bold truncate max-w-[150px] block",children:ue.email})]}),p.jsx("td",{className:"px-6 py-5",children:p.jsx("span",{className:"bg-blue-50 text-blue-600 text-[10px] font-black px-3 py-1.5 rounded-lg uppercase tracking-widest whitespace-nowrap inline-block",children:ue.role.replace("_"," ")})}),p.jsx("td",{className:"px-6 py-5",children:p.jsxs("div",{className:"flex flex-col",children:[p.jsxs("span",{className:"text-sm font-black text-emerald-600",children:["",ue.hourlyRate||500,p.jsx("span",{className:"text-[8px] opacity-60",children:"/hr"})]}),(ue.role===Oe.TRAINER||ue.role===Oe.MANAGER)&&p.jsxs("span",{className:"text-[9px] font-black text-indigo-500 uppercase tracking-widest",children:[ue.commissionPercentage||0,"% Comm."]})]})}),p.jsx("td",{className:"px-6 py-5",children:p.jsxs("div",{className:"flex flex-col gap-1.5",children:[Qe?p.jsxs("span",{className:"flex items-center gap-1.5 text-green-600 font-black text-[9px] uppercase tracking-widest",children:[p.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse shadow-[0_0_8px_rgba(34,197,94,0.5)]"}),"ON DUTY"]}):p.jsx("span",{className:"text-slate-400 text-[9px] font-black uppercase tracking-widest",children:"OFFLINE"}),p.jsx("span",{className:"text-[9px] text-slate-400 uppercase font-black tracking-widest opacity-60 truncate max-w-[120px]",children:(qe==null?void 0:qe.name)||"Global"})]})}),p.jsx("td",{className:"px-6 py-5",children:ue.emergencyContact?p.jsxs("div",{className:"flex items-center gap-2 group/sos cursor-help",children:[p.jsx("div",{className:"bg-red-50 text-red-600 w-8 h-8 rounded-lg flex items-center justify-center transition-all group-hover/sos:bg-red-600 group-hover/sos:text-white shrink-0",children:p.jsx("i",{className:"fas fa-truck-medical text-xs"})}),p.jsx("span",{className:"text-[10px] font-black text-slate-500 whitespace-nowrap",children:ue.emergencyContact})]}):p.jsx("span",{className:"text-[10px] text-slate-300 italic font-bold",children:"N/A"})}),p.jsx("td",{className:"px-6 py-5 text-right pr-8",children:p.jsxs("div",{className:"flex justify-end gap-1 sm:opacity-0 group-hover:opacity-100 transition-opacity",children:[p.jsx("button",{onClick:()=>de(ue),className:"p-2.5 text-emerald-600 hover:bg-emerald-50 rounded-xl transition-all",title:"View Payroll",children:p.jsx("i",{className:"fas fa-file-invoice-dollar"})}),p.jsx("button",{onClick:()=>le(ue),className:"p-2.5 text-blue-600 hover:bg-blue-50 rounded-xl transition-all",title:"Attendance Logs",children:p.jsx("i",{className:"fas fa-clock-rotate-left"})}),p.jsx("button",{onClick:()=>pe(ue),className:"p-2.5 text-indigo-600 hover:bg-indigo-50 rounded-xl transition-all",title:"Edit Profile",children:p.jsx("i",{className:"fas fa-user-pen"})}),p.jsx("button",{onClick:()=>ne(ue.id),className:"p-2.5 text-red-600 hover:bg-red-50 rounded-xl transition-all",title:"Delete Account",children:p.jsx("i",{className:"fas fa-trash-can"})})]})})]},ue.id)})})]})})}),C&&j&&p.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:p.jsxs("div",{className:"bg-white rounded-[2.5rem] w-full max-w-lg overflow-hidden shadow-2xl animate-[slideUp_0.3s_ease-out]",children:[p.jsxs("div",{className:"bg-slate-900 p-8 text-white flex justify-between items-center",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("img",{src:j.avatar,className:"w-12 h-12 rounded-2xl border-2 border-white/20 shadow-xl",alt:""}),p.jsxs("div",{children:[p.jsx("h3",{className:"font-black text-xl uppercase tracking-tight",children:j.name}),p.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest",children:"Employee Attendance Logs"})]})]}),p.jsx("button",{onClick:()=>I(!1),className:"bg-white/10 p-2.5 rounded-xl hover:bg-white/20 transition-colors",children:p.jsx("i",{className:"fas fa-times"})})]}),p.jsx("div",{className:"p-8 max-h-[60vh] overflow-y-auto space-y-4 bg-slate-50/50",children:l.filter(ue=>ue.userId===j.id).length===0?p.jsxs("div",{className:"text-center py-20 flex flex-col items-center gap-4",children:[p.jsx("i",{className:"fas fa-calendar-xmark text-4xl text-slate-200"}),p.jsx("p",{className:"text-slate-400 font-black uppercase tracking-widest text-[10px]",children:"No duty logs recorded yet"})]}):[...l].filter(ue=>ue.userId===j.id).reverse().map(ue=>p.jsxs("div",{className:"flex items-center justify-between p-5 bg-white border border-slate-100 rounded-3xl shadow-sm",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-xs font-black text-slate-900 uppercase tracking-widest",children:ue.date}),p.jsxs("div",{className:"flex items-center gap-4 text-[10px] text-slate-400 font-bold mt-2",children:[p.jsxs("span",{className:"flex items-center gap-1.5",children:[p.jsx("i",{className:"fas fa-sign-in-alt text-emerald-500"})," ",ue.timeIn]}),ue.timeOut&&p.jsxs("span",{className:"flex items-center gap-1.5",children:[p.jsx("i",{className:"fas fa-sign-out-alt text-red-500"})," ",ue.timeOut]})]})]}),p.jsx("div",{className:"text-right",children:ue.timeOut?p.jsxs("div",{className:"flex flex-col items-end",children:[p.jsx("span",{className:"text-[10px] font-black text-blue-600 bg-blue-50 px-2 py-0.5 rounded uppercase tracking-widest mb-1",children:"COMPLETED"}),p.jsx("span",{className:"text-[10px] font-black text-slate-900",children:ke(ue.timeIn,ue.timeOut)})]}):p.jsx("span",{className:"bg-green-100 text-green-700 text-[10px] font-black px-3 py-1 rounded-full uppercase tracking-widest animate-pulse",children:"On Shift"})})]},ue.id))})]})}),(u||y)&&p.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:p.jsxs("div",{className:"bg-white rounded-[3rem] w-full max-w-md overflow-hidden shadow-2xl animate-[slideUp_0.3s_ease-out]",children:[p.jsxs("div",{className:`p-8 text-white flex justify-between items-center ${y?"bg-indigo-600 shadow-indigo-100 shadow-xl":"bg-blue-600 shadow-blue-100 shadow-xl"}`,children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-2xl font-black uppercase tracking-tight leading-none mb-1",children:y?"Update Profile":"Staff Onboarding"}),p.jsx("p",{className:"text-[10px] text-white/60 font-black uppercase tracking-widest",children:"Management Credentials"})]}),p.jsx("button",{onClick:()=>{g(!1),E(!1)},className:"bg-white/10 p-2.5 rounded-xl hover:bg-white/20 transition-colors",children:p.jsx("i",{className:"fas fa-times"})})]}),p.jsxs("form",{onSubmit:y?$e:we,className:"p-10 space-y-6 max-h-[70vh] overflow-y-auto scrollbar-hide",children:[p.jsxs("div",{className:"flex flex-col items-center gap-3",children:[p.jsxs("div",{className:"relative",children:[p.jsx("img",{src:B.avatar||(j==null?void 0:j.avatar)||"https://i.pravatar.cc/150?u=default",alt:"Profile",className:"w-24 h-24 rounded-2xl object-cover border-4 border-white shadow-lg"}),p.jsx("button",{type:"button",onClick:()=>Z(!0),className:"absolute -bottom-2 -right-2 w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center shadow-lg hover:bg-blue-700 transition-colors",children:p.jsx("i",{className:"fas fa-camera text-xs"})})]}),p.jsx("p",{className:"text-xs text-gray-400 font-medium",children:"Click camera to change photo"})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Full Name"}),p.jsx("input",{required:!0,className:"w-full p-4 bg-gray-50 border border-gray-100 rounded-2xl outline-none focus:ring-2 focus:ring-blue-500 font-bold text-sm",value:B.name,onChange:ue=>J({...B,name:ue.target.value})})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsxs("label",{className:"text-[10px] font-black text-red-500 uppercase tracking-widest ml-1 flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-life-ring"})," Emergency Contact Number"]}),p.jsx("input",{required:!0,type:"tel",className:"w-full p-4 bg-red-50 border border-red-100 rounded-2xl outline-none focus:ring-2 focus:ring-red-500 font-black text-sm text-red-700 placeholder:text-red-200",placeholder:"+91 XXXXX XXXXX",value:B.emergencyContact,onChange:ue=>J({...B,emergencyContact:ue.target.value})})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Work Email"}),p.jsx("input",{required:!0,type:"email",className:"w-full p-4 bg-gray-50 border border-gray-100 rounded-2xl outline-none focus:ring-2 focus:ring-blue-500 font-bold text-sm",value:B.email,onChange:ue=>J({...B,email:ue.target.value})})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] font-black text-emerald-600 uppercase tracking-widest ml-1",children:"Hourly Salary ()"}),p.jsx("input",{type:"number",className:"w-full p-4 bg-emerald-50 border border-emerald-100 rounded-2xl outline-none focus:ring-2 focus:ring-emerald-500 font-bold text-sm",value:B.hourlyRate,onChange:ue=>J({...B,hourlyRate:Number(ue.target.value)})})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Primary Role"}),p.jsxs("select",{className:"w-full p-4 bg-gray-50 border border-gray-100 rounded-2xl outline-none font-bold text-xs uppercase",value:B.role,onChange:ue=>J({...B,role:ue.target.value}),children:[p.jsx("option",{value:Oe.BRANCH_ADMIN,children:"Branch Admin"}),p.jsx("option",{value:Oe.MANAGER,children:"Manager"}),p.jsx("option",{value:Oe.TRAINER,children:"Trainer"}),p.jsx("option",{value:Oe.RECEPTIONIST,children:"Receptionist"}),p.jsx("option",{value:Oe.STAFF,children:"General Staff"})]})]})]}),(B.role===Oe.TRAINER||B.role===Oe.MANAGER)&&p.jsxs("div",{className:"space-y-1 p-4 bg-indigo-50 rounded-2xl border border-indigo-100 animate-[fadeIn_0.3s_ease-out]",children:[p.jsx("label",{className:"text-[10px] font-black text-indigo-600 uppercase tracking-widest ml-1",children:B.role===Oe.MANAGER?"Gym Sales Commission (%)":"Session Commission (%)"}),p.jsxs("div",{className:"relative",children:[p.jsx("input",{type:"number",min:"0",max:"100",className:"w-full p-4 bg-white border border-indigo-100 rounded-xl outline-none focus:ring-2 focus:ring-indigo-500 font-black text-sm",value:B.commissionPercentage,onChange:ue=>J({...B,commissionPercentage:Number(ue.target.value)})}),p.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 font-black text-indigo-300",children:"%"})]})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Home Branch"}),p.jsx("select",{className:"w-full p-4 bg-gray-50 border border-gray-100 rounded-2xl outline-none font-bold text-xs uppercase",value:B.branchId,onChange:ue=>J({...B,branchId:ue.target.value}),children:t.map(ue=>p.jsx("option",{value:ue.id,children:ue.name},ue.id))})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] font-black text-amber-600 uppercase tracking-widest ml-1",children:"Weekly Off Day"}),p.jsxs("select",{className:"w-full p-4 bg-amber-50 border border-amber-100 rounded-2xl outline-none font-bold text-xs uppercase",value:B.weekOffDay,onChange:ue=>J({...B,weekOffDay:Number(ue.target.value)}),children:[p.jsx("option",{value:0,children:"Sunday"}),p.jsx("option",{value:1,children:"Monday"}),p.jsx("option",{value:2,children:"Tuesday"}),p.jsx("option",{value:3,children:"Wednesday"}),p.jsx("option",{value:4,children:"Thursday"}),p.jsx("option",{value:5,children:"Friday"}),p.jsx("option",{value:6,children:"Saturday"})]})]})]}),p.jsxs("div",{className:"pt-6 border-t border-gray-100 space-y-4",children:[p.jsxs("div",{className:"flex justify-between items-center px-1",children:[p.jsx("label",{className:"text-[10px] font-black text-blue-600 uppercase tracking-widest",children:"Work Shifts (1-3 Max)"}),B.shifts.length<3&&p.jsxs("button",{type:"button",onClick:re,className:"text-[10px] font-black text-blue-600 uppercase bg-blue-50 px-2 py-1 rounded-lg hover:bg-blue-100 transition-all",children:[p.jsx("i",{className:"fas fa-plus mr-1"})," Add Shift"]})]}),p.jsx("div",{className:"space-y-4",children:B.shifts.map((ue,qe)=>p.jsxs("div",{className:"bg-blue-50/50 p-5 rounded-3xl border border-blue-100/50 space-y-3 relative group/shift animate-[slideUp_0.2s_ease-out]",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("span",{className:"text-[9px] font-black text-blue-400 uppercase tracking-widest",children:["Shift Slot #",qe+1]}),B.shifts.length>1&&p.jsx("button",{type:"button",onClick:()=>he(qe),className:"text-red-400 hover:text-red-600 transition-colors text-xs",children:p.jsx("i",{className:"fas fa-trash-can"})})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[8px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Starts At"}),p.jsx("input",{type:"time",className:"w-full p-3 bg-white border border-blue-100 rounded-xl font-bold text-xs outline-none focus:ring-2 focus:ring-blue-500",value:ue.start,onChange:me=>se(qe,"start",me.target.value)})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[8px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Ends At"}),p.jsx("input",{type:"time",className:"w-full p-3 bg-white border border-blue-100 rounded-xl font-bold text-xs outline-none focus:ring-2 focus:ring-blue-500",value:ue.end,onChange:me=>se(qe,"end",me.target.value)})]})]})]},qe))})]}),p.jsxs("div",{className:"pt-4",children:[p.jsx("button",{type:"submit",className:`w-full py-5 text-white rounded-[2rem] font-black text-sm uppercase tracking-widest shadow-2xl transition-all active:scale-95 ${y?"bg-indigo-600 shadow-indigo-100 hover:bg-indigo-700":"bg-blue-600 shadow-blue-100 hover:bg-blue-700"}`,children:y?"COMMIT UPDATES":"DEPLOY STAFF ACCOUNT"}),p.jsx("button",{type:"button",onClick:()=>{g(!1),E(!1)},className:"w-full py-3 text-slate-400 font-black text-[10px] uppercase tracking-widest hover:text-slate-600 transition-colors mt-2",children:"DISCARD CHANGES"})]})]})]})}),M&&j&&De&&p.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[100] flex items-center justify-center p-4",children:p.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-[2rem] shadow-2xl overflow-hidden animate-[slideUp_0.3s_ease-out] max-h-[90vh] overflow-y-auto",children:[p.jsxs("div",{className:"bg-emerald-600 p-6 text-white flex justify-between items-center sticky top-0 z-10",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-xl font-black uppercase tracking-tight",children:"Payroll Details"}),p.jsxs("p",{className:"text-[10px] text-emerald-100 font-bold uppercase tracking-widest",children:[j.name,"  ",j.role.replace("_"," ")]})]}),p.jsx("button",{onClick:()=>O(!1),className:"bg-white/20 hover:bg-white/30 p-3 rounded-2xl transition-colors",children:p.jsx("i",{className:"fas fa-times"})})]}),p.jsxs("div",{className:"p-8 space-y-6",children:[p.jsxs("div",{className:"flex items-center gap-4 bg-slate-50 p-4 rounded-2xl",children:[p.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Period:"}),p.jsx("select",{className:"p-2 bg-white border rounded-xl font-bold text-xs",value:L,onChange:ue=>G(Number(ue.target.value)),children:["January","February","March","April","May","June","July","August","September","October","November","December"].map((ue,qe)=>p.jsx("option",{value:qe,children:ue},ue))}),p.jsx("select",{className:"p-2 bg-white border rounded-xl font-bold text-xs",value:V,onChange:ue=>z(Number(ue.target.value)),children:[2024,2025,2026].map(ue=>p.jsx("option",{value:ue,children:ue},ue))})]}),p.jsxs("div",{className:"bg-blue-50 p-4 rounded-2xl border border-blue-100",children:[p.jsx("p",{className:"text-[10px] font-black text-blue-600 uppercase tracking-widest mb-2",children:"Assigned Shifts"}),p.jsx("p",{className:"text-sm font-medium text-blue-800",children:s6(j.shifts||[])})]}),p.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[p.jsxs("div",{className:"bg-slate-50 p-4 rounded-2xl text-center",children:[p.jsx("p",{className:"text-2xl font-black text-slate-900",children:De.totalDaysWorked}),p.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Days Worked"})]}),p.jsxs("div",{className:"bg-slate-50 p-4 rounded-2xl text-center",children:[p.jsx("p",{className:"text-2xl font-black text-slate-900",children:De.totalHoursWorked.toFixed(1)}),p.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Hours Logged"})]}),p.jsxs("div",{className:"bg-slate-50 p-4 rounded-2xl text-center",children:[p.jsx("p",{className:"text-2xl font-black text-slate-900",children:De.weekOffsTaken}),p.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Week Offs"})]})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Earnings Breakdown"}),p.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-slate-100",children:[p.jsxs("span",{className:"text-sm font-medium text-slate-600",children:["Base Salary (",De.totalHoursWorked.toFixed(1),"h  ",j.hourlyRate||0,")"]}),p.jsxs("span",{className:"font-bold text-slate-900",children:["",De.baseSalary.toLocaleString()]})]}),p.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-slate-100",children:[p.jsxs("span",{className:"text-sm font-medium text-slate-600",children:["Week Off Pay (",De.weekOffsTaken,"  9h)"]}),p.jsxs("span",{className:"font-bold text-purple-600",children:["+",De.weekOffPay.toLocaleString()]})]}),p.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-slate-100",children:[p.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Holiday Pay"}),p.jsxs("span",{className:"font-bold text-orange-600",children:["+",De.holidayPay.toLocaleString()]})]}),p.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-slate-100",children:[p.jsxs("span",{className:"text-sm font-medium text-slate-600",children:["Commission (",j.commissionPercentage||0,"%)"]}),p.jsxs("span",{className:"font-bold text-emerald-600",children:["+",De.commissionEarned.toLocaleString()]})]})]}),p.jsx("div",{className:"bg-emerald-50 p-6 rounded-2xl border border-emerald-100",children:p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-lg font-black text-emerald-900 uppercase",children:"Net Pay"}),p.jsxs("p",{className:"text-[10px] text-emerald-600 font-bold uppercase tracking-widest",children:[De.lateDays>0&&`${De.lateDays} late  `,De.earlyOutDays>0&&`${De.earlyOutDays} early out`]})]}),p.jsxs("p",{className:"text-3xl font-black text-emerald-700",children:["",De.netPay.toLocaleString()]})]})})]})]})}),p.jsx(Xb,{isOpen:W,onClose:()=>Z(!1),onUpload:Te,title:"Update Staff Photo"}),p.jsx("style",{children:`
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
      `})]})},nfe=()=>{var O;const{plans:e,branches:t,addPlan:n,updatePlan:r,currentUser:i}=Un(),[a,l]=k.useState(!1),[f,h]=k.useState(null),[u,g]=k.useState({name:"",type:gt.GYM,price:0,durationDays:30,branchId:((O=t[0])==null?void 0:O.id)||"",isMultiBranch:!1,maxSessions:0,sessionDurationMinutes:60,groupCapacity:15}),y=j=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(j),E=(i==null?void 0:i.role)==="SUPER_ADMIN"?e:e.filter(j=>j.branchId===(i==null?void 0:i.branchId)),C=()=>{var j;h(null),g({name:"",type:gt.GYM,price:0,durationDays:30,branchId:(i==null?void 0:i.branchId)||((j=t[0])==null?void 0:j.id)||"",isMultiBranch:!1,maxSessions:0,sessionDurationMinutes:60,groupCapacity:15}),l(!0)},I=j=>{h(j),g({name:j.name,type:j.type,price:j.price,durationDays:j.durationDays,branchId:j.branchId,isMultiBranch:j.isMultiBranch||!1,maxSessions:j.maxSessions||0,sessionDurationMinutes:j.sessionDurationMinutes||60,groupCapacity:j.groupCapacity||15}),l(!0)},M=j=>{j.preventDefault();const U={...u,maxSessions:u.maxSessions>0?u.maxSessions:void 0,sessionDurationMinutes:u.type!==gt.GYM?u.sessionDurationMinutes:void 0,groupCapacity:u.type===gt.GROUP?u.groupCapacity:void 0};f?r(f.id,U):n({id:`p-${Date.now()}`,isActive:!0,...U}),l(!1)};return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Membership Plans"}),p.jsx("p",{className:"text-gray-500",children:"Structure your offerings, validity, and session quotas"})]}),p.jsxs("button",{onClick:C,className:"bg-blue-600 text-white px-6 py-2 rounded-xl font-bold hover:bg-blue-700 transition-all flex items-center gap-2 shadow-lg shadow-blue-100",children:[p.jsx("i",{className:"fas fa-plus"})," CREATE NEW PLAN"]})]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:E.map(j=>{const U=t.find(L=>L.id===j.branchId);return p.jsxs("div",{className:"bg-white rounded-3xl border shadow-sm p-6 relative overflow-hidden group hover:border-blue-300 transition-all",children:[p.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-blue-500/5 -mr-12 -mt-12 rounded-full group-hover:bg-blue-500/10 transition-colors"}),p.jsxs("div",{className:"mb-4 flex justify-between items-start gap-2 flex-wrap",children:[p.jsx("span",{className:"bg-blue-50 text-blue-600 text-[10px] font-black px-2 py-1 rounded uppercase tracking-wider",children:j.type}),p.jsxs("div",{className:"flex flex-col items-end gap-1",children:[j.isMultiBranch&&p.jsx("span",{className:"bg-indigo-600 text-white text-[8px] font-black px-2 py-1 rounded uppercase tracking-widest shadow-sm",children:"ALL BRANCH ACCESS"}),j.maxSessions&&p.jsxs("span",{className:"bg-emerald-50 text-emerald-600 text-[8px] font-black px-2 py-1 rounded border border-emerald-100 uppercase tracking-widest",children:[j.maxSessions," SESSIONS"]}),j.type===gt.GROUP&&p.jsxs("span",{className:"bg-orange-50 text-orange-600 text-[8px] font-black px-2 py-1 rounded border border-orange-100 uppercase tracking-widest",children:[j.groupCapacity||15," CAPACITY"]})]})]}),p.jsx("h3",{className:"text-xl font-black text-gray-900 mb-1 uppercase tracking-tight",children:j.name}),p.jsx("p",{className:"text-[10px] text-gray-400 uppercase font-black mb-6 tracking-widest",children:U==null?void 0:U.name}),p.jsxs("div",{className:"flex flex-col gap-1 mb-8",children:[p.jsxs("div",{className:"flex items-baseline gap-1",children:[p.jsx("span",{className:"text-3xl font-black text-gray-900",children:y(j.price)}),p.jsxs("span",{className:"text-gray-400 text-sm font-bold uppercase tracking-tighter",children:["/ ",j.durationDays," Days"]})]}),j.type!==gt.GYM&&p.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest",children:[j.sessionDurationMinutes||60," Min per session"]}),j.type===gt.GROUP&&p.jsxs("p",{className:"text-[10px] text-orange-500 font-bold uppercase tracking-widest flex items-center gap-1.5",children:[p.jsx("i",{className:"fas fa-users-rectangle"})," Max ",j.groupCapacity||15," Participants"]})]}),p.jsx("button",{onClick:()=>I(j),className:"w-full py-3 bg-gray-50 text-gray-600 rounded-xl font-black text-[10px] uppercase tracking-[0.2em] hover:bg-gray-100 transition-colors",children:"EDIT DETAILS"})]},j.id)})}),a&&p.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:p.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-md p-8 shadow-2xl animate-[slideUp_0.3s_ease-out] max-h-[90vh] overflow-y-auto scrollbar-hide",children:[p.jsx("h3",{className:"text-2xl font-black mb-6 tracking-tight uppercase text-slate-900",children:f?"Edit Plan":"New Membership Plan"}),p.jsxs("form",{onSubmit:M,className:"space-y-5",children:[p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Plan Name"}),p.jsx("input",{required:!0,placeholder:"e.g., Summer Special",className:"w-full p-4 bg-gray-50 border border-gray-100 rounded-2xl outline-none focus:ring-2 focus:ring-blue-500 font-bold text-sm",value:u.name,onChange:j=>g({...u,name:j.target.value})})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Plan Type"}),p.jsxs("select",{className:"w-full p-4 bg-gray-50 border border-gray-100 rounded-2xl outline-none font-black text-xs uppercase tracking-widest",value:u.type,onChange:j=>g({...u,type:j.target.value}),children:[p.jsx("option",{value:gt.GYM,children:"Gym Membership"}),p.jsx("option",{value:gt.PT,children:"Personal Training"}),p.jsx("option",{value:gt.GROUP,children:"Group Classes"})]})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Price (INR)"}),p.jsx("input",{type:"number",required:!0,placeholder:"Price",className:"w-full p-4 bg-gray-50 border border-gray-100 rounded-2xl outline-none focus:ring-2 focus:ring-blue-500 font-bold",value:u.price||"",onChange:j=>g({...u,price:Number(j.target.value)})})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Validity (Days)"}),p.jsx("input",{type:"number",required:!0,placeholder:"Days",className:"w-full p-4 bg-gray-50 border border-gray-100 rounded-2xl outline-none focus:ring-2 focus:ring-blue-500 font-bold",value:u.durationDays||"",onChange:j=>g({...u,durationDays:Number(j.target.value)})})]})]}),(u.type===gt.PT||u.type===gt.GROUP)&&p.jsxs("div",{className:"grid grid-cols-2 gap-4 animate-[fadeIn_0.3s_ease-out]",children:[p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] font-black text-indigo-600 uppercase tracking-widest ml-1",children:"Session Quota"}),p.jsx("input",{type:"number",placeholder:"e.g. 12",className:"w-full p-4 bg-indigo-50 border border-indigo-100 rounded-2xl outline-none focus:ring-2 focus:ring-indigo-500 font-bold",value:u.maxSessions||"",onChange:j=>g({...u,maxSessions:Number(j.target.value)})})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] font-black text-indigo-600 uppercase tracking-widest ml-1",children:"Mins / Session"}),p.jsx("input",{type:"number",placeholder:"e.g. 60",className:"w-full p-4 bg-indigo-50 border border-indigo-100 rounded-2xl outline-none focus:ring-2 focus:ring-indigo-500 font-bold",value:u.sessionDurationMinutes||"",onChange:j=>g({...u,sessionDurationMinutes:Number(j.target.value)})})]})]}),u.type===gt.GROUP&&p.jsxs("div",{className:"space-y-1 p-4 bg-orange-50 border border-orange-100 rounded-2xl animate-[fadeIn_0.3s_ease-out]",children:[p.jsxs("label",{className:"text-[10px] font-black text-orange-600 uppercase tracking-widest ml-1 flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-users-viewfinder"})," Maximum Participants per Session"]}),p.jsx("input",{type:"number",className:"w-full p-4 bg-white border border-orange-200 rounded-xl outline-none focus:ring-2 focus:ring-orange-500 font-black text-sm",value:u.groupCapacity,onChange:j=>g({...u,groupCapacity:Number(j.target.value)})})]}),p.jsx("div",{className:"py-4 border-t border-b border-gray-50 space-y-4",children:p.jsxs("label",{className:"flex items-center justify-between cursor-pointer group",children:[p.jsxs("div",{className:"flex flex-col",children:[p.jsx("span",{className:"text-[10px] font-black text-slate-700 uppercase tracking-widest",children:"Multi-Branch Access"}),p.jsx("span",{className:"text-[9px] text-slate-400 font-medium",children:"Allows athlete to enter any IronFlow location"})]}),p.jsx("div",{onClick:()=>g({...u,isMultiBranch:!u.isMultiBranch}),className:`w-12 h-6 rounded-full transition-all relative ${u.isMultiBranch?"bg-indigo-600":"bg-slate-200"}`,children:p.jsx("div",{className:`absolute top-1 w-4 h-4 rounded-full bg-white transition-all shadow-sm ${u.isMultiBranch?"right-1":"left-1"}`})})]})}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Home Branch"}),p.jsx("select",{className:"w-full p-4 bg-gray-50 border border-gray-100 rounded-2xl outline-none font-bold text-xs uppercase tracking-widest",value:u.branchId,onChange:j=>g({...u,branchId:j.target.value}),disabled:(i==null?void 0:i.role)!=="SUPER_ADMIN",children:t.map(j=>p.jsx("option",{value:j.id,children:j.name},j.id))})]}),p.jsxs("div",{className:"pt-4 space-y-3",children:[p.jsx("button",{className:"w-full py-4 bg-slate-900 text-white rounded-[1.5rem] font-black text-xs uppercase tracking-[0.2em] hover:bg-black shadow-xl shadow-slate-100 transition-all active:scale-95",children:f?"SAVE CHANGES":"DEPLOY PLAN"}),p.jsx("button",{type:"button",onClick:()=>l(!1),className:"w-full py-2 text-gray-400 font-black hover:text-gray-600 transition-colors uppercase text-[9px] tracking-widest",children:"CANCEL"})]})]})]})}),p.jsx("style",{children:`
        @keyframes slideUp {
          from { transform: translateY(20px); opacity: 0; }
          to { transform: translateY(0); opacity: 1; }
        }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
      `})]})},rfe=()=>{const{feedback:e,users:t,updateFeedbackStatus:n,currentUser:r,askGemini:i}=Un(),[a,l]=k.useState(""),[f,h]=k.useState(!1),u=(r==null?void 0:r.role)==="SUPER_ADMIN"?e:e.filter(y=>y.branchId===(r==null?void 0:r.branchId)),g=async()=>{if(u.length===0)return;h(!0);const E=`Act as a Professional Gym Operations Manager. Analyze the following member feedback and provide:
    1. A summary of the top 3 recurring issues.
    2. A sentiment score (0-100).
    3. An immediate 3-step Action Plan to improve member satisfaction.
    
    Feedback Data:
    ${u.map(I=>`Type: ${I.type}, Content: ${I.content}`).join(`
`)}`,C=await i(E,"flash");l(C),h(!1)};return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-bold text-gray-900 uppercase tracking-tight",children:"Intelligence & Voice"}),p.jsx("p",{className:"text-gray-500",children:"Listening to athletes and responding with AI-backed insights"})]}),p.jsxs("button",{onClick:g,disabled:f||u.length===0,className:"bg-slate-900 text-white px-6 py-2 rounded-xl font-black text-[10px] tracking-widest flex items-center gap-3 shadow-xl shadow-slate-200 disabled:opacity-50",children:[f?p.jsx("i",{className:"fas fa-circle-notch fa-spin"}):p.jsx("i",{className:"fas fa-sparkles"}),"GEMINI INSIGHTS"]})]}),a&&p.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-blue-50 border-2 border-indigo-100 p-8 rounded-[2.5rem] animate-[slideUp_0.4s_ease-out]",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[p.jsx("div",{className:"bg-indigo-600 text-white w-10 h-10 rounded-2xl flex items-center justify-center shadow-lg",children:p.jsx("i",{className:"fas fa-robot"})}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-sm font-black text-slate-900 uppercase",children:"AI Branch Audit"}),p.jsxs("p",{className:"text-[10px] text-indigo-500 font-bold",children:["Generated from ",u.length," member voices"]})]}),p.jsx("button",{onClick:()=>l(""),className:"ml-auto text-slate-400 hover:text-slate-600",children:p.jsx("i",{className:"fas fa-times"})})]}),p.jsx("div",{className:"text-sm text-slate-700 leading-relaxed font-medium whitespace-pre-wrap max-h-96 overflow-y-auto",children:a})]}),p.jsx("div",{className:"space-y-4",children:u.length===0?p.jsx("div",{className:"bg-white p-12 rounded-3xl border border-dashed text-center text-gray-400",children:"No feedback entries found yet."}):[...u].reverse().map(y=>{const E=t.find(C=>C.id===y.memberId);return p.jsxs("div",{className:"bg-white p-6 rounded-3xl border shadow-sm flex flex-col md:flex-row gap-6 items-start md:items-center hover:border-blue-200 transition-colors",children:[p.jsxs("div",{className:"flex items-center gap-3 min-w-[200px]",children:[p.jsx("img",{src:E==null?void 0:E.avatar,className:"w-10 h-10 rounded-xl border object-cover",alt:""}),p.jsxs("div",{children:[p.jsx("p",{className:"font-bold text-gray-900 leading-tight",children:E==null?void 0:E.name}),p.jsx("p",{className:"text-[9px] text-gray-400 uppercase font-black tracking-widest mt-0.5",children:y.date})]})]}),p.jsxs("div",{className:"flex-1",children:[p.jsx("div",{className:"flex items-center gap-2 mb-1",children:p.jsx("span",{className:`text-[9px] font-black px-2 py-0.5 rounded uppercase ${y.type==="COMPLAINT"?"bg-red-50 text-red-600":"bg-blue-50 text-blue-600"}`,children:y.type})}),p.jsx("p",{className:"text-slate-600 text-sm leading-relaxed",children:y.content})]}),p.jsx("div",{className:"flex items-center gap-4 w-full md:w-auto",children:p.jsxs("select",{className:`text-[10px] font-black px-4 py-2 rounded-xl border outline-none transition-all uppercase tracking-widest ${y.status==="RESOLVED"?"bg-green-50 text-green-700 border-green-200":y.status==="IN_PROGRESS"?"bg-amber-50 text-amber-700 border-amber-200":"bg-slate-50 text-slate-700 border-slate-200"}`,value:y.status,onChange:C=>n(y.id,C.target.value),children:[p.jsx("option",{value:"NEW",children:"New"}),p.jsx("option",{value:"IN_PROGRESS",children:"WIP"}),p.jsx("option",{value:"RESOLVED",children:"Resolved"})]})})]},y.id)})})]})},ife=({isOpen:e,onClose:t,selectedDate:n=new Date().toISOString().split("T")[0]})=>{const{currentUser:r,bookings:i,users:a,classSchedules:l,showToast:f}=Un(),[h,u]=k.useState("GROUP"),[g,y]=k.useState(null),[E,C]=k.useState(null),[I,M]=k.useState("");k.useEffect(()=>{if(!E)return;const z=()=>{const J=Date.now(),W=Math.random().toString(36).substring(2,10),te={...JSON.parse(E.code),dynamicToken:`${J}|${W}`,expiresAt:J+3e4};M(JSON.stringify(te))};z();const B=setInterval(z,15e3);return()=>clearInterval(B)},[E]);const O=i.filter(z=>{const B=z.trainerId===(r==null?void 0:r.id),J=z.date===n,W=z.status==="BOOKED",Z=h==="PT"?z.type===gt.PT:z.type===gt.GROUP;return B&&J&&W&&Z}),j=z=>{var B;return((B=a.find(J=>J.id===z))==null?void 0:B.name)||"Unknown"},U=z=>{if(z.type===gt.GROUP){const B=l.find(J=>J.date===z.date&&J.timeSlot===z.timeSlot&&J.trainerId===z.trainerId);return(B==null?void 0:B.title)||"Group Class"}return"Personal Training"},L=z=>{const B=a.find(W=>W.id===z.trainerId),J=(B==null?void 0:B.commissionPercentage)||0;return z.type===gt.PT?`${J}% per session`:`${J}% on group class`},G=z=>{const B=JSON.stringify({type:"CLASS_COMPLETION",bookingId:z.id,trainerId:z.trainerId,memberId:z.memberId,classType:z.type,date:z.date,timestamp:Date.now()}),J={id:`cc-${Date.now()}`,bookingId:z.id,trainerId:z.trainerId,memberId:z.memberId,code:B,status:"VALID",classDate:z.date,classType:z.type===gt.PT?"PT":"GROUP",branchId:z.branchId,createdAt:new Date().toISOString()};C(J),y(z),f("QR Code generated! Ask member to scan.","success")},V=()=>{g&&G(g)};return e?p.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:p.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-lg p-8 shadow-2xl animate-[slideUp_0.3s_ease-out] max-h-[90vh] overflow-y-auto",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Class Completion QR"}),p.jsx("p",{className:"text-sm text-slate-500",children:"Generate QR for members to complete class"})]}),p.jsx("button",{onClick:t,className:"text-slate-400 hover:text-slate-600",children:p.jsx("i",{className:"fas fa-times text-xl"})})]}),p.jsxs("div",{className:"bg-slate-100 p-1 rounded-xl flex mb-6",children:[p.jsxs("button",{onClick:()=>{u("GROUP"),C(null),y(null)},className:`flex-1 py-2 rounded-lg text-xs font-bold uppercase transition-all ${h==="GROUP"?"bg-white text-slate-900 shadow":"text-slate-500"}`,children:[p.jsx("i",{className:"fas fa-users mr-1"})," Group Classes"]}),p.jsxs("button",{onClick:()=>{u("PT"),C(null),y(null)},className:`flex-1 py-2 rounded-lg text-xs font-bold uppercase transition-all ${h==="PT"?"bg-white text-slate-900 shadow":"text-slate-500"}`,children:[p.jsx("i",{className:"fas fa-user mr-1"})," PT Sessions"]})]}),E?p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"bg-white p-6 rounded-3xl border-4 border-blue-100 shadow-inner inline-block mb-4",children:p.jsx(xS,{value:I||E.code,size:220,level:"H",includeMargin:!0})}),p.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[p.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),p.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"Refreshes every 15 seconds"})]}),p.jsxs("div",{className:"space-y-2 mb-6",children:[p.jsx("p",{className:"font-bold text-lg text-slate-900",children:j((g==null?void 0:g.memberId)||"")}),p.jsxs("p",{className:"text-sm text-slate-500",children:[U(g),"  ",g==null?void 0:g.timeSlot]}),p.jsx("div",{className:"flex items-center justify-center gap-2 mt-3",children:p.jsxs("span",{className:"px-3 py-1 bg-green-100 text-green-700 text-xs font-bold rounded-full",children:[p.jsx("i",{className:"fas fa-coins mr-1"}),"Commission: ",L(g)]})})]}),p.jsx("div",{className:"bg-amber-50 border border-amber-100 rounded-xl p-4 mb-6",children:p.jsxs("p",{className:"text-xs text-amber-700 font-medium",children:[p.jsx("i",{className:"fas fa-info-circle mr-1"}),"Ask member to scan this QR at reception or check-out gate"]})}),p.jsxs("div",{className:"flex gap-3",children:[p.jsxs("button",{onClick:V,className:"flex-1 py-3 bg-slate-100 text-slate-700 rounded-xl font-bold text-sm hover:bg-slate-200 transition-colors",children:[p.jsx("i",{className:"fas fa-redo mr-2"})," Regenerate"]}),p.jsxs("button",{onClick:()=>{C(null),y(null)},className:"flex-1 py-3 bg-blue-600 text-white rounded-xl font-bold text-sm hover:bg-blue-700 transition-colors",children:[p.jsx("i",{className:"fas fa-arrow-left mr-2"})," Back"]})]}),p.jsx("p",{className:"text-xs text-slate-400 mt-4",children:"QR expires in 10 minutes"})]}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsxs("h4",{className:"text-sm font-black text-slate-400 uppercase tracking-widest",children:["Select Member - ",n]}),p.jsxs("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full font-bold",children:[O.length," Pending"]})]}),O.length===0?p.jsxs("div",{className:"text-center py-12 bg-slate-50 rounded-2xl",children:[p.jsx("i",{className:"fas fa-check-circle text-4xl text-green-400 mb-3"}),p.jsxs("p",{className:"text-slate-500",children:["No pending ",h==="PT"?"PT sessions":"group classes"]}),p.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"All classes completed for this date!"})]}):p.jsx("div",{className:"space-y-3",children:O.map(z=>p.jsx("button",{onClick:()=>G(z),className:"w-full p-4 bg-white border-2 border-slate-100 rounded-2xl hover:border-blue-500 transition-all text-left",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center text-blue-600",children:p.jsx("i",{className:"fas fa-user"})}),p.jsxs("div",{children:[p.jsx("p",{className:"font-bold text-slate-900",children:j(z.memberId)}),p.jsxs("p",{className:"text-xs text-slate-500",children:[U(z),"  ",z.timeSlot]})]})]}),p.jsxs("div",{className:"text-right",children:[p.jsx("i",{className:"fas fa-qrcode text-slate-300 text-xl mb-1"}),p.jsx("p",{className:"text-[10px] text-green-600 font-bold",children:L(z)})]})]})},z.id))})]}),p.jsx("style",{children:`
          @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
          }
        `})]})}):null},afe=()=>{var he;const{currentUser:e,bookings:t,users:n,plans:r,subscriptions:i,addBooking:a,showToast:l,branches:f,classSchedules:h,addClassTemplate:u,deleteClassSession:g}=Un(),[y,E]=k.useState(new Date().toISOString().split("T")[0]),[C,I]=k.useState(!1),[M,O]=k.useState(!1),[j,U]=k.useState("GROUP"),[L,G]=k.useState(""),[V,z]=k.useState(!1),[B,J]=k.useState(""),[W,Z]=k.useState(!1),te=k.useMemo(()=>{const se=[],ke=new Date;for(let ie=0;ie<7;ie++){const ue=new Date(ke);ue.setDate(ke.getDate()+ie),se.push({full:ue.toISOString().split("T")[0],day:ue.toLocaleDateString("en-US",{weekday:"short"}),date:ue.getDate()})}return se},[]),[Y,pe]=k.useState({trainerId:(e==null?void 0:e.id)||"",dayOfWeek:"MONDAY",timeSlot:"07:00 AM",title:"",capacity:20}),Te=["06:00 AM","07:00 AM","08:00 AM","09:00 AM","10:00 AM","11:00 AM","12:00 PM","01:00 PM","02:00 PM","03:00 PM","04:00 PM","05:00 PM","06:00 PM","07:00 PM","08:00 PM","09:00 PM"],le=k.useMemo(()=>n.filter(se=>se.role===Oe.TRAINER&&((e==null?void 0:e.role)===Oe.SUPER_ADMIN||se.branchId===(e==null?void 0:e.branchId))),[n,e]),de=k.useMemo(()=>h.filter(se=>se.date===y).sort((se,ke)=>{const ie=new Date(`2000-01-01 ${se.timeSlot}`).getTime(),ue=new Date(`2000-01-01 ${ke.timeSlot}`).getTime();return ie-ue}),[h,y]),ge=async se=>{if(!e||M)return;if(t.filter(me=>me.trainerId===se.trainerId&&me.date===se.date&&me.timeSlot===se.timeSlot&&me.status!=="CANCELLED").length>=se.capacity){l("Class Full! Please choose another slot.","error");return}if(t.some(me=>me.memberId===e.id&&me.trainerId===se.trainerId&&me.date===se.date&&me.timeSlot===se.timeSlot&&me.status!=="CANCELLED")){l("You have already booked this class.","error");return}if(!i.find(me=>{var Je;return me.memberId===e.id&&me.status===Na.ACTIVE&&((Je=r.find(Qe=>Qe.id===me.planId))==null?void 0:Je.type)===gt.GROUP})){l("You need an active Group Class subscription.","error");return}O(!0),await new Promise(me=>setTimeout(me,600));const qe={id:`book-${Date.now()}`,memberId:e.id,trainerId:se.trainerId,type:gt.GROUP,date:se.date,timeSlot:se.timeSlot,branchId:se.branchId,status:"BOOKED"};a(qe),O(!1),l("Class Booked Successfully!","success")},De=se=>{if(se.preventDefault(),!Y.trainerId||!Y.timeSlot||!Y.title)return;const ke={id:`temp-${Date.now()}`,trainerId:Y.trainerId,dayOfWeek:Y.dayOfWeek,timeSlot:Y.timeSlot,title:Y.title,capacity:Y.capacity,branchId:(e==null?void 0:e.branchId)||f[0].id};u(ke),I(!1)},we=(se,ke)=>t.filter(ie=>ie.trainerId===se&&ie.date===ke&&ie.type===gt.PT&&ie.status!=="CANCELLED"),$e=(se,ke,ie)=>!we(se,ke).some(qe=>qe.timeSlot===ie),ne=async()=>{var qe;if(!e||!L||!B||M)return;const se=i.find(me=>{const Je=r.find(Qe=>Qe.id===me.planId);return me.memberId===e.id&&me.status===Na.ACTIVE&&(Je==null?void 0:Je.type)===gt.PT});if(!se){l("You need an active Personal Training subscription.","error");return}const ke=r.find(me=>me.id===se.planId),ie=t.filter(me=>me.memberId===e.id&&me.type===gt.PT&&me.status!=="CANCELLED").length;if(ke!=null&&ke.maxSessions&&ie>=ke.maxSessions){l("You have used all your PT sessions. Please upgrade your plan.","error");return}O(!0),await new Promise(me=>setTimeout(me,600));const ue={id:`book-${Date.now()}`,memberId:e.id,trainerId:L,type:gt.PT,date:y,timeSlot:B,branchId:e.branchId||f[0].id,status:"BOOKED"};a(ue),O(!1),z(!1),J(""),l(`PT Session Booked with ${(qe=n.find(me=>me.id===L))==null?void 0:qe.name}!`,"success")},re=()=>le.filter(se=>Te.some(ke=>$e(se.id,y,ke)));return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight uppercase",children:j==="GROUP"?"Class Schedule":"Personal Training"}),p.jsx("p",{className:"text-gray-500 font-medium text-sm",children:j==="GROUP"?"Book your next workout":"Book 1-on-1 sessions with trainers"})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsxs("div",{className:"bg-white p-1 rounded-xl border flex",children:[p.jsxs("button",{onClick:()=>U("GROUP"),className:`px-4 py-2 rounded-lg text-xs font-bold uppercase tracking-wider transition-all ${j==="GROUP"?"bg-slate-900 text-white":"text-gray-600 hover:bg-gray-50"}`,children:[p.jsx("i",{className:"fas fa-users mr-1"})," Group"]}),p.jsxs("button",{onClick:()=>U("PT"),className:`px-4 py-2 rounded-lg text-xs font-bold uppercase tracking-wider transition-all ${j==="PT"?"bg-slate-900 text-white":"text-gray-600 hover:bg-gray-50"}`,children:[p.jsx("i",{className:"fas fa-user mr-1"})," PT"]})]}),(e==null?void 0:e.role)===Oe.TRAINER&&p.jsxs("button",{onClick:()=>Z(!0),className:"bg-green-600 text-white px-4 py-2.5 rounded-xl font-black text-xs uppercase tracking-widest hover:bg-green-700 transition-all flex items-center gap-2 shadow-lg shadow-green-100",children:[p.jsx("i",{className:"fas fa-qrcode"})," Complete Class"]}),((e==null?void 0:e.role)===Oe.SUPER_ADMIN||(e==null?void 0:e.role)===Oe.TRAINER)&&j==="GROUP"&&p.jsxs("button",{onClick:()=>I(!0),className:"bg-indigo-600 text-white px-6 py-2.5 rounded-xl font-black text-xs uppercase tracking-widest hover:bg-indigo-700 transition-all flex items-center gap-2 shadow-lg shadow-indigo-100",children:[p.jsx("i",{className:"fas fa-plus-circle"})," MANAGE"]})]})]}),p.jsx("div",{className:"flex gap-3 overflow-x-auto pb-4 scrollbar-hide",children:te.map((se,ke)=>p.jsxs("button",{onClick:()=>{E(se.full),G("")},className:`min-w-[70px] flex flex-col items-center justify-center p-3 rounded-2xl border-2 transition-all ${y===se.full?"bg-slate-900 border-slate-900 text-white shadow-xl scale-105":"bg-white border-slate-100 text-slate-400 hover:border-slate-300"}`,children:[p.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:se.day}),p.jsx("span",{className:"text-xl font-black",children:se.date})]},ke))}),j==="PT"&&p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-100",children:[p.jsx("h3",{className:"text-sm font-black text-slate-400 uppercase tracking-widest mb-4",children:"Select Trainer"}),p.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:re().map(se=>{const ke=L===se.id,ie=Te.filter(ue=>$e(se.id,y,ue)).length;return p.jsxs("button",{onClick:()=>{G(se.id),J("")},className:`p-4 rounded-2xl border-2 transition-all text-left ${ke?"border-indigo-600 bg-indigo-50":"border-slate-100 hover:border-slate-200"}`,children:[p.jsx("img",{src:se.avatar,alt:"",className:"w-12 h-12 rounded-full mb-2 border-2 border-white shadow"}),p.jsx("p",{className:"font-bold text-sm text-slate-900",children:se.name}),p.jsxs("p",{className:"text-xs text-slate-500",children:[ie," slots available"]})]},se.id)})}),re().length===0&&p.jsxs("div",{className:"text-center py-8 text-slate-400",children:[p.jsx("i",{className:"fas fa-calendar-times text-3xl mb-2"}),p.jsx("p",{children:"No trainers available on this date"})]})]}),L&&p.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-100",children:[p.jsxs("h3",{className:"text-sm font-black text-slate-400 uppercase tracking-widest mb-4",children:["Available Slots - ",(he=n.find(se=>se.id===L))==null?void 0:he.name]}),p.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3",children:Te.map(se=>{const ke=$e(L,y,se),ie=B===se;return p.jsx("button",{disabled:!ke,onClick:()=>J(se),className:`py-3 px-2 rounded-xl text-xs font-bold transition-all ${ie?"bg-indigo-600 text-white shadow-lg":ke?"bg-slate-50 text-slate-700 hover:bg-slate-100 border border-slate-200":"bg-slate-100 text-slate-400 cursor-not-allowed"}`,children:se},se)})}),(e==null?void 0:e.role)===Oe.MEMBER&&B&&p.jsx("button",{onClick:ne,disabled:M,className:"w-full mt-6 py-4 bg-indigo-600 text-white rounded-2xl font-black text-sm uppercase tracking-widest hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-100",children:M?p.jsxs(p.Fragment,{children:[p.jsx("i",{className:"fas fa-spinner fa-spin mr-2"})," Booking..."]}):p.jsxs(p.Fragment,{children:[p.jsx("i",{className:"fas fa-check mr-2"})," Book PT Session"]})})]}),(e==null?void 0:e.role)===Oe.MEMBER&&p.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-100",children:[p.jsx("h3",{className:"text-sm font-black text-slate-400 uppercase tracking-widest mb-4",children:"My PT Sessions"}),t.filter(se=>se.memberId===e.id&&se.type===gt.PT&&se.status!=="CANCELLED").length===0?p.jsx("p",{className:"text-slate-400 text-sm",children:"No PT sessions booked yet"}):p.jsx("div",{className:"space-y-3",children:t.filter(se=>se.memberId===e.id&&se.type===gt.PT&&se.status!=="CANCELLED").map(se=>{const ke=n.find(ie=>ie.id===se.trainerId);return p.jsxs("div",{className:"flex items-center justify-between p-4 bg-indigo-50 rounded-xl",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("img",{src:ke==null?void 0:ke.avatar,alt:"",className:"w-10 h-10 rounded-full border-2 border-white"}),p.jsxs("div",{children:[p.jsx("p",{className:"font-bold text-slate-900",children:ke==null?void 0:ke.name}),p.jsxs("p",{className:"text-xs text-slate-500",children:[se.date,"  ",se.timeSlot]})]})]}),p.jsx("span",{className:"px-3 py-1 bg-indigo-600 text-white text-xs font-bold rounded-full",children:se.status})]},se.id)})})]})]}),j==="GROUP"&&p.jsx(p.Fragment,{}),j==="GROUP"&&p.jsx("div",{className:"space-y-4",children:de.length===0?p.jsxs("div",{className:"text-center py-20 bg-white rounded-[2rem] border border-dashed border-slate-200",children:[p.jsx("i",{className:"fas fa-mug-hot text-4xl text-slate-200 mb-4"}),p.jsx("p",{className:"text-slate-400 font-black uppercase tracking-widest text-xs",children:"No classes scheduled for today."})]}):de.map(se=>{const ke=n.find(me=>me.id===se.trainerId),ie=t.filter(me=>me.trainerId===se.trainerId&&me.date===se.date&&me.timeSlot===se.timeSlot&&me.status!=="CANCELLED").length,ue=ie>=se.capacity,qe=t.some(me=>me.memberId===(e==null?void 0:e.id)&&me.trainerId===se.trainerId&&me.date===se.date&&me.timeSlot===se.timeSlot&&me.status!=="CANCELLED");return p.jsxs("div",{className:"bg-white p-0 rounded-3xl border border-slate-100 shadow-sm overflow-hidden flex flex-col md:flex-row hover:shadow-lg transition-all group",children:[p.jsxs("div",{className:"bg-slate-50 p-6 flex flex-col justify-center items-center md:w-32 border-b md:border-b-0 md:border-r border-slate-100",children:[p.jsx("span",{className:"text-lg font-black text-slate-900",children:se.timeSlot.split(" ")[0]}),p.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:se.timeSlot.split(" ")[1]})]}),p.jsxs("div",{className:"p-6 flex-1 flex flex-col justify-center",children:[p.jsxs("div",{className:"flex justify-between items-start mb-2",children:[p.jsx("h4",{className:"text-xl font-black text-slate-900 uppercase tracking-tight",children:se.title}),ue&&p.jsx("span",{className:"bg-red-100 text-red-600 text-[9px] font-black px-2 py-1 rounded uppercase tracking-widest",children:"FULL"})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("img",{src:(ke==null?void 0:ke.avatar)||"https://i.pravatar.cc/150?u=coach",className:"w-6 h-6 rounded-full border border-slate-100",alt:""}),p.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:ke==null?void 0:ke.name}),p.jsx("span",{className:"text-slate-300",children:""}),p.jsxs("span",{className:"text-xs font-bold text-slate-500 uppercase",children:[se.capacity-ie," Slots Left"]})]})]}),p.jsx("div",{className:"p-6 flex items-center justify-center md:w-48 bg-white border-t md:border-t-0 md:border-l border-slate-50",children:(e==null?void 0:e.role)===Oe.MEMBER?p.jsx("button",{onClick:()=>ge(se),disabled:ue||qe||M,className:`w-full py-3 rounded-xl font-black text-xs uppercase tracking-widest transition-all ${qe?"bg-green-500 text-white cursor-default":ue?"bg-slate-100 text-slate-400 cursor-not-allowed":"bg-slate-900 text-white hover:bg-black shadow-lg hover:shadow-xl active:scale-95"}`,children:qe?"BOOKED":ue?"WAITLIST":"BOOK"}):p.jsx("button",{onClick:()=>g(se.id),className:"w-full py-3 bg-red-50 text-red-600 rounded-xl font-black text-xs uppercase tracking-widest hover:bg-red-100 transition-all",children:"CANCEL"})})]},se.id)})}),C&&p.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:p.jsxs("div",{className:"bg-white rounded-[2.5rem] w-full max-w-md overflow-hidden shadow-2xl animate-[slideUp_0.3s_ease-out]",children:[p.jsxs("div",{className:"bg-indigo-600 p-8 text-white flex justify-between items-center",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-xl font-black uppercase tracking-tight leading-none mb-1",children:"Schedule Class"}),p.jsx("p",{className:"text-[10px] text-indigo-200 font-bold uppercase tracking-widest",children:"Admin Control Panel"})]}),p.jsx("button",{onClick:()=>I(!1),className:"bg-white/10 p-2.5 rounded-xl hover:bg-white/20 transition-colors",children:p.jsx("i",{className:"fas fa-times"})})]}),p.jsxs("form",{onSubmit:De,className:"p-8 space-y-6",children:[p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Class Title"}),p.jsx("input",{required:!0,className:"w-full p-4 bg-slate-50 border border-slate-100 rounded-2xl outline-none focus:ring-2 focus:ring-indigo-500 font-bold text-sm",placeholder:"e.g. Morning Yoga",value:Y.title,onChange:se=>pe({...Y,title:se.target.value})})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Instructor"}),p.jsxs("select",{required:!0,className:"w-full p-4 bg-slate-50 border border-slate-100 rounded-2xl outline-none focus:ring-2 focus:ring-indigo-500 font-black text-xs uppercase",value:Y.trainerId,onChange:se=>pe({...Y,trainerId:se.target.value}),children:[p.jsx("option",{value:"",children:"Select Instructor..."}),le.map(se=>p.jsx("option",{value:se.id,children:se.name},se.id))]})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Day of Week"}),p.jsx("select",{required:!0,className:"w-full p-4 bg-slate-50 border border-slate-100 rounded-2xl outline-none focus:ring-2 focus:ring-indigo-500 font-black text-xs uppercase",value:Y.dayOfWeek,onChange:se=>pe({...Y,dayOfWeek:se.target.value}),children:["MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY","SUNDAY"].map(se=>p.jsx("option",{value:se,children:se},se))})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Time Slot"}),p.jsxs("select",{required:!0,className:"w-full p-4 bg-slate-50 border border-slate-100 rounded-2xl outline-none focus:ring-2 focus:ring-indigo-500 font-black text-xs",value:Y.timeSlot,onChange:se=>pe({...Y,timeSlot:se.target.value}),children:[p.jsx("option",{value:"",children:"Select Time..."}),Te.map(se=>p.jsx("option",{value:se,children:se},se))]})]})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Capacity Limit"}),p.jsx("input",{type:"number",required:!0,min:"1",className:"w-full p-4 bg-slate-50 border border-slate-100 rounded-2xl outline-none focus:ring-2 focus:ring-indigo-500 font-bold text-sm",value:Y.capacity,onChange:se=>pe({...Y,capacity:Number(se.target.value)})})]}),p.jsx("button",{type:"submit",className:"w-full py-5 bg-indigo-600 text-white rounded-[1.5rem] font-black text-sm uppercase tracking-widest shadow-2xl shadow-indigo-200 transition-all active:scale-95 hover:bg-indigo-700",children:"SAVE & GENERATE SESSIONS"})]})]})}),p.jsx(ife,{isOpen:W,onClose:()=>Z(!1),selectedDate:y}),p.jsx("style",{children:`
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
      `})]})},Av=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e),sfe=()=>{const{plans:e,currentUser:t,purchaseSubscription:n,subscriptions:r,showToast:i,branches:a,users:l}=Un(),[f,h]=k.useState("ALL"),[u,g]=k.useState(!1),[y,E]=k.useState(null),[C,I]=k.useState("UPI"),[M,O]=k.useState(""),[j,U]=k.useState(new Date().toISOString().split("T")[0]),[L,G]=k.useState(!1),[V,z]=k.useState(null);if(!t)return null;const B=e.filter(we=>we.branchId===t.branchId&&we.isActive),J=f==="ALL"?B:B.filter(we=>we.type===f),W=a.find(we=>we.id===t.branchId),Z=l.filter(we=>we.role===Oe.TRAINER&&we.branchId===t.branchId),Y=r.filter(we=>we.memberId===t.id&&we.status===Na.ACTIVE).some(we=>{const $e=e.find(ne=>ne.id===we.planId);return($e==null?void 0:$e.type)===gt.GYM}),pe=we=>{if(we.type!==gt.GYM&&!Y){i("Base Gym Membership required before buying Add-ons.","error");return}if(we.type===gt.PT||we.type===gt.GROUP){E(we),I("UPI"),O(""),U(new Date().toISOString().split("T")[0]);return}z(we),G(!0)},Te=()=>{if(y){if((y.type===gt.PT||y.type===gt.GROUP)&&!M){i("Please select a trainer for your sessions.","error");return}z(y),E(null),G(!0)}},le=we=>{V&&(n(t.id,V.id,"ONLINE",M||void 0,j),G(!1),E(null),z(null),O(""),U(new Date().toISOString().split("T")[0]),i(`Payment successful! ID: ${we}`,"success"))},de=we=>{i((we==null?void 0:we.message)||"Payment failed. Please try again.","error")},De=(()=>{switch((W==null?void 0:W.paymentProvider)||"RAZORPAY"){case"STRIPE":return{name:"Stripe",color:"#635BFF",icon:"fa-stripe"};case"PAYTM":return{name:"Paytm",color:"#00B9F1",icon:"fa-wallet"};default:return{name:"Razorpay",color:"#3395FF",icon:"fa-check-circle"}}})();return p.jsxs("div",{className:"max-w-6xl mx-auto space-y-8 animate-[fadeIn_0.4s_ease-out]",children:[p.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-6",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-3xl font-black text-slate-900 tracking-tight",children:"UPGRADE YOUR GAME"}),p.jsxs("p",{className:"text-slate-500 font-medium",children:["Branch: ",(W==null?void 0:W.name)||"Loading..."]})]}),p.jsx("div",{className:"flex bg-white p-1 rounded-2xl shadow-sm border overflow-x-auto scrollbar-hide",children:["ALL",gt.GYM,gt.PT,gt.GROUP].map(we=>p.jsx("button",{onClick:()=>h(we),className:`px-6 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest whitespace-nowrap transition-all ${f===we?"bg-slate-900 text-white":"text-slate-400 hover:text-slate-600"}`,children:we==="ALL"?"Everything":we.replace("_"," ")},we))})]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:J.map(we=>{const $e=we.type===gt.GYM,ne=we.durationDays>=90;return p.jsxs("div",{className:`bg-white rounded-[2.5rem] border-2 shadow-sm p-8 relative overflow-hidden transition-all hover:shadow-2xl hover:-translate-y-2 group ${ne?"border-blue-500/20 ring-4 ring-blue-500/5":"border-transparent"}`,children:[ne&&p.jsx("div",{className:"absolute top-6 -right-12 bg-blue-600 text-white text-[9px] font-black uppercase tracking-[0.2em] px-12 py-1.5 rotate-45 shadow-lg",children:"Best Value"}),p.jsxs("div",{className:"mb-8",children:[p.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center mb-6 shadow-inner ${$e?"bg-slate-100 text-slate-900":"bg-blue-50 text-blue-600"}`,children:p.jsx("i",{className:`fas ${$e?"fa-dumbbell":"fa-bolt"} text-xl`})}),p.jsx("h3",{className:"text-2xl font-black text-slate-900 uppercase tracking-tight leading-none mb-2",children:we.name}),p.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest bg-slate-50 px-2 py-0.5 rounded-md",children:we.type.replace("_"," ")})]}),p.jsxs("div",{className:"mb-10 flex items-baseline gap-1",children:[p.jsx("span",{className:"text-4xl font-black text-slate-900",children:Av(we.price).replace("","")}),p.jsxs("span",{className:"text-slate-400 font-bold text-sm uppercase tracking-widest",children:["/ ",we.durationDays," Days"]})]}),p.jsxs("ul",{className:"space-y-4 mb-10",children:[p.jsxs("li",{className:"flex items-center gap-3 text-xs font-bold text-slate-600",children:[p.jsx("i",{className:"fas fa-check-circle text-green-500"})," Full Equipment Access"]}),we.type===gt.PT&&p.jsxs("li",{className:"flex items-center gap-3 text-xs font-bold text-indigo-600",children:[p.jsx("i",{className:"fas fa-user-tie"})," Dedicated Expert Coach"]}),p.jsxs("li",{className:"flex items-center gap-3 text-xs font-bold text-slate-600",children:[p.jsx("i",{className:"fas fa-check-circle text-green-500"})," Free Locker Usage"]})]}),p.jsx("button",{onClick:()=>pe(we),className:`w-full py-5 rounded-[1.5rem] font-black text-sm uppercase tracking-widest transition-all shadow-xl active:scale-95 ${$e?"bg-slate-900 text-white hover:bg-black shadow-slate-200":"bg-blue-600 text-white hover:bg-blue-700 shadow-blue-100"}`,children:"Join Now"})]},we.id)})}),y&&p.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[100] flex items-center justify-center p-4",children:p.jsxs("div",{className:"bg-white w-full max-w-[400px] rounded-3xl overflow-hidden shadow-2xl animate-[slideUp_0.3s_ease-out]",children:[p.jsxs("div",{style:{backgroundColor:De.color},className:"p-6 text-white flex justify-between items-start",children:[p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[p.jsx("span",{className:"font-bold text-lg",children:(W==null?void 0:W.name)||"IronFlow"}),p.jsx("i",{className:`fas ${De.icon} text-[10px] text-white/70`})]}),p.jsxs("p",{className:"text-[11px] text-white/80 font-medium tracking-tight uppercase",children:["Checkout via ",De.name]})]}),p.jsx("button",{onClick:()=>{E(null),O(""),U(new Date().toISOString().split("T")[0])},className:"bg-black/10 hover:bg-black/20 p-2 rounded-lg transition-colors",children:p.jsx("i",{className:"fas fa-times"})})]}),p.jsxs("div",{className:"p-6 space-y-6",children:[p.jsxs("div",{className:"flex justify-between items-center bg-slate-50 p-4 rounded-2xl border border-slate-100",children:[p.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:"Amount to pay"}),p.jsx("span",{className:"text-xl font-black text-slate-900",children:Av(y.price)})]}),(y.type===gt.PT||y.type===gt.GROUP)&&p.jsxs("div",{className:"space-y-3 p-5 bg-indigo-50/50 rounded-2xl border border-indigo-100/50",children:[p.jsx("label",{className:"text-[10px] font-black text-indigo-600 uppercase tracking-widest ml-1",children:"Assign Expert Coach"}),p.jsxs("select",{required:!0,className:"w-full p-4 bg-white border border-indigo-100 rounded-xl outline-none font-bold text-xs uppercase",value:M,onChange:we=>O(we.target.value),children:[p.jsx("option",{value:"",children:"Select a Trainer..."}),Z.map(we=>p.jsx("option",{value:we.id,children:we.name},we.id))]}),p.jsx("p",{className:"text-[9px] text-indigo-400 font-bold uppercase text-center mt-1",children:"Required for package activation"})]}),p.jsxs("div",{className:"space-y-3 p-5 bg-green-50/50 rounded-2xl border border-green-100/50",children:[p.jsxs("label",{className:"text-[10px] font-black text-green-600 uppercase tracking-widest ml-1 flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-calendar-alt"})," Membership Start Date"]}),p.jsx("input",{type:"date",required:!0,className:"w-full p-4 bg-white border border-green-100 rounded-xl outline-none font-bold text-sm",value:j,onChange:we=>U(we.target.value)}),p.jsx("p",{className:"text-[9px] text-green-500 font-bold uppercase text-center mt-1",children:"Plan will start from this date"})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Payment Options"}),p.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[p.jsxs("button",{onClick:()=>I("UPI"),className:`p-4 border-2 rounded-2xl flex flex-col items-center gap-2 relative transition-all ${C==="UPI"?"border-blue-500 bg-blue-50":"border-slate-100 bg-white hover:border-slate-200"}`,children:[p.jsx("i",{className:`fas fa-university ${C==="UPI"?"text-blue-600":"text-slate-400"}`}),p.jsx("span",{className:"text-[10px] font-bold text-slate-700",children:"UPI Apps"})]}),p.jsxs("button",{onClick:()=>I("CARD"),className:`p-4 border-2 rounded-2xl flex flex-col items-center gap-2 relative transition-all ${C==="CARD"?"border-blue-500 bg-blue-50":"border-slate-100 bg-white hover:border-slate-200"}`,children:[p.jsx("i",{className:`fas fa-credit-card ${C==="CARD"?"text-blue-600":"text-slate-400"}`}),p.jsx("span",{className:"text-[10px] font-bold text-slate-700",children:"Credit/Debit"})]})]})]}),p.jsx("button",{onClick:Te,disabled:u,style:{backgroundColor:De.color},className:"w-full py-5 text-white rounded-2xl font-black text-sm uppercase tracking-[0.1em] shadow-xl transition-all flex items-center justify-center gap-3 active:scale-95",children:u?p.jsxs(p.Fragment,{children:[p.jsx("i",{className:"fas fa-circle-notch fa-spin"}),"PROCESSING..."]}):`Pay ${Av(y.price)}`})]})]})}),p.jsx(Bj,{isOpen:L,onClose:()=>{G(!1),z(null)},amount:(V==null?void 0:V.price)||0,description:V?`Purchase ${V.name} - ${V.type.replace("_"," ")}`:"Plan Purchase",customerName:t.name,customerEmail:t.email,onSuccess:le,onError:de}),p.jsx("style",{children:`
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
      `})]})},ll=new Map,i3=5,a3=900*1e3,ofe=()=>{const{users:e,setCurrentUser:t,showToast:n}=Un(),r=Ku(),[i,a]=k.useState(""),[l,f]=k.useState(""),[h,u]=k.useState(""),[g,y]=k.useState(!1),[E,C]=k.useState(null),[I,M]=k.useState("login"),[O,j]=k.useState(""),[U,L]=k.useState(!1);k.useEffect(()=>{(async()=>{const Z=localStorage.getItem("ironflow_session");if(Z)try{const te=JSON.parse(Z);if(te.expiresAt&&new Date(te.expiresAt)>new Date){const Y=e.find(pe=>pe.id===te.userId);Y&&(t(Y),r("/dashboard"))}else localStorage.removeItem("ironflow_session")}catch{localStorage.removeItem("ironflow_session")}})()},[e,t,r]);const G=k.useCallback(W=>{const Z=Date.now(),te=ll.get(W);if(te){if(Z-te.lastAttempt>a3)return ll.set(W,{count:0,lastAttempt:Z}),!0;if(te.count>=i3){const Y=Math.ceil((a3-(Z-te.lastAttempt))/6e4);return C(Y),!1}}return!0},[]),V=k.useCallback(W=>{const Z=Date.now(),te=ll.get(W);te?(ll.set(W,{count:te.count+1,lastAttempt:Z}),te.count+1>=i3&&C(15)):ll.set(W,{count:1,lastAttempt:Z})},[]),z=async W=>{const te=new TextEncoder().encode(W),Y=await crypto.subtle.digest("SHA-256",te);return Array.from(new Uint8Array(Y)).map(Te=>Te.toString(16).padStart(2,"0")).join("")},B=async W=>{var Z;if(W.preventDefault(),!G(i.toLowerCase())){u(`Account locked. Try again in ${E} minutes.`);return}y(!0),u(""),C(null);try{const{data:te,error:Y}=await Ve.auth.signInWithPassword({email:i.toLowerCase(),password:l});if((Z=Y==null?void 0:Y.message)!=null&&Z.includes("Invalid login credentials")){const{data:pe,error:Te}=await Ve.from("users").select("*").eq("email",i.toLowerCase()).single();if(Te||!pe){console.log("User not found in database:",i),V(i.toLowerCase()),u("Invalid email or password."),y(!1);return}const le=pe,de=await z(l);if(le.password!==de){console.log("Password mismatch for user:",i),V(i.toLowerCase()),u("Invalid email or password."),y(!1);return}n("Setting up your account...","success");const{error:ge}=await Ve.auth.signUp({email:i.toLowerCase(),password:l,options:{data:{name:le.name,role:le.role}}});if(ge){if(console.error("Auto-create user error:",ge),ge.message.includes("already registered")){const{data:$e,error:ne}=await Ve.auth.signInWithPassword({email:i.toLowerCase(),password:l});if(!ne&&$e.user){ll.delete(i.toLowerCase()),t(le),n("Login successful","success"),r("/dashboard");return}}V(i.toLowerCase()),u("Invalid email or password."),y(!1);return}const{data:De,error:we}=await Ve.auth.signInWithPassword({email:i.toLowerCase(),password:l});if(we||!De.user){V(i.toLowerCase()),u("Invalid email or password."),y(!1);return}ll.delete(i.toLowerCase()),t(le),n("Login successful","success"),r("/dashboard");return}if(Y){V(i.toLowerCase()),u("Invalid email or password."),y(!1);return}if(te.user){const{data:pe,error:Te}=await Ve.from("users").select("*").eq("email",i.toLowerCase()).single();if(Te||!pe){u("Account not found in system. Contact admin."),y(!1),await Ve.auth.signOut();return}ll.delete(i.toLowerCase()),t(pe),n("Login successful","success"),r("/dashboard"),y(!1)}}catch{u("An error occurred. Please try again."),y(!1)}},J=async W=>{W.preventDefault(),L(!0),u("");try{if(!e.find(Y=>Y.email.toLowerCase()===O.toLowerCase())){setTimeout(()=>{L(!1),M("success")},1500);return}const{error:te}=await Ve.auth.resetPasswordForEmail(O.toLowerCase(),{redirectTo:"https://speedfitness.org/reset-password"});if(te&&(console.error("Password reset error:",te),te.message.includes("User not found"))){L(!1),u("Account not set up for password reset. Please contact admin.");return}L(!1),M("success")}catch(Z){console.error("Password reset error:",Z),L(!1),M("success")}};return p.jsxs("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center p-4 md:p-8 relative overflow-hidden",children:[p.jsxs("div",{className:"absolute top-0 left-0 w-full h-full opacity-20 pointer-events-none",children:[p.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-blue-600 rounded-full blur-[120px]"}),p.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-indigo-600 rounded-full blur-[120px]"})]}),p.jsxs("div",{className:"w-full max-w-4xl grid grid-cols-1 lg:grid-cols-2 bg-slate-900 rounded-[3rem] shadow-2xl overflow-hidden border border-white/5 relative z-10",children:[p.jsxs("div",{className:"hidden lg:flex flex-col justify-between p-12 bg-gradient-to-br from-blue-600 to-indigo-700 text-white relative",children:[p.jsxs("div",{className:"relative z-10",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[p.jsx("div",{className:"bg-white/20 backdrop-blur-md p-2 rounded-xl",children:p.jsx("i",{className:"fas fa-dumbbell text-2xl"})}),p.jsx("span",{className:"font-black text-2xl tracking-tighter uppercase",children:"IronFlow"})]}),p.jsx("h1",{className:"text-5xl font-black leading-tight mb-6 uppercase",children:"Master Your Fitness Empire."}),p.jsx("p",{className:"text-blue-100 font-medium leading-relaxed",children:"Enterprise-grade multi-branch infrastructure for the future of physical wellness."})]}),p.jsxs("div",{className:"relative z-10 flex items-center gap-4 pt-12 border-t border-white/10",children:[p.jsx("div",{className:"flex -space-x-3",children:[1,2,3,4].map(W=>p.jsx("img",{className:"w-8 h-8 rounded-full border-2 border-blue-600",src:`https://i.pravatar.cc/100?u=${W}`,alt:""},W))}),p.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-blue-200",children:"Deployed in 50+ Cities"})]}),p.jsx("div",{className:"absolute bottom-0 right-0 opacity-10 scale-150 rotate-12",children:p.jsx("i",{className:"fas fa-bolt text-[300px]"})})]}),p.jsxs("div",{className:"p-8 md:p-12 flex flex-col justify-center min-h-[500px]",children:[I==="login"&&p.jsxs("div",{className:"animate-[fadeIn_0.3s_ease-out]",children:[p.jsxs("div",{className:"mb-10 text-center lg:text-left",children:[p.jsx("h2",{className:"text-3xl font-black text-white mb-2 uppercase tracking-tight",children:"System Access"}),p.jsx("p",{className:"text-slate-400 font-medium",children:"IronFlow Management Protocol v4.2"})]}),p.jsxs("form",{onSubmit:B,className:"space-y-5",children:[p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest ml-1",children:"Work Email"}),p.jsxs("div",{className:"relative",children:[p.jsx("input",{type:"email",className:"w-full bg-slate-800 border border-slate-700 text-white p-4 rounded-2xl outline-none focus:border-blue-500 transition-all pl-12",placeholder:"identity@ironflow.in",value:i,disabled:g,onChange:W=>{a(W.target.value),u("")},required:!0}),p.jsx("i",{className:"fas fa-envelope absolute left-4 top-1/2 -translate-y-1/2 text-slate-500"})]})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("div",{className:"flex justify-between items-center ml-1",children:p.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Security Token"})}),p.jsxs("div",{className:"relative",children:[p.jsx("input",{type:"password",className:"w-full bg-slate-800 border border-slate-700 text-white p-4 rounded-2xl outline-none focus:border-blue-500 transition-all pl-12",placeholder:"",value:l,disabled:g,onChange:W=>{f(W.target.value),u("")},required:!0}),p.jsx("i",{className:"fas fa-key absolute left-4 top-1/2 -translate-y-1/2 text-slate-500"})]}),p.jsxs("div",{className:"flex justify-between items-center pt-2",children:[p.jsx(Lu,{to:"/register",className:"text-[10px] font-black text-blue-400 uppercase tracking-widest hover:text-blue-300 transition-colors",children:"New Athlete? Join Now"}),p.jsx("button",{type:"button",onClick:()=>M("forgot"),className:"text-[10px] font-black text-slate-500 uppercase tracking-widest hover:text-blue-400 transition-colors",children:"Forgot Token?"})]})]}),h&&p.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 p-3 rounded-xl flex items-center gap-3 animate-shake",children:[p.jsx("i",{className:"fas fa-exclamation-circle text-red-500"}),p.jsx("p",{className:"text-red-400 text-[11px] font-bold uppercase tracking-widest",children:h})]}),p.jsxs("button",{disabled:g,className:"w-full py-4 bg-blue-600 hover:bg-blue-700 text-white font-black text-sm uppercase tracking-widest rounded-2xl transition-all shadow-xl shadow-blue-900/20 active:scale-[0.98] flex items-center justify-center gap-3",children:[g?p.jsx("i",{className:"fas fa-circle-notch fa-spin"}):p.jsx("i",{className:"fas fa-shield-check"}),g?"VERIFYING...":"ESTABLISH SESSION"]})]}),p.jsx("div",{className:"mt-8 p-4 bg-slate-800/30 border border-slate-700/50 rounded-2xl",children:p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx("i",{className:"fas fa-shield-alt text-emerald-500 mt-0.5"}),p.jsxs("div",{children:[p.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Secure Connection"}),p.jsx("p",{className:"text-[11px] text-slate-500",children:"Your session is encrypted and will expire after 8 hours of inactivity."})]})]})})]}),I==="forgot"&&p.jsxs("div",{className:"animate-[fadeIn_0.3s_ease-out]",children:[p.jsxs("div",{className:"mb-10 text-center lg:text-left",children:[p.jsx("h2",{className:"text-3xl font-black text-white mb-2 uppercase tracking-tight",children:"Recovery"}),p.jsx("p",{className:"text-slate-400 font-medium",children:"Account restoration protocol initiated"})]}),p.jsxs("form",{onSubmit:J,className:"space-y-6",children:[p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest ml-1",children:"Verified Email"}),p.jsxs("div",{className:"relative",children:[p.jsx("input",{type:"email",className:"w-full bg-slate-800 border border-slate-700 text-white p-4 rounded-2xl outline-none focus:border-blue-500 transition-all pl-12",placeholder:"account@ironflow.in",value:O,onChange:W=>j(W.target.value),required:!0}),p.jsx("i",{className:"fas fa-envelope absolute left-4 top-1/2 -translate-y-1/2 text-slate-500"})]})]}),p.jsxs("div",{className:"space-y-4 pt-2",children:[p.jsx("button",{type:"submit",disabled:U,className:"w-full py-4 bg-blue-600 hover:bg-blue-700 text-white font-black text-sm uppercase tracking-widest rounded-2xl transition-all shadow-xl shadow-blue-900/20 active:scale-[0.98] flex items-center justify-center gap-3",children:U?p.jsxs(p.Fragment,{children:[p.jsx("i",{className:"fas fa-spinner fa-spin"}),"DISPATCHING..."]}):"Request Recovery Link"}),p.jsx("button",{type:"button",onClick:()=>M("login"),className:"w-full py-3 text-slate-500 font-black text-[10px] uppercase tracking-widest hover:text-white transition-colors",children:"Return to Login"})]})]})]}),I==="success"&&p.jsxs("div",{className:"animate-[fadeIn_0.4s_ease-out] text-center",children:[p.jsx("div",{className:"w-20 h-20 bg-green-500/10 border border-green-500/20 rounded-[2rem] flex items-center justify-center mx-auto mb-8 shadow-2xl shadow-green-500/10",children:p.jsx("i",{className:"fas fa-paper-plane text-3xl text-green-500"})}),p.jsx("h2",{className:"text-3xl font-black text-white mb-3 uppercase tracking-tight",children:"Email Sent"}),p.jsxs("p",{className:"text-slate-400 font-medium mb-10 leading-relaxed px-6",children:["Recovery instructions dispatched to ",p.jsx("span",{className:"text-blue-400 font-black",children:O}),". Please check your inbox and spam."]}),p.jsx("button",{onClick:()=>M("login"),className:"w-full py-4 bg-slate-800 hover:bg-slate-700 text-white font-black text-sm uppercase tracking-widest rounded-2xl transition-all shadow-xl active:scale-[0.98]",children:"Back to Authentication"})]})]})]}),p.jsx("style",{children:`
        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          25% { transform: translateX(-4px); }
          75% { transform: translateX(4px); }
        }
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-shake { animation: shake 0.2s ease-in-out 0s 2; }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
      `})]})},lfe=()=>{const{branches:e,plans:t,enrollMember:n,showToast:r}=Un(),i=Ku(),[a,l]=k.useState(1),[f,h]=k.useState(!1),[u,g]=k.useState(!1),[y,E]=k.useState({name:"",email:"",phone:"",branchId:"",planId:"",emergencyContact:"",address:"",password:"",confirmPassword:""}),C=()=>{if(a===1&&!y.branchId){r("Please select a branch to continue.","error");return}l(O=>O+1)},I=()=>l(O=>O-1),M=async O=>{if(O.preventDefault(),y.password!==y.confirmPassword){r("Security Tokens do not match.","error");return}if(y.password.length<6){r("Token must be at least 6 characters.","error");return}h(!0);try{const{data:j}=await Ve.from("users").select("id").eq("email",y.email.toLowerCase());if(j&&j.length>0){r("Email already registered. Please login.","error"),h(!1);return}const U=await n({name:y.name,email:y.email,phone:y.phone,branchId:y.branchId,emergencyContact:y.emergencyContact,address:y.address},void 0,void 0,y.password);r("Account created! Please login to purchase your membership.","success"),setTimeout(()=>i("/login"),2e3)}catch{r("Registration failed. Please try again.","error"),h(!1)}};return p.jsxs("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center p-4 md:p-8 relative overflow-hidden font-sans",children:[p.jsxs("div",{className:"absolute top-0 left-0 w-full h-full opacity-20 pointer-events-none",children:[p.jsx("div",{className:"absolute top-[-10%] right-[-10%] w-[50%] h-[50%] bg-blue-600 rounded-full blur-[150px]"}),p.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-600 rounded-full blur-[150px]"})]}),p.jsxs("div",{className:"w-full max-w-2xl bg-slate-900 rounded-[3rem] shadow-2xl overflow-hidden border border-white/5 relative z-10 animate-[fadeIn_0.5s_ease-out]",children:[p.jsx("div",{className:"h-1.5 w-full bg-slate-800 flex",children:p.jsx("div",{className:`h-full bg-blue-500 transition-all duration-500 ${a===1?"w-1/2":"w-full"}`})}),p.jsxs("div",{className:"p-8 md:p-12",children:[p.jsxs("div",{className:"mb-10 text-center",children:[p.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[p.jsx("div",{className:"bg-blue-600 p-2 rounded-xl",children:p.jsx("i",{className:"fas fa-dumbbell text-white text-xl"})}),p.jsx("span",{className:"font-black text-xl text-white tracking-tighter uppercase",children:"IronFlow"})]}),p.jsx("h2",{className:"text-3xl font-black text-white uppercase tracking-tight",children:"Start Your Journey"}),p.jsxs("p",{className:"text-slate-400 font-medium text-sm mt-2",children:["Step ",a," of 2: ",a===1?"Choose Location":"Account & Access"]})]}),p.jsxs("form",{onSubmit:M,children:[a===1&&p.jsxs("div",{className:"space-y-4 animate-[slideUp_0.3s_ease-out]",children:[p.jsx("p",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest text-center mb-6",children:"Where will you be training?"}),p.jsx("div",{className:"grid grid-cols-1 gap-4",children:e.map(O=>p.jsxs("button",{type:"button",onClick:()=>E({...y,branchId:O.id}),className:`p-6 rounded-3xl border-2 text-left transition-all ${y.branchId===O.id?"border-blue-500 bg-blue-500/10":"border-slate-800 bg-slate-800/50 hover:border-slate-700"}`,children:[p.jsx("h4",{className:`font-black text-lg ${y.branchId===O.id?"text-white":"text-slate-300"}`,children:O.name}),p.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[p.jsx("i",{className:"fas fa-map-marker-alt mr-2"}),O.address]})]},O.id))}),p.jsx("div",{className:"pt-8",children:p.jsx("button",{type:"button",onClick:C,className:"w-full py-5 bg-blue-600 hover:bg-blue-700 text-white font-black text-sm uppercase tracking-widest rounded-2xl transition-all shadow-xl active:scale-[0.98]",children:"Continue"})})]}),a===2&&p.jsxs("div",{className:"space-y-6 animate-[slideUp_0.3s_ease-out]",children:[p.jsx("div",{className:"bg-indigo-500/10 border border-indigo-500/30 rounded-2xl p-4 text-center",children:p.jsxs("p",{className:"text-indigo-300 text-sm font-medium",children:[p.jsx("i",{className:"fas fa-info-circle mr-2"}),"After registration, login to purchase your membership plan"]})}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest ml-1",children:"Full Name"}),p.jsx("input",{required:!0,className:"w-full bg-slate-800 border border-slate-700 text-white p-4 rounded-2xl outline-none focus:border-blue-500 transition-all",value:y.name,onChange:O=>E({...y,name:O.target.value}),placeholder:"Arjun Sharma"})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest ml-1",children:"Contact Phone"}),p.jsx("input",{required:!0,type:"tel",className:"w-full bg-slate-800 border border-slate-700 text-white p-4 rounded-2xl outline-none focus:border-blue-500 transition-all",value:y.phone,onChange:O=>E({...y,phone:O.target.value}),placeholder:"+91 XXXXX XXXXX"})]})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest ml-1",children:"Email Address"}),p.jsx("input",{required:!0,type:"email",className:"w-full bg-slate-800 border border-slate-700 text-white p-4 rounded-2xl outline-none focus:border-blue-500 transition-all",value:y.email,onChange:O=>E({...y,email:O.target.value}),placeholder:"athlete@ironflow.in"})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] font-black text-blue-400 uppercase tracking-widest ml-1",children:"Choose Security Token"}),p.jsxs("div",{className:"relative",children:[p.jsx("input",{required:!0,type:u?"text":"password",className:"w-full bg-slate-800 border border-slate-700 text-white p-4 rounded-2xl outline-none focus:border-blue-500 transition-all",value:y.password,onChange:O=>E({...y,password:O.target.value}),placeholder:"Min. 6 chars"}),p.jsx("button",{type:"button",onClick:()=>g(!u),className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-500 hover:text-white",children:p.jsx("i",{className:`fas ${u?"fa-eye-slash":"fa-eye"}`})})]})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] font-black text-blue-400 uppercase tracking-widest ml-1",children:"Confirm Token"}),p.jsx("input",{required:!0,type:u?"text":"password",className:"w-full bg-slate-800 border border-slate-700 text-white p-4 rounded-2xl outline-none focus:border-blue-500 transition-all",value:y.confirmPassword,onChange:O=>E({...y,confirmPassword:O.target.value}),placeholder:"Re-enter token"})]})]}),p.jsxs("div",{className:"space-y-1 p-4 bg-red-500/5 border border-red-500/20 rounded-2xl",children:[p.jsxs("label",{className:"text-[10px] font-black text-red-500 uppercase tracking-widest mb-2 flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-life-ring"})," Emergency Contact"]}),p.jsx("input",{required:!0,className:"w-full bg-slate-800 border border-slate-700 text-white p-3 rounded-xl outline-none focus:border-red-500 transition-all",value:y.emergencyContact,onChange:O=>E({...y,emergencyContact:O.target.value}),placeholder:"Name & Phone"})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[p.jsx("button",{type:"button",onClick:I,disabled:f,className:"py-5 bg-slate-800 text-slate-400 font-black text-sm uppercase tracking-widest rounded-2xl hover:bg-slate-700 transition-all",children:"Back"}),p.jsxs("button",{type:"submit",disabled:f,className:"py-5 bg-blue-600 hover:bg-blue-700 text-white font-black text-sm uppercase tracking-widest rounded-2xl shadow-xl active:scale-[0.98] flex items-center justify-center gap-3",children:[f?p.jsx("i",{className:"fas fa-circle-notch fa-spin"}):p.jsx("i",{className:"fas fa-check-circle"}),f?"SECURING...":"JOIN IRONFLOW"]})]})]})]}),p.jsx("div",{className:"mt-8 text-center",children:p.jsxs("p",{className:"text-slate-500 text-xs font-bold",children:["Already a member? ",p.jsx(Lu,{to:"/login",className:"text-blue-400 hover:underline",children:"Log in to Portal"})]})})]})]}),p.jsx("style",{children:`
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
      `})]})},cfe=()=>{const{communications:e,users:t,branches:n,currentUser:r}=Un(),[i,a]=k.useState("ALL"),l=(r==null?void 0:r.role)===Oe.SUPER_ADMIN?e:e.filter(h=>h.branchId===(r==null?void 0:r.branchId)),f=i==="ALL"?l:l.filter(h=>h.type===i);return p.jsxs("div",{className:"space-y-6 animate-[fadeIn_0.5s_ease-out]",children:[p.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-3xl font-black text-slate-900 tracking-tight uppercase",children:"Comm Hub"}),p.jsx("p",{className:"text-slate-500 font-medium",children:"Monitoring automated SMS & Gmail interactions"})]}),p.jsx("div",{className:"flex bg-white p-1 rounded-2xl shadow-sm border",children:["ALL",Sa.EMAIL,Sa.SMS].map(h=>p.jsx("button",{onClick:()=>a(h),className:`px-6 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${i===h?"bg-slate-900 text-white shadow-lg":"text-slate-400 hover:text-slate-600"}`,children:h},h))})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[p.jsx(Cv,{label:"Total Sent",value:l.length,icon:"fa-paper-plane",color:"blue"}),p.jsx(Cv,{label:"Emails Delivered",value:l.filter(h=>h.type===Sa.EMAIL).length,icon:"fa-envelope",color:"indigo"}),p.jsx(Cv,{label:"SMS Delivered",value:l.filter(h=>h.type===Sa.SMS).length,icon:"fa-comment-dots",color:"amber"})]}),p.jsx("div",{className:"bg-white rounded-[2.5rem] border shadow-sm overflow-hidden",children:p.jsx("div",{className:"overflow-x-auto scrollbar-hide",children:p.jsxs("table",{className:"w-full text-left min-w-[800px]",children:[p.jsx("thead",{className:"bg-slate-50 border-b",children:p.jsxs("tr",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:[p.jsx("th",{className:"px-8 py-5",children:"Type"}),p.jsx("th",{className:"px-8 py-5",children:"Recipient"}),p.jsx("th",{className:"px-8 py-5",children:"Branch Source"}),p.jsx("th",{className:"px-8 py-5",children:"Content Preview"}),p.jsx("th",{className:"px-8 py-5",children:"Timestamp"}),p.jsx("th",{className:"px-8 py-5",children:"Status"})]})}),p.jsx("tbody",{className:"divide-y divide-slate-100",children:f.length===0?p.jsx("tr",{children:p.jsx("td",{colSpan:6,className:"px-8 py-20 text-center text-slate-400 italic font-medium",children:p.jsxs("div",{className:"flex flex-col items-center gap-3",children:[p.jsx("i",{className:"fas fa-inbox text-4xl opacity-10"}),p.jsx("p",{children:"No communications recorded in current session."})]})})}):f.map(h=>{const u=t.find(y=>y.id===h.userId),g=n.find(y=>y.id===h.branchId);return p.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors group",children:[p.jsx("td",{className:"px-8 py-6",children:p.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${h.type===Sa.EMAIL?"bg-indigo-50 text-indigo-600":"bg-amber-50 text-amber-600"}`,children:p.jsx("i",{className:`fas ${h.type===Sa.EMAIL?"fa-envelope":"fa-sms"} text-sm`})})}),p.jsxs("td",{className:"px-8 py-6",children:[p.jsx("p",{className:"font-black text-slate-900 text-sm truncate max-w-[150px]",children:(u==null?void 0:u.name)||"System"}),p.jsx("p",{className:"text-[10px] text-slate-400 font-bold",children:h.recipient})]}),p.jsx("td",{className:"px-8 py-6",children:p.jsx("span",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest bg-slate-100 px-2 py-1 rounded",children:(g==null?void 0:g.name)||"GLOBAL HUB"})}),p.jsx("td",{className:"px-8 py-6",children:p.jsxs("div",{className:"max-w-md",children:[h.subject&&p.jsx("p",{className:"text-[11px] font-black text-slate-900 uppercase tracking-tight mb-1",children:h.subject}),p.jsx("p",{className:"text-xs text-slate-500 line-clamp-1 leading-relaxed",children:h.body})]})}),p.jsx("td",{className:"px-8 py-6",children:p.jsx("p",{className:"text-xs font-bold text-slate-400",children:h.timestamp})}),p.jsx("td",{className:"px-8 py-6",children:p.jsxs("span",{className:"bg-green-100 text-green-700 text-[9px] font-black px-3 py-1 rounded-full flex items-center gap-2 w-fit",children:[p.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),"DELIVERED"]})})]},h.id)})})]})})}),p.jsx("style",{children:`
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
      `})]})},Cv=({label:e,value:t,icon:n,color:r})=>{const i={blue:"bg-blue-50 text-blue-600",indigo:"bg-indigo-50 text-indigo-600",amber:"bg-amber-50 text-amber-600"};return p.jsxs("div",{className:"bg-white p-6 rounded-[2rem] border shadow-sm flex items-center gap-6",children:[p.jsx("div",{className:`${i[r]} w-14 h-14 rounded-2xl flex items-center justify-center shrink-0`,children:p.jsx("i",{className:`fas ${n} text-xl`})}),p.jsxs("div",{children:[p.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest leading-none mb-1",children:e}),p.jsx("p",{className:"text-2xl font-black text-slate-900",children:t})]})]})},ufe=()=>{const{inventory:e,branches:t,addInventory:n,updateInventory:r,sellInventoryItem:i,users:a,currentUser:l}=Un(),[f,h]=k.useState(!1),[u,g]=k.useState(!1),[y,E]=k.useState(null),[C,I]=k.useState({name:"",category:"SUPPLEMENT",price:0,stock:0,branchId:(l==null?void 0:l.branchId)||t[0].id}),[M,O]=k.useState({memberId:"",quantity:1}),j=(l==null?void 0:l.role)===Oe.SUPER_ADMIN?e:e.filter(B=>B.branchId===(l==null?void 0:l.branchId)),U=()=>{E(null),I({name:"",category:"SUPPLEMENT",price:0,stock:0,branchId:(l==null?void 0:l.branchId)||t[0].id}),h(!0)},L=B=>{E(B),O({memberId:"",quantity:1}),g(!0)},G=B=>{B.preventDefault(),y?r(y.id,C):n({id:`inv-${Date.now()}`,...C}),h(!1)},V=B=>{B.preventDefault(),y&&(i(y.id,M.memberId,M.quantity),g(!1))},z=B=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(B);return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-bold text-gray-900 uppercase tracking-tight",children:"Inventory & POS"}),p.jsx("p",{className:"text-gray-500",children:"Retail management and stock replenishment"})]}),p.jsxs("button",{onClick:U,className:"bg-blue-600 text-white px-6 py-2 rounded-xl font-bold hover:bg-blue-700 transition-all flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-plus"})," ADD ITEM"]})]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:j.map(B=>p.jsxs("div",{className:"bg-white p-6 rounded-[2rem] border shadow-sm relative overflow-hidden group",children:[p.jsx("div",{className:`absolute top-0 right-0 w-2 h-full ${B.stock<5?"bg-red-500":"bg-green-500"}`}),p.jsx("p",{className:"text-[10px] font-black text-blue-500 uppercase tracking-widest mb-2",children:B.category}),p.jsx("h3",{className:"text-lg font-black text-slate-900 mb-1 truncate",children:B.name}),p.jsx("p",{className:"text-2xl font-black text-slate-900 mb-4",children:z(B.price)}),p.jsxs("div",{className:"flex justify-between items-center border-t pt-4",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"In Stock"}),p.jsxs("p",{className:`font-black ${B.stock<5?"text-red-600":"text-slate-900"}`,children:[B.stock," Units"]})]}),p.jsx("button",{onClick:()=>L(B),className:"bg-slate-900 text-white w-10 h-10 rounded-xl flex items-center justify-center hover:scale-110 transition-transform",children:p.jsx("i",{className:"fas fa-shopping-basket"})})]})]},B.id))}),f&&p.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:p.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-md p-8 shadow-2xl animate-[slideUp_0.3s_ease-out]",children:[p.jsx("h3",{className:"text-2xl font-bold mb-6",children:"Inventory Entry"}),p.jsxs("form",{onSubmit:G,className:"space-y-4",children:[p.jsx("input",{required:!0,placeholder:"Item Name",className:"w-full p-3 bg-gray-50 border rounded-xl outline-none",value:C.name,onChange:B=>I({...C,name:B.target.value})}),p.jsxs("select",{className:"w-full p-3 bg-gray-50 border rounded-xl outline-none",value:C.category,onChange:B=>I({...C,category:B.target.value}),children:[p.jsx("option",{value:"SUPPLEMENT",children:"Supplement"}),p.jsx("option",{value:"GEAR",children:"Gear"}),p.jsx("option",{value:"BEVERAGE",children:"Beverage"}),p.jsx("option",{value:"OTHER",children:"Other"})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsx("input",{type:"number",placeholder:"Price",className:"w-full p-3 bg-gray-50 border rounded-xl",value:C.price||"",onChange:B=>I({...C,price:Number(B.target.value)})}),p.jsx("input",{type:"number",placeholder:"Stock",className:"w-full p-3 bg-gray-50 border rounded-xl",value:C.stock||"",onChange:B=>I({...C,stock:Number(B.target.value)})})]}),p.jsx("button",{className:"w-full py-4 bg-blue-600 text-white rounded-2xl font-bold",children:"SAVE ITEM"}),p.jsx("button",{type:"button",onClick:()=>h(!1),className:"w-full py-2 text-gray-400",children:"CANCEL"})]})]})}),u&&y&&p.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:p.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-md p-8 shadow-2xl animate-[slideUp_0.3s_ease-out]",children:[p.jsx("h3",{className:"text-2xl font-bold mb-2 uppercase tracking-tight",children:"Point of Sale"}),p.jsxs("p",{className:"text-slate-400 text-sm mb-6",children:["Selling: ",y.name]}),p.jsxs("form",{onSubmit:V,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Member (Bill To)"}),p.jsxs("select",{required:!0,className:"w-full p-3 bg-gray-50 border rounded-xl",value:M.memberId,onChange:B=>O({...M,memberId:B.target.value}),children:[p.jsx("option",{value:"",children:"Select Member..."}),a.filter(B=>B.role==="MEMBER").map(B=>p.jsxs("option",{value:B.id,children:[B.name," (",B.memberId,")"]},B.id))]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Quantity"}),p.jsx("input",{type:"number",min:"1",max:y.stock,className:"w-full p-3 bg-gray-50 border rounded-xl",value:M.quantity,onChange:B=>O({...M,quantity:Number(B.target.value)})})]}),p.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl flex justify-between items-center font-black",children:[p.jsx("span",{className:"text-slate-500 text-xs",children:"TOTAL"}),p.jsx("span",{className:"text-xl",children:z(y.price*M.quantity)})]}),p.jsx("button",{className:"w-full py-4 bg-slate-900 text-white rounded-2xl font-bold shadow-xl shadow-slate-200",children:"CONFIRM SALE"}),p.jsx("button",{type:"button",onClick:()=>g(!1),className:"w-full py-2 text-gray-400",children:"CANCEL"})]})]})})]})},dfe=()=>{const{sales:e,branches:t,currentUser:n,attendance:r,users:i,settlementRate:a,plans:l,bookings:f,subscriptions:h,expenses:u,addExpense:g,deleteExpense:y}=Un(),[E,C]=k.useState("GST"),[I,M]=k.useState((n==null?void 0:n.branchId)||t[0].id),[O,j]=k.useState(new Date().getMonth()),[U,L]=k.useState(new Date().getFullYear()),[G,V]=k.useState(!1),[z,B]=k.useState({category:"RENT",amount:"",date:new Date().toISOString().split("T")[0],description:""}),J=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],W=new Date().getFullYear(),Z=Array.from({length:5},(re,he)=>W-2+he),te=k.useMemo(()=>t.find(re=>re.id===I),[I,t]),Y=k.useMemo(()=>e.filter(re=>{const he=new Date(re.date);return re.branchId===I&&he.getMonth()===O&&he.getFullYear()===U}),[e,I,O,U]),pe=k.useMemo(()=>Y.filter(re=>re.paymentMethod!=="CASH"),[Y]),Te=k.useMemo(()=>u.filter(re=>{const he=new Date(re.date);return re.branchId===I&&he.getMonth()===O&&he.getFullYear()===U}),[u,I,O,U]),le=k.useMemo(()=>{const re=(te==null?void 0:te.gstPercentage)||18;return Y.reduce((he,se)=>{const ke=se.amount,ie=ke/(1+re/100);return{total:he.total+ke,taxable:he.taxable+ie,tax:he.tax+(ke-ie),count:he.count+1}},{total:0,taxable:0,tax:0,count:0})},[pe,te]),de=()=>{const re=pe.map(ie=>({Invoice:ie.invoiceNo,Date:ie.date,Amount:ie.amount,Taxable:(ie.amount/(1+((te==null?void 0:te.gstPercentage)||18)/100)).toFixed(2),Tax:(ie.amount-ie.amount/(1+((te==null?void 0:te.gstPercentage)||18)/100)).toFixed(2),Payment:ie.paymentMethod})),he=new Blob([JSON.stringify(re,null,2)],{type:"application/json"}),se=URL.createObjectURL(he),ke=document.createElement("a");ke.href=se,ke.download=`IronFlow_${te==null?void 0:te.name}_${J[O]}_${U}.json`,document.body.appendChild(ke),ke.click(),document.body.removeChild(ke)},ge=k.useMemo(()=>{const re=e.filter(ie=>ie.branchId===I),se=i.filter(ie=>ie.branchId===I).filter(ie=>ie.role===Oe.STAFF||ie.role===Oe.TRAINER).reduce((ie,ue)=>ie+(ue.salary||25e3),0),ke=re.reduce((ie,ue)=>ie+ue.amount*.1,0);return{payroll:se,commissions:ke,grandTotal:se+ke}},[e,i,I]),De=k.useMemo(()=>{const re=f.filter(he=>he.branchId===I);return{totalBookings:re.length,rate:a,totalAmount:re.length*a}},[f,I,a]),we=k.useMemo(()=>{const re=Y.reduce((ue,qe)=>ue+qe.amount,0),he=Te.reduce((ue,qe)=>ue+qe.amount,0),se=ge.grandTotal,ke=he+se,ie=re-ke;return{totalIncome:re,operationalExpenses:he,payrollCost:se,totalExpenses:ke,netProfit:ie}},[Y,Te,ge]),$e=re=>{if(re.preventDefault(),!z.amount)return;const he={id:`exp-${Date.now()}`,branchId:I,category:z.category,amount:Number(z.amount),date:z.date,description:z.description,recordedBy:(n==null?void 0:n.id)||"admin"};g(he),V(!1),B({category:"RENT",amount:"",date:new Date().toISOString().split("T")[0],description:""})},ne=re=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(re);return p.jsxs("div",{className:"space-y-6 md:space-y-8 animate-[fadeIn_0.5s_ease-out]",children:[p.jsxs("div",{className:"flex flex-col xl:flex-row justify-between items-start xl:items-center gap-6",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl md:text-3xl font-black text-slate-900 tracking-tight uppercase",children:"Tax & Financials"}),p.jsxs("p",{className:"text-slate-500 font-medium text-sm",children:["Branch: ",te==null?void 0:te.name,"  Monthly Report"]})]}),p.jsx("div",{className:"flex bg-white p-1 rounded-2xl border shadow-sm w-full xl:w-auto overflow-x-auto scrollbar-hide",children:["GST","SETTLEMENT","PAYROLL","COMMISSIONS","EXPENSES","PROFIT_LOSS"].map(re=>p.jsx("button",{onClick:()=>C(re),className:`flex-1 xl:flex-none px-6 py-2.5 rounded-xl text-[9px] md:text-[10px] font-black uppercase tracking-widest transition-all whitespace-nowrap ${E===re?"bg-slate-900 text-white shadow-lg":"text-slate-400 hover:text-slate-600"}`,children:re==="PROFIT_LOSS"?"PROFIT & LOSS":re},re))})]}),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 md:gap-8",children:[p.jsx("div",{className:"lg:col-span-4 xl:col-span-3 space-y-6",children:p.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-[2rem] md:rounded-[2.5rem] border shadow-sm space-y-6",children:[p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Select Branch"}),p.jsx("select",{className:"w-full p-4 bg-slate-50 border rounded-2xl outline-none font-bold text-xs",value:I,onChange:re=>M(re.target.value),children:t.map(re=>p.jsx("option",{value:re.id,children:re.name},re.id))})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Month"}),p.jsx("select",{className:"w-full p-4 bg-slate-50 border rounded-2xl outline-none font-bold text-xs",value:O,onChange:re=>j(Number(re.target.value)),children:J.map((re,he)=>p.jsx("option",{value:he,children:re},re))})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Year"}),p.jsx("select",{className:"w-full p-4 bg-slate-50 border rounded-2xl outline-none font-bold text-xs",value:U,onChange:re=>L(Number(re.target.value)),children:Z.map(re=>p.jsx("option",{value:re,children:re},re))})]})]}),p.jsxs("button",{onClick:de,className:"w-full py-3 bg-indigo-50 text-indigo-600 rounded-2xl font-black text-[10px] uppercase tracking-widest hover:bg-indigo-100 transition-all flex items-center justify-center gap-2",children:[p.jsx("i",{className:"fas fa-file-export"})," Export GST Invoices (JSON)"]}),p.jsx("div",{className:"pt-4 border-t space-y-4",children:p.jsxs("div",{className:"bg-slate-900 p-6 rounded-3xl text-center text-white shadow-xl",children:[p.jsx("p",{className:"text-[9px] font-black uppercase tracking-[0.2em] opacity-50 mb-1",children:E==="GST"?"GST Liability":E==="SETTLEMENT"?"Settlement Due":E==="EXPENSES"?"Total Expenses":E==="PROFIT_LOSS"?"Net Profit":"Total Payout"}),p.jsx("p",{className:`text-xl md:text-2xl font-black ${E==="PROFIT_LOSS"&&we.netProfit<0?"text-red-400":"text-white"}`,children:ne(E==="GST"?le.tax:E==="SETTLEMENT"?De.totalAmount:E==="EXPENSES"?we.totalExpenses:E==="PROFIT_LOSS"?we.netProfit:ge.grandTotal)})]})})]})}),p.jsxs("div",{className:"lg:col-span-8 xl:col-span-9 space-y-6",children:[E==="GST"&&p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"grid grid-cols-1 xs:grid-cols-2 xl:grid-cols-4 gap-4 md:gap-6",children:[p.jsx($i,{label:"Gross Turnover",value:ne(le.total),color:"blue"}),p.jsx($i,{label:"Taxable Value",value:ne(le.taxable),color:"indigo"}),p.jsx($i,{label:"Total Tax",value:ne(le.tax),color:"emerald"}),p.jsx($i,{label:"Invoices",value:le.count,color:"slate"})]}),p.jsx("div",{className:"bg-white rounded-[2rem] md:rounded-[2.5rem] border shadow-sm overflow-hidden overflow-x-auto scrollbar-hide",children:p.jsxs("table",{className:"w-full text-left min-w-[600px]",children:[p.jsx("thead",{className:"bg-slate-50 border-b",children:p.jsxs("tr",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:[p.jsx("th",{className:"px-8 py-5",children:"Invoice #"}),p.jsx("th",{className:"px-8 py-5",children:"Tax Details"}),p.jsx("th",{className:"px-8 py-5 text-right",children:"Taxable"}),p.jsx("th",{className:"px-8 py-5 text-right",children:"Total"})]})}),p.jsx("tbody",{className:"divide-y divide-slate-100",children:Y.map(re=>{const he=(te==null?void 0:te.gstPercentage)||18,se=re.amount/(1+he/100);return p.jsxs("tr",{className:"hover:bg-slate-50/50",children:[p.jsx("td",{className:"px-8 py-5 font-mono text-xs font-bold text-blue-600 uppercase",children:re.invoiceNo}),p.jsxs("td",{className:"px-8 py-5 text-[10px] font-black text-slate-400 uppercase",children:["GST @ ",he,"%"]}),p.jsx("td",{className:"px-8 py-5 text-right font-bold text-slate-600 text-sm",children:ne(se)}),p.jsx("td",{className:"px-8 py-5 text-right font-black text-slate-900 text-sm",children:ne(re.amount)})]},re.id)})})]})})]}),E==="SETTLEMENT"&&p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"grid grid-cols-1 xs:grid-cols-2 xl:grid-cols-3 gap-6",children:[p.jsx($i,{label:"Total Bookings",value:De.totalBookings,color:"blue"}),p.jsx($i,{label:"Rate per Session",value:ne(De.rate),color:"indigo"}),p.jsx($i,{label:"Due Amount",value:ne(De.totalAmount),color:"emerald"})]}),p.jsxs("div",{className:"bg-white p-8 rounded-[2rem] border shadow-sm",children:[p.jsx("h3",{className:"text-sm font-black text-slate-900 uppercase tracking-widest mb-4",children:"Settlement Audit"}),p.jsxs("div",{className:"space-y-4",children:[f.filter(re=>re.branchId===I).slice(0,5).map(re=>p.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 rounded-2xl",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"w-10 h-10 bg-white rounded-xl flex items-center justify-center border shadow-sm",children:p.jsx("i",{className:"fas fa-calendar-check text-blue-600"})}),p.jsxs("div",{children:[p.jsxs("p",{className:"text-xs font-bold text-slate-900 uppercase",children:["Session #",re.id.slice(-6)]}),p.jsxs("p",{className:"text-[10px] text-slate-500 font-medium",children:[re.date," at ",re.timeSlot]})]})]}),p.jsx("p",{className:"text-xs font-black text-slate-900",children:ne(a)})]},re.id)),p.jsx("p",{className:"text-center text-[10px] text-slate-400 font-bold uppercase tracking-widest pt-4",children:"Showing last 5 bookings for settlement"})]})]})]}),E==="PAYROLL"&&p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"grid grid-cols-1 xs:grid-cols-2 xl:grid-cols-2 gap-6",children:[p.jsx($i,{label:"Staff Count",value:i.filter(re=>re.branchId===I&&(re.role===Oe.STAFF||re.role===Oe.TRAINER)).length,color:"blue"}),p.jsx($i,{label:"Total Monthly Payroll",value:ne(ge.payroll),color:"emerald"})]}),p.jsx("div",{className:"bg-white rounded-[2rem] border shadow-sm overflow-hidden",children:p.jsxs("table",{className:"w-full text-left",children:[p.jsx("thead",{className:"bg-slate-50 border-b",children:p.jsxs("tr",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:[p.jsx("th",{className:"px-8 py-5",children:"Employee"}),p.jsx("th",{className:"px-8 py-5",children:"Role"}),p.jsx("th",{className:"px-8 py-5 text-right",children:"Base Salary"})]})}),p.jsx("tbody",{className:"divide-y divide-slate-100",children:i.filter(re=>re.branchId===I&&(re.role===Oe.STAFF||re.role===Oe.TRAINER)).map(re=>p.jsxs("tr",{className:"hover:bg-slate-50/50",children:[p.jsx("td",{className:"px-8 py-5",children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("img",{src:re.avatar,className:"w-8 h-8 rounded-full border shadow-sm",alt:""}),p.jsx("p",{className:"text-xs font-bold text-slate-900",children:re.name})]})}),p.jsx("td",{className:"px-8 py-5 text-[10px] font-black text-slate-400 uppercase",children:re.role}),p.jsx("td",{className:"px-8 py-5 text-right font-black text-slate-900 text-sm",children:ne(re.salary||25e3)})]},re.id))})]})})]}),E==="COMMISSIONS"&&p.jsxs("div",{className:"space-y-6",children:[p.jsx($i,{label:"Branch Commissions (10% of Sales)",value:ne(ge.commissions),color:"indigo"}),p.jsx("div",{className:"bg-white p-8 rounded-[2rem] border shadow-sm",children:p.jsxs("p",{className:"text-sm text-slate-500 font-medium text-center",children:["Commission structure for ",te==null?void 0:te.name," is based on a flat 10% performance incentive across all sales activities."]})})]}),E==="EXPENSES"&&p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("h3",{className:"text-sm font-black text-slate-900 uppercase tracking-widest",children:"Expense Records"}),p.jsxs("button",{onClick:()=>V(!0),className:"bg-red-50 text-red-600 px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest hover:bg-red-100 transition-all flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-plus"})," Add Expense"]})]}),p.jsx("div",{className:"bg-white rounded-[2rem] border shadow-sm overflow-hidden",children:p.jsxs("table",{className:"w-full text-left",children:[p.jsx("thead",{className:"bg-slate-50 border-b",children:p.jsxs("tr",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:[p.jsx("th",{className:"px-8 py-5",children:"Date"}),p.jsx("th",{className:"px-8 py-5",children:"Category"}),p.jsx("th",{className:"px-8 py-5",children:"Description"}),p.jsx("th",{className:"px-8 py-5 text-right",children:"Amount"}),p.jsx("th",{className:"px-8 py-5 text-right",children:"Actions"})]})}),p.jsx("tbody",{className:"divide-y divide-slate-100",children:Te.length===0?p.jsx("tr",{children:p.jsx("td",{colSpan:5,className:"px-8 py-10 text-center text-slate-400 italic text-xs font-bold uppercase tracking-widest",children:"No expenses recorded for this period."})}):Te.map(re=>p.jsxs("tr",{className:"hover:bg-slate-50/50",children:[p.jsx("td",{className:"px-8 py-5 font-bold text-slate-500 text-xs",children:re.date}),p.jsx("td",{className:"px-8 py-5",children:p.jsx("span",{className:"bg-slate-100 text-slate-600 text-[9px] font-black px-2 py-1 rounded uppercase tracking-widest",children:re.category})}),p.jsx("td",{className:"px-8 py-5 text-xs font-bold text-slate-700",children:re.description}),p.jsx("td",{className:"px-8 py-5 text-right font-black text-slate-900 text-sm",children:ne(re.amount)}),p.jsx("td",{className:"px-8 py-5 text-right",children:p.jsx("button",{onClick:()=>y(re.id),className:"text-red-400 hover:text-red-600 transition-colors",children:p.jsx("i",{className:"fas fa-trash-can"})})})]},re.id))})]})})]}),E==="PROFIT_LOSS"&&p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[p.jsx($i,{label:"Total Income (Sales)",value:ne(we.totalIncome),color:"emerald"}),p.jsx($i,{label:"Total Expenses",value:ne(we.totalExpenses),color:"slate"}),p.jsx($i,{label:"Net Profit / Loss",value:ne(we.netProfit),color:we.netProfit>=0?"blue":"red"})]}),p.jsxs("div",{className:"bg-white p-8 rounded-[2rem] border shadow-sm",children:[p.jsx("h3",{className:"text-sm font-black text-slate-900 uppercase tracking-widest mb-6",children:"Financial Health Summary"}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 rounded-2xl",children:[p.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:"Revenue Stream"}),p.jsxs("span",{className:"text-sm font-black text-emerald-600",children:["+",ne(we.totalIncome)]})]}),p.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 rounded-2xl",children:[p.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:"Operational Expenses"}),p.jsxs("span",{className:"text-sm font-black text-slate-700",children:["-",ne(we.operationalExpenses)]})]}),p.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 rounded-2xl",children:[p.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:"Payroll & Commissions"}),p.jsxs("span",{className:"text-sm font-black text-slate-700",children:["-",ne(we.payrollCost)]})]}),p.jsxs("div",{className:"flex justify-between items-center p-4 bg-red-50 rounded-2xl border border-red-100",children:[p.jsx("span",{className:"text-xs font-bold text-red-700 uppercase",children:"Total Outflow"}),p.jsxs("span",{className:"text-sm font-black text-red-700",children:["-",ne(we.totalExpenses)]})]}),p.jsxs("div",{className:`flex justify-between items-center p-6 rounded-2xl border-2 ${we.netProfit>=0?"bg-emerald-50 border-emerald-100":"bg-red-50 border-red-100"}`,children:[p.jsx("span",{className:`text-xs font-black uppercase tracking-widest ${we.netProfit>=0?"text-emerald-700":"text-red-700"}`,children:"Net Bottom Line"}),p.jsx("span",{className:`text-xl font-black ${we.netProfit>=0?"text-emerald-700":"text-red-700"}`,children:ne(we.netProfit)})]})]})]})]})]})]}),G&&p.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:p.jsxs("div",{className:"bg-white rounded-[2.5rem] w-full max-w-md overflow-hidden shadow-2xl animate-[slideUp_0.3s_ease-out]",children:[p.jsxs("div",{className:"bg-red-600 p-8 text-white flex justify-between items-center",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-xl font-black uppercase tracking-tight leading-none mb-1",children:"Record Expense"}),p.jsx("p",{className:"text-[10px] text-red-200 font-bold uppercase tracking-widest",children:"Financial Outflow"})]}),p.jsx("button",{onClick:()=>V(!1),className:"bg-white/10 p-2.5 rounded-xl hover:bg-white/20 transition-colors",children:p.jsx("i",{className:"fas fa-times"})})]}),p.jsxs("form",{onSubmit:$e,className:"p-8 space-y-6",children:[p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Category"}),p.jsxs("select",{className:"w-full p-4 bg-slate-50 border border-slate-100 rounded-2xl outline-none focus:ring-2 focus:ring-red-500 font-black text-xs uppercase",value:z.category,onChange:re=>B({...z,category:re.target.value}),children:[p.jsx("option",{value:"RENT",children:"Rent / Lease"}),p.jsx("option",{value:"UTILITIES",children:"Utilities (Electric/Water)"}),p.jsx("option",{value:"SALARY",children:"Staff Salaries"}),p.jsx("option",{value:"EQUIPMENT",children:"Equipment Maintenance"}),p.jsx("option",{value:"MARKETING",children:"Marketing & Ads"}),p.jsx("option",{value:"OTHER",children:"Other Operational"})]})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Date"}),p.jsx("input",{type:"date",required:!0,className:"w-full p-4 bg-slate-50 border border-slate-100 rounded-2xl outline-none focus:ring-2 focus:ring-red-500 font-black text-xs",value:z.date,onChange:re=>B({...z,date:re.target.value})})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Amount ()"}),p.jsx("input",{type:"number",required:!0,min:"0",className:"w-full p-4 bg-slate-50 border border-slate-100 rounded-2xl outline-none focus:ring-2 focus:ring-red-500 font-black text-sm",value:z.amount,onChange:re=>B({...z,amount:re.target.value})})]})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Description"}),p.jsx("input",{type:"text",required:!0,className:"w-full p-4 bg-slate-50 border border-slate-100 rounded-2xl outline-none focus:ring-2 focus:ring-red-500 font-bold text-sm",placeholder:"e.g. AC Repair",value:z.description,onChange:re=>B({...z,description:re.target.value})})]}),p.jsx("button",{type:"submit",className:"w-full py-5 bg-red-600 text-white rounded-[1.5rem] font-black text-sm uppercase tracking-widest shadow-2xl shadow-red-200 transition-all active:scale-95 hover:bg-red-700",children:"LOG EXPENSE"})]})]})})]})},$i=({label:e,value:t,color:n})=>{const r={blue:"bg-blue-50 text-blue-600 border-blue-100",indigo:"bg-indigo-50 text-indigo-600 border-indigo-100",emerald:"bg-emerald-50 text-emerald-600 border-emerald-100",slate:"bg-slate-50 text-slate-600 border-slate-100",red:"bg-red-50 text-red-600 border-red-100"};return p.jsxs("div",{className:`p-6 rounded-[2rem] border shadow-sm ${r[n]} transition-all min-w-0`,children:[p.jsx("p",{className:"text-[9px] font-black uppercase tracking-widest opacity-60 mb-1 truncate",children:e}),p.jsx("p",{className:"text-lg md:text-xl font-black truncate tracking-tight",children:t})]})},ffe=({user:e,branch:t,month:n,year:r,earnings:i,onClose:a})=>{const l=h=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(h||0),f=h=>{h.preventDefault(),window.print()};return p.jsxs("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[200] flex items-center justify-center p-4 print-container",children:[p.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-[2.5rem] overflow-hidden shadow-2xl animate-[slideUp_0.3s_ease-out] flex flex-col max-h-[95vh] modal-content relative",children:[p.jsxs("div",{className:"bg-slate-900 px-8 py-4 text-white flex justify-between items-center shrink-0 no-print",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-wallet text-emerald-400"}),p.jsxs("span",{className:"font-black uppercase tracking-widest text-[10px]",children:["PAYSLIP: ",n.toUpperCase()," ",r]})]}),p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsxs("button",{onClick:f,className:"bg-emerald-600 hover:bg-emerald-700 px-4 py-1.5 rounded-lg transition-all text-[10px] font-black uppercase flex items-center gap-2 shadow-lg active:scale-95",children:[p.jsx("i",{className:"fas fa-print"})," DOWNLOAD / PRINT"]}),p.jsx("button",{onClick:a,className:"bg-white/10 p-2 rounded-xl hover:bg-white/20 transition-colors",children:p.jsx("i",{className:"fas fa-times"})})]})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-12 bg-white text-slate-900 printable-area",id:"payslip-document",children:[p.jsxs("div",{className:"flex justify-between items-start mb-12",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-3xl font-black tracking-tighter text-slate-900 mb-1",children:"IRONFLOW"}),p.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest leading-none",children:"Employee Earnings Statement"})]}),p.jsxs("div",{className:"text-right",children:[p.jsx("p",{className:"text-sm font-black uppercase text-slate-900",children:t.name}),p.jsxs("p",{className:"text-[10px] text-slate-400 font-bold mt-1 uppercase",children:["Tax Entity: ",t.gstin||"IF-CORP"]}),p.jsx("p",{className:"text-[10px] text-slate-400 font-bold",children:t.address})]})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-12 mb-12 bg-slate-50 p-8 rounded-3xl border border-slate-100",children:[p.jsxs("div",{children:[p.jsx("h4",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3",children:"Employee Details"}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("p",{className:"font-black text-sm uppercase",children:e.name}),p.jsxs("p",{className:"text-xs text-slate-500",children:["ID: ",e.id.toUpperCase()]}),p.jsx("p",{className:"text-xs font-bold text-blue-600 uppercase mt-1 tracking-tight",children:e.role.replace("_"," ")})]})]}),p.jsxs("div",{className:"text-right",children:[p.jsx("h4",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3",children:"Pay Period"}),p.jsxs("p",{className:"font-black text-sm uppercase",children:[n," ",r]}),p.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Status: DISBURSED"}),p.jsxs("p",{className:"text-xs font-bold text-slate-400 mt-1",children:["Email: ",e.email]})]})]}),p.jsxs("table",{className:"w-full mb-12",children:[p.jsx("thead",{className:"border-b-2 border-slate-900",children:p.jsxs("tr",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:[p.jsx("th",{className:"py-4 text-left",children:"Earning Components"}),p.jsx("th",{className:"py-4 text-center",children:"Volume / Rate"}),p.jsx("th",{className:"py-4 text-right",children:"Amount"})]})}),p.jsxs("tbody",{className:"divide-y divide-slate-100",children:[p.jsxs("tr",{children:[p.jsxs("td",{className:"py-6",children:[p.jsx("p",{className:"font-black text-sm text-slate-900 uppercase",children:"Base Professional Salary"}),p.jsx("p",{className:"text-[10px] text-slate-400 font-bold mt-1",children:"Calculated from punch-in logs"})]}),p.jsxs("td",{className:"py-6 text-center text-xs font-bold text-slate-600",children:[(i.hours||0).toFixed(1)," hrs @ ",l(i.rate),"/hr"]}),p.jsx("td",{className:"py-6 text-right font-bold text-slate-900",children:l(i.baseSalary)})]}),i.commissions>0&&p.jsxs("tr",{children:[p.jsxs("td",{className:"py-6",children:[p.jsx("p",{className:"font-black text-sm text-emerald-600 uppercase",children:"Performance Incentive"}),p.jsx("p",{className:"text-[10px] text-slate-400 font-bold mt-1",children:i.incentiveType})]}),p.jsx("td",{className:"py-6 text-center text-xs font-bold text-emerald-600",children:"Achievement Payout"}),p.jsxs("td",{className:"py-6 text-right font-bold text-emerald-600",children:["+",l(i.commissions)]})]})]})]}),p.jsx("div",{className:"flex justify-end mb-12",children:p.jsxs("div",{className:"w-72 space-y-4",children:[p.jsxs("div",{className:"flex justify-between text-xs font-bold text-slate-400",children:[p.jsx("span",{children:"Gross Earnings"}),p.jsx("span",{children:l(i.total)})]}),p.jsxs("div",{className:"flex justify-between text-xs font-bold text-slate-600",children:[p.jsx("span",{children:"Professional Tax / TDS"}),p.jsx("span",{children:l(0)})]}),p.jsxs("div",{className:"flex justify-between pt-4 border-t-2 border-slate-900 bg-slate-50 p-4 rounded-xl",children:[p.jsx("span",{className:"text-sm font-black uppercase",children:"Net Take Home Pay"}),p.jsx("span",{className:"text-xl font-black text-slate-900",children:l(i.total)})]})]})}),p.jsxs("div",{className:"grid grid-cols-2 gap-8 pt-12 border-t border-slate-100",children:[p.jsx("div",{className:"text-[9px] text-slate-400 font-medium leading-relaxed italic",children:"This is an official earnings document generated by the IronFlow Management System. It is valid for personal financial records and loan applications. Payment has been processed via Branch Settlement protocols."}),p.jsxs("div",{className:"text-right",children:[p.jsx("div",{className:"w-32 h-10 border-b-2 border-slate-100 ml-auto mb-2 opacity-50 flex items-end justify-center",children:p.jsx("span",{className:"font-mono text-[8px] text-slate-300 italic",children:"IF-SYSTEMS-SIGNED"})}),p.jsx("p",{className:"text-[10px] font-black text-slate-900 uppercase",children:"Finance Controller"}),p.jsx("p",{className:"text-[9px] text-slate-400 font-bold",children:"IronFlow Corporate Hub"})]})]})]})]}),p.jsx("style",{children:`
        @media print {
          @page { margin: 1cm; size: portrait; }
          body * { visibility: hidden !important; }
          .print-container, .print-container *, #payslip-document, #payslip-document * { visibility: visible !important; }
          .no-print { display: none !important; }
          .print-container {
            position: fixed !important;
            left: 0 !important;
            top: 0 !important;
            width: 100% !important;
            height: 100% !important;
            background: white !important;
            z-index: 9999 !important;
            padding: 0 !important;
            margin: 0 !important;
            display: block !important;
          }
          .modal-content {
            position: absolute !important;
            top: 0 !important;
            left: 0 !important;
            width: 100% !important;
            max-width: none !important;
            box-shadow: none !important;
            border: none !important;
            height: auto !important;
            max-height: none !important;
          }
          .printable-area {
            overflow: visible !important;
            height: auto !important;
            padding: 0 !important;
          }
        }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
      `})]})},hfe=()=>{const{currentUser:e,attendance:t,sales:n,bookings:r,plans:i,subscriptions:a,branches:l,holidays:f,refreshData:h}=Un(),[u,g]=k.useState(new Date().getMonth()),[y,E]=k.useState(new Date().getFullYear()),[C,I]=k.useState(!1),[M,O]=k.useState(!1),j=["January","February","March","April","May","June","July","August","September","October","November","December"],U=new Date().getFullYear(),L=Array.from({length:5},(te,Y)=>U-2+Y),G=k.useMemo(()=>l.find(te=>te.id===(e==null?void 0:e.branchId))||l[0],[e,l]),V=k.useMemo(()=>e?t.filter(te=>te.userId===e.id&&te.type==="STAFF"):[],[e,t]),z=k.useMemo(()=>e?r.filter(te=>te.trainerId===e.id):[],[e,r]),B=k.useMemo(()=>e?f.filter(te=>te.branchId==="ALL"||te.branchId===e.branchId):[],[e,f]),J=k.useMemo(()=>e?a6(e,V,y,u+1,z,B):null,[e,V,z,B,u,y]);k.useMemo(()=>{if(!e)return[];const te=`${y}-${String(u+1).padStart(2,"0")}`;return V.filter(Y=>Y.date.startsWith(te))},[e,V,u,y]);const W=k.useMemo(()=>J?{hours:J.totalHoursWorked,rate:(e==null?void 0:e.hourlyRate)||500,baseSalary:J.baseSalary,commissions:J.commissionEarned,incentiveType:(e==null?void 0:e.role)===Oe.TRAINER?`${Math.round(J.commissionEarned/(((e==null?void 0:e.commissionPercentage)||1)/100)/500)} Sessions Conducted (${(e==null?void 0:e.commissionPercentage)||0}%)`:`Sales Commission (${(e==null?void 0:e.commissionPercentage)||0}%)`,total:J.netPay}:null,[J,e]),Z=te=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(te);return e?p.jsxs("div",{className:"space-y-8 animate-[fadeIn_0.5s_ease-out]",children:[p.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-3xl font-black text-slate-900 tracking-tight uppercase",children:"My Earnings Hub"}),p.jsx("p",{className:"text-slate-500 font-medium",children:"Personal income breakdown & official payslips"})]}),p.jsxs("div",{className:"flex bg-white p-2 rounded-2xl border shadow-sm items-center gap-4",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("select",{className:"p-2.5 bg-slate-50 border rounded-xl outline-none font-bold text-xs uppercase",value:u,onChange:te=>g(Number(te.target.value)),children:j.map((te,Y)=>p.jsx("option",{value:Y,children:te},te))}),p.jsx("select",{className:"p-2.5 bg-slate-50 border rounded-xl outline-none font-bold text-xs",value:y,onChange:te=>E(Number(te.target.value)),children:L.map(te=>p.jsx("option",{value:te,children:te},te))})]}),p.jsxs("button",{onClick:()=>{I(!0)},className:"bg-slate-900 text-white px-6 py-2.5 rounded-xl font-black text-[10px] uppercase tracking-widest shadow-xl shadow-slate-200 hover:scale-105 active:scale-95 transition-all flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-file-invoice-dollar"})," GENERATE PAYSLIP"]})]})]}),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[p.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[p.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] border shadow-sm text-center",children:[p.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Monthly Net Income"}),p.jsx("h3",{className:"text-4xl font-black text-slate-900 tracking-tighter",children:Z((J==null?void 0:J.netPay)||0)}),p.jsxs("div",{className:"mt-6 pt-6 border-t border-slate-50 flex justify-between text-left",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase",children:"Hourly Rate"}),p.jsx("p",{className:"font-bold text-sm text-slate-700",children:Z((e==null?void 0:e.hourlyRate)||0)})]}),p.jsxs("div",{className:"text-right",children:[p.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase",children:"Hours Logged"}),p.jsxs("p",{className:"font-bold text-sm text-slate-700",children:[((J==null?void 0:J.totalHoursWorked)||0).toFixed(1)," hrs"]})]})]}),p.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-50 text-left",children:[p.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase mb-2",children:"Assigned Shifts"}),p.jsx("p",{className:"text-xs font-medium text-slate-600",children:s6((e==null?void 0:e.shifts)||[])})]})]}),(e==null?void 0:e.role)===Oe.TRAINER&&p.jsxs("div",{className:"bg-emerald-950 text-white p-8 rounded-[2.5rem] shadow-xl relative overflow-hidden group",children:[p.jsxs("div",{className:"relative z-10",children:[p.jsx("p",{className:"text-[9px] font-black text-emerald-400 uppercase tracking-widest mb-1",children:"Commission Earned"}),p.jsx("h3",{className:"text-3xl font-black",children:Z((W==null?void 0:W.commissions)||0)}),p.jsx("p",{className:"text-xs text-emerald-300 font-medium mt-4 leading-relaxed opacity-80",children:W==null?void 0:W.incentiveType})]}),p.jsx("i",{className:"fas fa-coins absolute -bottom-10 -right-10 text-[150px] text-white/5 rotate-12 group-hover:rotate-45 transition-transform duration-1000"})]})]}),p.jsxs("div",{className:"lg:col-span-3 space-y-8",children:[p.jsxs("div",{className:"bg-white rounded-[3rem] border shadow-sm overflow-hidden",children:[p.jsxs("div",{className:"p-8 border-b bg-slate-50/50 flex justify-between items-center",children:[p.jsx("h3",{className:"text-sm font-black text-slate-900 uppercase tracking-tight",children:"Earnings Breakdown"}),p.jsxs("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:["Period: ",j[u]," ",y]})]}),p.jsx("div",{className:"p-8",children:p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"flex items-center justify-between group",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"bg-blue-50 text-blue-600 w-12 h-12 rounded-2xl flex items-center justify-center",children:p.jsx("i",{className:"fas fa-clock"})}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm font-black text-slate-900 uppercase",children:"Base Salary"}),p.jsxs("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest",children:[J==null?void 0:J.totalHoursWorked.toFixed(1),"h  ",(e==null?void 0:e.hourlyRate)||0,"/hr (Max ",ew,"h/day)"]})]})]}),p.jsx("p",{className:"text-lg font-black text-slate-900",children:Z((J==null?void 0:J.baseSalary)||0)})]}),p.jsxs("div",{className:"flex items-center justify-between group",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"bg-purple-50 text-purple-600 w-12 h-12 rounded-2xl flex items-center justify-center",children:p.jsx("i",{className:"fas fa-umbrella-beach"})}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm font-black text-slate-900 uppercase",children:"Week Off Pay"}),p.jsxs("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest",children:[(J==null?void 0:J.weekOffsTaken)||0," week offs (After ",(J==null?void 0:J.totalDaysWorked)||0," days worked)"]})]})]}),p.jsxs("p",{className:"text-lg font-black text-purple-600",children:["+",Z((J==null?void 0:J.weekOffPay)||0)]})]}),p.jsxs("div",{className:"flex items-center justify-between group",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"bg-orange-50 text-orange-600 w-12 h-12 rounded-2xl flex items-center justify-center",children:p.jsx("i",{className:"fas fa-calendar-check"})}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm font-black text-slate-900 uppercase",children:"Holiday Pay"}),p.jsxs("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest",children:[ew,"h pay per holiday"]})]})]}),p.jsxs("p",{className:"text-lg font-black text-orange-600",children:["+",Z((J==null?void 0:J.holidayPay)||0)]})]}),p.jsxs("div",{className:"flex items-center justify-between group",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"bg-emerald-50 text-emerald-600 w-12 h-12 rounded-2xl flex items-center justify-center",children:p.jsx("i",{className:"fas fa-chart-line"})}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm font-black text-slate-900 uppercase",children:"Commissions"}),p.jsxs("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest",children:[e.role===Oe.TRAINER?"Per Session":"Per Sale"," (",(e==null?void 0:e.commissionPercentage)||0,"%)"]})]})]}),p.jsxs("p",{className:"text-lg font-black text-emerald-600",children:["+",Z((J==null?void 0:J.commissionEarned)||0)]})]}),p.jsxs("div",{className:"pt-8 mt-8 border-t border-slate-100 flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-xl font-black text-slate-900 uppercase",children:"Total Earnings"}),p.jsxs("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest mt-1",children:[J!=null&&J.lateDays?`${J.lateDays} late arrivals`:"",J!=null&&J.earlyOutDays?`  ${J.earlyOutDays} early outs`:""]})]}),p.jsx("p",{className:"text-3xl font-black text-slate-900",children:Z((J==null?void 0:J.totalEarnings)||0)})]})]})})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[p.jsxs("div",{className:"bg-slate-900 text-white p-8 rounded-[2.5rem] relative overflow-hidden",children:[p.jsx("h4",{className:"text-[10px] font-black text-blue-400 uppercase tracking-widest mb-6",children:"Security & Transparency"}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex gap-4",children:[p.jsx("i",{className:"fas fa-shield-check text-blue-500 mt-1"}),p.jsx("p",{className:"text-xs text-slate-300 leading-relaxed font-medium",children:"All punch-in logs are geo-verified and finalized at the end of each shift."})]}),p.jsxs("div",{className:"flex gap-4",children:[p.jsx("i",{className:"fas fa-file-contract text-blue-500 mt-1"}),p.jsx("p",{className:"text-xs text-slate-300 leading-relaxed font-medium",children:"Commissions are auto-attributed based on member enrollment staff signatures."})]})]}),p.jsx("i",{className:"fas fa-fingerprint absolute -bottom-10 -right-10 text-[150px] text-white/5"})]}),p.jsxs("div",{className:"bg-blue-50 border border-blue-100 p-8 rounded-[2.5rem] flex flex-col justify-center items-center text-center gap-4",children:[p.jsx("div",{className:"bg-white w-14 h-14 rounded-2xl flex items-center justify-center shadow-xl text-blue-600",children:p.jsx("i",{className:"fas fa-download text-xl"})}),p.jsxs("div",{children:[p.jsx("h4",{className:"text-sm font-black text-slate-900 uppercase",children:"Need a PDF?"}),p.jsx("p",{className:"text-xs text-slate-500 font-medium mt-1",children:"Generate your official tax-compliant payslip for this month."})]}),p.jsx("button",{onClick:()=>{I(!0)},className:"mt-2 text-blue-600 font-black text-[10px] uppercase tracking-widest bg-white px-6 py-2.5 rounded-xl border border-blue-100 hover:bg-blue-600 hover:text-white transition-all shadow-sm",children:"Open Payslip Generator"})]})]})]})]}),C&&W&&p.jsx(ffe,{user:e,branch:G,month:j[u],year:y,earnings:W,onClose:()=>I(!1)}),p.jsx("style",{children:`
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
      `})]}):null},pfe=()=>{const{users:e,currentUser:t,branches:n,showToast:r}=Un(),[i,a]=k.useState(!1),[l,f]=k.useState(null),[h,u]=k.useState("ALL"),[g,y]=k.useState({name:"",phone:"",email:"",purpose:"MEMBERSHIP_INQUIRY",source:"WALK_IN",notes:"",assignedTo:"",followUpDate:""}),[E,C]=k.useState([]),I=e.filter(B=>B.role!==Oe.MEMBER&&((t==null?void 0:t.role)===Oe.SUPER_ADMIN||B.branchId===(t==null?void 0:t.branchId))),M=E.filter(B=>{const J=h==="ALL"||B.status===h,W=(t==null?void 0:t.role)===Oe.SUPER_ADMIN||B.branchId===(t==null?void 0:t.branchId);return J&&W}),O=B=>{B.preventDefault();const J={id:`walkin-${Date.now()}`,...g,status:"NEW",branchId:(t==null?void 0:t.branchId)||"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};l?(C(W=>W.map(Z=>Z.id===l.id?{...Z,...g,updatedAt:new Date().toISOString()}:Z)),r("Walk-in updated successfully")):(C(W=>[...W,J]),r("Walk-in registered successfully")),j(),a(!1)},j=()=>{y({name:"",phone:"",email:"",purpose:"MEMBERSHIP_INQUIRY",source:"WALK_IN",notes:"",assignedTo:"",followUpDate:""}),f(null)},U=B=>{f(B),y({name:B.name,phone:B.phone,email:B.email||"",purpose:B.purpose,source:B.source,notes:B.notes||"",assignedTo:B.assignedTo||"",followUpDate:B.followUpDate||""}),a(!0)},L=(B,J)=>{C(W=>W.map(Z=>Z.id===B?{...Z,status:J,updatedAt:new Date().toISOString()}:Z)),r(`Status updated to ${J}`)},G=B=>{r("Redirecting to member enrollment...")},V=B=>{switch(B){case"NEW":return"bg-blue-100 text-blue-700";case"FOLLOW_UP":return"bg-amber-100 text-amber-700";case"CONVERTED":return"bg-green-100 text-green-700";case"NOT_INTERESTED":return"bg-gray-100 text-gray-700";default:return"bg-gray-100 text-gray-700"}},z=B=>({MEMBERSHIP_INQUIRY:"Membership Inquiry",TOUR:"Gym Tour",DAY_PASS:"Day Pass",PT_CONSULTATION:"PT Consultation",CLASS_INQUIRY:"Class Inquiry",OTHER:"Other"})[B]||B;return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Walk-In Management"}),p.jsx("p",{className:"text-gray-500",children:"Track visitors and convert leads to members"})]}),p.jsxs("button",{onClick:()=>{j(),a(!0)},className:"bg-blue-600 text-white px-6 py-2 rounded-xl font-bold hover:bg-blue-700 transition-colors flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-plus"})," Register Walk-In"]})]}),p.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{label:"New Leads",count:E.filter(B=>B.status==="NEW").length,color:"blue"},{label:"Follow-ups",count:E.filter(B=>B.status==="FOLLOW_UP").length,color:"amber"},{label:"Converted",count:E.filter(B=>B.status==="CONVERTED").length,color:"green"},{label:"Total",count:E.length,color:"gray"}].map((B,J)=>p.jsxs("div",{className:"bg-white p-4 rounded-2xl border shadow-sm",children:[p.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:B.label}),p.jsx("p",{className:`text-2xl font-black text-${B.color}-600`,children:B.count})]},J))}),p.jsx("div",{className:"flex flex-wrap gap-2",children:["ALL","NEW","FOLLOW_UP","CONVERTED","NOT_INTERESTED"].map(B=>p.jsx("button",{onClick:()=>u(B),className:`px-4 py-2 rounded-xl text-xs font-bold uppercase tracking-wider transition-colors ${h===B?"bg-slate-900 text-white":"bg-white text-gray-600 hover:bg-gray-50 border"}`,children:B.replace("_"," ")},B))}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:M.map(B=>{var J;return p.jsxs("div",{className:"bg-white rounded-2xl border p-6 hover:shadow-xl transition-all",children:[p.jsxs("div",{className:"flex justify-between items-start mb-4",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"font-bold text-lg text-gray-900",children:B.name}),p.jsxs("p",{className:"text-sm text-gray-500",children:[p.jsx("i",{className:"fas fa-phone mr-1"})," ",B.phone]}),B.email&&p.jsxs("p",{className:"text-sm text-gray-500",children:[p.jsx("i",{className:"fas fa-envelope mr-1"})," ",B.email]})]}),p.jsx("span",{className:`px-2 py-1 rounded-md text-[10px] font-bold uppercase ${V(B.status)}`,children:B.status.replace("_"," ")})]}),p.jsxs("div",{className:"space-y-2 text-sm mb-4",children:[p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{className:"text-gray-400",children:"Purpose:"}),p.jsx("span",{className:"font-medium",children:z(B.purpose)})]}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{className:"text-gray-400",children:"Source:"}),p.jsx("span",{className:"font-medium",children:B.source.replace("_"," ")})]}),B.assignedTo&&p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{className:"text-gray-400",children:"Assigned:"}),p.jsx("span",{className:"font-medium",children:((J=I.find(W=>W.id===B.assignedTo))==null?void 0:J.name)||"Unknown"})]}),B.followUpDate&&p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{className:"text-gray-400",children:"Follow-up:"}),p.jsx("span",{className:`font-medium ${new Date(B.followUpDate)<new Date?"text-red-600":""}`,children:B.followUpDate})]})]}),B.notes&&p.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl text-sm text-gray-600 mb-4",children:[p.jsx("i",{className:"fas fa-sticky-note mr-1 text-gray-400"})," ",B.notes]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{onClick:()=>U(B),className:"flex-1 py-2 bg-gray-100 text-gray-600 rounded-lg text-xs font-bold hover:bg-gray-200 transition-colors",children:"EDIT"}),B.status!=="CONVERTED"&&p.jsx("button",{onClick:()=>G(),className:"flex-1 py-2 bg-green-50 text-green-600 rounded-lg text-xs font-bold hover:bg-green-100 transition-colors",children:"CONVERT"})]}),B.status==="NEW"&&p.jsx("div",{className:"mt-3 pt-3 border-t",children:p.jsx("button",{onClick:()=>L(B.id,"FOLLOW_UP"),className:"w-full py-2 bg-amber-50 text-amber-600 rounded-lg text-xs font-bold hover:bg-amber-100 transition-colors",children:"MARK FOR FOLLOW-UP"})})]},B.id)})}),M.length===0&&p.jsxs("div",{className:"text-center py-12 bg-white rounded-2xl border",children:[p.jsx("i",{className:"fas fa-walking text-4xl text-gray-300 mb-4"}),p.jsx("p",{className:"text-gray-500",children:"No walk-ins found"}),p.jsx("button",{onClick:()=>{j(),a(!0)},className:"mt-4 text-blue-600 font-bold text-sm hover:underline",children:"Register your first walk-in"})]}),i&&p.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:p.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-md p-8 shadow-2xl animate-[slideUp_0.3s_ease-out] max-h-[90vh] overflow-y-auto",children:[p.jsx("h3",{className:"text-xl font-bold mb-6 tracking-tight uppercase",children:l?"Update Walk-In":"Register Walk-In"}),p.jsxs("form",{onSubmit:O,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Name"}),p.jsx("input",{required:!0,type:"text",className:"w-full p-3 bg-gray-50 border rounded-xl outline-none mt-1",value:g.name,onChange:B=>y({...g,name:B.target.value})})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Phone"}),p.jsx("input",{required:!0,type:"tel",className:"w-full p-3 bg-gray-50 border rounded-xl outline-none mt-1",value:g.phone,onChange:B=>y({...g,phone:B.target.value})})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Email (Optional)"}),p.jsx("input",{type:"email",className:"w-full p-3 bg-gray-50 border rounded-xl outline-none mt-1",value:g.email,onChange:B=>y({...g,email:B.target.value})})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Purpose"}),p.jsxs("select",{className:"w-full p-3 bg-gray-50 border rounded-xl outline-none mt-1",value:g.purpose,onChange:B=>y({...g,purpose:B.target.value}),children:[p.jsx("option",{value:"MEMBERSHIP_INQUIRY",children:"Membership Inquiry"}),p.jsx("option",{value:"TOUR",children:"Gym Tour"}),p.jsx("option",{value:"DAY_PASS",children:"Day Pass"}),p.jsx("option",{value:"PT_CONSULTATION",children:"PT Consultation"}),p.jsx("option",{value:"CLASS_INQUIRY",children:"Class Inquiry"}),p.jsx("option",{value:"OTHER",children:"Other"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Source"}),p.jsxs("select",{className:"w-full p-3 bg-gray-50 border rounded-xl outline-none mt-1",value:g.source,onChange:B=>y({...g,source:B.target.value}),children:[p.jsx("option",{value:"WALK_IN",children:"Walk-In"}),p.jsx("option",{value:"REFERRAL",children:"Referral"}),p.jsx("option",{value:"SOCIAL_MEDIA",children:"Social Media"}),p.jsx("option",{value:"GOOGLE",children:"Google"}),p.jsx("option",{value:"JUSTDIAL",children:"JustDial"}),p.jsx("option",{value:"OTHER",children:"Other"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Assign To"}),p.jsxs("select",{className:"w-full p-3 bg-gray-50 border rounded-xl outline-none mt-1",value:g.assignedTo,onChange:B=>y({...g,assignedTo:B.target.value}),children:[p.jsx("option",{value:"",children:"-- Select Staff --"}),I.map(B=>p.jsx("option",{value:B.id,children:B.name},B.id))]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Follow-up Date"}),p.jsx("input",{type:"date",className:"w-full p-3 bg-gray-50 border rounded-xl outline-none mt-1",value:g.followUpDate,onChange:B=>y({...g,followUpDate:B.target.value})})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Notes"}),p.jsx("textarea",{rows:3,className:"w-full p-3 bg-gray-50 border rounded-xl outline-none mt-1 resize-none",value:g.notes,onChange:B=>y({...g,notes:B.target.value})})]}),p.jsxs("div",{className:"pt-4 space-y-3",children:[p.jsx("button",{type:"submit",className:"w-full py-4 bg-blue-600 text-white rounded-2xl font-bold hover:bg-blue-700 transition-colors",children:l?"Update":"Register"}),p.jsx("button",{type:"button",onClick:()=>{j(),a(!1)},className:"w-full py-3 text-gray-500 font-bold hover:text-gray-700 transition-colors",children:"Cancel"})]})]})]})}),p.jsx("style",{children:`
        @keyframes slideUp {
          from { transform: translateY(20px); opacity: 0; }
          to { transform: translateY(0); opacity: 1; }
        }
      `})]})},mfe=()=>{const{holidays:e,branches:t,currentUser:n,addHoliday:r,deleteHoliday:i,sendHolidayNotification:a,sendBranchNotification:l,users:f}=Un(),[h,u]=k.useState(!1),[g,y]=k.useState(!1),[E,C]=k.useState({name:"",date:"",branchId:"ALL",sendNotification:!1}),[I,M]=k.useState({branchId:"ALL",subject:"",message:"",targetRoles:[]}),O=(n==null?void 0:n.role)===Oe.SUPER_ADMIN,j=n==null?void 0:n.branchId,L=[...O?e:e.filter(Y=>Y.branchId===j||Y.branchId==="ALL")].sort((Y,pe)=>new Date(Y.date).getTime()-new Date(pe.date).getTime()),G=async Y=>{Y.preventDefault();const pe={id:`holiday-${Date.now()}`,name:E.name,date:E.date,branchId:O?E.branchId:j||"ALL"};await r(pe,E.sendNotification),u(!1),C({name:"",date:"",branchId:"ALL",sendNotification:!1})},V=async Y=>{Y.preventDefault(),await l(I.branchId,I.subject,I.message,I.targetRoles.length>0?I.targetRoles:void 0),y(!1),M({branchId:"ALL",subject:"",message:"",targetRoles:[]})},z=async Y=>{window.confirm(`Send notification about ${Y.name} to all affected users?`)&&await a(Y)},B=Y=>{M(pe=>({...pe,targetRoles:pe.targetRoles.includes(Y)?pe.targetRoles.filter(Te=>Te!==Y):[...pe.targetRoles,Y]}))},J=Y=>{window.confirm("Are you sure you want to delete this holiday?")&&i(Y)},W=Y=>new Date(Y).toLocaleDateString("en-IN",{weekday:"short",year:"numeric",month:"short",day:"numeric"}),Z=Y=>{if(Y==="ALL")return"All Branches";const pe=t.find(Te=>Te.id===Y);return(pe==null?void 0:pe.name)||"Unknown Branch"},te=Y=>{const pe=new Date(Y),Te=new Date;return Te.setHours(0,0,0,0),pe<Te};return p.jsxs("div",{className:"space-y-6 animate-[fadeIn_0.5s_ease-out]",children:[p.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-3xl font-black text-slate-900 tracking-tight uppercase",children:"Holiday Calendar"}),p.jsx("p",{className:"text-slate-500 font-medium",children:"Manage branch holidays and company-wide off days"})]}),p.jsxs("div",{className:"flex gap-3",children:[p.jsxs("button",{onClick:()=>y(!0),className:"bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-3 rounded-2xl font-black text-[10px] uppercase tracking-widest shadow-xl shadow-indigo-200 hover:scale-105 active:scale-95 transition-all flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-bullhorn"})," Send Notification"]}),p.jsxs("button",{onClick:()=>u(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-2xl font-black text-[10px] uppercase tracking-widest shadow-xl shadow-blue-200 hover:scale-105 active:scale-95 transition-all flex items-center gap-2",children:[p.jsx("i",{className:"fas fa-plus"})," Add Holiday"]})]})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[p.jsxs("div",{className:"bg-white p-6 rounded-[2rem] border shadow-sm flex items-center gap-6",children:[p.jsx("div",{className:"bg-blue-50 text-blue-600 w-14 h-14 rounded-2xl flex items-center justify-center shrink-0",children:p.jsx("i",{className:"fas fa-calendar-day text-xl"})}),p.jsxs("div",{children:[p.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Total Holidays"}),p.jsx("p",{className:"text-2xl font-black text-slate-900",children:L.length})]})]}),p.jsxs("div",{className:"bg-white p-6 rounded-[2rem] border shadow-sm flex items-center gap-6",children:[p.jsx("div",{className:"bg-emerald-50 text-emerald-600 w-14 h-14 rounded-2xl flex items-center justify-center shrink-0",children:p.jsx("i",{className:"fas fa-calendar-check text-xl"})}),p.jsxs("div",{children:[p.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Upcoming"}),p.jsx("p",{className:"text-2xl font-black text-slate-900",children:L.filter(Y=>!te(Y.date)).length})]})]}),p.jsxs("div",{className:"bg-white p-6 rounded-[2rem] border shadow-sm flex items-center gap-6",children:[p.jsx("div",{className:"bg-amber-50 text-amber-600 w-14 h-14 rounded-2xl flex items-center justify-center shrink-0",children:p.jsx("i",{className:"fas fa-globe text-xl"})}),p.jsxs("div",{children:[p.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Company Wide"}),p.jsx("p",{className:"text-2xl font-black text-slate-900",children:L.filter(Y=>Y.branchId==="ALL").length})]})]})]}),p.jsx("div",{className:"bg-white rounded-[2.5rem] border shadow-sm overflow-hidden",children:p.jsx("div",{className:"overflow-x-auto",children:p.jsxs("table",{className:"w-full text-left",children:[p.jsx("thead",{className:"bg-slate-50 border-b",children:p.jsxs("tr",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:[p.jsx("th",{className:"px-8 py-5",children:"Date"}),p.jsx("th",{className:"px-8 py-5",children:"Holiday Name"}),p.jsx("th",{className:"px-8 py-5",children:"Branch"}),p.jsx("th",{className:"px-8 py-5",children:"Status"}),p.jsx("th",{className:"px-8 py-5 text-right",children:"Actions"})]})}),p.jsx("tbody",{className:"divide-y divide-slate-100",children:L.length===0?p.jsx("tr",{children:p.jsx("td",{colSpan:5,className:"px-8 py-20 text-center text-slate-400",children:p.jsxs("div",{className:"flex flex-col items-center gap-3",children:[p.jsx("i",{className:"fas fa-calendar-xmark text-4xl opacity-20"}),p.jsx("p",{children:"No holidays added yet."}),p.jsx("button",{onClick:()=>u(!0),className:"text-blue-600 font-bold text-sm hover:underline",children:"Add your first holiday"})]})})}):L.map(Y=>p.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors",children:[p.jsx("td",{className:"px-8 py-6",children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${te(Y.date)?"bg-slate-100 text-slate-400":"bg-blue-50 text-blue-600"}`,children:p.jsx("i",{className:"fas fa-calendar"})}),p.jsxs("div",{children:[p.jsx("p",{className:"font-bold text-slate-900",children:W(Y.date)}),p.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:new Date(Y.date).toLocaleDateString("en-IN",{weekday:"long"})})]})]})}),p.jsx("td",{className:"px-8 py-6",children:p.jsx("p",{className:"font-black text-slate-900",children:Y.name})}),p.jsx("td",{className:"px-8 py-6",children:p.jsx("span",{className:`text-[9px] font-black uppercase tracking-widest px-3 py-1 rounded-full ${Y.branchId==="ALL"?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700"}`,children:Z(Y.branchId)})}),p.jsx("td",{className:"px-8 py-6",children:te(Y.date)?p.jsx("span",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest bg-slate-100 px-3 py-1 rounded-full",children:"Past"}):p.jsx("span",{className:"text-[9px] font-black text-emerald-600 uppercase tracking-widest bg-emerald-100 px-3 py-1 rounded-full",children:"Upcoming"})}),p.jsx("td",{className:"px-8 py-6 text-right",children:p.jsxs("div",{className:"flex items-center justify-end gap-2",children:[p.jsx("button",{onClick:()=>z(Y),className:"text-indigo-400 hover:text-indigo-600 transition-colors p-2 hover:bg-indigo-50 rounded-xl",title:"Send notification to users",children:p.jsx("i",{className:"fas fa-bell"})}),p.jsx("button",{onClick:()=>J(Y.id),className:"text-red-400 hover:text-red-600 transition-colors p-2 hover:bg-red-50 rounded-xl",title:"Delete holiday",children:p.jsx("i",{className:"fas fa-trash-can"})})]})})]},Y.id))})]})})}),h&&p.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:p.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-2xl w-full max-w-md overflow-hidden animate-[slideUp_0.3s_ease-out]",children:[p.jsx("div",{className:"p-8 border-b bg-slate-50",children:p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("h3",{className:"text-xl font-black text-slate-900 uppercase tracking-tight",children:"Add Holiday"}),p.jsx("button",{onClick:()=>u(!1),className:"text-slate-400 hover:text-slate-600 w-10 h-10 rounded-full hover:bg-slate-200 transition-all",children:p.jsx("i",{className:"fas fa-times"})})]})}),p.jsxs("form",{onSubmit:G,className:"p-8 space-y-6",children:[p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Holiday Name"}),p.jsx("input",{required:!0,type:"text",className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl outline-none focus:ring-2 focus:ring-blue-500 font-bold text-sm",value:E.name,onChange:Y=>C({...E,name:Y.target.value}),placeholder:"e.g., Diwali, Christmas"})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Date"}),p.jsx("input",{required:!0,type:"date",className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl outline-none focus:ring-2 focus:ring-blue-500 font-bold text-sm",value:E.date,onChange:Y=>C({...E,date:Y.target.value})})]}),O&&p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Branch"}),p.jsxs("select",{className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl outline-none focus:ring-2 focus:ring-blue-500 font-bold text-xs uppercase",value:E.branchId,onChange:Y=>C({...E,branchId:Y.target.value}),children:[p.jsx("option",{value:"ALL",children:"All Branches"}),t.map(Y=>p.jsx("option",{value:Y.id,children:Y.name},Y.id))]})]}),p.jsx("div",{className:"space-y-1",children:p.jsxs("label",{className:"flex items-center gap-3 p-4 bg-amber-50 border border-amber-200 rounded-2xl cursor-pointer hover:bg-amber-100 transition-colors",children:[p.jsx("input",{type:"checkbox",checked:E.sendNotification,onChange:Y=>C({...E,sendNotification:Y.target.checked}),className:"w-5 h-5 text-amber-600 rounded focus:ring-amber-500"}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm font-bold text-amber-900",children:"Notify Users"}),p.jsx("p",{className:"text-[10px] text-amber-700",children:"Send SMS/Email notification to all affected users"})]})]})}),p.jsx("div",{className:"pt-4",children:p.jsx("button",{type:"submit",className:"w-full py-4 bg-blue-600 hover:bg-blue-700 text-white font-black text-sm uppercase tracking-widest rounded-2xl shadow-xl shadow-blue-200 hover:scale-[1.02] active:scale-[0.98] transition-all",children:"Add Holiday"})})]})]})}),g&&p.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:p.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-2xl w-full max-w-lg overflow-hidden animate-[slideUp_0.3s_ease-out]",children:[p.jsx("div",{className:"p-8 border-b bg-indigo-50",children:p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-xl font-black text-slate-900 uppercase tracking-tight",children:"Send Notification"}),p.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest mt-1",children:"Broadcast message to branch users"})]}),p.jsx("button",{onClick:()=>y(!1),className:"text-slate-400 hover:text-slate-600 w-10 h-10 rounded-full hover:bg-slate-200 transition-all",children:p.jsx("i",{className:"fas fa-times"})})]})}),p.jsxs("form",{onSubmit:V,className:"p-8 space-y-6",children:[O&&p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Target Branch"}),p.jsxs("select",{className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl outline-none focus:ring-2 focus:ring-indigo-500 font-bold text-xs uppercase",value:I.branchId,onChange:Y=>M({...I,branchId:Y.target.value}),children:[p.jsx("option",{value:"ALL",children:"All Branches"}),t.map(Y=>p.jsx("option",{value:Y.id,children:Y.name},Y.id))]})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Subject"}),p.jsx("input",{required:!0,type:"text",className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl outline-none focus:ring-2 focus:ring-indigo-500 font-bold text-sm",value:I.subject,onChange:Y=>M({...I,subject:Y.target.value}),placeholder:"e.g., Important Announcement"})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Message"}),p.jsx("textarea",{required:!0,rows:4,className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl outline-none focus:ring-2 focus:ring-indigo-500 font-bold text-sm resize-none",value:I.message,onChange:Y=>M({...I,message:Y.target.value}),placeholder:"Enter your message here..."})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Target Roles (Optional)"}),p.jsx("div",{className:"flex flex-wrap gap-2",children:[Oe.MEMBER,Oe.TRAINER,Oe.STAFF,Oe.MANAGER,Oe.BRANCH_ADMIN].map(Y=>p.jsx("button",{type:"button",onClick:()=>B(Y),className:`px-3 py-2 rounded-xl text-[10px] font-bold uppercase tracking-wider transition-all ${I.targetRoles.includes(Y)?"bg-indigo-600 text-white":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,children:Y.replace("_"," ")},Y))}),p.jsx("p",{className:"text-[10px] text-slate-400 ml-1",children:"Leave empty to notify all users"})]}),p.jsx("div",{className:"pt-4",children:p.jsxs("button",{type:"submit",className:"w-full py-4 bg-indigo-600 hover:bg-indigo-700 text-white font-black text-sm uppercase tracking-widest rounded-2xl shadow-xl shadow-indigo-200 hover:scale-[1.02] active:scale-[0.98] transition-all",children:[p.jsx("i",{className:"fas fa-paper-plane mr-2"})," Send Notification"]})})]})]})}),p.jsx("style",{children:`
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
      `})]})},gfe=()=>{const{currentUser:e}=Un();return e?p.jsx(s$,{children:p.jsxs(jC,{children:[p.jsx(Yn,{path:"/",element:p.jsx(Tue,{})}),p.jsx(Yn,{path:"/walk-ins",element:p.jsx(pfe,{})}),p.jsx(Yn,{path:"/members",element:p.jsx(zue,{})}),p.jsx(Yn,{path:"/branches",element:p.jsx(qde,{})}),p.jsx(Yn,{path:"/campaigns",element:p.jsx($de,{})}),p.jsx(Yn,{path:"/staff",element:p.jsx(tfe,{})}),p.jsx(Yn,{path:"/inventory",element:p.jsx(ufe,{})}),p.jsx(Yn,{path:"/plans",element:p.jsx(nfe,{})}),p.jsx(Yn,{path:"/sales",element:p.jsx(Pde,{})}),p.jsx(Yn,{path:"/feedback",element:p.jsx(rfe,{})}),p.jsx(Yn,{path:"/check-in",element:p.jsx(Ode,{})}),p.jsx(Yn,{path:"/portal",element:p.jsx(kde,{})}),p.jsx(Yn,{path:"/store",element:p.jsx(sfe,{})}),p.jsx(Yn,{path:"/bookings",element:p.jsx(afe,{})}),p.jsx(Yn,{path:"/comms",element:p.jsx(cfe,{})}),p.jsx(Yn,{path:"/tax",element:p.jsx(dfe,{})}),p.jsx(Yn,{path:"/my-earnings",element:p.jsx(hfe,{})}),p.jsx(Yn,{path:"/holidays",element:p.jsx(mfe,{})}),p.jsx(Yn,{path:"*",element:p.jsx(PC,{to:"/",replace:!0})})]})}):p.jsxs(jC,{children:[p.jsx(Yn,{path:"/login",element:p.jsx(ofe,{})}),p.jsx(Yn,{path:"/register",element:p.jsx(lfe,{})}),p.jsx(Yn,{path:"*",element:p.jsx(PC,{to:"/login",replace:!0})})]})},xfe=()=>p.jsx(i$,{children:p.jsx(rB,{children:p.jsx(gfe,{})})}),o6=document.getElementById("root");if(!o6)throw new Error("Could not find root element to mount to");const yfe=L5.createRoot(o6);yfe.render(p.jsx(yt.StrictMode,{children:p.jsx(xfe,{})}));
